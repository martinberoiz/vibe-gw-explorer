(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function QV(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tE={exports:{}},Yh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L5;function ZV(){if(L5)return Yh;L5=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,r,a){var s=null;if(a!==void 0&&(s=""+a),r.key!==void 0&&(s=""+r.key),"key"in r){a={};for(var l in r)l!=="key"&&(a[l]=r[l])}else a=r;return r=a.ref,{$$typeof:e,type:i,key:s,ref:r!==void 0?r:null,props:a}}return Yh.Fragment=t,Yh.jsx=n,Yh.jsxs=n,Yh}var U5;function KV(){return U5||(U5=1,tE.exports=ZV()),tE.exports}var re=KV(),nE={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B5;function JV(){if(B5)return Ie;B5=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),p=Symbol.iterator;function y(F){return F===null||typeof F!="object"?null:(F=p&&F[p]||F["@@iterator"],typeof F=="function"?F:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,S={};function _(F,G,le){this.props=F,this.context=G,this.refs=S,this.updater=le||v}_.prototype.isReactComponent={},_.prototype.setState=function(F,G){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,G,"setState")},_.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function w(){}w.prototype=_.prototype;function A(F,G,le){this.props=F,this.context=G,this.refs=S,this.updater=le||v}var $=A.prototype=new w;$.constructor=A,b($,_.prototype),$.isPureReactComponent=!0;var M=Array.isArray;function k(){}var T={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function R(F,G,le){var I=le.ref;return{$$typeof:e,type:F,key:G,ref:I!==void 0?I:null,props:le}}function B(F,G){return R(F.type,G,F.props)}function U(F){return typeof F=="object"&&F!==null&&F.$$typeof===e}function Q(F){var G={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(le){return G[le]})}var Y=/\/+/g;function P(F,G){return typeof F=="object"&&F!==null&&F.key!=null?Q(""+F.key):G.toString(36)}function z(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(k,k):(F.status="pending",F.then(function(G){F.status==="pending"&&(F.status="fulfilled",F.value=G)},function(G){F.status==="pending"&&(F.status="rejected",F.reason=G)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function N(F,G,le,I,J){var ve=typeof F;(ve==="undefined"||ve==="boolean")&&(F=null);var Ae=!1;if(F===null)Ae=!0;else switch(ve){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(F.$$typeof){case e:case t:Ae=!0;break;case d:return Ae=F._init,N(Ae(F._payload),G,le,I,J)}}if(Ae)return J=J(F),Ae=I===""?"."+P(F,0):I,M(J)?(le="",Ae!=null&&(le=Ae.replace(Y,"$&/")+"/"),N(J,G,le,"",function(Le){return Le})):J!=null&&(U(J)&&(J=B(J,le+(J.key==null||F&&F.key===J.key?"":(""+J.key).replace(Y,"$&/")+"/")+Ae)),G.push(J)),1;Ae=0;var ze=I===""?".":I+":";if(M(F))for(var ce=0;ce<F.length;ce++)I=F[ce],ve=ze+P(I,ce),Ae+=N(I,G,le,ve,J);else if(ce=y(F),typeof ce=="function")for(F=ce.call(F),ce=0;!(I=F.next()).done;)I=I.value,ve=ze+P(I,ce++),Ae+=N(I,G,le,ve,J);else if(ve==="object"){if(typeof F.then=="function")return N(z(F),G,le,I,J);throw G=String(F),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function j(F,G,le){if(F==null)return F;var I=[],J=0;return N(F,I,"","",function(ve){return G.call(le,ve,J++)}),I}function X(F){if(F._status===-1){var G=F._result;G=G(),G.then(function(le){(F._status===0||F._status===-1)&&(F._status=1,F._result=le)},function(le){(F._status===0||F._status===-1)&&(F._status=2,F._result=le)}),F._status===-1&&(F._status=0,F._result=G)}if(F._status===1)return F._result.default;throw F._result}var K=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},fe={map:j,forEach:function(F,G,le){j(F,function(){G.apply(this,arguments)},le)},count:function(F){var G=0;return j(F,function(){G++}),G},toArray:function(F){return j(F,function(G){return G})||[]},only:function(F){if(!U(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Ie.Activity=g,Ie.Children=fe,Ie.Component=_,Ie.Fragment=n,Ie.Profiler=r,Ie.PureComponent=A,Ie.StrictMode=i,Ie.Suspense=c,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(F){return T.H.useMemoCache(F)}},Ie.cache=function(F){return function(){return F.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(F,G,le){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var I=b({},F.props),J=F.key;if(G!=null)for(ve in G.key!==void 0&&(J=""+G.key),G)!D.call(G,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&G.ref===void 0||(I[ve]=G[ve]);var ve=arguments.length-2;if(ve===1)I.children=le;else if(1<ve){for(var Ae=Array(ve),ze=0;ze<ve;ze++)Ae[ze]=arguments[ze+2];I.children=Ae}return R(F.type,J,I)},Ie.createContext=function(F){return F={$$typeof:s,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},Ie.createElement=function(F,G,le){var I,J={},ve=null;if(G!=null)for(I in G.key!==void 0&&(ve=""+G.key),G)D.call(G,I)&&I!=="key"&&I!=="__self"&&I!=="__source"&&(J[I]=G[I]);var Ae=arguments.length-2;if(Ae===1)J.children=le;else if(1<Ae){for(var ze=Array(Ae),ce=0;ce<Ae;ce++)ze[ce]=arguments[ce+2];J.children=ze}if(F&&F.defaultProps)for(I in Ae=F.defaultProps,Ae)J[I]===void 0&&(J[I]=Ae[I]);return R(F,ve,J)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(F){return{$$typeof:l,render:F}},Ie.isValidElement=U,Ie.lazy=function(F){return{$$typeof:d,_payload:{_status:-1,_result:F},_init:X}},Ie.memo=function(F,G){return{$$typeof:f,type:F,compare:G===void 0?null:G}},Ie.startTransition=function(F){var G=T.T,le={};T.T=le;try{var I=F(),J=T.S;J!==null&&J(le,I),typeof I=="object"&&I!==null&&typeof I.then=="function"&&I.then(k,K)}catch(ve){K(ve)}finally{G!==null&&le.types!==null&&(G.types=le.types),T.T=G}},Ie.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},Ie.use=function(F){return T.H.use(F)},Ie.useActionState=function(F,G,le){return T.H.useActionState(F,G,le)},Ie.useCallback=function(F,G){return T.H.useCallback(F,G)},Ie.useContext=function(F){return T.H.useContext(F)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(F,G){return T.H.useDeferredValue(F,G)},Ie.useEffect=function(F,G){return T.H.useEffect(F,G)},Ie.useEffectEvent=function(F){return T.H.useEffectEvent(F)},Ie.useId=function(){return T.H.useId()},Ie.useImperativeHandle=function(F,G,le){return T.H.useImperativeHandle(F,G,le)},Ie.useInsertionEffect=function(F,G){return T.H.useInsertionEffect(F,G)},Ie.useLayoutEffect=function(F,G){return T.H.useLayoutEffect(F,G)},Ie.useMemo=function(F,G){return T.H.useMemo(F,G)},Ie.useOptimistic=function(F,G){return T.H.useOptimistic(F,G)},Ie.useReducer=function(F,G,le){return T.H.useReducer(F,G,le)},Ie.useRef=function(F){return T.H.useRef(F)},Ie.useState=function(F){return T.H.useState(F)},Ie.useSyncExternalStore=function(F,G,le){return T.H.useSyncExternalStore(F,G,le)},Ie.useTransition=function(){return T.H.useTransition()},Ie.version="19.2.0",Ie}var j5;function dC(){return j5||(j5=1,nE.exports=JV()),nE.exports}var ht=dC();const Ou=QV(ht);var iE={exports:{}},Xh={},rE={exports:{}},aE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q5;function eW(){return q5||(q5=1,(function(e){function t(N,j){var X=N.length;N.push(j);e:for(;0<X;){var K=X-1>>>1,fe=N[K];if(0<r(fe,j))N[K]=j,N[X]=fe,X=K;else break e}}function n(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var j=N[0],X=N.pop();if(X!==j){N[0]=X;e:for(var K=0,fe=N.length,F=fe>>>1;K<F;){var G=2*(K+1)-1,le=N[G],I=G+1,J=N[I];if(0>r(le,X))I<fe&&0>r(J,le)?(N[K]=J,N[I]=X,K=I):(N[K]=le,N[G]=X,K=G);else if(I<fe&&0>r(J,X))N[K]=J,N[I]=X,K=I;else break e}}return j}function r(N,j){var X=N.sortIndex-j.sortIndex;return X!==0?X:N.id-j.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var c=[],f=[],d=1,g=null,p=3,y=!1,v=!1,b=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function $(N){for(var j=n(f);j!==null;){if(j.callback===null)i(f);else if(j.startTime<=N)i(f),j.sortIndex=j.expirationTime,t(c,j);else break;j=n(f)}}function M(N){if(b=!1,$(N),!v)if(n(c)!==null)v=!0,k||(k=!0,Q());else{var j=n(f);j!==null&&z(M,j.startTime-N)}}var k=!1,T=-1,D=5,R=-1;function B(){return S?!0:!(e.unstable_now()-R<D)}function U(){if(S=!1,k){var N=e.unstable_now();R=N;var j=!0;try{e:{v=!1,b&&(b=!1,w(T),T=-1),y=!0;var X=p;try{t:{for($(N),g=n(c);g!==null&&!(g.expirationTime>N&&B());){var K=g.callback;if(typeof K=="function"){g.callback=null,p=g.priorityLevel;var fe=K(g.expirationTime<=N);if(N=e.unstable_now(),typeof fe=="function"){g.callback=fe,$(N),j=!0;break t}g===n(c)&&i(c),$(N)}else i(c);g=n(c)}if(g!==null)j=!0;else{var F=n(f);F!==null&&z(M,F.startTime-N),j=!1}}break e}finally{g=null,p=X,y=!1}j=void 0}}finally{j?Q():k=!1}}}var Q;if(typeof A=="function")Q=function(){A(U)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,P=Y.port2;Y.port1.onmessage=U,Q=function(){P.postMessage(null)}}else Q=function(){_(U,0)};function z(N,j){T=_(function(){N(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(N){switch(p){case 1:case 2:case 3:var j=3;break;default:j=p}var X=p;p=j;try{return N()}finally{p=X}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(N,j){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var X=p;p=N;try{return j()}finally{p=X}},e.unstable_scheduleCallback=function(N,j,X){var K=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?K+X:K):X=K,N){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=X+fe,N={id:d++,callback:j,priorityLevel:N,startTime:X,expirationTime:fe,sortIndex:-1},X>K?(N.sortIndex=X,t(f,N),n(c)===null&&N===n(f)&&(b?(w(T),T=-1):b=!0,z(M,X-K))):(N.sortIndex=fe,t(c,N),v||y||(v=!0,k||(k=!0,Q()))),N},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(N){var j=p;return function(){var X=p;p=j;try{return N.apply(this,arguments)}finally{p=X}}}})(aE)),aE}var I5;function tW(){return I5||(I5=1,rE.exports=eW()),rE.exports}var sE={exports:{}},Hn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P5;function nW(){if(P5)return Hn;P5=1;var e=dC();function t(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(c,f,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:c,containerInfo:f,implementation:d}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Hn.createPortal=function(c,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(c,f,null,d)},Hn.flushSync=function(c){var f=s.T,d=i.p;try{if(s.T=null,i.p=2,c)return c()}finally{s.T=f,i.p=d,i.d.f()}},Hn.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(c,f))},Hn.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},Hn.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var d=f.as,g=l(d,f.crossOrigin),p=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?i.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:p,fetchPriority:y}):d==="script"&&i.d.X(c,{crossOrigin:g,integrity:p,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Hn.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=l(f.as,f.crossOrigin);i.d.M(c,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(c)},Hn.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,g=l(d,f.crossOrigin);i.d.L(c,d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Hn.preloadModule=function(c,f){if(typeof c=="string")if(f){var d=l(f.as,f.crossOrigin);i.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(c)},Hn.requestFormReset=function(c){i.d.r(c)},Hn.unstable_batchedUpdates=function(c,f){return c(f)},Hn.useFormState=function(c,f,d){return s.H.useFormState(c,f,d)},Hn.useFormStatus=function(){return s.H.useHostTransitionStatus()},Hn.version="19.2.0",Hn}var H5;function iW(){if(H5)return sE.exports;H5=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),sE.exports=nW(),sE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G5;function rW(){if(G5)return Xh;G5=1;var e=tW(),t=dC(),n=iW();function i(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var u=o,h=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(h=u.return),o=u.return;while(o)}return u.tag===3?h:null}function s(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function c(o){if(a(o)!==o)throw Error(i(188))}function f(o){var u=o.alternate;if(!u){if(u=a(o),u===null)throw Error(i(188));return u!==o?null:o}for(var h=o,m=u;;){var x=h.return;if(x===null)break;var E=x.alternate;if(E===null){if(m=x.return,m!==null){h=m;continue}break}if(x.child===E.child){for(E=x.child;E;){if(E===h)return c(x),o;if(E===m)return c(x),u;E=E.sibling}throw Error(i(188))}if(h.return!==m.return)h=x,m=E;else{for(var C=!1,O=x.child;O;){if(O===h){C=!0,h=x,m=E;break}if(O===m){C=!0,m=x,h=E;break}O=O.sibling}if(!C){for(O=E.child;O;){if(O===h){C=!0,h=E,m=x;break}if(O===m){C=!0,m=E,h=x;break}O=O.sibling}if(!C)throw Error(i(189))}}if(h.alternate!==m)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?o:u}function d(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=d(o),u!==null)return u;o=o.sibling}return null}var g=Object.assign,p=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),A=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function Q(o){return o===null||typeof o!="object"?null:(o=U&&o[U]||o["@@iterator"],typeof o=="function"?o:null)}var Y=Symbol.for("react.client.reference");function P(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===Y?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case b:return"Fragment";case _:return"Profiler";case S:return"StrictMode";case M:return"Suspense";case k:return"SuspenseList";case R:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case v:return"Portal";case A:return o.displayName||"Context";case w:return(o._context.displayName||"Context")+".Consumer";case $:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case T:return u=o.displayName||null,u!==null?u:P(o.type)||"Memo";case D:u=o._payload,o=o._init;try{return P(o(u))}catch{}}return null}var z=Array.isArray,N=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},K=[],fe=-1;function F(o){return{current:o}}function G(o){0>fe||(o.current=K[fe],K[fe]=null,fe--)}function le(o,u){fe++,K[fe]=o.current,o.current=u}var I=F(null),J=F(null),ve=F(null),Ae=F(null);function ze(o,u){switch(le(ve,u),le(J,o),le(I,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?s5(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=s5(u),o=o5(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}G(I),le(I,o)}function ce(){G(I),G(J),G(ve)}function Le(o){o.memoizedState!==null&&le(Ae,o);var u=I.current,h=o5(u,o.type);u!==h&&(le(J,o),le(I,h))}function je(o){J.current===o&&(G(I),G(J)),Ae.current===o&&(G(Ae),Ih._currentValue=X)}var ge,tn;function Qe(o){if(ge===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);ge=u&&u[1]||"",tn=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ge+o+tn}var It=!1;function nn(o,u){if(!o||It)return"";It=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(u){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(ee){var Z=ee}Reflect.construct(o,[],ue)}else{try{ue.call()}catch(ee){Z=ee}o.call(ue.prototype)}}else{try{throw Error()}catch(ee){Z=ee}(ue=o())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(ee){if(ee&&Z&&typeof ee.stack=="string")return[ee.stack,Z.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=m.DetermineComponentFrameRoot(),C=E[0],O=E[1];if(C&&O){var L=C.split(`
`),W=O.split(`
`);for(x=m=0;m<L.length&&!L[m].includes("DetermineComponentFrameRoot");)m++;for(;x<W.length&&!W[x].includes("DetermineComponentFrameRoot");)x++;if(m===L.length||x===W.length)for(m=L.length-1,x=W.length-1;1<=m&&0<=x&&L[m]!==W[x];)x--;for(;1<=m&&0<=x;m--,x--)if(L[m]!==W[x]){if(m!==1||x!==1)do if(m--,x--,0>x||L[m]!==W[x]){var ne=`
`+L[m].replace(" at new "," at ");return o.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",o.displayName)),ne}while(1<=m&&0<=x);break}}}finally{It=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?Qe(h):""}function Gr(o,u){switch(o.tag){case 26:case 27:case 5:return Qe(o.type);case 16:return Qe("Lazy");case 13:return o.child!==u&&u!==null?Qe("Suspense Fallback"):Qe("Suspense");case 19:return Qe("SuspenseList");case 0:case 15:return nn(o.type,!1);case 11:return nn(o.type.render,!1);case 1:return nn(o.type,!0);case 31:return Qe("Activity");default:return""}}function Jd(o){try{var u="",h=null;do u+=Gr(o,h),h=o,o=o.return;while(o);return u}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var jx=Object.prototype.hasOwnProperty,qx=e.unstable_scheduleCallback,Ix=e.unstable_cancelCallback,TY=e.unstable_shouldYield,MY=e.unstable_requestPaint,Hi=e.unstable_now,kY=e.unstable_getCurrentPriorityLevel,Uk=e.unstable_ImmediatePriority,Bk=e.unstable_UserBlockingPriority,Am=e.unstable_NormalPriority,OY=e.unstable_LowPriority,jk=e.unstable_IdlePriority,NY=e.log,DY=e.unstable_setDisableYieldValue,eh=null,Gi=null;function vo(o){if(typeof NY=="function"&&DY(o),Gi&&typeof Gi.setStrictMode=="function")try{Gi.setStrictMode(eh,o)}catch{}}var Yi=Math.clz32?Math.clz32:FY,RY=Math.log,zY=Math.LN2;function FY(o){return o>>>=0,o===0?32:31-(RY(o)/zY|0)|0}var Cm=256,$m=262144,Tm=4194304;function Hl(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Mm(o,u,h){var m=o.pendingLanes;if(m===0)return 0;var x=0,E=o.suspendedLanes,C=o.pingedLanes;o=o.warmLanes;var O=m&134217727;return O!==0?(m=O&~E,m!==0?x=Hl(m):(C&=O,C!==0?x=Hl(C):h||(h=O&~o,h!==0&&(x=Hl(h))))):(O=m&~E,O!==0?x=Hl(O):C!==0?x=Hl(C):h||(h=m&~o,h!==0&&(x=Hl(h)))),x===0?0:u!==0&&u!==x&&(u&E)===0&&(E=x&-x,h=u&-u,E>=h||E===32&&(h&4194048)!==0)?u:x}function th(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function LY(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qk(){var o=Tm;return Tm<<=1,(Tm&62914560)===0&&(Tm=4194304),o}function Px(o){for(var u=[],h=0;31>h;h++)u.push(o);return u}function nh(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function UY(o,u,h,m,x,E){var C=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var O=o.entanglements,L=o.expirationTimes,W=o.hiddenUpdates;for(h=C&~h;0<h;){var ne=31-Yi(h),ue=1<<ne;O[ne]=0,L[ne]=-1;var Z=W[ne];if(Z!==null)for(W[ne]=null,ne=0;ne<Z.length;ne++){var ee=Z[ne];ee!==null&&(ee.lane&=-536870913)}h&=~ue}m!==0&&Ik(o,m,0),E!==0&&x===0&&o.tag!==0&&(o.suspendedLanes|=E&~(C&~u))}function Ik(o,u,h){o.pendingLanes|=u,o.suspendedLanes&=~u;var m=31-Yi(u);o.entangledLanes|=u,o.entanglements[m]=o.entanglements[m]|1073741824|h&261930}function Pk(o,u){var h=o.entangledLanes|=u;for(o=o.entanglements;h;){var m=31-Yi(h),x=1<<m;x&u|o[m]&u&&(o[m]|=u),h&=~x}}function Hk(o,u){var h=u&-u;return h=(h&42)!==0?1:Hx(h),(h&(o.suspendedLanes|u))!==0?0:h}function Hx(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Gx(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Gk(){var o=j.p;return o!==0?o:(o=window.event,o===void 0?32:k5(o.type))}function Yk(o,u){var h=j.p;try{return j.p=o,u()}finally{j.p=h}}var bo=Math.random().toString(36).slice(2),kn="__reactFiber$"+bo,_i="__reactProps$"+bo,Tc="__reactContainer$"+bo,Yx="__reactEvents$"+bo,BY="__reactListeners$"+bo,jY="__reactHandles$"+bo,Xk="__reactResources$"+bo,ih="__reactMarker$"+bo;function Xx(o){delete o[kn],delete o[_i],delete o[Yx],delete o[BY],delete o[jY]}function Mc(o){var u=o[kn];if(u)return u;for(var h=o.parentNode;h;){if(u=h[Tc]||h[kn]){if(h=u.alternate,u.child!==null||h!==null&&h.child!==null)for(o=g5(o);o!==null;){if(h=o[kn])return h;o=g5(o)}return u}o=h,h=o.parentNode}return null}function kc(o){if(o=o[kn]||o[Tc]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function rh(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(i(33))}function Oc(o){var u=o[Xk];return u||(u=o[Xk]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function vn(o){o[ih]=!0}var Vk=new Set,Wk={};function Gl(o,u){Nc(o,u),Nc(o+"Capture",u)}function Nc(o,u){for(Wk[o]=u,o=0;o<u.length;o++)Vk.add(u[o])}var qY=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qk={},Zk={};function IY(o){return jx.call(Zk,o)?!0:jx.call(Qk,o)?!1:qY.test(o)?Zk[o]=!0:(Qk[o]=!0,!1)}function km(o,u,h){if(IY(u))if(h===null)o.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var m=u.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+h)}}function Om(o,u,h){if(h===null)o.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+h)}}function ps(o,u,h,m){if(m===null)o.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(u,h,""+m)}}function pr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Kk(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function PY(o,u,h){var m=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var x=m.get,E=m.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return x.call(this)},set:function(C){h=""+C,E.call(this,C)}}),Object.defineProperty(o,u,{enumerable:m.enumerable}),{getValue:function(){return h},setValue:function(C){h=""+C},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function Vx(o){if(!o._valueTracker){var u=Kk(o)?"checked":"value";o._valueTracker=PY(o,u,""+o[u])}}function Jk(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var h=u.getValue(),m="";return o&&(m=Kk(o)?o.checked?"true":"false":o.value),o=m,o!==h?(u.setValue(o),!0):!1}function Nm(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var HY=/[\n"\\]/g;function mr(o){return o.replace(HY,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Wx(o,u,h,m,x,E,C,O){o.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?o.type=C:o.removeAttribute("type"),u!=null?C==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+pr(u)):o.value!==""+pr(u)&&(o.value=""+pr(u)):C!=="submit"&&C!=="reset"||o.removeAttribute("value"),u!=null?Qx(o,C,pr(u)):h!=null?Qx(o,C,pr(h)):m!=null&&o.removeAttribute("value"),x==null&&E!=null&&(o.defaultChecked=!!E),x!=null&&(o.checked=x&&typeof x!="function"&&typeof x!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?o.name=""+pr(O):o.removeAttribute("name")}function eO(o,u,h,m,x,E,C,O){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(o.type=E),u!=null||h!=null){if(!(E!=="submit"&&E!=="reset"||u!=null)){Vx(o);return}h=h!=null?""+pr(h):"",u=u!=null?""+pr(u):h,O||u===o.value||(o.value=u),o.defaultValue=u}m=m??x,m=typeof m!="function"&&typeof m!="symbol"&&!!m,o.checked=O?o.checked:!!m,o.defaultChecked=!!m,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(o.name=C),Vx(o)}function Qx(o,u,h){u==="number"&&Nm(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function Dc(o,u,h,m){if(o=o.options,u){u={};for(var x=0;x<h.length;x++)u["$"+h[x]]=!0;for(h=0;h<o.length;h++)x=u.hasOwnProperty("$"+o[h].value),o[h].selected!==x&&(o[h].selected=x),x&&m&&(o[h].defaultSelected=!0)}else{for(h=""+pr(h),u=null,x=0;x<o.length;x++){if(o[x].value===h){o[x].selected=!0,m&&(o[x].defaultSelected=!0);return}u!==null||o[x].disabled||(u=o[x])}u!==null&&(u.selected=!0)}}function tO(o,u,h){if(u!=null&&(u=""+pr(u),u!==o.value&&(o.value=u),h==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=h!=null?""+pr(h):""}function nO(o,u,h,m){if(u==null){if(m!=null){if(h!=null)throw Error(i(92));if(z(m)){if(1<m.length)throw Error(i(93));m=m[0]}h=m}h==null&&(h=""),u=h}h=pr(u),o.defaultValue=h,m=o.textContent,m===h&&m!==""&&m!==null&&(o.value=m),Vx(o)}function Rc(o,u){if(u){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=u;return}}o.textContent=u}var GY=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function iO(o,u,h){var m=u.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":m?o.setProperty(u,h):typeof h!="number"||h===0||GY.has(u)?u==="float"?o.cssFloat=h:o[u]=(""+h).trim():o[u]=h+"px"}function rO(o,u,h){if(u!=null&&typeof u!="object")throw Error(i(62));if(o=o.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||u!=null&&u.hasOwnProperty(m)||(m.indexOf("--")===0?o.setProperty(m,""):m==="float"?o.cssFloat="":o[m]="");for(var x in u)m=u[x],u.hasOwnProperty(x)&&h[x]!==m&&iO(o,x,m)}else for(var E in u)u.hasOwnProperty(E)&&iO(o,E,u[E])}function Zx(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var YY=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),XY=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Dm(o){return XY.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function ms(){}var Kx=null;function Jx(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var zc=null,Fc=null;function aO(o){var u=kc(o);if(u&&(o=u.stateNode)){var h=o[_i]||null;e:switch(o=u.stateNode,u.type){case"input":if(Wx(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),u=h.name,h.type==="radio"&&u!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+mr(""+u)+'"][type="radio"]'),u=0;u<h.length;u++){var m=h[u];if(m!==o&&m.form===o.form){var x=m[_i]||null;if(!x)throw Error(i(90));Wx(m,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(u=0;u<h.length;u++)m=h[u],m.form===o.form&&Jk(m)}break e;case"textarea":tO(o,h.value,h.defaultValue);break e;case"select":u=h.value,u!=null&&Dc(o,!!h.multiple,u,!1)}}}var e2=!1;function sO(o,u,h){if(e2)return o(u,h);e2=!0;try{var m=o(u);return m}finally{if(e2=!1,(zc!==null||Fc!==null)&&(x0(),zc&&(u=zc,o=Fc,Fc=zc=null,aO(u),o)))for(u=0;u<o.length;u++)aO(o[u])}}function ah(o,u){var h=o.stateNode;if(h===null)return null;var m=h[_i]||null;if(m===null)return null;h=m[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(i(231,u,typeof h));return h}var ys=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),t2=!1;if(ys)try{var sh={};Object.defineProperty(sh,"passive",{get:function(){t2=!0}}),window.addEventListener("test",sh,sh),window.removeEventListener("test",sh,sh)}catch{t2=!1}var xo=null,n2=null,Rm=null;function oO(){if(Rm)return Rm;var o,u=n2,h=u.length,m,x="value"in xo?xo.value:xo.textContent,E=x.length;for(o=0;o<h&&u[o]===x[o];o++);var C=h-o;for(m=1;m<=C&&u[h-m]===x[E-m];m++);return Rm=x.slice(o,1<m?1-m:void 0)}function zm(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function Fm(){return!0}function lO(){return!1}function wi(o){function u(h,m,x,E,C){this._reactName=h,this._targetInst=x,this.type=m,this.nativeEvent=E,this.target=C,this.currentTarget=null;for(var O in o)o.hasOwnProperty(O)&&(h=o[O],this[O]=h?h(E):E[O]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Fm:lO,this.isPropagationStopped=lO,this}return g(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Fm)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Fm)},persist:function(){},isPersistent:Fm}),u}var Yl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lm=wi(Yl),oh=g({},Yl,{view:0,detail:0}),VY=wi(oh),i2,r2,lh,Um=g({},oh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:s2,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==lh&&(lh&&o.type==="mousemove"?(i2=o.screenX-lh.screenX,r2=o.screenY-lh.screenY):r2=i2=0,lh=o),i2)},movementY:function(o){return"movementY"in o?o.movementY:r2}}),uO=wi(Um),WY=g({},Um,{dataTransfer:0}),QY=wi(WY),ZY=g({},oh,{relatedTarget:0}),a2=wi(ZY),KY=g({},Yl,{animationName:0,elapsedTime:0,pseudoElement:0}),JY=wi(KY),eX=g({},Yl,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),tX=wi(eX),nX=g({},Yl,{data:0}),cO=wi(nX),iX={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rX={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aX={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sX(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=aX[o])?!!u[o]:!1}function s2(){return sX}var oX=g({},oh,{key:function(o){if(o.key){var u=iX[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=zm(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?rX[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:s2,charCode:function(o){return o.type==="keypress"?zm(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?zm(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),lX=wi(oX),uX=g({},Um,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fO=wi(uX),cX=g({},oh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:s2}),fX=wi(cX),dX=g({},Yl,{propertyName:0,elapsedTime:0,pseudoElement:0}),hX=wi(dX),gX=g({},Um,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),pX=wi(gX),mX=g({},Yl,{newState:0,oldState:0}),yX=wi(mX),vX=[9,13,27,32],o2=ys&&"CompositionEvent"in window,uh=null;ys&&"documentMode"in document&&(uh=document.documentMode);var bX=ys&&"TextEvent"in window&&!uh,dO=ys&&(!o2||uh&&8<uh&&11>=uh),hO=" ",gO=!1;function pO(o,u){switch(o){case"keyup":return vX.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mO(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Lc=!1;function xX(o,u){switch(o){case"compositionend":return mO(u);case"keypress":return u.which!==32?null:(gO=!0,hO);case"textInput":return o=u.data,o===hO&&gO?null:o;default:return null}}function SX(o,u){if(Lc)return o==="compositionend"||!o2&&pO(o,u)?(o=oO(),Rm=n2=xo=null,Lc=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return dO&&u.locale!=="ko"?null:u.data;default:return null}}var EX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yO(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!EX[o.type]:u==="textarea"}function vO(o,u,h,m){zc?Fc?Fc.push(m):Fc=[m]:zc=m,u=$0(u,"onChange"),0<u.length&&(h=new Lm("onChange","change",null,h,m),o.push({event:h,listeners:u}))}var ch=null,fh=null;function _X(o){e5(o,0)}function Bm(o){var u=rh(o);if(Jk(u))return o}function bO(o,u){if(o==="change")return u}var xO=!1;if(ys){var l2;if(ys){var u2="oninput"in document;if(!u2){var SO=document.createElement("div");SO.setAttribute("oninput","return;"),u2=typeof SO.oninput=="function"}l2=u2}else l2=!1;xO=l2&&(!document.documentMode||9<document.documentMode)}function EO(){ch&&(ch.detachEvent("onpropertychange",_O),fh=ch=null)}function _O(o){if(o.propertyName==="value"&&Bm(fh)){var u=[];vO(u,fh,o,Jx(o)),sO(_X,u)}}function wX(o,u,h){o==="focusin"?(EO(),ch=u,fh=h,ch.attachEvent("onpropertychange",_O)):o==="focusout"&&EO()}function AX(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Bm(fh)}function CX(o,u){if(o==="click")return Bm(u)}function $X(o,u){if(o==="input"||o==="change")return Bm(u)}function TX(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var Xi=typeof Object.is=="function"?Object.is:TX;function dh(o,u){if(Xi(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var h=Object.keys(o),m=Object.keys(u);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var x=h[m];if(!jx.call(u,x)||!Xi(o[x],u[x]))return!1}return!0}function wO(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function AO(o,u){var h=wO(o);o=0;for(var m;h;){if(h.nodeType===3){if(m=o+h.textContent.length,o<=u&&m>=u)return{node:h,offset:u-o};o=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=wO(h)}}function CO(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?CO(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function $O(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=Nm(o.document);u instanceof o.HTMLIFrameElement;){try{var h=typeof u.contentWindow.location.href=="string"}catch{h=!1}if(h)o=u.contentWindow;else break;u=Nm(o.document)}return u}function c2(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var MX=ys&&"documentMode"in document&&11>=document.documentMode,Uc=null,f2=null,hh=null,d2=!1;function TO(o,u,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;d2||Uc==null||Uc!==Nm(m)||(m=Uc,"selectionStart"in m&&c2(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),hh&&dh(hh,m)||(hh=m,m=$0(f2,"onSelect"),0<m.length&&(u=new Lm("onSelect","select",null,u,h),o.push({event:u,listeners:m}),u.target=Uc)))}function Xl(o,u){var h={};return h[o.toLowerCase()]=u.toLowerCase(),h["Webkit"+o]="webkit"+u,h["Moz"+o]="moz"+u,h}var Bc={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionrun:Xl("Transition","TransitionRun"),transitionstart:Xl("Transition","TransitionStart"),transitioncancel:Xl("Transition","TransitionCancel"),transitionend:Xl("Transition","TransitionEnd")},h2={},MO={};ys&&(MO=document.createElement("div").style,"AnimationEvent"in window||(delete Bc.animationend.animation,delete Bc.animationiteration.animation,delete Bc.animationstart.animation),"TransitionEvent"in window||delete Bc.transitionend.transition);function Vl(o){if(h2[o])return h2[o];if(!Bc[o])return o;var u=Bc[o],h;for(h in u)if(u.hasOwnProperty(h)&&h in MO)return h2[o]=u[h];return o}var kO=Vl("animationend"),OO=Vl("animationiteration"),NO=Vl("animationstart"),kX=Vl("transitionrun"),OX=Vl("transitionstart"),NX=Vl("transitioncancel"),DO=Vl("transitionend"),RO=new Map,g2="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");g2.push("scrollEnd");function Yr(o,u){RO.set(o,u),Gl(u,[o])}var jm=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},yr=[],jc=0,p2=0;function qm(){for(var o=jc,u=p2=jc=0;u<o;){var h=yr[u];yr[u++]=null;var m=yr[u];yr[u++]=null;var x=yr[u];yr[u++]=null;var E=yr[u];if(yr[u++]=null,m!==null&&x!==null){var C=m.pending;C===null?x.next=x:(x.next=C.next,C.next=x),m.pending=x}E!==0&&zO(h,x,E)}}function Im(o,u,h,m){yr[jc++]=o,yr[jc++]=u,yr[jc++]=h,yr[jc++]=m,p2|=m,o.lanes|=m,o=o.alternate,o!==null&&(o.lanes|=m)}function m2(o,u,h,m){return Im(o,u,h,m),Pm(o)}function Wl(o,u){return Im(o,null,null,u),Pm(o)}function zO(o,u,h){o.lanes|=h;var m=o.alternate;m!==null&&(m.lanes|=h);for(var x=!1,E=o.return;E!==null;)E.childLanes|=h,m=E.alternate,m!==null&&(m.childLanes|=h),E.tag===22&&(o=E.stateNode,o===null||o._visibility&1||(x=!0)),o=E,E=E.return;return o.tag===3?(E=o.stateNode,x&&u!==null&&(x=31-Yi(h),o=E.hiddenUpdates,m=o[x],m===null?o[x]=[u]:m.push(u),u.lane=h|536870912),E):null}function Pm(o){if(50<zh)throw zh=0,AS=null,Error(i(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var qc={};function DX(o,u,h,m){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vi(o,u,h,m){return new DX(o,u,h,m)}function y2(o){return o=o.prototype,!(!o||!o.isReactComponent)}function vs(o,u){var h=o.alternate;return h===null?(h=Vi(o.tag,u,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=u,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,u=o.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function FO(o,u){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,u=h.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function Hm(o,u,h,m,x,E){var C=0;if(m=o,typeof o=="function")y2(o)&&(C=1);else if(typeof o=="string")C=UV(o,h,I.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case R:return o=Vi(31,h,u,x),o.elementType=R,o.lanes=E,o;case b:return Ql(h.children,x,E,u);case S:C=8,x|=24;break;case _:return o=Vi(12,h,u,x|2),o.elementType=_,o.lanes=E,o;case M:return o=Vi(13,h,u,x),o.elementType=M,o.lanes=E,o;case k:return o=Vi(19,h,u,x),o.elementType=k,o.lanes=E,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case A:C=10;break e;case w:C=9;break e;case $:C=11;break e;case T:C=14;break e;case D:C=16,m=null;break e}C=29,h=Error(i(130,o===null?"null":typeof o,"")),m=null}return u=Vi(C,h,u,x),u.elementType=o,u.type=m,u.lanes=E,u}function Ql(o,u,h,m){return o=Vi(7,o,m,u),o.lanes=h,o}function v2(o,u,h){return o=Vi(6,o,null,u),o.lanes=h,o}function LO(o){var u=Vi(18,null,null,0);return u.stateNode=o,u}function b2(o,u,h){return u=Vi(4,o.children!==null?o.children:[],o.key,u),u.lanes=h,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var UO=new WeakMap;function vr(o,u){if(typeof o=="object"&&o!==null){var h=UO.get(o);return h!==void 0?h:(u={value:o,source:u,stack:Jd(u)},UO.set(o,u),u)}return{value:o,source:u,stack:Jd(u)}}var Ic=[],Pc=0,Gm=null,gh=0,br=[],xr=0,So=null,Aa=1,Ca="";function bs(o,u){Ic[Pc++]=gh,Ic[Pc++]=Gm,Gm=o,gh=u}function BO(o,u,h){br[xr++]=Aa,br[xr++]=Ca,br[xr++]=So,So=o;var m=Aa;o=Ca;var x=32-Yi(m)-1;m&=~(1<<x),h+=1;var E=32-Yi(u)+x;if(30<E){var C=x-x%5;E=(m&(1<<C)-1).toString(32),m>>=C,x-=C,Aa=1<<32-Yi(u)+x|h<<x|m,Ca=E+o}else Aa=1<<E|h<<x|m,Ca=o}function x2(o){o.return!==null&&(bs(o,1),BO(o,1,0))}function S2(o){for(;o===Gm;)Gm=Ic[--Pc],Ic[Pc]=null,gh=Ic[--Pc],Ic[Pc]=null;for(;o===So;)So=br[--xr],br[xr]=null,Ca=br[--xr],br[xr]=null,Aa=br[--xr],br[xr]=null}function jO(o,u){br[xr++]=Aa,br[xr++]=Ca,br[xr++]=So,Aa=u.id,Ca=u.overflow,So=o}var On=null,Ot=null,nt=!1,Eo=null,Sr=!1,E2=Error(i(519));function _o(o){var u=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ph(vr(u,o)),E2}function qO(o){var u=o.stateNode,h=o.type,m=o.memoizedProps;switch(u[kn]=o,u[_i]=m,h){case"dialog":Ke("cancel",u),Ke("close",u);break;case"iframe":case"object":case"embed":Ke("load",u);break;case"video":case"audio":for(h=0;h<Lh.length;h++)Ke(Lh[h],u);break;case"source":Ke("error",u);break;case"img":case"image":case"link":Ke("error",u),Ke("load",u);break;case"details":Ke("toggle",u);break;case"input":Ke("invalid",u),eO(u,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":Ke("invalid",u);break;case"textarea":Ke("invalid",u),nO(u,m.value,m.defaultValue,m.children)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||u.textContent===""+h||m.suppressHydrationWarning===!0||r5(u.textContent,h)?(m.popover!=null&&(Ke("beforetoggle",u),Ke("toggle",u)),m.onScroll!=null&&Ke("scroll",u),m.onScrollEnd!=null&&Ke("scrollend",u),m.onClick!=null&&(u.onclick=ms),u=!0):u=!1,u||_o(o,!0)}function IO(o){for(On=o.return;On;)switch(On.tag){case 5:case 31:case 13:Sr=!1;return;case 27:case 3:Sr=!0;return;default:On=On.return}}function Hc(o){if(o!==On)return!1;if(!nt)return IO(o),nt=!0,!1;var u=o.tag,h;if((h=u!==3&&u!==27)&&((h=u===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||jS(o.type,o.memoizedProps)),h=!h),h&&Ot&&_o(o),IO(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));Ot=h5(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));Ot=h5(o)}else u===27?(u=Ot,Lo(o.type)?(o=GS,GS=null,Ot=o):Ot=u):Ot=On?_r(o.stateNode.nextSibling):null;return!0}function Zl(){Ot=On=null,nt=!1}function _2(){var o=Eo;return o!==null&&(Ti===null?Ti=o:Ti.push.apply(Ti,o),Eo=null),o}function ph(o){Eo===null?Eo=[o]:Eo.push(o)}var w2=F(null),Kl=null,xs=null;function wo(o,u,h){le(w2,u._currentValue),u._currentValue=h}function Ss(o){o._currentValue=w2.current,G(w2)}function A2(o,u,h){for(;o!==null;){var m=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,m!==null&&(m.childLanes|=u)):m!==null&&(m.childLanes&u)!==u&&(m.childLanes|=u),o===h)break;o=o.return}}function C2(o,u,h,m){var x=o.child;for(x!==null&&(x.return=o);x!==null;){var E=x.dependencies;if(E!==null){var C=x.child;E=E.firstContext;e:for(;E!==null;){var O=E;E=x;for(var L=0;L<u.length;L++)if(O.context===u[L]){E.lanes|=h,O=E.alternate,O!==null&&(O.lanes|=h),A2(E.return,h,o),m||(C=null);break e}E=O.next}}else if(x.tag===18){if(C=x.return,C===null)throw Error(i(341));C.lanes|=h,E=C.alternate,E!==null&&(E.lanes|=h),A2(C,h,o),C=null}else C=x.child;if(C!==null)C.return=x;else for(C=x;C!==null;){if(C===o){C=null;break}if(x=C.sibling,x!==null){x.return=C.return,C=x;break}C=C.return}x=C}}function Gc(o,u,h,m){o=null;for(var x=u,E=!1;x!==null;){if(!E){if((x.flags&524288)!==0)E=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var C=x.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var O=x.type;Xi(x.pendingProps.value,C.value)||(o!==null?o.push(O):o=[O])}}else if(x===Ae.current){if(C=x.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(o!==null?o.push(Ih):o=[Ih])}x=x.return}o!==null&&C2(u,o,h,m),u.flags|=262144}function Ym(o){for(o=o.firstContext;o!==null;){if(!Xi(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Jl(o){Kl=o,xs=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Nn(o){return PO(Kl,o)}function Xm(o,u){return Kl===null&&Jl(o),PO(o,u)}function PO(o,u){var h=u._currentValue;if(u={context:u,memoizedValue:h,next:null},xs===null){if(o===null)throw Error(i(308));xs=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else xs=xs.next=u;return h}var RX=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(h,m){o.push(m)}};this.abort=function(){u.aborted=!0,o.forEach(function(h){return h()})}},zX=e.unstable_scheduleCallback,FX=e.unstable_NormalPriority,rn={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $2(){return{controller:new RX,data:new Map,refCount:0}}function mh(o){o.refCount--,o.refCount===0&&zX(FX,function(){o.controller.abort()})}var yh=null,T2=0,Yc=0,Xc=null;function LX(o,u){if(yh===null){var h=yh=[];T2=0,Yc=OS(),Xc={status:"pending",value:void 0,then:function(m){h.push(m)}}}return T2++,u.then(HO,HO),u}function HO(){if(--T2===0&&yh!==null){Xc!==null&&(Xc.status="fulfilled");var o=yh;yh=null,Yc=0,Xc=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function UX(o,u){var h=[],m={status:"pending",value:null,reason:null,then:function(x){h.push(x)}};return o.then(function(){m.status="fulfilled",m.value=u;for(var x=0;x<h.length;x++)(0,h[x])(u)},function(x){for(m.status="rejected",m.reason=x,x=0;x<h.length;x++)(0,h[x])(void 0)}),m}var GO=N.S;N.S=function(o,u){TD=Hi(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&LX(o,u),GO!==null&&GO(o,u)};var eu=F(null);function M2(){var o=eu.current;return o!==null?o:$t.pooledCache}function Vm(o,u){u===null?le(eu,eu.current):le(eu,u.pool)}function YO(){var o=M2();return o===null?null:{parent:rn._currentValue,pool:o}}var Vc=Error(i(460)),k2=Error(i(474)),Wm=Error(i(542)),Qm={then:function(){}};function XO(o){return o=o.status,o==="fulfilled"||o==="rejected"}function VO(o,u,h){switch(h=o[h],h===void 0?o.push(u):h!==u&&(u.then(ms,ms),u=h),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,QO(o),o;default:if(typeof u.status=="string")u.then(ms,ms);else{if(o=$t,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=u,o.status="pending",o.then(function(m){if(u.status==="pending"){var x=u;x.status="fulfilled",x.value=m}},function(m){if(u.status==="pending"){var x=u;x.status="rejected",x.reason=m}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,QO(o),o}throw nu=u,Vc}}function tu(o){try{var u=o._init;return u(o._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(nu=h,Vc):h}}var nu=null;function WO(){if(nu===null)throw Error(i(459));var o=nu;return nu=null,o}function QO(o){if(o===Vc||o===Wm)throw Error(i(483))}var Wc=null,vh=0;function Zm(o){var u=vh;return vh+=1,Wc===null&&(Wc=[]),VO(Wc,o,u)}function bh(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function Km(o,u){throw u.$$typeof===p?Error(i(525)):(o=Object.prototype.toString.call(u),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function ZO(o){function u(H,q){if(o){var V=H.deletions;V===null?(H.deletions=[q],H.flags|=16):V.push(q)}}function h(H,q){if(!o)return null;for(;q!==null;)u(H,q),q=q.sibling;return null}function m(H){for(var q=new Map;H!==null;)H.key!==null?q.set(H.key,H):q.set(H.index,H),H=H.sibling;return q}function x(H,q){return H=vs(H,q),H.index=0,H.sibling=null,H}function E(H,q,V){return H.index=V,o?(V=H.alternate,V!==null?(V=V.index,V<q?(H.flags|=67108866,q):V):(H.flags|=67108866,q)):(H.flags|=1048576,q)}function C(H){return o&&H.alternate===null&&(H.flags|=67108866),H}function O(H,q,V,oe){return q===null||q.tag!==6?(q=v2(V,H.mode,oe),q.return=H,q):(q=x(q,V),q.return=H,q)}function L(H,q,V,oe){var De=V.type;return De===b?ne(H,q,V.props.children,oe,V.key):q!==null&&(q.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===D&&tu(De)===q.type)?(q=x(q,V.props),bh(q,V),q.return=H,q):(q=Hm(V.type,V.key,V.props,null,H.mode,oe),bh(q,V),q.return=H,q)}function W(H,q,V,oe){return q===null||q.tag!==4||q.stateNode.containerInfo!==V.containerInfo||q.stateNode.implementation!==V.implementation?(q=b2(V,H.mode,oe),q.return=H,q):(q=x(q,V.children||[]),q.return=H,q)}function ne(H,q,V,oe,De){return q===null||q.tag!==7?(q=Ql(V,H.mode,oe,De),q.return=H,q):(q=x(q,V),q.return=H,q)}function ue(H,q,V){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=v2(""+q,H.mode,V),q.return=H,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case y:return V=Hm(q.type,q.key,q.props,null,H.mode,V),bh(V,q),V.return=H,V;case v:return q=b2(q,H.mode,V),q.return=H,q;case D:return q=tu(q),ue(H,q,V)}if(z(q)||Q(q))return q=Ql(q,H.mode,V,null),q.return=H,q;if(typeof q.then=="function")return ue(H,Zm(q),V);if(q.$$typeof===A)return ue(H,Xm(H,q),V);Km(H,q)}return null}function Z(H,q,V,oe){var De=q!==null?q.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return De!==null?null:O(H,q,""+V,oe);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case y:return V.key===De?L(H,q,V,oe):null;case v:return V.key===De?W(H,q,V,oe):null;case D:return V=tu(V),Z(H,q,V,oe)}if(z(V)||Q(V))return De!==null?null:ne(H,q,V,oe,null);if(typeof V.then=="function")return Z(H,q,Zm(V),oe);if(V.$$typeof===A)return Z(H,q,Xm(H,V),oe);Km(H,V)}return null}function ee(H,q,V,oe,De){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return H=H.get(V)||null,O(q,H,""+oe,De);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case y:return H=H.get(oe.key===null?V:oe.key)||null,L(q,H,oe,De);case v:return H=H.get(oe.key===null?V:oe.key)||null,W(q,H,oe,De);case D:return oe=tu(oe),ee(H,q,V,oe,De)}if(z(oe)||Q(oe))return H=H.get(V)||null,ne(q,H,oe,De,null);if(typeof oe.then=="function")return ee(H,q,V,Zm(oe),De);if(oe.$$typeof===A)return ee(H,q,V,Xm(q,oe),De);Km(q,oe)}return null}function Ce(H,q,V,oe){for(var De=null,st=null,Te=q,Ye=q=0,et=null;Te!==null&&Ye<V.length;Ye++){Te.index>Ye?(et=Te,Te=null):et=Te.sibling;var ot=Z(H,Te,V[Ye],oe);if(ot===null){Te===null&&(Te=et);break}o&&Te&&ot.alternate===null&&u(H,Te),q=E(ot,q,Ye),st===null?De=ot:st.sibling=ot,st=ot,Te=et}if(Ye===V.length)return h(H,Te),nt&&bs(H,Ye),De;if(Te===null){for(;Ye<V.length;Ye++)Te=ue(H,V[Ye],oe),Te!==null&&(q=E(Te,q,Ye),st===null?De=Te:st.sibling=Te,st=Te);return nt&&bs(H,Ye),De}for(Te=m(Te);Ye<V.length;Ye++)et=ee(Te,H,Ye,V[Ye],oe),et!==null&&(o&&et.alternate!==null&&Te.delete(et.key===null?Ye:et.key),q=E(et,q,Ye),st===null?De=et:st.sibling=et,st=et);return o&&Te.forEach(function(Io){return u(H,Io)}),nt&&bs(H,Ye),De}function Ue(H,q,V,oe){if(V==null)throw Error(i(151));for(var De=null,st=null,Te=q,Ye=q=0,et=null,ot=V.next();Te!==null&&!ot.done;Ye++,ot=V.next()){Te.index>Ye?(et=Te,Te=null):et=Te.sibling;var Io=Z(H,Te,ot.value,oe);if(Io===null){Te===null&&(Te=et);break}o&&Te&&Io.alternate===null&&u(H,Te),q=E(Io,q,Ye),st===null?De=Io:st.sibling=Io,st=Io,Te=et}if(ot.done)return h(H,Te),nt&&bs(H,Ye),De;if(Te===null){for(;!ot.done;Ye++,ot=V.next())ot=ue(H,ot.value,oe),ot!==null&&(q=E(ot,q,Ye),st===null?De=ot:st.sibling=ot,st=ot);return nt&&bs(H,Ye),De}for(Te=m(Te);!ot.done;Ye++,ot=V.next())ot=ee(Te,H,Ye,ot.value,oe),ot!==null&&(o&&ot.alternate!==null&&Te.delete(ot.key===null?Ye:ot.key),q=E(ot,q,Ye),st===null?De=ot:st.sibling=ot,st=ot);return o&&Te.forEach(function(WV){return u(H,WV)}),nt&&bs(H,Ye),De}function At(H,q,V,oe){if(typeof V=="object"&&V!==null&&V.type===b&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case y:e:{for(var De=V.key;q!==null;){if(q.key===De){if(De=V.type,De===b){if(q.tag===7){h(H,q.sibling),oe=x(q,V.props.children),oe.return=H,H=oe;break e}}else if(q.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===D&&tu(De)===q.type){h(H,q.sibling),oe=x(q,V.props),bh(oe,V),oe.return=H,H=oe;break e}h(H,q);break}else u(H,q);q=q.sibling}V.type===b?(oe=Ql(V.props.children,H.mode,oe,V.key),oe.return=H,H=oe):(oe=Hm(V.type,V.key,V.props,null,H.mode,oe),bh(oe,V),oe.return=H,H=oe)}return C(H);case v:e:{for(De=V.key;q!==null;){if(q.key===De)if(q.tag===4&&q.stateNode.containerInfo===V.containerInfo&&q.stateNode.implementation===V.implementation){h(H,q.sibling),oe=x(q,V.children||[]),oe.return=H,H=oe;break e}else{h(H,q);break}else u(H,q);q=q.sibling}oe=b2(V,H.mode,oe),oe.return=H,H=oe}return C(H);case D:return V=tu(V),At(H,q,V,oe)}if(z(V))return Ce(H,q,V,oe);if(Q(V)){if(De=Q(V),typeof De!="function")throw Error(i(150));return V=De.call(V),Ue(H,q,V,oe)}if(typeof V.then=="function")return At(H,q,Zm(V),oe);if(V.$$typeof===A)return At(H,q,Xm(H,V),oe);Km(H,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,q!==null&&q.tag===6?(h(H,q.sibling),oe=x(q,V),oe.return=H,H=oe):(h(H,q),oe=v2(V,H.mode,oe),oe.return=H,H=oe),C(H)):h(H,q)}return function(H,q,V,oe){try{vh=0;var De=At(H,q,V,oe);return Wc=null,De}catch(Te){if(Te===Vc||Te===Wm)throw Te;var st=Vi(29,Te,null,H.mode);return st.lanes=oe,st.return=H,st}finally{}}}var iu=ZO(!0),KO=ZO(!1),Ao=!1;function O2(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function N2(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Co(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function $o(o,u,h){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(dt&2)!==0){var x=m.pending;return x===null?u.next=u:(u.next=x.next,x.next=u),m.pending=u,u=Pm(o),zO(o,null,h),u}return Im(o,m,u,h),Pm(o)}function xh(o,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194048)!==0)){var m=u.lanes;m&=o.pendingLanes,h|=m,u.lanes=h,Pk(o,h)}}function D2(o,u){var h=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var x=null,E=null;if(h=h.firstBaseUpdate,h!==null){do{var C={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};E===null?x=E=C:E=E.next=C,h=h.next}while(h!==null);E===null?x=E=u:E=E.next=u}else x=E=u;h={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:E,shared:m.shared,callbacks:m.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=u}var R2=!1;function Sh(){if(R2){var o=Xc;if(o!==null)throw o}}function Eh(o,u,h,m){R2=!1;var x=o.updateQueue;Ao=!1;var E=x.firstBaseUpdate,C=x.lastBaseUpdate,O=x.shared.pending;if(O!==null){x.shared.pending=null;var L=O,W=L.next;L.next=null,C===null?E=W:C.next=W,C=L;var ne=o.alternate;ne!==null&&(ne=ne.updateQueue,O=ne.lastBaseUpdate,O!==C&&(O===null?ne.firstBaseUpdate=W:O.next=W,ne.lastBaseUpdate=L))}if(E!==null){var ue=x.baseState;C=0,ne=W=L=null,O=E;do{var Z=O.lane&-536870913,ee=Z!==O.lane;if(ee?(Je&Z)===Z:(m&Z)===Z){Z!==0&&Z===Yc&&(R2=!0),ne!==null&&(ne=ne.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Ce=o,Ue=O;Z=u;var At=h;switch(Ue.tag){case 1:if(Ce=Ue.payload,typeof Ce=="function"){ue=Ce.call(At,ue,Z);break e}ue=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Ue.payload,Z=typeof Ce=="function"?Ce.call(At,ue,Z):Ce,Z==null)break e;ue=g({},ue,Z);break e;case 2:Ao=!0}}Z=O.callback,Z!==null&&(o.flags|=64,ee&&(o.flags|=8192),ee=x.callbacks,ee===null?x.callbacks=[Z]:ee.push(Z))}else ee={lane:Z,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ne===null?(W=ne=ee,L=ue):ne=ne.next=ee,C|=Z;if(O=O.next,O===null){if(O=x.shared.pending,O===null)break;ee=O,O=ee.next,ee.next=null,x.lastBaseUpdate=ee,x.shared.pending=null}}while(!0);ne===null&&(L=ue),x.baseState=L,x.firstBaseUpdate=W,x.lastBaseUpdate=ne,E===null&&(x.shared.lanes=0),No|=C,o.lanes=C,o.memoizedState=ue}}function JO(o,u){if(typeof o!="function")throw Error(i(191,o));o.call(u)}function eN(o,u){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)JO(h[o],u)}var Qc=F(null),Jm=F(0);function tN(o,u){o=ks,le(Jm,o),le(Qc,u),ks=o|u.baseLanes}function z2(){le(Jm,ks),le(Qc,Qc.current)}function F2(){ks=Jm.current,G(Qc),G(Jm)}var Wi=F(null),Er=null;function To(o){var u=o.alternate;le(Wt,Wt.current&1),le(Wi,o),Er===null&&(u===null||Qc.current!==null||u.memoizedState!==null)&&(Er=o)}function L2(o){le(Wt,Wt.current),le(Wi,o),Er===null&&(Er=o)}function nN(o){o.tag===22?(le(Wt,Wt.current),le(Wi,o),Er===null&&(Er=o)):Mo()}function Mo(){le(Wt,Wt.current),le(Wi,Wi.current)}function Qi(o){G(Wi),Er===o&&(Er=null),G(Wt)}var Wt=F(0);function e0(o){for(var u=o;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||PS(h)||HS(h)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Es=0,Pe=null,_t=null,an=null,t0=!1,Zc=!1,ru=!1,n0=0,_h=0,Kc=null,BX=0;function Pt(){throw Error(i(321))}function U2(o,u){if(u===null)return!1;for(var h=0;h<u.length&&h<o.length;h++)if(!Xi(o[h],u[h]))return!1;return!0}function B2(o,u,h,m,x,E){return Es=E,Pe=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,N.H=o===null||o.memoizedState===null?BN:eS,ru=!1,E=h(m,x),ru=!1,Zc&&(E=rN(u,h,m,x)),iN(o),E}function iN(o){N.H=Ch;var u=_t!==null&&_t.next!==null;if(Es=0,an=_t=Pe=null,t0=!1,_h=0,Kc=null,u)throw Error(i(300));o===null||sn||(o=o.dependencies,o!==null&&Ym(o)&&(sn=!0))}function rN(o,u,h,m){Pe=o;var x=0;do{if(Zc&&(Kc=null),_h=0,Zc=!1,25<=x)throw Error(i(301));if(x+=1,an=_t=null,o.updateQueue!=null){var E=o.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}N.H=jN,E=u(h,m)}while(Zc);return E}function jX(){var o=N.H,u=o.useState()[0];return u=typeof u.then=="function"?wh(u):u,o=o.useState()[0],(_t!==null?_t.memoizedState:null)!==o&&(Pe.flags|=1024),u}function j2(){var o=n0!==0;return n0=0,o}function q2(o,u,h){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~h}function I2(o){if(t0){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}t0=!1}Es=0,an=_t=Pe=null,Zc=!1,_h=n0=0,Kc=null}function ai(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?Pe.memoizedState=an=o:an=an.next=o,an}function Qt(){if(_t===null){var o=Pe.alternate;o=o!==null?o.memoizedState:null}else o=_t.next;var u=an===null?Pe.memoizedState:an.next;if(u!==null)an=u,_t=o;else{if(o===null)throw Pe.alternate===null?Error(i(467)):Error(i(310));_t=o,o={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},an===null?Pe.memoizedState=an=o:an=an.next=o}return an}function i0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wh(o){var u=_h;return _h+=1,Kc===null&&(Kc=[]),o=VO(Kc,o,u),u=Pe,(an===null?u.memoizedState:an.next)===null&&(u=u.alternate,N.H=u===null||u.memoizedState===null?BN:eS),o}function r0(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return wh(o);if(o.$$typeof===A)return Nn(o)}throw Error(i(438,String(o)))}function P2(o){var u=null,h=Pe.updateQueue;if(h!==null&&(u=h.memoCache),u==null){var m=Pe.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(u={data:m.data.map(function(x){return x.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),h===null&&(h=i0(),Pe.updateQueue=h),h.memoCache=u,h=u.data[u.index],h===void 0)for(h=u.data[u.index]=Array(o),m=0;m<o;m++)h[m]=B;return u.index++,h}function _s(o,u){return typeof u=="function"?u(o):u}function a0(o){var u=Qt();return H2(u,_t,o)}function H2(o,u,h){var m=o.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=h;var x=o.baseQueue,E=m.pending;if(E!==null){if(x!==null){var C=x.next;x.next=E.next,E.next=C}u.baseQueue=x=E,m.pending=null}if(E=o.baseState,x===null)o.memoizedState=E;else{u=x.next;var O=C=null,L=null,W=u,ne=!1;do{var ue=W.lane&-536870913;if(ue!==W.lane?(Je&ue)===ue:(Es&ue)===ue){var Z=W.revertLane;if(Z===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),ue===Yc&&(ne=!0);else if((Es&Z)===Z){W=W.next,Z===Yc&&(ne=!0);continue}else ue={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},L===null?(O=L=ue,C=E):L=L.next=ue,Pe.lanes|=Z,No|=Z;ue=W.action,ru&&h(E,ue),E=W.hasEagerState?W.eagerState:h(E,ue)}else Z={lane:ue,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},L===null?(O=L=Z,C=E):L=L.next=Z,Pe.lanes|=ue,No|=ue;W=W.next}while(W!==null&&W!==u);if(L===null?C=E:L.next=O,!Xi(E,o.memoizedState)&&(sn=!0,ne&&(h=Xc,h!==null)))throw h;o.memoizedState=E,o.baseState=C,o.baseQueue=L,m.lastRenderedState=E}return x===null&&(m.lanes=0),[o.memoizedState,m.dispatch]}function G2(o){var u=Qt(),h=u.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=o;var m=h.dispatch,x=h.pending,E=u.memoizedState;if(x!==null){h.pending=null;var C=x=x.next;do E=o(E,C.action),C=C.next;while(C!==x);Xi(E,u.memoizedState)||(sn=!0),u.memoizedState=E,u.baseQueue===null&&(u.baseState=E),h.lastRenderedState=E}return[E,m]}function aN(o,u,h){var m=Pe,x=Qt(),E=nt;if(E){if(h===void 0)throw Error(i(407));h=h()}else h=u();var C=!Xi((_t||x).memoizedState,h);if(C&&(x.memoizedState=h,sn=!0),x=x.queue,V2(lN.bind(null,m,x,o),[o]),x.getSnapshot!==u||C||an!==null&&an.memoizedState.tag&1){if(m.flags|=2048,Jc(9,{destroy:void 0},oN.bind(null,m,x,h,u),null),$t===null)throw Error(i(349));E||(Es&127)!==0||sN(m,u,h)}return h}function sN(o,u,h){o.flags|=16384,o={getSnapshot:u,value:h},u=Pe.updateQueue,u===null?(u=i0(),Pe.updateQueue=u,u.stores=[o]):(h=u.stores,h===null?u.stores=[o]:h.push(o))}function oN(o,u,h,m){u.value=h,u.getSnapshot=m,uN(u)&&cN(o)}function lN(o,u,h){return h(function(){uN(u)&&cN(o)})}function uN(o){var u=o.getSnapshot;o=o.value;try{var h=u();return!Xi(o,h)}catch{return!0}}function cN(o){var u=Wl(o,2);u!==null&&Mi(u,o,2)}function Y2(o){var u=ai();if(typeof o=="function"){var h=o;if(o=h(),ru){vo(!0);try{h()}finally{vo(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:o},u}function fN(o,u,h,m){return o.baseState=h,H2(o,_t,typeof m=="function"?m:_s)}function qX(o,u,h,m,x){if(l0(o))throw Error(i(485));if(o=u.action,o!==null){var E={payload:x,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){E.listeners.push(C)}};N.T!==null?h(!0):E.isTransition=!1,m(E),h=u.pending,h===null?(E.next=u.pending=E,dN(u,E)):(E.next=h.next,u.pending=h.next=E)}}function dN(o,u){var h=u.action,m=u.payload,x=o.state;if(u.isTransition){var E=N.T,C={};N.T=C;try{var O=h(x,m),L=N.S;L!==null&&L(C,O),hN(o,u,O)}catch(W){X2(o,u,W)}finally{E!==null&&C.types!==null&&(E.types=C.types),N.T=E}}else try{E=h(x,m),hN(o,u,E)}catch(W){X2(o,u,W)}}function hN(o,u,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){gN(o,u,m)},function(m){return X2(o,u,m)}):gN(o,u,h)}function gN(o,u,h){u.status="fulfilled",u.value=h,pN(u),o.state=h,u=o.pending,u!==null&&(h=u.next,h===u?o.pending=null:(h=h.next,u.next=h,dN(o,h)))}function X2(o,u,h){var m=o.pending;if(o.pending=null,m!==null){m=m.next;do u.status="rejected",u.reason=h,pN(u),u=u.next;while(u!==m)}o.action=null}function pN(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function mN(o,u){return u}function yN(o,u){if(nt){var h=$t.formState;if(h!==null){e:{var m=Pe;if(nt){if(Ot){t:{for(var x=Ot,E=Sr;x.nodeType!==8;){if(!E){x=null;break t}if(x=_r(x.nextSibling),x===null){x=null;break t}}E=x.data,x=E==="F!"||E==="F"?x:null}if(x){Ot=_r(x.nextSibling),m=x.data==="F!";break e}}_o(m)}m=!1}m&&(u=h[0])}}return h=ai(),h.memoizedState=h.baseState=u,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mN,lastRenderedState:u},h.queue=m,h=FN.bind(null,Pe,m),m.dispatch=h,m=Y2(!1),E=J2.bind(null,Pe,!1,m.queue),m=ai(),x={state:u,dispatch:null,action:o,pending:null},m.queue=x,h=qX.bind(null,Pe,x,E,h),x.dispatch=h,m.memoizedState=o,[u,h,!1]}function vN(o){var u=Qt();return bN(u,_t,o)}function bN(o,u,h){if(u=H2(o,u,mN)[0],o=a0(_s)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var m=wh(u)}catch(C){throw C===Vc?Wm:C}else m=u;u=Qt();var x=u.queue,E=x.dispatch;return h!==u.memoizedState&&(Pe.flags|=2048,Jc(9,{destroy:void 0},IX.bind(null,x,h),null)),[m,E,o]}function IX(o,u){o.action=u}function xN(o){var u=Qt(),h=_t;if(h!==null)return bN(u,h,o);Qt(),u=u.memoizedState,h=Qt();var m=h.queue.dispatch;return h.memoizedState=o,[u,m,!1]}function Jc(o,u,h,m){return o={tag:o,create:h,deps:m,inst:u,next:null},u=Pe.updateQueue,u===null&&(u=i0(),Pe.updateQueue=u),h=u.lastEffect,h===null?u.lastEffect=o.next=o:(m=h.next,h.next=o,o.next=m,u.lastEffect=o),o}function SN(){return Qt().memoizedState}function s0(o,u,h,m){var x=ai();Pe.flags|=o,x.memoizedState=Jc(1|u,{destroy:void 0},h,m===void 0?null:m)}function o0(o,u,h,m){var x=Qt();m=m===void 0?null:m;var E=x.memoizedState.inst;_t!==null&&m!==null&&U2(m,_t.memoizedState.deps)?x.memoizedState=Jc(u,E,h,m):(Pe.flags|=o,x.memoizedState=Jc(1|u,E,h,m))}function EN(o,u){s0(8390656,8,o,u)}function V2(o,u){o0(2048,8,o,u)}function PX(o){Pe.flags|=4;var u=Pe.updateQueue;if(u===null)u=i0(),Pe.updateQueue=u,u.events=[o];else{var h=u.events;h===null?u.events=[o]:h.push(o)}}function _N(o){var u=Qt().memoizedState;return PX({ref:u,nextImpl:o}),function(){if((dt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}function wN(o,u){return o0(4,2,o,u)}function AN(o,u){return o0(4,4,o,u)}function CN(o,u){if(typeof u=="function"){o=o();var h=u(o);return function(){typeof h=="function"?h():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function $N(o,u,h){h=h!=null?h.concat([o]):null,o0(4,4,CN.bind(null,u,o),h)}function W2(){}function TN(o,u){var h=Qt();u=u===void 0?null:u;var m=h.memoizedState;return u!==null&&U2(u,m[1])?m[0]:(h.memoizedState=[o,u],o)}function MN(o,u){var h=Qt();u=u===void 0?null:u;var m=h.memoizedState;if(u!==null&&U2(u,m[1]))return m[0];if(m=o(),ru){vo(!0);try{o()}finally{vo(!1)}}return h.memoizedState=[m,u],m}function Q2(o,u,h){return h===void 0||(Es&1073741824)!==0&&(Je&261930)===0?o.memoizedState=u:(o.memoizedState=h,o=kD(),Pe.lanes|=o,No|=o,h)}function kN(o,u,h,m){return Xi(h,u)?h:Qc.current!==null?(o=Q2(o,h,m),Xi(o,u)||(sn=!0),o):(Es&42)===0||(Es&1073741824)!==0&&(Je&261930)===0?(sn=!0,o.memoizedState=h):(o=kD(),Pe.lanes|=o,No|=o,u)}function ON(o,u,h,m,x){var E=j.p;j.p=E!==0&&8>E?E:8;var C=N.T,O={};N.T=O,J2(o,!1,u,h);try{var L=x(),W=N.S;if(W!==null&&W(O,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ne=UX(L,m);Ah(o,u,ne,Ji(o))}else Ah(o,u,m,Ji(o))}catch(ue){Ah(o,u,{then:function(){},status:"rejected",reason:ue},Ji())}finally{j.p=E,C!==null&&O.types!==null&&(C.types=O.types),N.T=C}}function HX(){}function Z2(o,u,h,m){if(o.tag!==5)throw Error(i(476));var x=NN(o).queue;ON(o,x,u,X,h===null?HX:function(){return DN(o),h(m)})}function NN(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:X},next:null};var h={};return u.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:h},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function DN(o){var u=NN(o);u.next===null&&(u=o.alternate.memoizedState),Ah(o,u.next.queue,{},Ji())}function K2(){return Nn(Ih)}function RN(){return Qt().memoizedState}function zN(){return Qt().memoizedState}function GX(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var h=Ji();o=Co(h);var m=$o(u,o,h);m!==null&&(Mi(m,u,h),xh(m,u,h)),u={cache:$2()},o.payload=u;return}u=u.return}}function YX(o,u,h){var m=Ji();h={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},l0(o)?LN(u,h):(h=m2(o,u,h,m),h!==null&&(Mi(h,o,m),UN(h,u,m)))}function FN(o,u,h){var m=Ji();Ah(o,u,h,m)}function Ah(o,u,h,m){var x={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(l0(o))LN(u,x);else{var E=o.alternate;if(o.lanes===0&&(E===null||E.lanes===0)&&(E=u.lastRenderedReducer,E!==null))try{var C=u.lastRenderedState,O=E(C,h);if(x.hasEagerState=!0,x.eagerState=O,Xi(O,C))return Im(o,u,x,0),$t===null&&qm(),!1}catch{}finally{}if(h=m2(o,u,x,m),h!==null)return Mi(h,o,m),UN(h,u,m),!0}return!1}function J2(o,u,h,m){if(m={lane:2,revertLane:OS(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},l0(o)){if(u)throw Error(i(479))}else u=m2(o,h,m,2),u!==null&&Mi(u,o,2)}function l0(o){var u=o.alternate;return o===Pe||u!==null&&u===Pe}function LN(o,u){Zc=t0=!0;var h=o.pending;h===null?u.next=u:(u.next=h.next,h.next=u),o.pending=u}function UN(o,u,h){if((h&4194048)!==0){var m=u.lanes;m&=o.pendingLanes,h|=m,u.lanes=h,Pk(o,h)}}var Ch={readContext:Nn,use:r0,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useLayoutEffect:Pt,useInsertionEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useSyncExternalStore:Pt,useId:Pt,useHostTransitionStatus:Pt,useFormState:Pt,useActionState:Pt,useOptimistic:Pt,useMemoCache:Pt,useCacheRefresh:Pt};Ch.useEffectEvent=Pt;var BN={readContext:Nn,use:r0,useCallback:function(o,u){return ai().memoizedState=[o,u===void 0?null:u],o},useContext:Nn,useEffect:EN,useImperativeHandle:function(o,u,h){h=h!=null?h.concat([o]):null,s0(4194308,4,CN.bind(null,u,o),h)},useLayoutEffect:function(o,u){return s0(4194308,4,o,u)},useInsertionEffect:function(o,u){s0(4,2,o,u)},useMemo:function(o,u){var h=ai();u=u===void 0?null:u;var m=o();if(ru){vo(!0);try{o()}finally{vo(!1)}}return h.memoizedState=[m,u],m},useReducer:function(o,u,h){var m=ai();if(h!==void 0){var x=h(u);if(ru){vo(!0);try{h(u)}finally{vo(!1)}}}else x=u;return m.memoizedState=m.baseState=x,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:x},m.queue=o,o=o.dispatch=YX.bind(null,Pe,o),[m.memoizedState,o]},useRef:function(o){var u=ai();return o={current:o},u.memoizedState=o},useState:function(o){o=Y2(o);var u=o.queue,h=FN.bind(null,Pe,u);return u.dispatch=h,[o.memoizedState,h]},useDebugValue:W2,useDeferredValue:function(o,u){var h=ai();return Q2(h,o,u)},useTransition:function(){var o=Y2(!1);return o=ON.bind(null,Pe,o.queue,!0,!1),ai().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,h){var m=Pe,x=ai();if(nt){if(h===void 0)throw Error(i(407));h=h()}else{if(h=u(),$t===null)throw Error(i(349));(Je&127)!==0||sN(m,u,h)}x.memoizedState=h;var E={value:h,getSnapshot:u};return x.queue=E,EN(lN.bind(null,m,E,o),[o]),m.flags|=2048,Jc(9,{destroy:void 0},oN.bind(null,m,E,h,u),null),h},useId:function(){var o=ai(),u=$t.identifierPrefix;if(nt){var h=Ca,m=Aa;h=(m&~(1<<32-Yi(m)-1)).toString(32)+h,u="_"+u+"R_"+h,h=n0++,0<h&&(u+="H"+h.toString(32)),u+="_"}else h=BX++,u="_"+u+"r_"+h.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:K2,useFormState:yN,useActionState:yN,useOptimistic:function(o){var u=ai();u.memoizedState=u.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=h,u=J2.bind(null,Pe,!0,h),h.dispatch=u,[o,u]},useMemoCache:P2,useCacheRefresh:function(){return ai().memoizedState=GX.bind(null,Pe)},useEffectEvent:function(o){var u=ai(),h={impl:o};return u.memoizedState=h,function(){if((dt&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}},eS={readContext:Nn,use:r0,useCallback:TN,useContext:Nn,useEffect:V2,useImperativeHandle:$N,useInsertionEffect:wN,useLayoutEffect:AN,useMemo:MN,useReducer:a0,useRef:SN,useState:function(){return a0(_s)},useDebugValue:W2,useDeferredValue:function(o,u){var h=Qt();return kN(h,_t.memoizedState,o,u)},useTransition:function(){var o=a0(_s)[0],u=Qt().memoizedState;return[typeof o=="boolean"?o:wh(o),u]},useSyncExternalStore:aN,useId:RN,useHostTransitionStatus:K2,useFormState:vN,useActionState:vN,useOptimistic:function(o,u){var h=Qt();return fN(h,_t,o,u)},useMemoCache:P2,useCacheRefresh:zN};eS.useEffectEvent=_N;var jN={readContext:Nn,use:r0,useCallback:TN,useContext:Nn,useEffect:V2,useImperativeHandle:$N,useInsertionEffect:wN,useLayoutEffect:AN,useMemo:MN,useReducer:G2,useRef:SN,useState:function(){return G2(_s)},useDebugValue:W2,useDeferredValue:function(o,u){var h=Qt();return _t===null?Q2(h,o,u):kN(h,_t.memoizedState,o,u)},useTransition:function(){var o=G2(_s)[0],u=Qt().memoizedState;return[typeof o=="boolean"?o:wh(o),u]},useSyncExternalStore:aN,useId:RN,useHostTransitionStatus:K2,useFormState:xN,useActionState:xN,useOptimistic:function(o,u){var h=Qt();return _t!==null?fN(h,_t,o,u):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:P2,useCacheRefresh:zN};jN.useEffectEvent=_N;function tS(o,u,h,m){u=o.memoizedState,h=h(m,u),h=h==null?u:g({},u,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var nS={enqueueSetState:function(o,u,h){o=o._reactInternals;var m=Ji(),x=Co(m);x.payload=u,h!=null&&(x.callback=h),u=$o(o,x,m),u!==null&&(Mi(u,o,m),xh(u,o,m))},enqueueReplaceState:function(o,u,h){o=o._reactInternals;var m=Ji(),x=Co(m);x.tag=1,x.payload=u,h!=null&&(x.callback=h),u=$o(o,x,m),u!==null&&(Mi(u,o,m),xh(u,o,m))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var h=Ji(),m=Co(h);m.tag=2,u!=null&&(m.callback=u),u=$o(o,m,h),u!==null&&(Mi(u,o,h),xh(u,o,h))}};function qN(o,u,h,m,x,E,C){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,E,C):u.prototype&&u.prototype.isPureReactComponent?!dh(h,m)||!dh(x,E):!0}function IN(o,u,h,m){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,m),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,m),u.state!==o&&nS.enqueueReplaceState(u,u.state,null)}function au(o,u){var h=u;if("ref"in u){h={};for(var m in u)m!=="ref"&&(h[m]=u[m])}if(o=o.defaultProps){h===u&&(h=g({},h));for(var x in o)h[x]===void 0&&(h[x]=o[x])}return h}function PN(o){jm(o)}function HN(o){console.error(o)}function GN(o){jm(o)}function u0(o,u){try{var h=o.onUncaughtError;h(u.value,{componentStack:u.stack})}catch(m){setTimeout(function(){throw m})}}function YN(o,u,h){try{var m=o.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function iS(o,u,h){return h=Co(h),h.tag=3,h.payload={element:null},h.callback=function(){u0(o,u)},h}function XN(o){return o=Co(o),o.tag=3,o}function VN(o,u,h,m){var x=h.type.getDerivedStateFromError;if(typeof x=="function"){var E=m.value;o.payload=function(){return x(E)},o.callback=function(){YN(u,h,m)}}var C=h.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(o.callback=function(){YN(u,h,m),typeof x!="function"&&(Do===null?Do=new Set([this]):Do.add(this));var O=m.stack;this.componentDidCatch(m.value,{componentStack:O!==null?O:""})})}function XX(o,u,h,m,x){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(u=h.alternate,u!==null&&Gc(u,h,x,!0),h=Wi.current,h!==null){switch(h.tag){case 31:case 13:return Er===null?S0():h.alternate===null&&Ht===0&&(Ht=3),h.flags&=-257,h.flags|=65536,h.lanes=x,m===Qm?h.flags|=16384:(u=h.updateQueue,u===null?h.updateQueue=new Set([m]):u.add(m),TS(o,m,x)),!1;case 22:return h.flags|=65536,m===Qm?h.flags|=16384:(u=h.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=u):(h=u.retryQueue,h===null?u.retryQueue=new Set([m]):h.add(m)),TS(o,m,x)),!1}throw Error(i(435,h.tag))}return TS(o,m,x),S0(),!1}if(nt)return u=Wi.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=x,m!==E2&&(o=Error(i(422),{cause:m}),ph(vr(o,h)))):(m!==E2&&(u=Error(i(423),{cause:m}),ph(vr(u,h))),o=o.current.alternate,o.flags|=65536,x&=-x,o.lanes|=x,m=vr(m,h),x=iS(o.stateNode,m,x),D2(o,x),Ht!==4&&(Ht=2)),!1;var E=Error(i(520),{cause:m});if(E=vr(E,h),Rh===null?Rh=[E]:Rh.push(E),Ht!==4&&(Ht=2),u===null)return!0;m=vr(m,h),h=u;do{switch(h.tag){case 3:return h.flags|=65536,o=x&-x,h.lanes|=o,o=iS(h.stateNode,m,o),D2(h,o),!1;case 1:if(u=h.type,E=h.stateNode,(h.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Do===null||!Do.has(E))))return h.flags|=65536,x&=-x,h.lanes|=x,x=XN(x),VN(x,o,h,m),D2(h,x),!1}h=h.return}while(h!==null);return!1}var rS=Error(i(461)),sn=!1;function Dn(o,u,h,m){u.child=o===null?KO(u,null,h,m):iu(u,o.child,h,m)}function WN(o,u,h,m,x){h=h.render;var E=u.ref;if("ref"in m){var C={};for(var O in m)O!=="ref"&&(C[O]=m[O])}else C=m;return Jl(u),m=B2(o,u,h,C,E,x),O=j2(),o!==null&&!sn?(q2(o,u,x),ws(o,u,x)):(nt&&O&&x2(u),u.flags|=1,Dn(o,u,m,x),u.child)}function QN(o,u,h,m,x){if(o===null){var E=h.type;return typeof E=="function"&&!y2(E)&&E.defaultProps===void 0&&h.compare===null?(u.tag=15,u.type=E,ZN(o,u,E,m,x)):(o=Hm(h.type,null,m,u,u.mode,x),o.ref=u.ref,o.return=u,u.child=o)}if(E=o.child,!dS(o,x)){var C=E.memoizedProps;if(h=h.compare,h=h!==null?h:dh,h(C,m)&&o.ref===u.ref)return ws(o,u,x)}return u.flags|=1,o=vs(E,m),o.ref=u.ref,o.return=u,u.child=o}function ZN(o,u,h,m,x){if(o!==null){var E=o.memoizedProps;if(dh(E,m)&&o.ref===u.ref)if(sn=!1,u.pendingProps=m=E,dS(o,x))(o.flags&131072)!==0&&(sn=!0);else return u.lanes=o.lanes,ws(o,u,x)}return aS(o,u,h,m,x)}function KN(o,u,h,m){var x=m.children,E=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((u.flags&128)!==0){if(E=E!==null?E.baseLanes|h:h,o!==null){for(m=u.child=o.child,x=0;m!==null;)x=x|m.lanes|m.childLanes,m=m.sibling;m=x&~E}else m=0,u.child=null;return JN(o,u,E,h,m)}if((h&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&Vm(u,E!==null?E.cachePool:null),E!==null?tN(u,E):z2(),nN(u);else return m=u.lanes=536870912,JN(o,u,E!==null?E.baseLanes|h:h,h,m)}else E!==null?(Vm(u,E.cachePool),tN(u,E),Mo(),u.memoizedState=null):(o!==null&&Vm(u,null),z2(),Mo());return Dn(o,u,x,h),u.child}function $h(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function JN(o,u,h,m,x){var E=M2();return E=E===null?null:{parent:rn._currentValue,pool:E},u.memoizedState={baseLanes:h,cachePool:E},o!==null&&Vm(u,null),z2(),nN(u),o!==null&&Gc(o,u,m,!0),u.childLanes=x,null}function c0(o,u){return u=d0({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function eD(o,u,h){return iu(u,o.child,null,h),o=c0(u,u.pendingProps),o.flags|=2,Qi(u),u.memoizedState=null,o}function VX(o,u,h){var m=u.pendingProps,x=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(nt){if(m.mode==="hidden")return o=c0(u,m),u.lanes=536870912,$h(null,o);if(L2(u),(o=Ot)?(o=d5(o,Sr),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:So!==null?{id:Aa,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},h=LO(o),h.return=u,u.child=h,On=u,Ot=null)):o=null,o===null)throw _o(u);return u.lanes=536870912,null}return c0(u,m)}var E=o.memoizedState;if(E!==null){var C=E.dehydrated;if(L2(u),x)if(u.flags&256)u.flags&=-257,u=eD(o,u,h);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(i(558));else if(sn||Gc(o,u,h,!1),x=(h&o.childLanes)!==0,sn||x){if(m=$t,m!==null&&(C=Hk(m,h),C!==0&&C!==E.retryLane))throw E.retryLane=C,Wl(o,C),Mi(m,o,C),rS;S0(),u=eD(o,u,h)}else o=E.treeContext,Ot=_r(C.nextSibling),On=u,nt=!0,Eo=null,Sr=!1,o!==null&&jO(u,o),u=c0(u,m),u.flags|=4096;return u}return o=vs(o.child,{mode:m.mode,children:m.children}),o.ref=u.ref,u.child=o,o.return=u,o}function f0(o,u){var h=u.ref;if(h===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(o===null||o.ref!==h)&&(u.flags|=4194816)}}function aS(o,u,h,m,x){return Jl(u),h=B2(o,u,h,m,void 0,x),m=j2(),o!==null&&!sn?(q2(o,u,x),ws(o,u,x)):(nt&&m&&x2(u),u.flags|=1,Dn(o,u,h,x),u.child)}function tD(o,u,h,m,x,E){return Jl(u),u.updateQueue=null,h=rN(u,m,h,x),iN(o),m=j2(),o!==null&&!sn?(q2(o,u,E),ws(o,u,E)):(nt&&m&&x2(u),u.flags|=1,Dn(o,u,h,E),u.child)}function nD(o,u,h,m,x){if(Jl(u),u.stateNode===null){var E=qc,C=h.contextType;typeof C=="object"&&C!==null&&(E=Nn(C)),E=new h(m,E),u.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=nS,u.stateNode=E,E._reactInternals=u,E=u.stateNode,E.props=m,E.state=u.memoizedState,E.refs={},O2(u),C=h.contextType,E.context=typeof C=="object"&&C!==null?Nn(C):qc,E.state=u.memoizedState,C=h.getDerivedStateFromProps,typeof C=="function"&&(tS(u,h,C,m),E.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(C=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),C!==E.state&&nS.enqueueReplaceState(E,E.state,null),Eh(u,m,E,x),Sh(),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308),m=!0}else if(o===null){E=u.stateNode;var O=u.memoizedProps,L=au(h,O);E.props=L;var W=E.context,ne=h.contextType;C=qc,typeof ne=="object"&&ne!==null&&(C=Nn(ne));var ue=h.getDerivedStateFromProps;ne=typeof ue=="function"||typeof E.getSnapshotBeforeUpdate=="function",O=u.pendingProps!==O,ne||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(O||W!==C)&&IN(u,E,m,C),Ao=!1;var Z=u.memoizedState;E.state=Z,Eh(u,m,E,x),Sh(),W=u.memoizedState,O||Z!==W||Ao?(typeof ue=="function"&&(tS(u,h,ue,m),W=u.memoizedState),(L=Ao||qN(u,h,L,m,Z,W,C))?(ne||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(u.flags|=4194308)):(typeof E.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=m,u.memoizedState=W),E.props=m,E.state=W,E.context=C,m=L):(typeof E.componentDidMount=="function"&&(u.flags|=4194308),m=!1)}else{E=u.stateNode,N2(o,u),C=u.memoizedProps,ne=au(h,C),E.props=ne,ue=u.pendingProps,Z=E.context,W=h.contextType,L=qc,typeof W=="object"&&W!==null&&(L=Nn(W)),O=h.getDerivedStateFromProps,(W=typeof O=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==ue||Z!==L)&&IN(u,E,m,L),Ao=!1,Z=u.memoizedState,E.state=Z,Eh(u,m,E,x),Sh();var ee=u.memoizedState;C!==ue||Z!==ee||Ao||o!==null&&o.dependencies!==null&&Ym(o.dependencies)?(typeof O=="function"&&(tS(u,h,O,m),ee=u.memoizedState),(ne=Ao||qN(u,h,ne,m,Z,ee,L)||o!==null&&o.dependencies!==null&&Ym(o.dependencies))?(W||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(m,ee,L),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(m,ee,L)),typeof E.componentDidUpdate=="function"&&(u.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof E.componentDidUpdate!="function"||C===o.memoizedProps&&Z===o.memoizedState||(u.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&Z===o.memoizedState||(u.flags|=1024),u.memoizedProps=m,u.memoizedState=ee),E.props=m,E.state=ee,E.context=L,m=ne):(typeof E.componentDidUpdate!="function"||C===o.memoizedProps&&Z===o.memoizedState||(u.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&Z===o.memoizedState||(u.flags|=1024),m=!1)}return E=m,f0(o,u),m=(u.flags&128)!==0,E||m?(E=u.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:E.render(),u.flags|=1,o!==null&&m?(u.child=iu(u,o.child,null,x),u.child=iu(u,null,h,x)):Dn(o,u,h,x),u.memoizedState=E.state,o=u.child):o=ws(o,u,x),o}function iD(o,u,h,m){return Zl(),u.flags|=256,Dn(o,u,h,m),u.child}var sS={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function oS(o){return{baseLanes:o,cachePool:YO()}}function lS(o,u,h){return o=o!==null?o.childLanes&~h:0,u&&(o|=Ki),o}function rD(o,u,h){var m=u.pendingProps,x=!1,E=(u.flags&128)!==0,C;if((C=E)||(C=o!==null&&o.memoizedState===null?!1:(Wt.current&2)!==0),C&&(x=!0,u.flags&=-129),C=(u.flags&32)!==0,u.flags&=-33,o===null){if(nt){if(x?To(u):Mo(),(o=Ot)?(o=d5(o,Sr),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:So!==null?{id:Aa,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},h=LO(o),h.return=u,u.child=h,On=u,Ot=null)):o=null,o===null)throw _o(u);return HS(o)?u.lanes=32:u.lanes=536870912,null}var O=m.children;return m=m.fallback,x?(Mo(),x=u.mode,O=d0({mode:"hidden",children:O},x),m=Ql(m,x,h,null),O.return=u,m.return=u,O.sibling=m,u.child=O,m=u.child,m.memoizedState=oS(h),m.childLanes=lS(o,C,h),u.memoizedState=sS,$h(null,m)):(To(u),uS(u,O))}var L=o.memoizedState;if(L!==null&&(O=L.dehydrated,O!==null)){if(E)u.flags&256?(To(u),u.flags&=-257,u=cS(o,u,h)):u.memoizedState!==null?(Mo(),u.child=o.child,u.flags|=128,u=null):(Mo(),O=m.fallback,x=u.mode,m=d0({mode:"visible",children:m.children},x),O=Ql(O,x,h,null),O.flags|=2,m.return=u,O.return=u,m.sibling=O,u.child=m,iu(u,o.child,null,h),m=u.child,m.memoizedState=oS(h),m.childLanes=lS(o,C,h),u.memoizedState=sS,u=$h(null,m));else if(To(u),HS(O)){if(C=O.nextSibling&&O.nextSibling.dataset,C)var W=C.dgst;C=W,m=Error(i(419)),m.stack="",m.digest=C,ph({value:m,source:null,stack:null}),u=cS(o,u,h)}else if(sn||Gc(o,u,h,!1),C=(h&o.childLanes)!==0,sn||C){if(C=$t,C!==null&&(m=Hk(C,h),m!==0&&m!==L.retryLane))throw L.retryLane=m,Wl(o,m),Mi(C,o,m),rS;PS(O)||S0(),u=cS(o,u,h)}else PS(O)?(u.flags|=192,u.child=o.child,u=null):(o=L.treeContext,Ot=_r(O.nextSibling),On=u,nt=!0,Eo=null,Sr=!1,o!==null&&jO(u,o),u=uS(u,m.children),u.flags|=4096);return u}return x?(Mo(),O=m.fallback,x=u.mode,L=o.child,W=L.sibling,m=vs(L,{mode:"hidden",children:m.children}),m.subtreeFlags=L.subtreeFlags&65011712,W!==null?O=vs(W,O):(O=Ql(O,x,h,null),O.flags|=2),O.return=u,m.return=u,m.sibling=O,u.child=m,$h(null,m),m=u.child,O=o.child.memoizedState,O===null?O=oS(h):(x=O.cachePool,x!==null?(L=rn._currentValue,x=x.parent!==L?{parent:L,pool:L}:x):x=YO(),O={baseLanes:O.baseLanes|h,cachePool:x}),m.memoizedState=O,m.childLanes=lS(o,C,h),u.memoizedState=sS,$h(o.child,m)):(To(u),h=o.child,o=h.sibling,h=vs(h,{mode:"visible",children:m.children}),h.return=u,h.sibling=null,o!==null&&(C=u.deletions,C===null?(u.deletions=[o],u.flags|=16):C.push(o)),u.child=h,u.memoizedState=null,h)}function uS(o,u){return u=d0({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function d0(o,u){return o=Vi(22,o,null,u),o.lanes=0,o}function cS(o,u,h){return iu(u,o.child,null,h),o=uS(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function aD(o,u,h){o.lanes|=u;var m=o.alternate;m!==null&&(m.lanes|=u),A2(o.return,u,h)}function fS(o,u,h,m,x,E){var C=o.memoizedState;C===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:x,treeForkCount:E}:(C.isBackwards=u,C.rendering=null,C.renderingStartTime=0,C.last=m,C.tail=h,C.tailMode=x,C.treeForkCount=E)}function sD(o,u,h){var m=u.pendingProps,x=m.revealOrder,E=m.tail;m=m.children;var C=Wt.current,O=(C&2)!==0;if(O?(C=C&1|2,u.flags|=128):C&=1,le(Wt,C),Dn(o,u,m,h),m=nt?gh:0,!O&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&aD(o,h,u);else if(o.tag===19)aD(o,h,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(x){case"forwards":for(h=u.child,x=null;h!==null;)o=h.alternate,o!==null&&e0(o)===null&&(x=h),h=h.sibling;h=x,h===null?(x=u.child,u.child=null):(x=h.sibling,h.sibling=null),fS(u,!1,x,h,E,m);break;case"backwards":case"unstable_legacy-backwards":for(h=null,x=u.child,u.child=null;x!==null;){if(o=x.alternate,o!==null&&e0(o)===null){u.child=x;break}o=x.sibling,x.sibling=h,h=x,x=o}fS(u,!0,h,null,E,m);break;case"together":fS(u,!1,null,null,void 0,m);break;default:u.memoizedState=null}return u.child}function ws(o,u,h){if(o!==null&&(u.dependencies=o.dependencies),No|=u.lanes,(h&u.childLanes)===0)if(o!==null){if(Gc(o,u,h,!1),(h&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(i(153));if(u.child!==null){for(o=u.child,h=vs(o,o.pendingProps),u.child=h,h.return=u;o.sibling!==null;)o=o.sibling,h=h.sibling=vs(o,o.pendingProps),h.return=u;h.sibling=null}return u.child}function dS(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&Ym(o)))}function WX(o,u,h){switch(u.tag){case 3:ze(u,u.stateNode.containerInfo),wo(u,rn,o.memoizedState.cache),Zl();break;case 27:case 5:Le(u);break;case 4:ze(u,u.stateNode.containerInfo);break;case 10:wo(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,L2(u),null;break;case 13:var m=u.memoizedState;if(m!==null)return m.dehydrated!==null?(To(u),u.flags|=128,null):(h&u.child.childLanes)!==0?rD(o,u,h):(To(u),o=ws(o,u,h),o!==null?o.sibling:null);To(u);break;case 19:var x=(o.flags&128)!==0;if(m=(h&u.childLanes)!==0,m||(Gc(o,u,h,!1),m=(h&u.childLanes)!==0),x){if(m)return sD(o,u,h);u.flags|=128}if(x=u.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),le(Wt,Wt.current),m)break;return null;case 22:return u.lanes=0,KN(o,u,h,u.pendingProps);case 24:wo(u,rn,o.memoizedState.cache)}return ws(o,u,h)}function oD(o,u,h){if(o!==null)if(o.memoizedProps!==u.pendingProps)sn=!0;else{if(!dS(o,h)&&(u.flags&128)===0)return sn=!1,WX(o,u,h);sn=(o.flags&131072)!==0}else sn=!1,nt&&(u.flags&1048576)!==0&&BO(u,gh,u.index);switch(u.lanes=0,u.tag){case 16:e:{var m=u.pendingProps;if(o=tu(u.elementType),u.type=o,typeof o=="function")y2(o)?(m=au(o,m),u.tag=1,u=nD(null,u,o,m,h)):(u.tag=0,u=aS(null,u,o,m,h));else{if(o!=null){var x=o.$$typeof;if(x===$){u.tag=11,u=WN(null,u,o,m,h);break e}else if(x===T){u.tag=14,u=QN(null,u,o,m,h);break e}}throw u=P(o)||o,Error(i(306,u,""))}}return u;case 0:return aS(o,u,u.type,u.pendingProps,h);case 1:return m=u.type,x=au(m,u.pendingProps),nD(o,u,m,x,h);case 3:e:{if(ze(u,u.stateNode.containerInfo),o===null)throw Error(i(387));m=u.pendingProps;var E=u.memoizedState;x=E.element,N2(o,u),Eh(u,m,null,h);var C=u.memoizedState;if(m=C.cache,wo(u,rn,m),m!==E.cache&&C2(u,[rn],h,!0),Sh(),m=C.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:C.cache},u.updateQueue.baseState=E,u.memoizedState=E,u.flags&256){u=iD(o,u,m,h);break e}else if(m!==x){x=vr(Error(i(424)),u),ph(x),u=iD(o,u,m,h);break e}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Ot=_r(o.firstChild),On=u,nt=!0,Eo=null,Sr=!0,h=KO(u,null,m,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Zl(),m===x){u=ws(o,u,h);break e}Dn(o,u,m,h)}u=u.child}return u;case 26:return f0(o,u),o===null?(h=v5(u.type,null,u.pendingProps,null))?u.memoizedState=h:nt||(h=u.type,o=u.pendingProps,m=T0(ve.current).createElement(h),m[kn]=u,m[_i]=o,Rn(m,h,o),vn(m),u.stateNode=m):u.memoizedState=v5(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return Le(u),o===null&&nt&&(m=u.stateNode=p5(u.type,u.pendingProps,ve.current),On=u,Sr=!0,x=Ot,Lo(u.type)?(GS=x,Ot=_r(m.firstChild)):Ot=x),Dn(o,u,u.pendingProps.children,h),f0(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&nt&&((x=m=Ot)&&(m=AV(m,u.type,u.pendingProps,Sr),m!==null?(u.stateNode=m,On=u,Ot=_r(m.firstChild),Sr=!1,x=!0):x=!1),x||_o(u)),Le(u),x=u.type,E=u.pendingProps,C=o!==null?o.memoizedProps:null,m=E.children,jS(x,E)?m=null:C!==null&&jS(x,C)&&(u.flags|=32),u.memoizedState!==null&&(x=B2(o,u,jX,null,null,h),Ih._currentValue=x),f0(o,u),Dn(o,u,m,h),u.child;case 6:return o===null&&nt&&((o=h=Ot)&&(h=CV(h,u.pendingProps,Sr),h!==null?(u.stateNode=h,On=u,Ot=null,o=!0):o=!1),o||_o(u)),null;case 13:return rD(o,u,h);case 4:return ze(u,u.stateNode.containerInfo),m=u.pendingProps,o===null?u.child=iu(u,null,m,h):Dn(o,u,m,h),u.child;case 11:return WN(o,u,u.type,u.pendingProps,h);case 7:return Dn(o,u,u.pendingProps,h),u.child;case 8:return Dn(o,u,u.pendingProps.children,h),u.child;case 12:return Dn(o,u,u.pendingProps.children,h),u.child;case 10:return m=u.pendingProps,wo(u,u.type,m.value),Dn(o,u,m.children,h),u.child;case 9:return x=u.type._context,m=u.pendingProps.children,Jl(u),x=Nn(x),m=m(x),u.flags|=1,Dn(o,u,m,h),u.child;case 14:return QN(o,u,u.type,u.pendingProps,h);case 15:return ZN(o,u,u.type,u.pendingProps,h);case 19:return sD(o,u,h);case 31:return VX(o,u,h);case 22:return KN(o,u,h,u.pendingProps);case 24:return Jl(u),m=Nn(rn),o===null?(x=M2(),x===null&&(x=$t,E=$2(),x.pooledCache=E,E.refCount++,E!==null&&(x.pooledCacheLanes|=h),x=E),u.memoizedState={parent:m,cache:x},O2(u),wo(u,rn,x)):((o.lanes&h)!==0&&(N2(o,u),Eh(u,null,null,h),Sh()),x=o.memoizedState,E=u.memoizedState,x.parent!==m?(x={parent:m,cache:m},u.memoizedState=x,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=x),wo(u,rn,m)):(m=E.cache,wo(u,rn,m),m!==x.cache&&C2(u,[rn],h,!0))),Dn(o,u,u.pendingProps.children,h),u.child;case 29:throw u.pendingProps}throw Error(i(156,u.tag))}function As(o){o.flags|=4}function hS(o,u,h,m,x){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(x&335544128)===x)if(o.stateNode.complete)o.flags|=8192;else if(RD())o.flags|=8192;else throw nu=Qm,k2}else o.flags&=-16777217}function lD(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!_5(u))if(RD())o.flags|=8192;else throw nu=Qm,k2}function h0(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?qk():536870912,o.lanes|=u,rf|=u)}function Th(o,u){if(!nt)switch(o.tailMode){case"hidden":u=o.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function Nt(o){var u=o.alternate!==null&&o.alternate.child===o.child,h=0,m=0;if(u)for(var x=o.child;x!==null;)h|=x.lanes|x.childLanes,m|=x.subtreeFlags&65011712,m|=x.flags&65011712,x.return=o,x=x.sibling;else for(x=o.child;x!==null;)h|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=o,x=x.sibling;return o.subtreeFlags|=m,o.childLanes=h,u}function QX(o,u,h){var m=u.pendingProps;switch(S2(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(u),null;case 1:return Nt(u),null;case 3:return h=u.stateNode,m=null,o!==null&&(m=o.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),Ss(rn),ce(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(Hc(u)?As(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,_2())),Nt(u),null;case 26:var x=u.type,E=u.memoizedState;return o===null?(As(u),E!==null?(Nt(u),lD(u,E)):(Nt(u),hS(u,x,null,m,h))):E?E!==o.memoizedState?(As(u),Nt(u),lD(u,E)):(Nt(u),u.flags&=-16777217):(o=o.memoizedProps,o!==m&&As(u),Nt(u),hS(u,x,o,m,h)),null;case 27:if(je(u),h=ve.current,x=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==m&&As(u);else{if(!m){if(u.stateNode===null)throw Error(i(166));return Nt(u),null}o=I.current,Hc(u)?qO(u):(o=p5(x,m,h),u.stateNode=o,As(u))}return Nt(u),null;case 5:if(je(u),x=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==m&&As(u);else{if(!m){if(u.stateNode===null)throw Error(i(166));return Nt(u),null}if(E=I.current,Hc(u))qO(u);else{var C=T0(ve.current);switch(E){case 1:E=C.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:E=C.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":E=C.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":E=C.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":E=C.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof m.is=="string"?C.createElement("select",{is:m.is}):C.createElement("select"),m.multiple?E.multiple=!0:m.size&&(E.size=m.size);break;default:E=typeof m.is=="string"?C.createElement(x,{is:m.is}):C.createElement(x)}}E[kn]=u,E[_i]=m;e:for(C=u.child;C!==null;){if(C.tag===5||C.tag===6)E.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===u)break e;for(;C.sibling===null;){if(C.return===null||C.return===u)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}u.stateNode=E;e:switch(Rn(E,x,m),x){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&As(u)}}return Nt(u),hS(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,h),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==m&&As(u);else{if(typeof m!="string"&&u.stateNode===null)throw Error(i(166));if(o=ve.current,Hc(u)){if(o=u.stateNode,h=u.memoizedProps,m=null,x=On,x!==null)switch(x.tag){case 27:case 5:m=x.memoizedProps}o[kn]=u,o=!!(o.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||r5(o.nodeValue,h)),o||_o(u,!0)}else o=T0(o).createTextNode(m),o[kn]=u,u.stateNode=o}return Nt(u),null;case 31:if(h=u.memoizedState,o===null||o.memoizedState!==null){if(m=Hc(u),h!==null){if(o===null){if(!m)throw Error(i(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[kn]=u}else Zl(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Nt(u),o=!1}else h=_2(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=h),o=!0;if(!o)return u.flags&256?(Qi(u),u):(Qi(u),null);if((u.flags&128)!==0)throw Error(i(558))}return Nt(u),null;case 13:if(m=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(x=Hc(u),m!==null&&m.dehydrated!==null){if(o===null){if(!x)throw Error(i(318));if(x=u.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[kn]=u}else Zl(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Nt(u),x=!1}else x=_2(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=x),x=!0;if(!x)return u.flags&256?(Qi(u),u):(Qi(u),null)}return Qi(u),(u.flags&128)!==0?(u.lanes=h,u):(h=m!==null,o=o!==null&&o.memoizedState!==null,h&&(m=u.child,x=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(x=m.alternate.memoizedState.cachePool.pool),E=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==x&&(m.flags|=2048)),h!==o&&h&&(u.child.flags|=8192),h0(u,u.updateQueue),Nt(u),null);case 4:return ce(),o===null&&zS(u.stateNode.containerInfo),Nt(u),null;case 10:return Ss(u.type),Nt(u),null;case 19:if(G(Wt),m=u.memoizedState,m===null)return Nt(u),null;if(x=(u.flags&128)!==0,E=m.rendering,E===null)if(x)Th(m,!1);else{if(Ht!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(E=e0(o),E!==null){for(u.flags|=128,Th(m,!1),o=E.updateQueue,u.updateQueue=o,h0(u,o),u.subtreeFlags=0,o=h,h=u.child;h!==null;)FO(h,o),h=h.sibling;return le(Wt,Wt.current&1|2),nt&&bs(u,m.treeForkCount),u.child}o=o.sibling}m.tail!==null&&Hi()>v0&&(u.flags|=128,x=!0,Th(m,!1),u.lanes=4194304)}else{if(!x)if(o=e0(E),o!==null){if(u.flags|=128,x=!0,o=o.updateQueue,u.updateQueue=o,h0(u,o),Th(m,!0),m.tail===null&&m.tailMode==="hidden"&&!E.alternate&&!nt)return Nt(u),null}else 2*Hi()-m.renderingStartTime>v0&&h!==536870912&&(u.flags|=128,x=!0,Th(m,!1),u.lanes=4194304);m.isBackwards?(E.sibling=u.child,u.child=E):(o=m.last,o!==null?o.sibling=E:u.child=E,m.last=E)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=Hi(),o.sibling=null,h=Wt.current,le(Wt,x?h&1|2:h&1),nt&&bs(u,m.treeForkCount),o):(Nt(u),null);case 22:case 23:return Qi(u),F2(),m=u.memoizedState!==null,o!==null?o.memoizedState!==null!==m&&(u.flags|=8192):m&&(u.flags|=8192),m?(h&536870912)!==0&&(u.flags&128)===0&&(Nt(u),u.subtreeFlags&6&&(u.flags|=8192)):Nt(u),h=u.updateQueue,h!==null&&h0(u,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==h&&(u.flags|=2048),o!==null&&G(eu),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),u.memoizedState.cache!==h&&(u.flags|=2048),Ss(rn),Nt(u),null;case 25:return null;case 30:return null}throw Error(i(156,u.tag))}function ZX(o,u){switch(S2(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return Ss(rn),ce(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return je(u),null;case 31:if(u.memoizedState!==null){if(Qi(u),u.alternate===null)throw Error(i(340));Zl()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(Qi(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(i(340));Zl()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return G(Wt),null;case 4:return ce(),null;case 10:return Ss(u.type),null;case 22:case 23:return Qi(u),F2(),o!==null&&G(eu),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return Ss(rn),null;case 25:return null;default:return null}}function uD(o,u){switch(S2(u),u.tag){case 3:Ss(rn),ce();break;case 26:case 27:case 5:je(u);break;case 4:ce();break;case 31:u.memoizedState!==null&&Qi(u);break;case 13:Qi(u);break;case 19:G(Wt);break;case 10:Ss(u.type);break;case 22:case 23:Qi(u),F2(),o!==null&&G(eu);break;case 24:Ss(rn)}}function Mh(o,u){try{var h=u.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var x=m.next;h=x;do{if((h.tag&o)===o){m=void 0;var E=h.create,C=h.inst;m=E(),C.destroy=m}h=h.next}while(h!==x)}}catch(O){bt(u,u.return,O)}}function ko(o,u,h){try{var m=u.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var E=x.next;m=E;do{if((m.tag&o)===o){var C=m.inst,O=C.destroy;if(O!==void 0){C.destroy=void 0,x=u;var L=h,W=O;try{W()}catch(ne){bt(x,L,ne)}}}m=m.next}while(m!==E)}}catch(ne){bt(u,u.return,ne)}}function cD(o){var u=o.updateQueue;if(u!==null){var h=o.stateNode;try{eN(u,h)}catch(m){bt(o,o.return,m)}}}function fD(o,u,h){h.props=au(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(m){bt(o,u,m)}}function kh(o,u){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var m=o.stateNode;break;case 30:m=o.stateNode;break;default:m=o.stateNode}typeof h=="function"?o.refCleanup=h(m):h.current=m}}catch(x){bt(o,u,x)}}function $a(o,u){var h=o.ref,m=o.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(x){bt(o,u,x)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(x){bt(o,u,x)}else h.current=null}function dD(o){var u=o.type,h=o.memoizedProps,m=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(x){bt(o,o.return,x)}}function gS(o,u,h){try{var m=o.stateNode;bV(m,o.type,h,u),m[_i]=u}catch(x){bt(o,o.return,x)}}function hD(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Lo(o.type)||o.tag===4}function pS(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||hD(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Lo(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function mS(o,u,h){var m=o.tag;if(m===5||m===6)o=o.stateNode,u?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,u):(u=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,u.appendChild(o),h=h._reactRootContainer,h!=null||u.onclick!==null||(u.onclick=ms));else if(m!==4&&(m===27&&Lo(o.type)&&(h=o.stateNode,u=null),o=o.child,o!==null))for(mS(o,u,h),o=o.sibling;o!==null;)mS(o,u,h),o=o.sibling}function g0(o,u,h){var m=o.tag;if(m===5||m===6)o=o.stateNode,u?h.insertBefore(o,u):h.appendChild(o);else if(m!==4&&(m===27&&Lo(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(g0(o,u,h),o=o.sibling;o!==null;)g0(o,u,h),o=o.sibling}function gD(o){var u=o.stateNode,h=o.memoizedProps;try{for(var m=o.type,x=u.attributes;x.length;)u.removeAttributeNode(x[0]);Rn(u,m,h),u[kn]=o,u[_i]=h}catch(E){bt(o,o.return,E)}}var Cs=!1,on=!1,yS=!1,pD=typeof WeakSet=="function"?WeakSet:Set,bn=null;function KX(o,u){if(o=o.containerInfo,US=z0,o=$O(o),c2(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var x=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{h.nodeType,E.nodeType}catch{h=null;break e}var C=0,O=-1,L=-1,W=0,ne=0,ue=o,Z=null;t:for(;;){for(var ee;ue!==h||x!==0&&ue.nodeType!==3||(O=C+x),ue!==E||m!==0&&ue.nodeType!==3||(L=C+m),ue.nodeType===3&&(C+=ue.nodeValue.length),(ee=ue.firstChild)!==null;)Z=ue,ue=ee;for(;;){if(ue===o)break t;if(Z===h&&++W===x&&(O=C),Z===E&&++ne===m&&(L=C),(ee=ue.nextSibling)!==null)break;ue=Z,Z=ue.parentNode}ue=ee}h=O===-1||L===-1?null:{start:O,end:L}}else h=null}h=h||{start:0,end:0}}else h=null;for(BS={focusedElem:o,selectionRange:h},z0=!1,bn=u;bn!==null;)if(u=bn,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,bn=o;else for(;bn!==null;){switch(u=bn,E=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(h=0;h<o.length;h++)x=o[h],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&E!==null){o=void 0,h=u,x=E.memoizedProps,E=E.memoizedState,m=h.stateNode;try{var Ce=au(h.type,x);o=m.getSnapshotBeforeUpdate(Ce,E),m.__reactInternalSnapshotBeforeUpdate=o}catch(Ue){bt(h,h.return,Ue)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,h=o.nodeType,h===9)IS(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":IS(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=u.sibling,o!==null){o.return=u.return,bn=o;break}bn=u.return}}function mD(o,u,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:Ts(o,h),m&4&&Mh(5,h);break;case 1:if(Ts(o,h),m&4)if(o=h.stateNode,u===null)try{o.componentDidMount()}catch(C){bt(h,h.return,C)}else{var x=au(h.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(x,u,o.__reactInternalSnapshotBeforeUpdate)}catch(C){bt(h,h.return,C)}}m&64&&cD(h),m&512&&kh(h,h.return);break;case 3:if(Ts(o,h),m&64&&(o=h.updateQueue,o!==null)){if(u=null,h.child!==null)switch(h.child.tag){case 27:case 5:u=h.child.stateNode;break;case 1:u=h.child.stateNode}try{eN(o,u)}catch(C){bt(h,h.return,C)}}break;case 27:u===null&&m&4&&gD(h);case 26:case 5:Ts(o,h),u===null&&m&4&&dD(h),m&512&&kh(h,h.return);break;case 12:Ts(o,h);break;case 31:Ts(o,h),m&4&&bD(o,h);break;case 13:Ts(o,h),m&4&&xD(o,h),m&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=oV.bind(null,h),$V(o,h))));break;case 22:if(m=h.memoizedState!==null||Cs,!m){u=u!==null&&u.memoizedState!==null||on,x=Cs;var E=on;Cs=m,(on=u)&&!E?Ms(o,h,(h.subtreeFlags&8772)!==0):Ts(o,h),Cs=x,on=E}break;case 30:break;default:Ts(o,h)}}function yD(o){var u=o.alternate;u!==null&&(o.alternate=null,yD(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&Xx(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var zt=null,Ai=!1;function $s(o,u,h){for(h=h.child;h!==null;)vD(o,u,h),h=h.sibling}function vD(o,u,h){if(Gi&&typeof Gi.onCommitFiberUnmount=="function")try{Gi.onCommitFiberUnmount(eh,h)}catch{}switch(h.tag){case 26:on||$a(h,u),$s(o,u,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:on||$a(h,u);var m=zt,x=Ai;Lo(h.type)&&(zt=h.stateNode,Ai=!1),$s(o,u,h),Bh(h.stateNode),zt=m,Ai=x;break;case 5:on||$a(h,u);case 6:if(m=zt,x=Ai,zt=null,$s(o,u,h),zt=m,Ai=x,zt!==null)if(Ai)try{(zt.nodeType===9?zt.body:zt.nodeName==="HTML"?zt.ownerDocument.body:zt).removeChild(h.stateNode)}catch(E){bt(h,u,E)}else try{zt.removeChild(h.stateNode)}catch(E){bt(h,u,E)}break;case 18:zt!==null&&(Ai?(o=zt,c5(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),df(o)):c5(zt,h.stateNode));break;case 4:m=zt,x=Ai,zt=h.stateNode.containerInfo,Ai=!0,$s(o,u,h),zt=m,Ai=x;break;case 0:case 11:case 14:case 15:ko(2,h,u),on||ko(4,h,u),$s(o,u,h);break;case 1:on||($a(h,u),m=h.stateNode,typeof m.componentWillUnmount=="function"&&fD(h,u,m)),$s(o,u,h);break;case 21:$s(o,u,h);break;case 22:on=(m=on)||h.memoizedState!==null,$s(o,u,h),on=m;break;default:$s(o,u,h)}}function bD(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{df(o)}catch(h){bt(u,u.return,h)}}}function xD(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{df(o)}catch(h){bt(u,u.return,h)}}function JX(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new pD),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new pD),u;default:throw Error(i(435,o.tag))}}function p0(o,u){var h=JX(o);u.forEach(function(m){if(!h.has(m)){h.add(m);var x=lV.bind(null,o,m);m.then(x,x)}})}function Ci(o,u){var h=u.deletions;if(h!==null)for(var m=0;m<h.length;m++){var x=h[m],E=o,C=u,O=C;e:for(;O!==null;){switch(O.tag){case 27:if(Lo(O.type)){zt=O.stateNode,Ai=!1;break e}break;case 5:zt=O.stateNode,Ai=!1;break e;case 3:case 4:zt=O.stateNode.containerInfo,Ai=!0;break e}O=O.return}if(zt===null)throw Error(i(160));vD(E,C,x),zt=null,Ai=!1,E=x.alternate,E!==null&&(E.return=null),x.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)SD(u,o),u=u.sibling}var Xr=null;function SD(o,u){var h=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Ci(u,o),$i(o),m&4&&(ko(3,o,o.return),Mh(3,o),ko(5,o,o.return));break;case 1:Ci(u,o),$i(o),m&512&&(on||h===null||$a(h,h.return)),m&64&&Cs&&(o=o.updateQueue,o!==null&&(m=o.callbacks,m!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var x=Xr;if(Ci(u,o),$i(o),m&512&&(on||h===null||$a(h,h.return)),m&4){var E=h!==null?h.memoizedState:null;if(m=o.memoizedState,h===null)if(m===null)if(o.stateNode===null){e:{m=o.type,h=o.memoizedProps,x=x.ownerDocument||x;t:switch(m){case"title":E=x.getElementsByTagName("title")[0],(!E||E[ih]||E[kn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=x.createElement(m),x.head.insertBefore(E,x.querySelector("head > title"))),Rn(E,m,h),E[kn]=o,vn(E),m=E;break e;case"link":var C=S5("link","href",x).get(m+(h.href||""));if(C){for(var O=0;O<C.length;O++)if(E=C[O],E.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&E.getAttribute("rel")===(h.rel==null?null:h.rel)&&E.getAttribute("title")===(h.title==null?null:h.title)&&E.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){C.splice(O,1);break t}}E=x.createElement(m),Rn(E,m,h),x.head.appendChild(E);break;case"meta":if(C=S5("meta","content",x).get(m+(h.content||""))){for(O=0;O<C.length;O++)if(E=C[O],E.getAttribute("content")===(h.content==null?null:""+h.content)&&E.getAttribute("name")===(h.name==null?null:h.name)&&E.getAttribute("property")===(h.property==null?null:h.property)&&E.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&E.getAttribute("charset")===(h.charSet==null?null:h.charSet)){C.splice(O,1);break t}}E=x.createElement(m),Rn(E,m,h),x.head.appendChild(E);break;default:throw Error(i(468,m))}E[kn]=o,vn(E),m=E}o.stateNode=m}else E5(x,o.type,o.stateNode);else o.stateNode=x5(x,m,o.memoizedProps);else E!==m?(E===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):E.count--,m===null?E5(x,o.type,o.stateNode):x5(x,m,o.memoizedProps)):m===null&&o.stateNode!==null&&gS(o,o.memoizedProps,h.memoizedProps)}break;case 27:Ci(u,o),$i(o),m&512&&(on||h===null||$a(h,h.return)),h!==null&&m&4&&gS(o,o.memoizedProps,h.memoizedProps);break;case 5:if(Ci(u,o),$i(o),m&512&&(on||h===null||$a(h,h.return)),o.flags&32){x=o.stateNode;try{Rc(x,"")}catch(Ce){bt(o,o.return,Ce)}}m&4&&o.stateNode!=null&&(x=o.memoizedProps,gS(o,x,h!==null?h.memoizedProps:x)),m&1024&&(yS=!0);break;case 6:if(Ci(u,o),$i(o),m&4){if(o.stateNode===null)throw Error(i(162));m=o.memoizedProps,h=o.stateNode;try{h.nodeValue=m}catch(Ce){bt(o,o.return,Ce)}}break;case 3:if(O0=null,x=Xr,Xr=M0(u.containerInfo),Ci(u,o),Xr=x,$i(o),m&4&&h!==null&&h.memoizedState.isDehydrated)try{df(u.containerInfo)}catch(Ce){bt(o,o.return,Ce)}yS&&(yS=!1,ED(o));break;case 4:m=Xr,Xr=M0(o.stateNode.containerInfo),Ci(u,o),$i(o),Xr=m;break;case 12:Ci(u,o),$i(o);break;case 31:Ci(u,o),$i(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,p0(o,m)));break;case 13:Ci(u,o),$i(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(y0=Hi()),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,p0(o,m)));break;case 22:x=o.memoizedState!==null;var L=h!==null&&h.memoizedState!==null,W=Cs,ne=on;if(Cs=W||x,on=ne||L,Ci(u,o),on=ne,Cs=W,$i(o),m&8192)e:for(u=o.stateNode,u._visibility=x?u._visibility&-2:u._visibility|1,x&&(h===null||L||Cs||on||su(o)),h=null,u=o;;){if(u.tag===5||u.tag===26){if(h===null){L=h=u;try{if(E=L.stateNode,x)C=E.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{O=L.stateNode;var ue=L.memoizedProps.style,Z=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;O.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Ce){bt(L,L.return,Ce)}}}else if(u.tag===6){if(h===null){L=u;try{L.stateNode.nodeValue=x?"":L.memoizedProps}catch(Ce){bt(L,L.return,Ce)}}}else if(u.tag===18){if(h===null){L=u;try{var ee=L.stateNode;x?f5(ee,!0):f5(L.stateNode,!1)}catch(Ce){bt(L,L.return,Ce)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}m&4&&(m=o.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,p0(o,h))));break;case 19:Ci(u,o),$i(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,p0(o,m)));break;case 30:break;case 21:break;default:Ci(u,o),$i(o)}}function $i(o){var u=o.flags;if(u&2){try{for(var h,m=o.return;m!==null;){if(hD(m)){h=m;break}m=m.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var x=h.stateNode,E=pS(o);g0(o,E,x);break;case 5:var C=h.stateNode;h.flags&32&&(Rc(C,""),h.flags&=-33);var O=pS(o);g0(o,O,C);break;case 3:case 4:var L=h.stateNode.containerInfo,W=pS(o);mS(o,W,L);break;default:throw Error(i(161))}}catch(ne){bt(o,o.return,ne)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function ED(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;ED(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function Ts(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)mD(o,u.alternate,u),u=u.sibling}function su(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:ko(4,u,u.return),su(u);break;case 1:$a(u,u.return);var h=u.stateNode;typeof h.componentWillUnmount=="function"&&fD(u,u.return,h),su(u);break;case 27:Bh(u.stateNode);case 26:case 5:$a(u,u.return),su(u);break;case 22:u.memoizedState===null&&su(u);break;case 30:su(u);break;default:su(u)}o=o.sibling}}function Ms(o,u,h){for(h=h&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var m=u.alternate,x=o,E=u,C=E.flags;switch(E.tag){case 0:case 11:case 15:Ms(x,E,h),Mh(4,E);break;case 1:if(Ms(x,E,h),m=E,x=m.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(W){bt(m,m.return,W)}if(m=E,x=m.updateQueue,x!==null){var O=m.stateNode;try{var L=x.shared.hiddenCallbacks;if(L!==null)for(x.shared.hiddenCallbacks=null,x=0;x<L.length;x++)JO(L[x],O)}catch(W){bt(m,m.return,W)}}h&&C&64&&cD(E),kh(E,E.return);break;case 27:gD(E);case 26:case 5:Ms(x,E,h),h&&m===null&&C&4&&dD(E),kh(E,E.return);break;case 12:Ms(x,E,h);break;case 31:Ms(x,E,h),h&&C&4&&bD(x,E);break;case 13:Ms(x,E,h),h&&C&4&&xD(x,E);break;case 22:E.memoizedState===null&&Ms(x,E,h),kh(E,E.return);break;case 30:break;default:Ms(x,E,h)}u=u.sibling}}function vS(o,u){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&mh(h))}function bS(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&mh(o))}function Vr(o,u,h,m){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)_D(o,u,h,m),u=u.sibling}function _D(o,u,h,m){var x=u.flags;switch(u.tag){case 0:case 11:case 15:Vr(o,u,h,m),x&2048&&Mh(9,u);break;case 1:Vr(o,u,h,m);break;case 3:Vr(o,u,h,m),x&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&mh(o)));break;case 12:if(x&2048){Vr(o,u,h,m),o=u.stateNode;try{var E=u.memoizedProps,C=E.id,O=E.onPostCommit;typeof O=="function"&&O(C,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(L){bt(u,u.return,L)}}else Vr(o,u,h,m);break;case 31:Vr(o,u,h,m);break;case 13:Vr(o,u,h,m);break;case 23:break;case 22:E=u.stateNode,C=u.alternate,u.memoizedState!==null?E._visibility&2?Vr(o,u,h,m):Oh(o,u):E._visibility&2?Vr(o,u,h,m):(E._visibility|=2,ef(o,u,h,m,(u.subtreeFlags&10256)!==0||!1)),x&2048&&vS(C,u);break;case 24:Vr(o,u,h,m),x&2048&&bS(u.alternate,u);break;default:Vr(o,u,h,m)}}function ef(o,u,h,m,x){for(x=x&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var E=o,C=u,O=h,L=m,W=C.flags;switch(C.tag){case 0:case 11:case 15:ef(E,C,O,L,x),Mh(8,C);break;case 23:break;case 22:var ne=C.stateNode;C.memoizedState!==null?ne._visibility&2?ef(E,C,O,L,x):Oh(E,C):(ne._visibility|=2,ef(E,C,O,L,x)),x&&W&2048&&vS(C.alternate,C);break;case 24:ef(E,C,O,L,x),x&&W&2048&&bS(C.alternate,C);break;default:ef(E,C,O,L,x)}u=u.sibling}}function Oh(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var h=o,m=u,x=m.flags;switch(m.tag){case 22:Oh(h,m),x&2048&&vS(m.alternate,m);break;case 24:Oh(h,m),x&2048&&bS(m.alternate,m);break;default:Oh(h,m)}u=u.sibling}}var Nh=8192;function tf(o,u,h){if(o.subtreeFlags&Nh)for(o=o.child;o!==null;)wD(o,u,h),o=o.sibling}function wD(o,u,h){switch(o.tag){case 26:tf(o,u,h),o.flags&Nh&&o.memoizedState!==null&&BV(h,Xr,o.memoizedState,o.memoizedProps);break;case 5:tf(o,u,h);break;case 3:case 4:var m=Xr;Xr=M0(o.stateNode.containerInfo),tf(o,u,h),Xr=m;break;case 22:o.memoizedState===null&&(m=o.alternate,m!==null&&m.memoizedState!==null?(m=Nh,Nh=16777216,tf(o,u,h),Nh=m):tf(o,u,h));break;default:tf(o,u,h)}}function AD(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function Dh(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];bn=m,$D(m,o)}AD(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)CD(o),o=o.sibling}function CD(o){switch(o.tag){case 0:case 11:case 15:Dh(o),o.flags&2048&&ko(9,o,o.return);break;case 3:Dh(o);break;case 12:Dh(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,m0(o)):Dh(o);break;default:Dh(o)}}function m0(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];bn=m,$D(m,o)}AD(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:ko(8,u,u.return),m0(u);break;case 22:h=u.stateNode,h._visibility&2&&(h._visibility&=-3,m0(u));break;default:m0(u)}o=o.sibling}}function $D(o,u){for(;bn!==null;){var h=bn;switch(h.tag){case 0:case 11:case 15:ko(8,h,u);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:mh(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,bn=m;else e:for(h=o;bn!==null;){m=bn;var x=m.sibling,E=m.return;if(yD(m),m===h){bn=null;break e}if(x!==null){x.return=E,bn=x;break e}bn=E}}}var eV={getCacheForType:function(o){var u=Nn(rn),h=u.data.get(o);return h===void 0&&(h=o(),u.data.set(o,h)),h},cacheSignal:function(){return Nn(rn).controller.signal}},tV=typeof WeakMap=="function"?WeakMap:Map,dt=0,$t=null,Ze=null,Je=0,vt=0,Zi=null,Oo=!1,nf=!1,xS=!1,ks=0,Ht=0,No=0,ou=0,SS=0,Ki=0,rf=0,Rh=null,Ti=null,ES=!1,y0=0,TD=0,v0=1/0,b0=null,Do=null,cn=0,Ro=null,af=null,Os=0,_S=0,wS=null,MD=null,zh=0,AS=null;function Ji(){return(dt&2)!==0&&Je!==0?Je&-Je:N.T!==null?OS():Gk()}function kD(){if(Ki===0)if((Je&536870912)===0||nt){var o=$m;$m<<=1,($m&3932160)===0&&($m=262144),Ki=o}else Ki=536870912;return o=Wi.current,o!==null&&(o.flags|=32),Ki}function Mi(o,u,h){(o===$t&&(vt===2||vt===9)||o.cancelPendingCommit!==null)&&(sf(o,0),zo(o,Je,Ki,!1)),nh(o,h),((dt&2)===0||o!==$t)&&(o===$t&&((dt&2)===0&&(ou|=h),Ht===4&&zo(o,Je,Ki,!1)),Ta(o))}function OD(o,u,h){if((dt&6)!==0)throw Error(i(327));var m=!h&&(u&127)===0&&(u&o.expiredLanes)===0||th(o,u),x=m?rV(o,u):$S(o,u,!0),E=m;do{if(x===0){nf&&!m&&zo(o,u,0,!1);break}else{if(h=o.current.alternate,E&&!nV(h)){x=$S(o,u,!1),E=!1;continue}if(x===2){if(E=u,o.errorRecoveryDisabledLanes&E)var C=0;else C=o.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){u=C;e:{var O=o;x=Rh;var L=O.current.memoizedState.isDehydrated;if(L&&(sf(O,C).flags|=256),C=$S(O,C,!1),C!==2){if(xS&&!L){O.errorRecoveryDisabledLanes|=E,ou|=E,x=4;break e}E=Ti,Ti=x,E!==null&&(Ti===null?Ti=E:Ti.push.apply(Ti,E))}x=C}if(E=!1,x!==2)continue}}if(x===1){sf(o,0),zo(o,u,0,!0);break}e:{switch(m=o,E=x,E){case 0:case 1:throw Error(i(345));case 4:if((u&4194048)!==u)break;case 6:zo(m,u,Ki,!Oo);break e;case 2:Ti=null;break;case 3:case 5:break;default:throw Error(i(329))}if((u&62914560)===u&&(x=y0+300-Hi(),10<x)){if(zo(m,u,Ki,!Oo),Mm(m,0,!0)!==0)break e;Os=u,m.timeoutHandle=l5(ND.bind(null,m,h,Ti,b0,ES,u,Ki,ou,rf,Oo,E,"Throttled",-0,0),x);break e}ND(m,h,Ti,b0,ES,u,Ki,ou,rf,Oo,E,null,-0,0)}}break}while(!0);Ta(o)}function ND(o,u,h,m,x,E,C,O,L,W,ne,ue,Z,ee){if(o.timeoutHandle=-1,ue=u.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ms},wD(u,E,ue);var Ce=(E&62914560)===E?y0-Hi():(E&4194048)===E?TD-Hi():0;if(Ce=jV(ue,Ce),Ce!==null){Os=E,o.cancelPendingCommit=Ce(jD.bind(null,o,u,E,h,m,x,C,O,L,ne,ue,null,Z,ee)),zo(o,E,C,!W);return}}jD(o,u,E,h,m,x,C,O,L)}function nV(o){for(var u=o;;){var h=u.tag;if((h===0||h===11||h===15)&&u.flags&16384&&(h=u.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var x=h[m],E=x.getSnapshot;x=x.value;try{if(!Xi(E(),x))return!1}catch{return!1}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function zo(o,u,h,m){u&=~SS,u&=~ou,o.suspendedLanes|=u,o.pingedLanes&=~u,m&&(o.warmLanes|=u),m=o.expirationTimes;for(var x=u;0<x;){var E=31-Yi(x),C=1<<E;m[E]=-1,x&=~C}h!==0&&Ik(o,h,u)}function x0(){return(dt&6)===0?(Fh(0),!1):!0}function CS(){if(Ze!==null){if(vt===0)var o=Ze.return;else o=Ze,xs=Kl=null,I2(o),Wc=null,vh=0,o=Ze;for(;o!==null;)uD(o.alternate,o),o=o.return;Ze=null}}function sf(o,u){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,EV(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),Os=0,CS(),$t=o,Ze=h=vs(o.current,null),Je=u,vt=0,Zi=null,Oo=!1,nf=th(o,u),xS=!1,rf=Ki=SS=ou=No=Ht=0,Ti=Rh=null,ES=!1,(u&8)!==0&&(u|=u&32);var m=o.entangledLanes;if(m!==0)for(o=o.entanglements,m&=u;0<m;){var x=31-Yi(m),E=1<<x;u|=o[x],m&=~E}return ks=u,qm(),h}function DD(o,u){Pe=null,N.H=Ch,u===Vc||u===Wm?(u=WO(),vt=3):u===k2?(u=WO(),vt=4):vt=u===rS?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Zi=u,Ze===null&&(Ht=1,u0(o,vr(u,o.current)))}function RD(){var o=Wi.current;return o===null?!0:(Je&4194048)===Je?Er===null:(Je&62914560)===Je||(Je&536870912)!==0?o===Er:!1}function zD(){var o=N.H;return N.H=Ch,o===null?Ch:o}function FD(){var o=N.A;return N.A=eV,o}function S0(){Ht=4,Oo||(Je&4194048)!==Je&&Wi.current!==null||(nf=!0),(No&134217727)===0&&(ou&134217727)===0||$t===null||zo($t,Je,Ki,!1)}function $S(o,u,h){var m=dt;dt|=2;var x=zD(),E=FD();($t!==o||Je!==u)&&(b0=null,sf(o,u)),u=!1;var C=Ht;e:do try{if(vt!==0&&Ze!==null){var O=Ze,L=Zi;switch(vt){case 8:CS(),C=6;break e;case 3:case 2:case 9:case 6:Wi.current===null&&(u=!0);var W=vt;if(vt=0,Zi=null,of(o,O,L,W),h&&nf){C=0;break e}break;default:W=vt,vt=0,Zi=null,of(o,O,L,W)}}iV(),C=Ht;break}catch(ne){DD(o,ne)}while(!0);return u&&o.shellSuspendCounter++,xs=Kl=null,dt=m,N.H=x,N.A=E,Ze===null&&($t=null,Je=0,qm()),C}function iV(){for(;Ze!==null;)LD(Ze)}function rV(o,u){var h=dt;dt|=2;var m=zD(),x=FD();$t!==o||Je!==u?(b0=null,v0=Hi()+500,sf(o,u)):nf=th(o,u);e:do try{if(vt!==0&&Ze!==null){u=Ze;var E=Zi;t:switch(vt){case 1:vt=0,Zi=null,of(o,u,E,1);break;case 2:case 9:if(XO(E)){vt=0,Zi=null,UD(u);break}u=function(){vt!==2&&vt!==9||$t!==o||(vt=7),Ta(o)},E.then(u,u);break e;case 3:vt=7;break e;case 4:vt=5;break e;case 7:XO(E)?(vt=0,Zi=null,UD(u)):(vt=0,Zi=null,of(o,u,E,7));break;case 5:var C=null;switch(Ze.tag){case 26:C=Ze.memoizedState;case 5:case 27:var O=Ze;if(C?_5(C):O.stateNode.complete){vt=0,Zi=null;var L=O.sibling;if(L!==null)Ze=L;else{var W=O.return;W!==null?(Ze=W,E0(W)):Ze=null}break t}}vt=0,Zi=null,of(o,u,E,5);break;case 6:vt=0,Zi=null,of(o,u,E,6);break;case 8:CS(),Ht=6;break e;default:throw Error(i(462))}}aV();break}catch(ne){DD(o,ne)}while(!0);return xs=Kl=null,N.H=m,N.A=x,dt=h,Ze!==null?0:($t=null,Je=0,qm(),Ht)}function aV(){for(;Ze!==null&&!TY();)LD(Ze)}function LD(o){var u=oD(o.alternate,o,ks);o.memoizedProps=o.pendingProps,u===null?E0(o):Ze=u}function UD(o){var u=o,h=u.alternate;switch(u.tag){case 15:case 0:u=tD(h,u,u.pendingProps,u.type,void 0,Je);break;case 11:u=tD(h,u,u.pendingProps,u.type.render,u.ref,Je);break;case 5:I2(u);default:uD(h,u),u=Ze=FO(u,ks),u=oD(h,u,ks)}o.memoizedProps=o.pendingProps,u===null?E0(o):Ze=u}function of(o,u,h,m){xs=Kl=null,I2(u),Wc=null,vh=0;var x=u.return;try{if(XX(o,x,u,h,Je)){Ht=1,u0(o,vr(h,o.current)),Ze=null;return}}catch(E){if(x!==null)throw Ze=x,E;Ht=1,u0(o,vr(h,o.current)),Ze=null;return}u.flags&32768?(nt||m===1?o=!0:nf||(Je&536870912)!==0?o=!1:(Oo=o=!0,(m===2||m===9||m===3||m===6)&&(m=Wi.current,m!==null&&m.tag===13&&(m.flags|=16384))),BD(u,o)):E0(u)}function E0(o){var u=o;do{if((u.flags&32768)!==0){BD(u,Oo);return}o=u.return;var h=QX(u.alternate,u,ks);if(h!==null){Ze=h;return}if(u=u.sibling,u!==null){Ze=u;return}Ze=u=o}while(u!==null);Ht===0&&(Ht=5)}function BD(o,u){do{var h=ZX(o.alternate,o);if(h!==null){h.flags&=32767,Ze=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!u&&(o=o.sibling,o!==null)){Ze=o;return}Ze=o=h}while(o!==null);Ht=6,Ze=null}function jD(o,u,h,m,x,E,C,O,L){o.cancelPendingCommit=null;do _0();while(cn!==0);if((dt&6)!==0)throw Error(i(327));if(u!==null){if(u===o.current)throw Error(i(177));if(E=u.lanes|u.childLanes,E|=p2,UY(o,h,E,C,O,L),o===$t&&(Ze=$t=null,Je=0),af=u,Ro=o,Os=h,_S=E,wS=x,MD=m,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,uV(Am,function(){return GD(),null})):(o.callbackNode=null,o.callbackPriority=0),m=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||m){m=N.T,N.T=null,x=j.p,j.p=2,C=dt,dt|=4;try{KX(o,u,h)}finally{dt=C,j.p=x,N.T=m}}cn=1,qD(),ID(),PD()}}function qD(){if(cn===1){cn=0;var o=Ro,u=af,h=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||h){h=N.T,N.T=null;var m=j.p;j.p=2;var x=dt;dt|=4;try{SD(u,o);var E=BS,C=$O(o.containerInfo),O=E.focusedElem,L=E.selectionRange;if(C!==O&&O&&O.ownerDocument&&CO(O.ownerDocument.documentElement,O)){if(L!==null&&c2(O)){var W=L.start,ne=L.end;if(ne===void 0&&(ne=W),"selectionStart"in O)O.selectionStart=W,O.selectionEnd=Math.min(ne,O.value.length);else{var ue=O.ownerDocument||document,Z=ue&&ue.defaultView||window;if(Z.getSelection){var ee=Z.getSelection(),Ce=O.textContent.length,Ue=Math.min(L.start,Ce),At=L.end===void 0?Ue:Math.min(L.end,Ce);!ee.extend&&Ue>At&&(C=At,At=Ue,Ue=C);var H=AO(O,Ue),q=AO(O,At);if(H&&q&&(ee.rangeCount!==1||ee.anchorNode!==H.node||ee.anchorOffset!==H.offset||ee.focusNode!==q.node||ee.focusOffset!==q.offset)){var V=ue.createRange();V.setStart(H.node,H.offset),ee.removeAllRanges(),Ue>At?(ee.addRange(V),ee.extend(q.node,q.offset)):(V.setEnd(q.node,q.offset),ee.addRange(V))}}}}for(ue=[],ee=O;ee=ee.parentNode;)ee.nodeType===1&&ue.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<ue.length;O++){var oe=ue[O];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}z0=!!US,BS=US=null}finally{dt=x,j.p=m,N.T=h}}o.current=u,cn=2}}function ID(){if(cn===2){cn=0;var o=Ro,u=af,h=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||h){h=N.T,N.T=null;var m=j.p;j.p=2;var x=dt;dt|=4;try{mD(o,u.alternate,u)}finally{dt=x,j.p=m,N.T=h}}cn=3}}function PD(){if(cn===4||cn===3){cn=0,MY();var o=Ro,u=af,h=Os,m=MD;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?cn=5:(cn=0,af=Ro=null,HD(o,o.pendingLanes));var x=o.pendingLanes;if(x===0&&(Do=null),Gx(h),u=u.stateNode,Gi&&typeof Gi.onCommitFiberRoot=="function")try{Gi.onCommitFiberRoot(eh,u,void 0,(u.current.flags&128)===128)}catch{}if(m!==null){u=N.T,x=j.p,j.p=2,N.T=null;try{for(var E=o.onRecoverableError,C=0;C<m.length;C++){var O=m[C];E(O.value,{componentStack:O.stack})}}finally{N.T=u,j.p=x}}(Os&3)!==0&&_0(),Ta(o),x=o.pendingLanes,(h&261930)!==0&&(x&42)!==0?o===AS?zh++:(zh=0,AS=o):zh=0,Fh(0)}}function HD(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,mh(u)))}function _0(){return qD(),ID(),PD(),GD()}function GD(){if(cn!==5)return!1;var o=Ro,u=_S;_S=0;var h=Gx(Os),m=N.T,x=j.p;try{j.p=32>h?32:h,N.T=null,h=wS,wS=null;var E=Ro,C=Os;if(cn=0,af=Ro=null,Os=0,(dt&6)!==0)throw Error(i(331));var O=dt;if(dt|=4,CD(E.current),_D(E,E.current,C,h),dt=O,Fh(0,!1),Gi&&typeof Gi.onPostCommitFiberRoot=="function")try{Gi.onPostCommitFiberRoot(eh,E)}catch{}return!0}finally{j.p=x,N.T=m,HD(o,u)}}function YD(o,u,h){u=vr(h,u),u=iS(o.stateNode,u,2),o=$o(o,u,2),o!==null&&(nh(o,2),Ta(o))}function bt(o,u,h){if(o.tag===3)YD(o,o,h);else for(;u!==null;){if(u.tag===3){YD(u,o,h);break}else if(u.tag===1){var m=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Do===null||!Do.has(m))){o=vr(h,o),h=XN(2),m=$o(u,h,2),m!==null&&(VN(h,m,u,o),nh(m,2),Ta(m));break}}u=u.return}}function TS(o,u,h){var m=o.pingCache;if(m===null){m=o.pingCache=new tV;var x=new Set;m.set(u,x)}else x=m.get(u),x===void 0&&(x=new Set,m.set(u,x));x.has(h)||(xS=!0,x.add(h),o=sV.bind(null,o,u,h),u.then(o,o))}function sV(o,u,h){var m=o.pingCache;m!==null&&m.delete(u),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,$t===o&&(Je&h)===h&&(Ht===4||Ht===3&&(Je&62914560)===Je&&300>Hi()-y0?(dt&2)===0&&sf(o,0):SS|=h,rf===Je&&(rf=0)),Ta(o)}function XD(o,u){u===0&&(u=qk()),o=Wl(o,u),o!==null&&(nh(o,u),Ta(o))}function oV(o){var u=o.memoizedState,h=0;u!==null&&(h=u.retryLane),XD(o,h)}function lV(o,u){var h=0;switch(o.tag){case 31:case 13:var m=o.stateNode,x=o.memoizedState;x!==null&&(h=x.retryLane);break;case 19:m=o.stateNode;break;case 22:m=o.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(u),XD(o,h)}function uV(o,u){return qx(o,u)}var w0=null,lf=null,MS=!1,A0=!1,kS=!1,Fo=0;function Ta(o){o!==lf&&o.next===null&&(lf===null?w0=lf=o:lf=lf.next=o),A0=!0,MS||(MS=!0,fV())}function Fh(o,u){if(!kS&&A0){kS=!0;do for(var h=!1,m=w0;m!==null;){if(o!==0){var x=m.pendingLanes;if(x===0)var E=0;else{var C=m.suspendedLanes,O=m.pingedLanes;E=(1<<31-Yi(42|o)+1)-1,E&=x&~(C&~O),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(h=!0,ZD(m,E))}else E=Je,E=Mm(m,m===$t?E:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(E&3)===0||th(m,E)||(h=!0,ZD(m,E));m=m.next}while(h);kS=!1}}function cV(){VD()}function VD(){A0=MS=!1;var o=0;Fo!==0&&SV()&&(o=Fo);for(var u=Hi(),h=null,m=w0;m!==null;){var x=m.next,E=WD(m,u);E===0?(m.next=null,h===null?w0=x:h.next=x,x===null&&(lf=h)):(h=m,(o!==0||(E&3)!==0)&&(A0=!0)),m=x}cn!==0&&cn!==5||Fh(o),Fo!==0&&(Fo=0)}function WD(o,u){for(var h=o.suspendedLanes,m=o.pingedLanes,x=o.expirationTimes,E=o.pendingLanes&-62914561;0<E;){var C=31-Yi(E),O=1<<C,L=x[C];L===-1?((O&h)===0||(O&m)!==0)&&(x[C]=LY(O,u)):L<=u&&(o.expiredLanes|=O),E&=~O}if(u=$t,h=Je,h=Mm(o,o===u?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m=o.callbackNode,h===0||o===u&&(vt===2||vt===9)||o.cancelPendingCommit!==null)return m!==null&&m!==null&&Ix(m),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||th(o,h)){if(u=h&-h,u===o.callbackPriority)return u;switch(m!==null&&Ix(m),Gx(h)){case 2:case 8:h=Bk;break;case 32:h=Am;break;case 268435456:h=jk;break;default:h=Am}return m=QD.bind(null,o),h=qx(h,m),o.callbackPriority=u,o.callbackNode=h,u}return m!==null&&m!==null&&Ix(m),o.callbackPriority=2,o.callbackNode=null,2}function QD(o,u){if(cn!==0&&cn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(_0()&&o.callbackNode!==h)return null;var m=Je;return m=Mm(o,o===$t?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m===0?null:(OD(o,m,u),WD(o,Hi()),o.callbackNode!=null&&o.callbackNode===h?QD.bind(null,o):null)}function ZD(o,u){if(_0())return null;OD(o,u,!0)}function fV(){_V(function(){(dt&6)!==0?qx(Uk,cV):VD()})}function OS(){if(Fo===0){var o=Yc;o===0&&(o=Cm,Cm<<=1,(Cm&261888)===0&&(Cm=256)),Fo=o}return Fo}function KD(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Dm(""+o)}function JD(o,u){var h=u.ownerDocument.createElement("input");return h.name=u.name,h.value=u.value,o.id&&h.setAttribute("form",o.id),u.parentNode.insertBefore(h,u),o=new FormData(o),h.parentNode.removeChild(h),o}function dV(o,u,h,m,x){if(u==="submit"&&h&&h.stateNode===x){var E=KD((x[_i]||null).action),C=m.submitter;C&&(u=(u=C[_i]||null)?KD(u.formAction):C.getAttribute("formAction"),u!==null&&(E=u,C=null));var O=new Lm("action","action",null,m,x);o.push({event:O,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Fo!==0){var L=C?JD(x,C):new FormData(x);Z2(h,{pending:!0,data:L,method:x.method,action:E},null,L)}}else typeof E=="function"&&(O.preventDefault(),L=C?JD(x,C):new FormData(x),Z2(h,{pending:!0,data:L,method:x.method,action:E},E,L))},currentTarget:x}]})}}for(var NS=0;NS<g2.length;NS++){var DS=g2[NS],hV=DS.toLowerCase(),gV=DS[0].toUpperCase()+DS.slice(1);Yr(hV,"on"+gV)}Yr(kO,"onAnimationEnd"),Yr(OO,"onAnimationIteration"),Yr(NO,"onAnimationStart"),Yr("dblclick","onDoubleClick"),Yr("focusin","onFocus"),Yr("focusout","onBlur"),Yr(kX,"onTransitionRun"),Yr(OX,"onTransitionStart"),Yr(NX,"onTransitionCancel"),Yr(DO,"onTransitionEnd"),Nc("onMouseEnter",["mouseout","mouseover"]),Nc("onMouseLeave",["mouseout","mouseover"]),Nc("onPointerEnter",["pointerout","pointerover"]),Nc("onPointerLeave",["pointerout","pointerover"]),Gl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pV=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lh));function e5(o,u){u=(u&4)!==0;for(var h=0;h<o.length;h++){var m=o[h],x=m.event;m=m.listeners;e:{var E=void 0;if(u)for(var C=m.length-1;0<=C;C--){var O=m[C],L=O.instance,W=O.currentTarget;if(O=O.listener,L!==E&&x.isPropagationStopped())break e;E=O,x.currentTarget=W;try{E(x)}catch(ne){jm(ne)}x.currentTarget=null,E=L}else for(C=0;C<m.length;C++){if(O=m[C],L=O.instance,W=O.currentTarget,O=O.listener,L!==E&&x.isPropagationStopped())break e;E=O,x.currentTarget=W;try{E(x)}catch(ne){jm(ne)}x.currentTarget=null,E=L}}}}function Ke(o,u){var h=u[Yx];h===void 0&&(h=u[Yx]=new Set);var m=o+"__bubble";h.has(m)||(t5(u,o,2,!1),h.add(m))}function RS(o,u,h){var m=0;u&&(m|=4),t5(h,o,m,u)}var C0="_reactListening"+Math.random().toString(36).slice(2);function zS(o){if(!o[C0]){o[C0]=!0,Vk.forEach(function(h){h!=="selectionchange"&&(pV.has(h)||RS(h,!1,o),RS(h,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[C0]||(u[C0]=!0,RS("selectionchange",!1,u))}}function t5(o,u,h,m){switch(k5(u)){case 2:var x=PV;break;case 8:x=HV;break;default:x=QS}h=x.bind(null,u,h,o),x=void 0,!t2||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(x=!0),m?x!==void 0?o.addEventListener(u,h,{capture:!0,passive:x}):o.addEventListener(u,h,!0):x!==void 0?o.addEventListener(u,h,{passive:x}):o.addEventListener(u,h,!1)}function FS(o,u,h,m,x){var E=m;if((u&1)===0&&(u&2)===0&&m!==null)e:for(;;){if(m===null)return;var C=m.tag;if(C===3||C===4){var O=m.stateNode.containerInfo;if(O===x)break;if(C===4)for(C=m.return;C!==null;){var L=C.tag;if((L===3||L===4)&&C.stateNode.containerInfo===x)return;C=C.return}for(;O!==null;){if(C=Mc(O),C===null)return;if(L=C.tag,L===5||L===6||L===26||L===27){m=E=C;continue e}O=O.parentNode}}m=m.return}sO(function(){var W=E,ne=Jx(h),ue=[];e:{var Z=RO.get(o);if(Z!==void 0){var ee=Lm,Ce=o;switch(o){case"keypress":if(zm(h)===0)break e;case"keydown":case"keyup":ee=lX;break;case"focusin":Ce="focus",ee=a2;break;case"focusout":Ce="blur",ee=a2;break;case"beforeblur":case"afterblur":ee=a2;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=uO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=QY;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=fX;break;case kO:case OO:case NO:ee=JY;break;case DO:ee=hX;break;case"scroll":case"scrollend":ee=VY;break;case"wheel":ee=pX;break;case"copy":case"cut":case"paste":ee=tX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=fO;break;case"toggle":case"beforetoggle":ee=yX}var Ue=(u&4)!==0,At=!Ue&&(o==="scroll"||o==="scrollend"),H=Ue?Z!==null?Z+"Capture":null:Z;Ue=[];for(var q=W,V;q!==null;){var oe=q;if(V=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||V===null||H===null||(oe=ah(q,H),oe!=null&&Ue.push(Uh(q,oe,V))),At)break;q=q.return}0<Ue.length&&(Z=new ee(Z,Ce,null,h,ne),ue.push({event:Z,listeners:Ue}))}}if((u&7)===0){e:{if(Z=o==="mouseover"||o==="pointerover",ee=o==="mouseout"||o==="pointerout",Z&&h!==Kx&&(Ce=h.relatedTarget||h.fromElement)&&(Mc(Ce)||Ce[Tc]))break e;if((ee||Z)&&(Z=ne.window===ne?ne:(Z=ne.ownerDocument)?Z.defaultView||Z.parentWindow:window,ee?(Ce=h.relatedTarget||h.toElement,ee=W,Ce=Ce?Mc(Ce):null,Ce!==null&&(At=a(Ce),Ue=Ce.tag,Ce!==At||Ue!==5&&Ue!==27&&Ue!==6)&&(Ce=null)):(ee=null,Ce=W),ee!==Ce)){if(Ue=uO,oe="onMouseLeave",H="onMouseEnter",q="mouse",(o==="pointerout"||o==="pointerover")&&(Ue=fO,oe="onPointerLeave",H="onPointerEnter",q="pointer"),At=ee==null?Z:rh(ee),V=Ce==null?Z:rh(Ce),Z=new Ue(oe,q+"leave",ee,h,ne),Z.target=At,Z.relatedTarget=V,oe=null,Mc(ne)===W&&(Ue=new Ue(H,q+"enter",Ce,h,ne),Ue.target=V,Ue.relatedTarget=At,oe=Ue),At=oe,ee&&Ce)t:{for(Ue=mV,H=ee,q=Ce,V=0,oe=H;oe;oe=Ue(oe))V++;oe=0;for(var De=q;De;De=Ue(De))oe++;for(;0<V-oe;)H=Ue(H),V--;for(;0<oe-V;)q=Ue(q),oe--;for(;V--;){if(H===q||q!==null&&H===q.alternate){Ue=H;break t}H=Ue(H),q=Ue(q)}Ue=null}else Ue=null;ee!==null&&n5(ue,Z,ee,Ue,!1),Ce!==null&&At!==null&&n5(ue,At,Ce,Ue,!0)}}e:{if(Z=W?rh(W):window,ee=Z.nodeName&&Z.nodeName.toLowerCase(),ee==="select"||ee==="input"&&Z.type==="file")var st=bO;else if(yO(Z))if(xO)st=$X;else{st=AX;var Te=wX}else ee=Z.nodeName,!ee||ee.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?W&&Zx(W.elementType)&&(st=bO):st=CX;if(st&&(st=st(o,W))){vO(ue,st,h,ne);break e}Te&&Te(o,Z,W),o==="focusout"&&W&&Z.type==="number"&&W.memoizedProps.value!=null&&Qx(Z,"number",Z.value)}switch(Te=W?rh(W):window,o){case"focusin":(yO(Te)||Te.contentEditable==="true")&&(Uc=Te,f2=W,hh=null);break;case"focusout":hh=f2=Uc=null;break;case"mousedown":d2=!0;break;case"contextmenu":case"mouseup":case"dragend":d2=!1,TO(ue,h,ne);break;case"selectionchange":if(MX)break;case"keydown":case"keyup":TO(ue,h,ne)}var Ye;if(o2)e:{switch(o){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else Lc?pO(o,h)&&(et="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(et="onCompositionStart");et&&(dO&&h.locale!=="ko"&&(Lc||et!=="onCompositionStart"?et==="onCompositionEnd"&&Lc&&(Ye=oO()):(xo=ne,n2="value"in xo?xo.value:xo.textContent,Lc=!0)),Te=$0(W,et),0<Te.length&&(et=new cO(et,o,null,h,ne),ue.push({event:et,listeners:Te}),Ye?et.data=Ye:(Ye=mO(h),Ye!==null&&(et.data=Ye)))),(Ye=bX?xX(o,h):SX(o,h))&&(et=$0(W,"onBeforeInput"),0<et.length&&(Te=new cO("onBeforeInput","beforeinput",null,h,ne),ue.push({event:Te,listeners:et}),Te.data=Ye)),dV(ue,o,W,h,ne)}e5(ue,u)})}function Uh(o,u,h){return{instance:o,listener:u,currentTarget:h}}function $0(o,u){for(var h=u+"Capture",m=[];o!==null;){var x=o,E=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||E===null||(x=ah(o,h),x!=null&&m.unshift(Uh(o,x,E)),x=ah(o,u),x!=null&&m.push(Uh(o,x,E))),o.tag===3)return m;o=o.return}return[]}function mV(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function n5(o,u,h,m,x){for(var E=u._reactName,C=[];h!==null&&h!==m;){var O=h,L=O.alternate,W=O.stateNode;if(O=O.tag,L!==null&&L===m)break;O!==5&&O!==26&&O!==27||W===null||(L=W,x?(W=ah(h,E),W!=null&&C.unshift(Uh(h,W,L))):x||(W=ah(h,E),W!=null&&C.push(Uh(h,W,L)))),h=h.return}C.length!==0&&o.push({event:u,listeners:C})}var yV=/\r\n?/g,vV=/\u0000|\uFFFD/g;function i5(o){return(typeof o=="string"?o:""+o).replace(yV,`
`).replace(vV,"")}function r5(o,u){return u=i5(u),i5(o)===u}function wt(o,u,h,m,x,E){switch(h){case"children":typeof m=="string"?u==="body"||u==="textarea"&&m===""||Rc(o,m):(typeof m=="number"||typeof m=="bigint")&&u!=="body"&&Rc(o,""+m);break;case"className":Om(o,"class",m);break;case"tabIndex":Om(o,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Om(o,h,m);break;case"style":rO(o,m,E);break;case"data":if(u!=="object"){Om(o,"data",m);break}case"src":case"href":if(m===""&&(u!=="a"||h!=="href")){o.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(h);break}m=Dm(""+m),o.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(h==="formAction"?(u!=="input"&&wt(o,u,"name",x.name,x,null),wt(o,u,"formEncType",x.formEncType,x,null),wt(o,u,"formMethod",x.formMethod,x,null),wt(o,u,"formTarget",x.formTarget,x,null)):(wt(o,u,"encType",x.encType,x,null),wt(o,u,"method",x.method,x,null),wt(o,u,"target",x.target,x,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(h);break}m=Dm(""+m),o.setAttribute(h,m);break;case"onClick":m!=null&&(o.onclick=ms);break;case"onScroll":m!=null&&Ke("scroll",o);break;case"onScrollEnd":m!=null&&Ke("scrollend",o);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(x.children!=null)throw Error(i(60));o.innerHTML=h}}break;case"multiple":o.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":o.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){o.removeAttribute("xlink:href");break}h=Dm(""+m),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,""+m):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":m===!0?o.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,m):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?o.setAttribute(h,m):o.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?o.removeAttribute(h):o.setAttribute(h,m);break;case"popover":Ke("beforetoggle",o),Ke("toggle",o),km(o,"popover",m);break;case"xlinkActuate":ps(o,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":ps(o,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":ps(o,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":ps(o,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":ps(o,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":ps(o,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":ps(o,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":ps(o,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":ps(o,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":km(o,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=YY.get(h)||h,km(o,h,m))}}function LS(o,u,h,m,x,E){switch(h){case"style":rO(o,m,E);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(x.children!=null)throw Error(i(60));o.innerHTML=h}}break;case"children":typeof m=="string"?Rc(o,m):(typeof m=="number"||typeof m=="bigint")&&Rc(o,""+m);break;case"onScroll":m!=null&&Ke("scroll",o);break;case"onScrollEnd":m!=null&&Ke("scrollend",o);break;case"onClick":m!=null&&(o.onclick=ms);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wk.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(x=h.endsWith("Capture"),u=h.slice(2,x?h.length-7:void 0),E=o[_i]||null,E=E!=null?E[h]:null,typeof E=="function"&&o.removeEventListener(u,E,x),typeof m=="function")){typeof E!="function"&&E!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(u,m,x);break e}h in o?o[h]=m:m===!0?o.setAttribute(h,""):km(o,h,m)}}}function Rn(o,u,h){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",o),Ke("load",o);var m=!1,x=!1,E;for(E in h)if(h.hasOwnProperty(E)){var C=h[E];if(C!=null)switch(E){case"src":m=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:wt(o,u,E,C,h,null)}}x&&wt(o,u,"srcSet",h.srcSet,h,null),m&&wt(o,u,"src",h.src,h,null);return;case"input":Ke("invalid",o);var O=E=C=x=null,L=null,W=null;for(m in h)if(h.hasOwnProperty(m)){var ne=h[m];if(ne!=null)switch(m){case"name":x=ne;break;case"type":C=ne;break;case"checked":L=ne;break;case"defaultChecked":W=ne;break;case"value":E=ne;break;case"defaultValue":O=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,u));break;default:wt(o,u,m,ne,h,null)}}eO(o,E,O,L,W,C,x,!1);return;case"select":Ke("invalid",o),m=C=E=null;for(x in h)if(h.hasOwnProperty(x)&&(O=h[x],O!=null))switch(x){case"value":E=O;break;case"defaultValue":C=O;break;case"multiple":m=O;default:wt(o,u,x,O,h,null)}u=E,h=C,o.multiple=!!m,u!=null?Dc(o,!!m,u,!1):h!=null&&Dc(o,!!m,h,!0);return;case"textarea":Ke("invalid",o),E=x=m=null;for(C in h)if(h.hasOwnProperty(C)&&(O=h[C],O!=null))switch(C){case"value":m=O;break;case"defaultValue":x=O;break;case"children":E=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:wt(o,u,C,O,h,null)}nO(o,m,x,E);return;case"option":for(L in h)if(h.hasOwnProperty(L)&&(m=h[L],m!=null))switch(L){case"selected":o.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:wt(o,u,L,m,h,null)}return;case"dialog":Ke("beforetoggle",o),Ke("toggle",o),Ke("cancel",o),Ke("close",o);break;case"iframe":case"object":Ke("load",o);break;case"video":case"audio":for(m=0;m<Lh.length;m++)Ke(Lh[m],o);break;case"image":Ke("error",o),Ke("load",o);break;case"details":Ke("toggle",o);break;case"embed":case"source":case"link":Ke("error",o),Ke("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in h)if(h.hasOwnProperty(W)&&(m=h[W],m!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:wt(o,u,W,m,h,null)}return;default:if(Zx(u)){for(ne in h)h.hasOwnProperty(ne)&&(m=h[ne],m!==void 0&&LS(o,u,ne,m,h,void 0));return}}for(O in h)h.hasOwnProperty(O)&&(m=h[O],m!=null&&wt(o,u,O,m,h,null))}function bV(o,u,h,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,E=null,C=null,O=null,L=null,W=null,ne=null;for(ee in h){var ue=h[ee];if(h.hasOwnProperty(ee)&&ue!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":L=ue;default:m.hasOwnProperty(ee)||wt(o,u,ee,null,m,ue)}}for(var Z in m){var ee=m[Z];if(ue=h[Z],m.hasOwnProperty(Z)&&(ee!=null||ue!=null))switch(Z){case"type":E=ee;break;case"name":x=ee;break;case"checked":W=ee;break;case"defaultChecked":ne=ee;break;case"value":C=ee;break;case"defaultValue":O=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,u));break;default:ee!==ue&&wt(o,u,Z,ee,m,ue)}}Wx(o,C,O,L,W,ne,E,x);return;case"select":ee=C=O=Z=null;for(E in h)if(L=h[E],h.hasOwnProperty(E)&&L!=null)switch(E){case"value":break;case"multiple":ee=L;default:m.hasOwnProperty(E)||wt(o,u,E,null,m,L)}for(x in m)if(E=m[x],L=h[x],m.hasOwnProperty(x)&&(E!=null||L!=null))switch(x){case"value":Z=E;break;case"defaultValue":O=E;break;case"multiple":C=E;default:E!==L&&wt(o,u,x,E,m,L)}u=O,h=C,m=ee,Z!=null?Dc(o,!!h,Z,!1):!!m!=!!h&&(u!=null?Dc(o,!!h,u,!0):Dc(o,!!h,h?[]:"",!1));return;case"textarea":ee=Z=null;for(O in h)if(x=h[O],h.hasOwnProperty(O)&&x!=null&&!m.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:wt(o,u,O,null,m,x)}for(C in m)if(x=m[C],E=h[C],m.hasOwnProperty(C)&&(x!=null||E!=null))switch(C){case"value":Z=x;break;case"defaultValue":ee=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==E&&wt(o,u,C,x,m,E)}tO(o,Z,ee);return;case"option":for(var Ce in h)if(Z=h[Ce],h.hasOwnProperty(Ce)&&Z!=null&&!m.hasOwnProperty(Ce))switch(Ce){case"selected":o.selected=!1;break;default:wt(o,u,Ce,null,m,Z)}for(L in m)if(Z=m[L],ee=h[L],m.hasOwnProperty(L)&&Z!==ee&&(Z!=null||ee!=null))switch(L){case"selected":o.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:wt(o,u,L,Z,m,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in h)Z=h[Ue],h.hasOwnProperty(Ue)&&Z!=null&&!m.hasOwnProperty(Ue)&&wt(o,u,Ue,null,m,Z);for(W in m)if(Z=m[W],ee=h[W],m.hasOwnProperty(W)&&Z!==ee&&(Z!=null||ee!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,u));break;default:wt(o,u,W,Z,m,ee)}return;default:if(Zx(u)){for(var At in h)Z=h[At],h.hasOwnProperty(At)&&Z!==void 0&&!m.hasOwnProperty(At)&&LS(o,u,At,void 0,m,Z);for(ne in m)Z=m[ne],ee=h[ne],!m.hasOwnProperty(ne)||Z===ee||Z===void 0&&ee===void 0||LS(o,u,ne,Z,m,ee);return}}for(var H in h)Z=h[H],h.hasOwnProperty(H)&&Z!=null&&!m.hasOwnProperty(H)&&wt(o,u,H,null,m,Z);for(ue in m)Z=m[ue],ee=h[ue],!m.hasOwnProperty(ue)||Z===ee||Z==null&&ee==null||wt(o,u,ue,Z,m,ee)}function a5(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xV(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,h=performance.getEntriesByType("resource"),m=0;m<h.length;m++){var x=h[m],E=x.transferSize,C=x.initiatorType,O=x.duration;if(E&&O&&a5(C)){for(C=0,O=x.responseEnd,m+=1;m<h.length;m++){var L=h[m],W=L.startTime;if(W>O)break;var ne=L.transferSize,ue=L.initiatorType;ne&&a5(ue)&&(L=L.responseEnd,C+=ne*(L<O?1:(O-W)/(L-W)))}if(--m,u+=8*(E+C)/(x.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var US=null,BS=null;function T0(o){return o.nodeType===9?o:o.ownerDocument}function s5(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function o5(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function jS(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var qS=null;function SV(){var o=window.event;return o&&o.type==="popstate"?o===qS?!1:(qS=o,!0):(qS=null,!1)}var l5=typeof setTimeout=="function"?setTimeout:void 0,EV=typeof clearTimeout=="function"?clearTimeout:void 0,u5=typeof Promise=="function"?Promise:void 0,_V=typeof queueMicrotask=="function"?queueMicrotask:typeof u5<"u"?function(o){return u5.resolve(null).then(o).catch(wV)}:l5;function wV(o){setTimeout(function(){throw o})}function Lo(o){return o==="head"}function c5(o,u){var h=u,m=0;do{var x=h.nextSibling;if(o.removeChild(h),x&&x.nodeType===8)if(h=x.data,h==="/$"||h==="/&"){if(m===0){o.removeChild(x),df(u);return}m--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")m++;else if(h==="html")Bh(o.ownerDocument.documentElement);else if(h==="head"){h=o.ownerDocument.head,Bh(h);for(var E=h.firstChild;E;){var C=E.nextSibling,O=E.nodeName;E[ih]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&E.rel.toLowerCase()==="stylesheet"||h.removeChild(E),E=C}}else h==="body"&&Bh(o.ownerDocument.body);h=x}while(h);df(u)}function f5(o,u){var h=o;o=0;do{var m=h.nextSibling;if(h.nodeType===1?u?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(u?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),m&&m.nodeType===8)if(h=m.data,h==="/$"){if(o===0)break;o--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||o++;h=m}while(h)}function IS(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var h=u;switch(u=u.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":IS(h),Xx(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function AV(o,u,h,m){for(;o.nodeType===1;){var x=h;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!m&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(m){if(!o[ih])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(E=o.getAttribute("rel"),E==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(E!==x.rel||o.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||o.getAttribute("title")!==(x.title==null?null:x.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(E=o.getAttribute("src"),(E!==(x.src==null?null:x.src)||o.getAttribute("type")!==(x.type==null?null:x.type)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&E&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var E=x.name==null?null:""+x.name;if(x.type==="hidden"&&o.getAttribute("name")===E)return o}else return o;if(o=_r(o.nextSibling),o===null)break}return null}function CV(o,u,h){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=_r(o.nextSibling),o===null))return null;return o}function d5(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=_r(o.nextSibling),o===null))return null;return o}function PS(o){return o.data==="$?"||o.data==="$~"}function HS(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function $V(o,u){var h=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||h.readyState!=="loading")u();else{var m=function(){u(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),o._reactRetry=m}}function _r(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var GS=null;function h5(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"||h==="/&"){if(u===0)return _r(o.nextSibling);u--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||u++}o=o.nextSibling}return null}function g5(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(u===0)return o;u--}else h!=="/$"&&h!=="/&"||u++}o=o.previousSibling}return null}function p5(o,u,h){switch(u=T0(h),o){case"html":if(o=u.documentElement,!o)throw Error(i(452));return o;case"head":if(o=u.head,!o)throw Error(i(453));return o;case"body":if(o=u.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function Bh(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);Xx(o)}var wr=new Map,m5=new Set;function M0(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Ns=j.d;j.d={f:TV,r:MV,D:kV,C:OV,L:NV,m:DV,X:zV,S:RV,M:FV};function TV(){var o=Ns.f(),u=x0();return o||u}function MV(o){var u=kc(o);u!==null&&u.tag===5&&u.type==="form"?DN(u):Ns.r(o)}var uf=typeof document>"u"?null:document;function y5(o,u,h){var m=uf;if(m&&typeof u=="string"&&u){var x=mr(u);x='link[rel="'+o+'"][href="'+x+'"]',typeof h=="string"&&(x+='[crossorigin="'+h+'"]'),m5.has(x)||(m5.add(x),o={rel:o,crossOrigin:h,href:u},m.querySelector(x)===null&&(u=m.createElement("link"),Rn(u,"link",o),vn(u),m.head.appendChild(u)))}}function kV(o){Ns.D(o),y5("dns-prefetch",o,null)}function OV(o,u){Ns.C(o,u),y5("preconnect",o,u)}function NV(o,u,h){Ns.L(o,u,h);var m=uf;if(m&&o&&u){var x='link[rel="preload"][as="'+mr(u)+'"]';u==="image"&&h&&h.imageSrcSet?(x+='[imagesrcset="'+mr(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(x+='[imagesizes="'+mr(h.imageSizes)+'"]')):x+='[href="'+mr(o)+'"]';var E=x;switch(u){case"style":E=cf(o);break;case"script":E=ff(o)}wr.has(E)||(o=g({rel:"preload",href:u==="image"&&h&&h.imageSrcSet?void 0:o,as:u},h),wr.set(E,o),m.querySelector(x)!==null||u==="style"&&m.querySelector(jh(E))||u==="script"&&m.querySelector(qh(E))||(u=m.createElement("link"),Rn(u,"link",o),vn(u),m.head.appendChild(u)))}}function DV(o,u){Ns.m(o,u);var h=uf;if(h&&o){var m=u&&typeof u.as=="string"?u.as:"script",x='link[rel="modulepreload"][as="'+mr(m)+'"][href="'+mr(o)+'"]',E=x;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=ff(o)}if(!wr.has(E)&&(o=g({rel:"modulepreload",href:o},u),wr.set(E,o),h.querySelector(x)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(qh(E)))return}m=h.createElement("link"),Rn(m,"link",o),vn(m),h.head.appendChild(m)}}}function RV(o,u,h){Ns.S(o,u,h);var m=uf;if(m&&o){var x=Oc(m).hoistableStyles,E=cf(o);u=u||"default";var C=x.get(E);if(!C){var O={loading:0,preload:null};if(C=m.querySelector(jh(E)))O.loading=5;else{o=g({rel:"stylesheet",href:o,"data-precedence":u},h),(h=wr.get(E))&&YS(o,h);var L=C=m.createElement("link");vn(L),Rn(L,"link",o),L._p=new Promise(function(W,ne){L.onload=W,L.onerror=ne}),L.addEventListener("load",function(){O.loading|=1}),L.addEventListener("error",function(){O.loading|=2}),O.loading|=4,k0(C,u,m)}C={type:"stylesheet",instance:C,count:1,state:O},x.set(E,C)}}}function zV(o,u){Ns.X(o,u);var h=uf;if(h&&o){var m=Oc(h).hoistableScripts,x=ff(o),E=m.get(x);E||(E=h.querySelector(qh(x)),E||(o=g({src:o,async:!0},u),(u=wr.get(x))&&XS(o,u),E=h.createElement("script"),vn(E),Rn(E,"link",o),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(x,E))}}function FV(o,u){Ns.M(o,u);var h=uf;if(h&&o){var m=Oc(h).hoistableScripts,x=ff(o),E=m.get(x);E||(E=h.querySelector(qh(x)),E||(o=g({src:o,async:!0,type:"module"},u),(u=wr.get(x))&&XS(o,u),E=h.createElement("script"),vn(E),Rn(E,"link",o),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(x,E))}}function v5(o,u,h,m){var x=(x=ve.current)?M0(x):null;if(!x)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(u=cf(h.href),h=Oc(x).hoistableStyles,m=h.get(u),m||(m={type:"style",instance:null,count:0,state:null},h.set(u,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=cf(h.href);var E=Oc(x).hoistableStyles,C=E.get(o);if(C||(x=x.ownerDocument||x,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(o,C),(E=x.querySelector(jh(o)))&&!E._p&&(C.instance=E,C.state.loading=5),wr.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},wr.set(o,h),E||LV(x,o,h,C.state))),u&&m===null)throw Error(i(528,""));return C}if(u&&m!==null)throw Error(i(529,""));return null;case"script":return u=h.async,h=h.src,typeof h=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=ff(h),h=Oc(x).hoistableScripts,m=h.get(u),m||(m={type:"script",instance:null,count:0,state:null},h.set(u,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function cf(o){return'href="'+mr(o)+'"'}function jh(o){return'link[rel="stylesheet"]['+o+"]"}function b5(o){return g({},o,{"data-precedence":o.precedence,precedence:null})}function LV(o,u,h,m){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?m.loading=1:(u=o.createElement("link"),m.preload=u,u.addEventListener("load",function(){return m.loading|=1}),u.addEventListener("error",function(){return m.loading|=2}),Rn(u,"link",h),vn(u),o.head.appendChild(u))}function ff(o){return'[src="'+mr(o)+'"]'}function qh(o){return"script[async]"+o}function x5(o,u,h){if(u.count++,u.instance===null)switch(u.type){case"style":var m=o.querySelector('style[data-href~="'+mr(h.href)+'"]');if(m)return u.instance=m,vn(m),m;var x=g({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(o.ownerDocument||o).createElement("style"),vn(m),Rn(m,"style",x),k0(m,h.precedence,o),u.instance=m;case"stylesheet":x=cf(h.href);var E=o.querySelector(jh(x));if(E)return u.state.loading|=4,u.instance=E,vn(E),E;m=b5(h),(x=wr.get(x))&&YS(m,x),E=(o.ownerDocument||o).createElement("link"),vn(E);var C=E;return C._p=new Promise(function(O,L){C.onload=O,C.onerror=L}),Rn(E,"link",m),u.state.loading|=4,k0(E,h.precedence,o),u.instance=E;case"script":return E=ff(h.src),(x=o.querySelector(qh(E)))?(u.instance=x,vn(x),x):(m=h,(x=wr.get(E))&&(m=g({},h),XS(m,x)),o=o.ownerDocument||o,x=o.createElement("script"),vn(x),Rn(x,"link",m),o.head.appendChild(x),u.instance=x);case"void":return null;default:throw Error(i(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(m=u.instance,u.state.loading|=4,k0(m,h.precedence,o));return u.instance}function k0(o,u,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=m.length?m[m.length-1]:null,E=x,C=0;C<m.length;C++){var O=m[C];if(O.dataset.precedence===u)E=O;else if(E!==x)break}E?E.parentNode.insertBefore(o,E.nextSibling):(u=h.nodeType===9?h.head:h,u.insertBefore(o,u.firstChild))}function YS(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function XS(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var O0=null;function S5(o,u,h){if(O0===null){var m=new Map,x=O0=new Map;x.set(h,m)}else x=O0,m=x.get(h),m||(m=new Map,x.set(h,m));if(m.has(o))return m;for(m.set(o,null),h=h.getElementsByTagName(o),x=0;x<h.length;x++){var E=h[x];if(!(E[ih]||E[kn]||o==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var C=E.getAttribute(u)||"";C=o+C;var O=m.get(C);O?O.push(E):m.set(C,[E])}}return m}function E5(o,u,h){o=o.ownerDocument||o,o.head.insertBefore(h,u==="title"?o.querySelector("head > title"):null)}function UV(o,u,h){if(h===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function _5(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function BV(o,u,h,m){if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var x=cf(m.href),E=u.querySelector(jh(x));if(E){u=E._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=N0.bind(o),u.then(o,o)),h.state.loading|=4,h.instance=E,vn(E);return}E=u.ownerDocument||u,m=b5(m),(x=wr.get(x))&&YS(m,x),E=E.createElement("link"),vn(E);var C=E;C._p=new Promise(function(O,L){C.onload=O,C.onerror=L}),Rn(E,"link",m),h.instance=E}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(h,u),(u=h.state.preload)&&(h.state.loading&3)===0&&(o.count++,h=N0.bind(o),u.addEventListener("load",h),u.addEventListener("error",h))}}var VS=0;function jV(o,u){return o.stylesheets&&o.count===0&&R0(o,o.stylesheets),0<o.count||0<o.imgCount?function(h){var m=setTimeout(function(){if(o.stylesheets&&R0(o,o.stylesheets),o.unsuspend){var E=o.unsuspend;o.unsuspend=null,E()}},6e4+u);0<o.imgBytes&&VS===0&&(VS=62500*xV());var x=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&R0(o,o.stylesheets),o.unsuspend)){var E=o.unsuspend;o.unsuspend=null,E()}},(o.imgBytes>VS?50:800)+u);return o.unsuspend=h,function(){o.unsuspend=null,clearTimeout(m),clearTimeout(x)}}:null}function N0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)R0(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var D0=null;function R0(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,D0=new Map,u.forEach(qV,o),D0=null,N0.call(o))}function qV(o,u){if(!(u.state.loading&4)){var h=D0.get(o);if(h)var m=h.get(null);else{h=new Map,D0.set(o,h);for(var x=o.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<x.length;E++){var C=x[E];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(h.set(C.dataset.precedence,C),m=C)}m&&h.set(null,m)}x=u.instance,C=x.getAttribute("data-precedence"),E=h.get(C)||m,E===m&&h.set(null,x),h.set(C,x),this.count++,m=N0.bind(this),x.addEventListener("load",m),x.addEventListener("error",m),E?E.parentNode.insertBefore(x,E.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(x,o.firstChild)),u.state.loading|=4}}var Ih={$$typeof:A,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function IV(o,u,h,m,x,E,C,O,L){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Px(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Px(0),this.hiddenUpdates=Px(null),this.identifierPrefix=m,this.onUncaughtError=x,this.onCaughtError=E,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function w5(o,u,h,m,x,E,C,O,L,W,ne,ue){return o=new IV(o,u,h,C,L,W,ne,ue,O),u=1,E===!0&&(u|=24),E=Vi(3,null,null,u),o.current=E,E.stateNode=o,u=$2(),u.refCount++,o.pooledCache=u,u.refCount++,E.memoizedState={element:m,isDehydrated:h,cache:u},O2(E),o}function A5(o){return o?(o=qc,o):qc}function C5(o,u,h,m,x,E){x=A5(x),m.context===null?m.context=x:m.pendingContext=x,m=Co(u),m.payload={element:h},E=E===void 0?null:E,E!==null&&(m.callback=E),h=$o(o,m,u),h!==null&&(Mi(h,o,u),xh(h,o,u))}function $5(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<u?h:u}}function WS(o,u){$5(o,u),(o=o.alternate)&&$5(o,u)}function T5(o){if(o.tag===13||o.tag===31){var u=Wl(o,67108864);u!==null&&Mi(u,o,67108864),WS(o,67108864)}}function M5(o){if(o.tag===13||o.tag===31){var u=Ji();u=Hx(u);var h=Wl(o,u);h!==null&&Mi(h,o,u),WS(o,u)}}var z0=!0;function PV(o,u,h,m){var x=N.T;N.T=null;var E=j.p;try{j.p=2,QS(o,u,h,m)}finally{j.p=E,N.T=x}}function HV(o,u,h,m){var x=N.T;N.T=null;var E=j.p;try{j.p=8,QS(o,u,h,m)}finally{j.p=E,N.T=x}}function QS(o,u,h,m){if(z0){var x=ZS(m);if(x===null)FS(o,u,m,F0,h),O5(o,m);else if(YV(x,o,u,h,m))m.stopPropagation();else if(O5(o,m),u&4&&-1<GV.indexOf(o)){for(;x!==null;){var E=kc(x);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var C=Hl(E.pendingLanes);if(C!==0){var O=E;for(O.pendingLanes|=2,O.entangledLanes|=2;C;){var L=1<<31-Yi(C);O.entanglements[1]|=L,C&=~L}Ta(E),(dt&6)===0&&(v0=Hi()+500,Fh(0))}}break;case 31:case 13:O=Wl(E,2),O!==null&&Mi(O,E,2),x0(),WS(E,2)}if(E=ZS(m),E===null&&FS(o,u,m,F0,h),E===x)break;x=E}x!==null&&m.stopPropagation()}else FS(o,u,m,null,h)}}function ZS(o){return o=Jx(o),KS(o)}var F0=null;function KS(o){if(F0=null,o=Mc(o),o!==null){var u=a(o);if(u===null)o=null;else{var h=u.tag;if(h===13){if(o=s(u),o!==null)return o;o=null}else if(h===31){if(o=l(u),o!==null)return o;o=null}else if(h===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return F0=o,null}function k5(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kY()){case Uk:return 2;case Bk:return 8;case Am:case OY:return 32;case jk:return 268435456;default:return 32}default:return 32}}var JS=!1,Uo=null,Bo=null,jo=null,Ph=new Map,Hh=new Map,qo=[],GV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function O5(o,u){switch(o){case"focusin":case"focusout":Uo=null;break;case"dragenter":case"dragleave":Bo=null;break;case"mouseover":case"mouseout":jo=null;break;case"pointerover":case"pointerout":Ph.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hh.delete(u.pointerId)}}function Gh(o,u,h,m,x,E){return o===null||o.nativeEvent!==E?(o={blockedOn:u,domEventName:h,eventSystemFlags:m,nativeEvent:E,targetContainers:[x]},u!==null&&(u=kc(u),u!==null&&T5(u)),o):(o.eventSystemFlags|=m,u=o.targetContainers,x!==null&&u.indexOf(x)===-1&&u.push(x),o)}function YV(o,u,h,m,x){switch(u){case"focusin":return Uo=Gh(Uo,o,u,h,m,x),!0;case"dragenter":return Bo=Gh(Bo,o,u,h,m,x),!0;case"mouseover":return jo=Gh(jo,o,u,h,m,x),!0;case"pointerover":var E=x.pointerId;return Ph.set(E,Gh(Ph.get(E)||null,o,u,h,m,x)),!0;case"gotpointercapture":return E=x.pointerId,Hh.set(E,Gh(Hh.get(E)||null,o,u,h,m,x)),!0}return!1}function N5(o){var u=Mc(o.target);if(u!==null){var h=a(u);if(h!==null){if(u=h.tag,u===13){if(u=s(h),u!==null){o.blockedOn=u,Yk(o.priority,function(){M5(h)});return}}else if(u===31){if(u=l(h),u!==null){o.blockedOn=u,Yk(o.priority,function(){M5(h)});return}}else if(u===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function L0(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var h=ZS(o.nativeEvent);if(h===null){h=o.nativeEvent;var m=new h.constructor(h.type,h);Kx=m,h.target.dispatchEvent(m),Kx=null}else return u=kc(h),u!==null&&T5(u),o.blockedOn=h,!1;u.shift()}return!0}function D5(o,u,h){L0(o)&&h.delete(u)}function XV(){JS=!1,Uo!==null&&L0(Uo)&&(Uo=null),Bo!==null&&L0(Bo)&&(Bo=null),jo!==null&&L0(jo)&&(jo=null),Ph.forEach(D5),Hh.forEach(D5)}function U0(o,u){o.blockedOn===u&&(o.blockedOn=null,JS||(JS=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,XV)))}var B0=null;function R5(o){B0!==o&&(B0=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){B0===o&&(B0=null);for(var u=0;u<o.length;u+=3){var h=o[u],m=o[u+1],x=o[u+2];if(typeof m!="function"){if(KS(m||h)===null)continue;break}var E=kc(h);E!==null&&(o.splice(u,3),u-=3,Z2(E,{pending:!0,data:x,method:h.method,action:m},m,x))}}))}function df(o){function u(L){return U0(L,o)}Uo!==null&&U0(Uo,o),Bo!==null&&U0(Bo,o),jo!==null&&U0(jo,o),Ph.forEach(u),Hh.forEach(u);for(var h=0;h<qo.length;h++){var m=qo[h];m.blockedOn===o&&(m.blockedOn=null)}for(;0<qo.length&&(h=qo[0],h.blockedOn===null);)N5(h),h.blockedOn===null&&qo.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var x=h[m],E=h[m+1],C=x[_i]||null;if(typeof E=="function")C||R5(h);else if(C){var O=null;if(E&&E.hasAttribute("formAction")){if(x=E,C=E[_i]||null)O=C.formAction;else if(KS(x)!==null)continue}else O=C.action;typeof O=="function"?h[m+1]=O:(h.splice(m,3),m-=3),R5(h)}}}function z5(){function o(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(C){return x=C})},focusReset:"manual",scroll:"manual"})}function u(){x!==null&&(x(),x=null),m||setTimeout(h,20)}function h(){if(!m&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,x=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(h,100),function(){m=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),x!==null&&(x(),x=null)}}}function eE(o){this._internalRoot=o}j0.prototype.render=eE.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(i(409));var h=u.current,m=Ji();C5(h,m,o,u,null,null)},j0.prototype.unmount=eE.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;C5(o.current,2,null,o,null,null),x0(),u[Tc]=null}};function j0(o){this._internalRoot=o}j0.prototype.unstable_scheduleHydration=function(o){if(o){var u=Gk();o={blockedOn:null,target:o,priority:u};for(var h=0;h<qo.length&&u!==0&&u<qo[h].priority;h++);qo.splice(h,0,o),h===0&&N5(o)}};var F5=t.version;if(F5!=="19.2.0")throw Error(i(527,F5,"19.2.0"));j.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=f(u),o=o!==null?d(o):null,o=o===null?null:o.stateNode,o};var VV={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var q0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!q0.isDisabled&&q0.supportsFiber)try{eh=q0.inject(VV),Gi=q0}catch{}}return Xh.createRoot=function(o,u){if(!r(o))throw Error(i(299));var h=!1,m="",x=PN,E=HN,C=GN;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(x=u.onUncaughtError),u.onCaughtError!==void 0&&(E=u.onCaughtError),u.onRecoverableError!==void 0&&(C=u.onRecoverableError)),u=w5(o,1,!1,null,null,h,m,null,x,E,C,z5),o[Tc]=u.current,zS(o),new eE(u)},Xh.hydrateRoot=function(o,u,h){if(!r(o))throw Error(i(299));var m=!1,x="",E=PN,C=HN,O=GN,L=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(E=h.onUncaughtError),h.onCaughtError!==void 0&&(C=h.onCaughtError),h.onRecoverableError!==void 0&&(O=h.onRecoverableError),h.formState!==void 0&&(L=h.formState)),u=w5(o,1,!0,u,h??null,m,x,L,E,C,O,z5),u.context=A5(null),h=u.current,m=Ji(),m=Hx(m),x=Co(m),x.callback=null,$o(h,x,m),h=m,u.current.lanes=h,nh(u,h),Ta(u),o[Tc]=u.current,zS(o),new j0(u)},Xh.version="19.2.0",Xh}var Y5;function aW(){if(Y5)return iE.exports;Y5=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),iE.exports=rW(),iE.exports}var sW=aW();function oW({runs:e,selectedRun:t,onRunChange:n,isLoading:i}){return re.jsxs("div",{className:"selection-panel",children:[re.jsx("h2",{children:"Select Run"}),re.jsx("div",{className:"select-wrapper",children:re.jsxs("select",{value:t||"",onChange:r=>n(r.target.value),disabled:i,className:"select-input",children:[re.jsx("option",{value:"",children:"-- Select a run --"}),e.map(r=>re.jsx("option",{value:r,children:r},r))]})})]})}function lW({events:e,selectedRun:t,onEventSelect:n,isLoading:i}){if(!t)return re.jsx("div",{className:"event-list",children:re.jsx("div",{className:"event-list-placeholder",children:re.jsx("p",{children:"Select a run to view events"})})});if(i)return re.jsx("div",{className:"event-list",children:re.jsx("div",{className:"event-list-placeholder",children:re.jsx("p",{children:"Loading events..."})})});if(e.length===0)return re.jsx("div",{className:"event-list",children:re.jsx("div",{className:"event-list-placeholder",children:re.jsx("p",{children:"No events found for this run"})})});const r=a=>{const s=a.target.value;if(s===""||s===null||s===void 0){n(null);return}const l=parseInt(s,10);if(!isNaN(l)&&l>=0&&l<e.length){const c=e[l];c?n(c):(console.error("Selected event not found at index:",l),n(null))}else console.error("Invalid selection index:",l),n(null)};return re.jsxs("div",{className:"event-list",children:[re.jsxs("h2",{children:["Events for ",t]}),re.jsx("p",{className:"event-list-help",children:"Select an event..."}),re.jsx("select",{className:"event-list-select",size:"10",onChange:r,children:e.map((a,s)=>re.jsx("option",{value:s,children:a.graceid||a.name||"Unknown Event"},a.graceid||a.name||s))})]})}const Dv="https://gwosc.org/api/v2";async function uW(){try{const e=await fetch(`${Dv}/runs`);if(!e.ok)throw new Error(`Failed to fetch runs: ${e.statusText}`);const t=await e.json();return Array.isArray(t)?t:t.results||[]}catch(e){throw console.error("Error fetching runs:",e),e}}async function cW(e){try{const t=await fetch(`${Dv}/runs/${e}/events`);if(!t.ok)throw new Error(`Failed to fetch events: ${t.statusText}`);const n=await t.json();return Array.isArray(n)?n:n.results||[]}catch(t){throw console.error("Error fetching events:",t),t}}async function fW(e){try{const t=await fetch(`${Dv}/events/${e}`);if(!t.ok)throw new Error(`Failed to fetch event details: ${t.statusText}`);return await t.json()}catch(t){throw console.error("Error fetching event details:",t),t}}async function X5(e){try{const t=await fetch(`${Dv}/event-versions/${e}`);if(!t.ok)throw new Error(`Failed to fetch version details: ${t.statusText}`);return await t.json()}catch(t){throw console.error("Error fetching version details:",t),t}}async function V5(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`Failed to fetch strain files: ${t.statusText}`);const n=await t.json();return Array.isArray(n)?n:n.results||[]}catch(t){throw console.error("Error fetching strain files:",t),t}}async function W5(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`Failed to fetch timelines: ${t.statusText}`);const n=await t.json();return Array.isArray(n)?n:n.results||[]}catch(t){throw console.error("Error fetching timelines:",t),t}}async function dW(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`Failed to fetch segments: ${t.statusText}`);const n=await t.json();return Array.isArray(n)?n:n.results||[]}catch(t){throw console.error("Error fetching segments:",t),t}}async function Q5(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`Failed to fetch parameters: ${t.statusText}`);const n=await t.json();return Array.isArray(n)?n:n.results||[]}catch(t){throw console.error("Error fetching parameters:",t),t}}const hW=/("(?:[^\\"]|\\.)*")|[:,]/g;function oE(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),i=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:r}=t;return(function a(s,l,c){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const f=JSON.stringify(s,r);if(f===void 0)return f;const d=i-l.length-c;if(f.length<=d){const g=f.replace(hW,(p,y)=>y||`${p} `);if(g.length<=d)return g}if(r!=null&&(s=JSON.parse(f),r=void 0),typeof s=="object"&&s!==null){const g=l+n,p=[];let y=0,v,b;if(Array.isArray(s)){v="[",b="]";const{length:S}=s;for(;y<S;y++)p.push(a(s[y],g,y===S-1?0:1)||"null")}else{v="{",b="}";const S=Object.keys(s),{length:_}=S;for(;y<_;y++){const w=S[y],A=`${JSON.stringify(w)}: `,$=a(s[w],g,A.length+(y===_-1?0:1));$!==void 0&&p.push(A+$)}}if(p.length>0)return[v,n+p.join(`,
${g}`),b].join(`
${l}`)}return f})(e,"",0)}function Ii(e,t,n){return e.fields=t||[],e.fname=n,e}function Vt(e){return e==null?null:e.fname}function Jn(e){return e==null?null:e.fields}function R8(e){return e.length===1?gW(e[0]):pW(e)}const gW=e=>function(t){return t[e]},pW=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function ae(e){throw Error(e)}function ns(e){const t=[],n=e.length;let i=null,r=0,a="",s,l,c;e=e+"";function f(){t.push(a+e.substring(s,l)),a="",s=l+1}for(s=l=0;l<n;++l)if(c=e[l],c==="\\")a+=e.substring(s,l++),s=l;else if(c===i)f(),i=null,r=-1;else{if(i)continue;s===r&&c==='"'||s===r&&c==="'"?(s=l+1,i=c):c==="."&&!r?l>s?f():s=l+1:c==="["?(l>s&&f(),r=s=l+1):c==="]"&&(r||ae("Access path missing open bracket: "+e),r>0&&f(),r=0,s=l+1)}return r&&ae("Access path missing closing bracket: "+e),i&&ae("Access path missing closing quote: "+e),l>s&&(l++,f()),t}function zr(e,t,n){const i=ns(e);return e=i.length===1?i[0]:e,Ii((n&&n.get||R8)(i),[e],t||e)}const Dp=zr("id"),ii=Ii(e=>e,[],"identity"),Ko=Ii(()=>0,[],"zero"),Cd=Ii(()=>1,[],"one"),Fr=Ii(()=>!0,[],"true"),Ho=Ii(()=>!1,[],"false"),hC=new Set([...Object.getOwnPropertyNames(Object.prototype).filter(e=>typeof Object.prototype[e]=="function"),"__proto__"]);function mW(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const z8=0,gC=1,pC=2,F8=3,L8=4;function Rv(e,t,n=mW){let i=e||z8;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=gC&&n(t||"error","ERROR",arguments),this},warn(){return i>=pC&&n(t||"warn","WARN",arguments),this},info(){return i>=F8&&n(t||"log","INFO",arguments),this},debug(){return i>=L8&&n(t||"log","DEBUG",arguments),this}}}var se=Array.isArray;function Ee(e){return e===Object(e)}const Z5=e=>e!=="__proto__";function $d(...e){return e.reduce((t,n)=>{for(const i in n)if(i==="signals")t.signals=yW(t.signals,n.signals);else{const r=i==="legend"?{layout:1}:i==="style"?!0:null;Td(t,i,n[i],r)}return t},{})}function Td(e,t,n,i){if(!Z5(t))return;let r,a;if(Ee(n)&&!se(n)){a=Ee(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?Td(a,r,n[r]):Z5(r)&&(a[r]=n[r])}else e[t]=n}function yW(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function rt(e){return e[e.length-1]}function Zn(e){return e==null||e===""?null:+e}const U8=e=>t=>e*Math.exp(t),B8=e=>t=>Math.log(e*t),j8=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),q8=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,ey=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function zv(e,t,n,i){const r=n(e[0]),a=n(rt(e)),s=(a-r)*t;return[i(r-s),i(a-s)]}function I8(e,t){return zv(e,t,Zn,ii)}function P8(e,t){var n=Math.sign(e[0]);return zv(e,t,B8(n),U8(n))}function H8(e,t,n){return zv(e,t,ey(n),ey(1/n))}function G8(e,t,n){return zv(e,t,j8(n),q8(n))}function Fv(e,t,n,i,r){const a=i(e[0]),s=i(rt(e)),l=t!=null?i(t):(a+s)/2;return[r(l+(a-l)*n),r(l+(s-l)*n)]}function mC(e,t,n){return Fv(e,t,n,Zn,ii)}function yC(e,t,n){const i=Math.sign(e[0]);return Fv(e,t,n,B8(i),U8(i))}function ty(e,t,n,i){return Fv(e,t,n,ey(i),ey(1/i))}function vC(e,t,n,i){return Fv(e,t,n,j8(i),q8(i))}function Y8(e){return 1+~~(new Date(e).getMonth()/3)}function X8(e){return 1+~~(new Date(e).getUTCMonth()/3)}function _e(e){return e!=null?se(e)?e:[e]:[]}function V8(e,t,n){let i=e[0],r=e[1],a;return r<i&&(a=r,r=i,i=a),a=r-i,a>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-a),i+a]}function Ge(e){return typeof e=="function"}const vW="descending";function bC(e,t,n){n=n||{},t=_e(t)||[];const i=[],r=[],a={},s=n.comparator||bW;return _e(e).forEach((l,c)=>{l!=null&&(i.push(t[c]===vW?-1:1),r.push(l=Ge(l)?l:zr(l,null,n)),(Jn(l)||[]).forEach(f=>a[f]=1))}),r.length===0?null:Ii(s(r,i),Object.keys(a))}const Md=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),bW=(e,t)=>e.length===1?xW(e[0],t[0]):SW(e,t,e.length),xW=(e,t)=>function(n,i){return Md(e(n),e(i))*t},SW=(e,t,n)=>(t.push(0),function(i,r){let a,s=0,l=-1;for(;s===0&&++l<n;)a=e[l],s=Md(a(i),a(r));return s*t[l]});function ri(e){return Ge(e)?e:()=>e}function xC(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function He(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function Xa(e,t){let n=0,i,r,a,s;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(a=s=r;n<i;++n)r=t(e[n]),r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function W8(e,t){const n=e.length;let i=-1,r,a,s,l,c;if(t==null){for(;++i<n;)if(a=e[i],a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(l=c=i;++i<n;)a=e[i],a!=null&&(r>a&&(r=a,l=i),s<a&&(s=a,c=i))}else{for(;++i<n;)if(a=t(e[i],i,e),a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(l=c=i;++i<n;)a=t(e[i],i,e),a!=null&&(r>a&&(r=a,l=i),s<a&&(s=a,c=i))}return[l,c]}function we(e,t){return Object.hasOwn(e,t)}const I0={};function kd(e){let t={},n;function i(a){return we(t,a)&&t[a]!==I0}const r={size:0,empty:0,object:t,has:i,get(a){return i(a)?t[a]:void 0},set(a,s){return i(a)||(++r.size,t[a]===I0&&--r.empty),t[a]=s,this},delete(a){return i(a)&&(--r.size,++r.empty,t[a]=I0),this},clear(){r.size=r.empty=0,r.object=t={}},test(a){return arguments.length?(n=a,r):n},clean(){const a={};let s=0;for(const l in t){const c=t[l];c!==I0&&(!n||!n(c))&&(a[l]=c,++s)}r.size=s,r.empty=0,r.object=t=a}};return e&&Object.keys(e).forEach(a=>{r.set(a,e[a])}),r}function Q8(e,t,n,i,r,a){if(!n&&n!==0)return a;const s=+n;let l=e[0],c=rt(e),f;c<l&&(f=l,l=c,c=f),f=Math.abs(t-l);const d=Math.abs(c-t);return f<d&&f<=s?i:d<=s?r:a}function be(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),He(i,n)}function Tf(e,t,n,i){let r=t[0],a=t[t.length-1],s;return r>a&&(s=r,r=a,a=s),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=a:e<a)}function Ml(e){return typeof e=="boolean"}function ll(e){return Object.prototype.toString.call(e)==="[object Date]"}function Z8(e){return e&&Ge(e[Symbol.iterator])}function ut(e){return typeof e=="number"}function SC(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Se(e){return typeof e=="string"}function EC(e,t,n){e&&(e=t?_e(e).map(l=>l.replace(/\\(.)/g,"$1")):_e(e));const i=e&&e.length,r=n&&n.get||R8,a=l=>r(t?[l]:ns(l));let s;if(!i)s=function(){return""};else if(i===1){const l=a(e[0]);s=function(c){return""+l(c)}}else{const l=e.map(a);s=function(c){let f=""+l[0](c),d=0;for(;++d<i;)f+="|"+l[d](c);return f}}return Ii(s,e,"key")}function K8(e,t){const n=e[0],i=rt(e),r=+t;return r?r===1?i:n+r*(i-n):n}const EW=1e4;function J8(e){e=+e||EW;let t,n,i;const r=()=>{t={},n={},i=0},a=(s,l)=>(++i>e&&(n=t,t={},i=1),t[s]=l);return r(),{clear:r,has:s=>we(t,s)||we(n,s),get:s=>we(t,s)?t[s]:we(n,s)?a(s,n[s]):void 0,set:(s,l)=>we(t,s)?t[s]=l:a(s,l)}}function e9(e,t,n,i){const r=t.length,a=n.length;if(!a)return t;if(!r)return n;const s=i||new t.constructor(r+a);let l=0,c=0,f=0;for(;l<r&&c<a;++f)s[f]=e(t[l],n[c])>0?n[c++]:t[l++];for(;l<r;++l,++f)s[f]=t[l];for(;c<a;++c,++f)s[f]=n[c];return s}function bg(e,t){let n="";for(;--t>=0;)n+=e;return n}function t9(e,t,n,i){const r=n||" ",a=e+"",s=t-a.length;return s<=0?a:i==="left"?bg(r,s)+a:i==="center"?bg(r,~~(s/2))+a+bg(r,Math.ceil(s/2)):a+bg(r,s)}function Rp(e){return e&&rt(e)-e[0]||0}function ye(e){return se(e)?`[${e.map(t=>t===null?"null":ye(t))}]`:Ee(e)||Se(e)?JSON.stringify(e).replaceAll("\u2028","\\u2028").replaceAll("\u2029","\\u2029"):e}function _C(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const _W=e=>ut(e)||ll(e)?e:Date.parse(e);function wC(e,t){return t=t||_W,e==null||e===""?null:t(e)}function AC(e){return e==null||e===""?null:e+""}function ca(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function n9(e,t,n,i){const r=i??"",a=e+"",s=a.length,l=Math.max(0,t-r.length);return s<=t?a:n==="left"?r+a.slice(s-l):n==="center"?a.slice(0,Math.ceil(l/2))+r+a.slice(s-~~(l/2)):a.slice(0,l)+r}function Xo(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const a=t(e[r]);a&&n(a,r,e)}}else e.forEach(n)}var K5={},lE={},uE=34,Vh=10,cE=13;function i9(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function wW(e,t){var n=i9(e);return function(i,r){return t(n(i),r,e)}}function J5(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function ki(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function AW(e){return e<0?"-"+ki(-e,6):e>9999?"+"+ki(e,6):ki(e,4)}function CW(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":AW(e.getUTCFullYear())+"-"+ki(e.getUTCMonth()+1,2)+"-"+ki(e.getUTCDate(),2)+(r?"T"+ki(t,2)+":"+ki(n,2)+":"+ki(i,2)+"."+ki(r,3)+"Z":i?"T"+ki(t,2)+":"+ki(n,2)+":"+ki(i,2)+"Z":n||t?"T"+ki(t,2)+":"+ki(n,2)+"Z":"")}function $W(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(g,p){var y,v,b=r(g,function(S,_){if(y)return y(S,_-1);v=S,y=p?wW(S,p):i9(S)});return b.columns=v||[],b}function r(g,p){var y=[],v=g.length,b=0,S=0,_,w=v<=0,A=!1;g.charCodeAt(v-1)===Vh&&--v,g.charCodeAt(v-1)===cE&&--v;function $(){if(w)return lE;if(A)return A=!1,K5;var k,T=b,D;if(g.charCodeAt(T)===uE){for(;b++<v&&g.charCodeAt(b)!==uE||g.charCodeAt(++b)===uE;);return(k=b)>=v?w=!0:(D=g.charCodeAt(b++))===Vh?A=!0:D===cE&&(A=!0,g.charCodeAt(b)===Vh&&++b),g.slice(T+1,k-1).replace(/""/g,'"')}for(;b<v;){if((D=g.charCodeAt(k=b++))===Vh)A=!0;else if(D===cE)A=!0,g.charCodeAt(b)===Vh&&++b;else if(D!==n)continue;return g.slice(T,k)}return w=!0,g.slice(T,v)}for(;(_=$())!==lE;){for(var M=[];_!==K5&&_!==lE;)M.push(_),_=$();p&&(M=p(M,S++))==null||y.push(M)}return y}function a(g,p){return g.map(function(y){return p.map(function(v){return d(y[v])}).join(e)})}function s(g,p){return p==null&&(p=J5(g)),[p.map(d).join(e)].concat(a(g,p)).join(`
`)}function l(g,p){return p==null&&(p=J5(g)),a(g,p).join(`
`)}function c(g){return g.map(f).join(`
`)}function f(g){return g.map(d).join(e)}function d(g){return g==null?"":g instanceof Date?CW(g):t.test(g+="")?'"'+g.replace(/"/g,'""')+'"':g}return{parse:i,parseRows:r,format:s,formatBody:l,formatRows:c,formatRow:f,formatValue:d}}function TW(e){return e}function MW(e){if(e==null)return TW;var t,n,i=e.scale[0],r=e.scale[1],a=e.translate[0],s=e.translate[1];return function(l,c){c||(t=n=0);var f=2,d=l.length,g=new Array(d);for(g[0]=(t+=l[0])*i+a,g[1]=(n+=l[1])*r+s;f<d;)g[f]=l[f],++f;return g}}function kW(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}function OW(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return eR(e,n)})}:eR(e,t)}function eR(e,t){var n=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,a=r9(e,t);return n==null&&i==null?{type:"Feature",properties:r,geometry:a}:i==null?{type:"Feature",id:n,properties:r,geometry:a}:{type:"Feature",id:n,bbox:i,properties:r,geometry:a}}function r9(e,t){var n=MW(e.transform),i=e.arcs;function r(d,g){g.length&&g.pop();for(var p=i[d<0?~d:d],y=0,v=p.length;y<v;++y)g.push(n(p[y],y));d<0&&kW(g,v)}function a(d){return n(d)}function s(d){for(var g=[],p=0,y=d.length;p<y;++p)r(d[p],g);return g.length<2&&g.push(g[0]),g}function l(d){for(var g=s(d);g.length<4;)g.push(g[0]);return g}function c(d){return d.map(l)}function f(d){var g=d.type,p;switch(g){case"GeometryCollection":return{type:g,geometries:d.geometries.map(f)};case"Point":p=a(d.coordinates);break;case"MultiPoint":p=d.coordinates.map(a);break;case"LineString":p=s(d.arcs);break;case"MultiLineString":p=d.arcs.map(s);break;case"Polygon":p=c(d.arcs);break;case"MultiPolygon":p=d.arcs.map(c);break;default:return null}return{type:g,coordinates:p}}return f(t)}function NW(e,t){var n={},i={},r={},a=[],s=-1;t.forEach(function(f,d){var g=e.arcs[f<0?~f:f],p;g.length<3&&!g[1][0]&&!g[1][1]&&(p=t[++s],t[s]=f,t[d]=p)}),t.forEach(function(f){var d=l(f),g=d[0],p=d[1],y,v;if(y=r[g])if(delete r[y.end],y.push(f),y.end=p,v=i[p]){delete i[v.start];var b=v===y?y:y.concat(v);i[b.start=y.start]=r[b.end=v.end]=b}else i[y.start]=r[y.end]=y;else if(y=i[p])if(delete i[y.start],y.unshift(f),y.start=g,v=r[g]){delete r[v.end];var S=v===y?y:v.concat(y);i[S.start=v.start]=r[S.end=y.end]=S}else i[y.start]=r[y.end]=y;else y=[f],i[y.start=g]=r[y.end=p]=y});function l(f){var d=e.arcs[f<0?~f:f],g=d[0],p;return e.transform?(p=[0,0],d.forEach(function(y){p[0]+=y[0],p[1]+=y[1]})):p=d[d.length-1],f<0?[p,g]:[g,p]}function c(f,d){for(var g in f){var p=f[g];delete d[p.start],delete p.start,delete p.end,p.forEach(function(y){n[y<0?~y:y]=1}),a.push(p)}}return c(r,i),c(i,r),t.forEach(function(f){n[f<0?~f:f]||a.push([f])}),a}function DW(e){return r9(e,RW.apply(this,arguments))}function RW(e,t,n){var i,r,a;if(arguments.length>1)i=zW(e,t,n);else for(r=0,i=new Array(a=e.arcs.length);r<a;++r)i[r]=r;return{type:"MultiLineString",arcs:NW(e,i)}}function zW(e,t,n){var i=[],r=[],a;function s(g){var p=g<0?~g:g;(r[p]||(r[p]=[])).push({i:g,g:a})}function l(g){g.forEach(s)}function c(g){g.forEach(l)}function f(g){g.forEach(c)}function d(g){switch(a=g,g.type){case"GeometryCollection":g.geometries.forEach(d);break;case"LineString":l(g.arcs);break;case"MultiLineString":case"Polygon":c(g.arcs);break;case"MultiPolygon":f(g.arcs);break}}return d(t),r.forEach(n==null?function(g){i.push(g[0].i)}:function(g){n(g[0].g,g[g.length-1].g)&&i.push(g[0].i)}),i}function Vs(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function FW(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Od(e){let t,n,i;e.length!==2?(t=Vs,n=(l,c)=>Vs(e(l),c),i=(l,c)=>e(l)-c):(t=e===Vs||e===FW?e:LW,n=e,i=e);function r(l,c,f=0,d=l.length){if(f<d){if(t(c,c)!==0)return d;do{const g=f+d>>>1;n(l[g],c)<0?f=g+1:d=g}while(f<d)}return f}function a(l,c,f=0,d=l.length){if(f<d){if(t(c,c)!==0)return d;do{const g=f+d>>>1;n(l[g],c)<=0?f=g+1:d=g}while(f<d)}return f}function s(l,c,f=0,d=l.length){const g=r(l,c,f,d-1);return g>f&&i(l[g-1],c)>-i(l[g],c)?g-1:g}return{left:r,center:s,right:a}}function LW(){return 0}function a9(e){return e===null?NaN:+e}function*UW(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const s9=Od(Vs),gl=s9.right,BW=s9.left;Od(a9).center;function jW(e,t){let n=0,i,r=0,a=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(i=s-r,r+=i/++n,a+=i*(s-r));else{let s=-1;for(let l of e)(l=t(l,++s,e))!=null&&(l=+l)>=l&&(i=l-r,r+=i/++n,a+=i*(l-r))}if(n>1)return a/(n-1)}function qW(e,t){const n=jW(e,t);return n&&Math.sqrt(n)}class mi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const a=n[r],s=t+a,l=Math.abs(t)<Math.abs(a)?t-(s-a):a-(s-t);l&&(n[i++]=l),t=s}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,a,s=0;if(n>0){for(s=t[--n];n>0&&(i=s,r=t[--n],s=i+r,a=r-(s-i),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(r=a*2,i=s+r,r==i-s&&(s=i))}return s}}class tR extends Map{constructor(t,n=u9){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(Z_(this,t))}has(t){return super.has(Z_(this,t))}set(t,n){return super.set(o9(this,t),n)}delete(t){return super.delete(l9(this,t))}}class ny extends Set{constructor(t,n=u9){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(Z_(this,t))}add(t){return super.add(o9(this,t))}delete(t){return super.delete(l9(this,t))}}function Z_({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function o9({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function l9({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function u9(e){return e!==null&&typeof e=="object"?e.valueOf():e}function IW(e,t){return Array.from(t,n=>e[n])}function PW(e=Vs){if(e===Vs)return c9;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function c9(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const HW=Math.sqrt(50),GW=Math.sqrt(10),YW=Math.sqrt(2);function iy(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),s=a>=HW?10:a>=GW?5:a>=YW?2:1;let l,c,f;return r<0?(f=Math.pow(10,-r)/s,l=Math.round(e*f),c=Math.round(t*f),l/f<e&&++l,c/f>t&&--c,f=-f):(f=Math.pow(10,r)*s,l=Math.round(e/f),c=Math.round(t/f),l*f<e&&++l,c*f>t&&--c),c<l&&.5<=n&&n<2?iy(e,t,n*2):[l,c,f]}function K_(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,a,s]=i?iy(t,e,n):iy(e,t,n);if(!(a>=r))return[];const l=a-r+1,c=new Array(l);if(i)if(s<0)for(let f=0;f<l;++f)c[f]=(a-f)/-s;else for(let f=0;f<l;++f)c[f]=(a-f)*s;else if(s<0)for(let f=0;f<l;++f)c[f]=(r+f)/-s;else for(let f=0;f<l;++f)c[f]=(r+f)*s;return c}function J_(e,t,n){return t=+t,e=+e,n=+n,iy(e,t,n)[2]}function pl(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?J_(t,e,n):J_(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function Nu(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function ew(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function f9(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?c9:PW(r);i>n;){if(i-n>600){const c=i-n+1,f=t-n+1,d=Math.log(c),g=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*g*(c-g)/c)*(f-c/2<0?-1:1),y=Math.max(n,Math.floor(t-f*g/c+p)),v=Math.min(i,Math.floor(t+(c-f)*g/c+p));f9(e,t,y,v,r)}const a=e[t];let s=n,l=i;for(Wh(e,n,t),r(e[i],a)>0&&Wh(e,n,i);s<l;){for(Wh(e,s,l),++s,--l;r(e[s],a)<0;)++s;for(;r(e[l],a)>0;)--l}r(e[n],a)===0?Wh(e,n,l):(++l,Wh(e,l,i)),l<=t&&(n=l+1),t<=l&&(i=l-1)}return e}function Wh(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function tw(e,t,n){if(e=Float64Array.from(UW(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return ew(e);if(t>=1)return Nu(e);var i,r=(i-1)*t,a=Math.floor(r),s=Nu(f9(e,a).subarray(0,a+1)),l=ew(e.subarray(a+1));return s+(l-s)*(r-a)}}function d9(e,t,n=a9){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,a=Math.floor(r),s=+n(e[a],a,e),l=+n(e[a+1],a+1,e);return s+(l-s)*(r-a)}}function XW(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(a=+a)>=a&&(++n,i+=a)}if(n)return i/n}function h9(e,t){return tw(e,.5,t)}function*VW(e){for(const t of e)yield*t}function g9(e){return Array.from(VW(e))}function rr(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(r);++i<r;)a[i]=e+i*n;return a}function p9(e,t){let n=0;for(let i of e)(i=+i)&&(n+=i);return n}function WW(e,...t){e=new ny(e),t=t.map(QW);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function QW(e){return e instanceof ny?e:new ny(e)}function ZW(...e){const t=new ny;for(const n of e)for(const i of n)t.add(i);return t}function KW(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ry(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Gf(e){return e=ry(Math.abs(e)),e?e[1]:NaN}function JW(e,t){return function(n,i){for(var r=n.length,a=[],s=0,l=e[0],c=0;r>0&&l>0&&(c+l+1>i&&(l=Math.max(1,i-c)),a.push(n.substring(r-=l,r+l)),!((c+=l+1)>i));)l=e[s=(s+1)%e.length];return a.reverse().join(t)}}function eQ(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var tQ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Iu(e){if(!(t=tQ.exec(e)))throw new Error("invalid format: "+e);var t;return new CC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Iu.prototype=CC.prototype;function CC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}CC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function nQ(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var m9;function iQ(e,t){var n=ry(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-(m9=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+ry(e,Math.max(0,t+a-1))[0]}function nR(e,t){var n=ry(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const iR={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:KW,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>nR(e*100,t),r:nR,s:iQ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function rR(e){return e}var aR=Array.prototype.map,sR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function y9(e){var t=e.grouping===void 0||e.thousands===void 0?rR:JW(aR.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?rR:eQ(aR.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function f(g){g=Iu(g);var p=g.fill,y=g.align,v=g.sign,b=g.symbol,S=g.zero,_=g.width,w=g.comma,A=g.precision,$=g.trim,M=g.type;M==="n"?(w=!0,M="g"):iR[M]||(A===void 0&&(A=12),$=!0,M="g"),(S||p==="0"&&y==="=")&&(S=!0,p="0",y="=");var k=b==="$"?n:b==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",T=b==="$"?i:/[%p]/.test(M)?s:"",D=iR[M],R=/[defgprs%]/.test(M);A=A===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function B(U){var Q=k,Y=T,P,z,N;if(M==="c")Y=D(U)+Y,U="";else{U=+U;var j=U<0||1/U<0;if(U=isNaN(U)?c:D(Math.abs(U),A),$&&(U=nQ(U)),j&&+U==0&&v!=="+"&&(j=!1),Q=(j?v==="("?v:l:v==="-"||v==="("?"":v)+Q,Y=(M==="s"?sR[8+m9/3]:"")+Y+(j&&v==="("?")":""),R){for(P=-1,z=U.length;++P<z;)if(N=U.charCodeAt(P),48>N||N>57){Y=(N===46?r+U.slice(P+1):U.slice(P))+Y,U=U.slice(0,P);break}}}w&&!S&&(U=t(U,1/0));var X=Q.length+U.length+Y.length,K=X<_?new Array(_-X+1).join(p):"";switch(w&&S&&(U=t(K+U,K.length?_-Y.length:1/0),K=""),y){case"<":U=Q+U+Y+K;break;case"=":U=Q+K+U+Y;break;case"^":U=K.slice(0,X=K.length>>1)+Q+U+Y+K.slice(X);break;default:U=K+Q+U+Y;break}return a(U)}return B.toString=function(){return g+""},B}function d(g,p){var y=f((g=Iu(g),g.type="f",g)),v=Math.max(-8,Math.min(8,Math.floor(Gf(p)/3)))*3,b=Math.pow(10,-v),S=sR[8+v/3];return function(_){return y(b*_)+S}}return{format:f,formatPrefix:d}}var P0,Lv,$C;rQ({thousands:",",grouping:[3],currency:["$",""]});function rQ(e){return P0=y9(e),Lv=P0.format,$C=P0.formatPrefix,P0}function v9(e){return Math.max(0,-Gf(Math.abs(e)))}function b9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Gf(t)/3)))*3-Gf(Math.abs(e)))}function x9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Gf(t)-Gf(e))+1}const fE=new Date,dE=new Date;function mn(e,t,n,i){function r(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(e(a=new Date(+a)),a),r.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),r.round=a=>{const s=r(a),l=r.ceil(a);return a-s<l-a?s:l},r.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),r.range=(a,s,l)=>{const c=[];if(a=r.ceil(a),l=l==null?1:Math.floor(l),!(a<s)||!(l>0))return c;let f;do c.push(f=new Date(+a)),t(a,l),e(a);while(f<a&&a<s);return c},r.filter=a=>mn(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;t(s,-1),!a(s););else for(;--l>=0;)for(;t(s,1),!a(s););}),n&&(r.count=(a,s)=>(fE.setTime(+a),dE.setTime(+s),e(fE),e(dE),Math.floor(n(fE,dE))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?s=>i(s)%a===0:s=>r.count(0,s)%a===0):r)),r}const Yf=mn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Yf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?mn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Yf);Yf.range;const Is=1e3,Mr=Is*60,Ps=Mr*60,no=Ps*24,TC=no*7,oR=no*30,hE=no*365,Hs=mn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Is)},(e,t)=>(t-e)/Is,e=>e.getUTCSeconds());Hs.range;const Uv=mn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Is)},(e,t)=>{e.setTime(+e+t*Mr)},(e,t)=>(t-e)/Mr,e=>e.getMinutes());Uv.range;const Bv=mn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Mr)},(e,t)=>(t-e)/Mr,e=>e.getUTCMinutes());Bv.range;const jv=mn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Is-e.getMinutes()*Mr)},(e,t)=>{e.setTime(+e+t*Ps)},(e,t)=>(t-e)/Ps,e=>e.getHours());jv.range;const qv=mn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ps)},(e,t)=>(t-e)/Ps,e=>e.getUTCHours());qv.range;const Ws=mn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Mr)/no,e=>e.getDate()-1);Ws.range;const ul=mn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/no,e=>e.getUTCDate()-1);ul.range;const S9=mn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/no,e=>Math.floor(e/no));S9.range;function cc(e){return mn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Mr)/TC)}const Nd=cc(0),ay=cc(1),aQ=cc(2),sQ=cc(3),Xf=cc(4),oQ=cc(5),lQ=cc(6);Nd.range;ay.range;aQ.range;sQ.range;Xf.range;oQ.range;lQ.range;function fc(e){return mn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/TC)}const Dd=fc(0),sy=fc(1),uQ=fc(2),cQ=fc(3),Vf=fc(4),fQ=fc(5),dQ=fc(6);Dd.range;sy.range;uQ.range;cQ.range;Vf.range;fQ.range;dQ.range;const np=mn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());np.range;const ip=mn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());ip.range;const Va=mn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Va.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:mn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Va.range;const Wa=mn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Wa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:mn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Wa.range;function E9(e,t,n,i,r,a){const s=[[Hs,1,Is],[Hs,5,5*Is],[Hs,15,15*Is],[Hs,30,30*Is],[a,1,Mr],[a,5,5*Mr],[a,15,15*Mr],[a,30,30*Mr],[r,1,Ps],[r,3,3*Ps],[r,6,6*Ps],[r,12,12*Ps],[i,1,no],[i,2,2*no],[n,1,TC],[t,1,oR],[t,3,3*oR],[e,1,hE]];function l(f,d,g){const p=d<f;p&&([f,d]=[d,f]);const y=g&&typeof g.range=="function"?g:c(f,d,g),v=y?y.range(f,+d+1):[];return p?v.reverse():v}function c(f,d,g){const p=Math.abs(d-f)/g,y=Od(([,,S])=>S).right(s,p);if(y===s.length)return e.every(pl(f/hE,d/hE,g));if(y===0)return Yf.every(Math.max(pl(f,d,g),1));const[v,b]=s[p/s[y-1][2]<s[y][2]/p?y-1:y];return v.every(b)}return[l,c]}const[hQ,gQ]=E9(Wa,ip,Dd,S9,qv,Bv),[pQ,mQ]=E9(Va,np,Nd,Ws,jv,Uv),qn="year",Fi="quarter",ei="month",hn="week",Li="date",Qn="day",Qa="dayofyear",fr="hours",dr="minutes",Lr="seconds",fa="milliseconds",MC=[qn,Fi,ei,hn,Li,Qn,Qa,fr,dr,Lr,fa],gE=MC.reduce((e,t,n)=>(e[t]=1+n,e),{});function kC(e){const t=_e(e).slice(),n={};return t.length||ae("Missing time unit."),t.forEach(r=>{we(gE,r)?n[r]=1:ae(`Invalid time unit: ${r}.`)}),(n[hn]||n[Qn]?1:0)+(n[Fi]||n[ei]||n[Li]?1:0)+(n[Qa]?1:0)>1&&ae(`Incompatible time units: ${e}`),t.sort((r,a)=>gE[r]-gE[a]),t}const yQ={[qn]:"%Y ",[Fi]:"Q%q ",[ei]:"%b ",[Li]:"%d ",[hn]:"W%U ",[Qn]:"%a ",[Qa]:"%j ",[fr]:"%H:00",[dr]:"00:%M",[Lr]:":%S",[fa]:".%L",[`${qn}-${ei}`]:"%Y-%m ",[`${qn}-${ei}-${Li}`]:"%Y-%m-%d ",[`${fr}-${dr}`]:"%H:%M"};function _9(e,t){const n=He({},yQ,t),i=kC(e),r=i.length;let a="",s=0,l,c;for(s=0;s<r;)for(l=i.length;l>s;--l)if(c=i.slice(s,l).join("-"),n[c]!=null){a+=n[c],s=l;break}return a.trim()}const Eu=new Date;function OC(e){return Eu.setFullYear(e),Eu.setMonth(0),Eu.setDate(1),Eu.setHours(0,0,0,0),Eu}function w9(e){return C9(new Date(e))}function A9(e){return nw(new Date(e))}function C9(e){return Ws.count(OC(e.getFullYear())-1,e)}function nw(e){return Nd.count(OC(e.getFullYear())-1,e)}function iw(e){return OC(e).getDay()}function vQ(e,t,n,i,r,a,s){if(0<=e&&e<100){const l=new Date(-1,t,n,i,r,a,s);return l.setFullYear(e),l}return new Date(e,t,n,i,r,a,s)}function $9(e){return M9(new Date(e))}function T9(e){return rw(new Date(e))}function M9(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return ul.count(t-1,e)}function rw(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Dd.count(t-1,e)}function aw(e){return Eu.setTime(Date.UTC(e,0,1)),Eu.getUTCDay()}function bQ(e,t,n,i,r,a,s){if(0<=e&&e<100){const l=new Date(Date.UTC(-1,t,n,i,r,a,s));return l.setUTCFullYear(n.y),l}return new Date(Date.UTC(e,t,n,i,r,a,s))}function k9(e,t,n,i,r){const a=t||1,s=rt(e),l=(_,w,A)=>(A=A||_,xQ(n[A],i[A],_===s&&a,w)),c=new Date,f=ca(e),d=f[qn]?l(qn):ri(2012),g=f[ei]?l(ei):f[Fi]?l(Fi):Ko,p=f[hn]&&f[Qn]?l(Qn,1,hn+Qn):f[hn]?l(hn,1):f[Qn]?l(Qn,1):f[Li]?l(Li,1):f[Qa]?l(Qa,1):Cd,y=f[fr]?l(fr):Ko,v=f[dr]?l(dr):Ko,b=f[Lr]?l(Lr):Ko,S=f[fa]?l(fa):Ko;return function(_){c.setTime(+_);const w=d(c);return r(w,g(c),p(c,w),y(c),v(c),b(c),S(c))}}function xQ(e,t,n,i){const r=n<=1?e:i?(a,s)=>i+n*Math.floor((e(a,s)-i)/n):(a,s)=>n*Math.floor(e(a,s)/n);return t?(a,s)=>t(r(a,s),s):r}function Wf(e,t,n){return t+e*7-(n+6)%7}const SQ={[qn]:e=>e.getFullYear(),[Fi]:e=>Math.floor(e.getMonth()/3),[ei]:e=>e.getMonth(),[Li]:e=>e.getDate(),[fr]:e=>e.getHours(),[dr]:e=>e.getMinutes(),[Lr]:e=>e.getSeconds(),[fa]:e=>e.getMilliseconds(),[Qa]:e=>C9(e),[hn]:e=>nw(e),[hn+Qn]:(e,t)=>Wf(nw(e),e.getDay(),iw(t)),[Qn]:(e,t)=>Wf(1,e.getDay(),iw(t))},EQ={[Fi]:e=>3*e,[hn]:(e,t)=>Wf(e,0,iw(t))};function O9(e,t){return k9(e,t||1,SQ,EQ,vQ)}const _Q={[qn]:e=>e.getUTCFullYear(),[Fi]:e=>Math.floor(e.getUTCMonth()/3),[ei]:e=>e.getUTCMonth(),[Li]:e=>e.getUTCDate(),[fr]:e=>e.getUTCHours(),[dr]:e=>e.getUTCMinutes(),[Lr]:e=>e.getUTCSeconds(),[fa]:e=>e.getUTCMilliseconds(),[Qa]:e=>M9(e),[hn]:e=>rw(e),[Qn]:(e,t)=>Wf(1,e.getUTCDay(),aw(t)),[hn+Qn]:(e,t)=>Wf(rw(e),e.getUTCDay(),aw(t))},wQ={[Fi]:e=>3*e,[hn]:(e,t)=>Wf(e,0,aw(t))};function N9(e,t){return k9(e,t||1,_Q,wQ,bQ)}const AQ={[qn]:Va,[Fi]:np.every(3),[ei]:np,[hn]:Nd,[Li]:Ws,[Qn]:Ws,[Qa]:Ws,[fr]:jv,[dr]:Uv,[Lr]:Hs,[fa]:Yf},CQ={[qn]:Wa,[Fi]:ip.every(3),[ei]:ip,[hn]:Dd,[Li]:ul,[Qn]:ul,[Qa]:ul,[fr]:qv,[dr]:Bv,[Lr]:Hs,[fa]:Yf};function Rd(e){return AQ[e]}function zd(e){return CQ[e]}function D9(e,t,n){return e?e.offset(t,n):void 0}function R9(e,t,n){return D9(Rd(e),t,n)}function z9(e,t,n){return D9(zd(e),t,n)}function F9(e,t,n,i){return e?e.range(t,n,i):void 0}function L9(e,t,n,i){return F9(Rd(e),t,n,i)}function U9(e,t,n,i){return F9(zd(e),t,n,i)}const xg=1e3,Sg=xg*60,Eg=Sg*60,Iv=Eg*24,$Q=Iv*7,lR=Iv*30,sw=Iv*365,B9=[qn,ei,Li,fr,dr,Lr,fa],_g=B9.slice(0,-1),wg=_g.slice(0,-1),Ag=wg.slice(0,-1),TQ=Ag.slice(0,-1),MQ=[qn,hn],uR=[qn,ei],j9=[qn],Qh=[[_g,1,xg],[_g,5,5*xg],[_g,15,15*xg],[_g,30,30*xg],[wg,1,Sg],[wg,5,5*Sg],[wg,15,15*Sg],[wg,30,30*Sg],[Ag,1,Eg],[Ag,3,3*Eg],[Ag,6,6*Eg],[Ag,12,12*Eg],[TQ,1,Iv],[MQ,1,$Q],[uR,1,lR],[uR,3,3*lR],[j9,1,sw]];function q9(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(Rp(t))/n;let r=Od(l=>l[2]).right(Qh,i),a,s;return r===Qh.length?(a=j9,s=pl(t[0]/sw,t[1]/sw,n)):r?(r=Qh[i/Qh[r-1][2]<Qh[r][2]/i?r-1:r],a=r[0],s=r[1]):(a=B9,s=Math.max(pl(t[0],t[1],n),1)),{units:a,step:s}}function pE(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function mE(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Zh(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function I9(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,a=e.days,s=e.shortDays,l=e.months,c=e.shortMonths,f=Kh(r),d=Jh(r),g=Kh(a),p=Jh(a),y=Kh(s),v=Jh(s),b=Kh(l),S=Jh(l),_=Kh(c),w=Jh(c),A={a:j,A:X,b:K,B:fe,c:null,d:pR,e:pR,f:KQ,g:lZ,G:cZ,H:WQ,I:QQ,j:ZQ,L:P9,m:JQ,M:eZ,p:F,q:G,Q:vR,s:bR,S:tZ,u:nZ,U:iZ,V:rZ,w:aZ,W:sZ,x:null,X:null,y:oZ,Y:uZ,Z:fZ,"%":yR},$={a:le,A:I,b:J,B:ve,c:null,d:mR,e:mR,f:pZ,g:AZ,G:$Z,H:dZ,I:hZ,j:gZ,L:G9,m:mZ,M:yZ,p:Ae,q:ze,Q:vR,s:bR,S:vZ,u:bZ,U:xZ,V:SZ,w:EZ,W:_Z,x:null,X:null,y:wZ,Y:CZ,Z:TZ,"%":yR},M={a:B,A:U,b:Q,B:Y,c:P,d:hR,e:hR,f:GQ,g:dR,G:fR,H:gR,I:gR,j:qQ,L:HQ,m:jQ,M:IQ,p:R,q:BQ,Q:XQ,s:VQ,S:PQ,u:RQ,U:zQ,V:FQ,w:DQ,W:LQ,x:z,X:N,y:dR,Y:fR,Z:UQ,"%":YQ};A.x=k(n,A),A.X=k(i,A),A.c=k(t,A),$.x=k(n,$),$.X=k(i,$),$.c=k(t,$);function k(ce,Le){return function(je){var ge=[],tn=-1,Qe=0,It=ce.length,nn,Gr,Jd;for(je instanceof Date||(je=new Date(+je));++tn<It;)ce.charCodeAt(tn)===37&&(ge.push(ce.slice(Qe,tn)),(Gr=cR[nn=ce.charAt(++tn)])!=null?nn=ce.charAt(++tn):Gr=nn==="e"?" ":"0",(Jd=Le[nn])&&(nn=Jd(je,Gr)),ge.push(nn),Qe=tn+1);return ge.push(ce.slice(Qe,tn)),ge.join("")}}function T(ce,Le){return function(je){var ge=Zh(1900,void 0,1),tn=D(ge,ce,je+="",0),Qe,It;if(tn!=je.length)return null;if("Q"in ge)return new Date(ge.Q);if("s"in ge)return new Date(ge.s*1e3+("L"in ge?ge.L:0));if(Le&&!("Z"in ge)&&(ge.Z=0),"p"in ge&&(ge.H=ge.H%12+ge.p*12),ge.m===void 0&&(ge.m="q"in ge?ge.q:0),"V"in ge){if(ge.V<1||ge.V>53)return null;"w"in ge||(ge.w=1),"Z"in ge?(Qe=mE(Zh(ge.y,0,1)),It=Qe.getUTCDay(),Qe=It>4||It===0?sy.ceil(Qe):sy(Qe),Qe=ul.offset(Qe,(ge.V-1)*7),ge.y=Qe.getUTCFullYear(),ge.m=Qe.getUTCMonth(),ge.d=Qe.getUTCDate()+(ge.w+6)%7):(Qe=pE(Zh(ge.y,0,1)),It=Qe.getDay(),Qe=It>4||It===0?ay.ceil(Qe):ay(Qe),Qe=Ws.offset(Qe,(ge.V-1)*7),ge.y=Qe.getFullYear(),ge.m=Qe.getMonth(),ge.d=Qe.getDate()+(ge.w+6)%7)}else("W"in ge||"U"in ge)&&("w"in ge||(ge.w="u"in ge?ge.u%7:"W"in ge?1:0),It="Z"in ge?mE(Zh(ge.y,0,1)).getUTCDay():pE(Zh(ge.y,0,1)).getDay(),ge.m=0,ge.d="W"in ge?(ge.w+6)%7+ge.W*7-(It+5)%7:ge.w+ge.U*7-(It+6)%7);return"Z"in ge?(ge.H+=ge.Z/100|0,ge.M+=ge.Z%100,mE(ge)):pE(ge)}}function D(ce,Le,je,ge){for(var tn=0,Qe=Le.length,It=je.length,nn,Gr;tn<Qe;){if(ge>=It)return-1;if(nn=Le.charCodeAt(tn++),nn===37){if(nn=Le.charAt(tn++),Gr=M[nn in cR?Le.charAt(tn++):nn],!Gr||(ge=Gr(ce,je,ge))<0)return-1}else if(nn!=je.charCodeAt(ge++))return-1}return ge}function R(ce,Le,je){var ge=f.exec(Le.slice(je));return ge?(ce.p=d.get(ge[0].toLowerCase()),je+ge[0].length):-1}function B(ce,Le,je){var ge=y.exec(Le.slice(je));return ge?(ce.w=v.get(ge[0].toLowerCase()),je+ge[0].length):-1}function U(ce,Le,je){var ge=g.exec(Le.slice(je));return ge?(ce.w=p.get(ge[0].toLowerCase()),je+ge[0].length):-1}function Q(ce,Le,je){var ge=_.exec(Le.slice(je));return ge?(ce.m=w.get(ge[0].toLowerCase()),je+ge[0].length):-1}function Y(ce,Le,je){var ge=b.exec(Le.slice(je));return ge?(ce.m=S.get(ge[0].toLowerCase()),je+ge[0].length):-1}function P(ce,Le,je){return D(ce,t,Le,je)}function z(ce,Le,je){return D(ce,n,Le,je)}function N(ce,Le,je){return D(ce,i,Le,je)}function j(ce){return s[ce.getDay()]}function X(ce){return a[ce.getDay()]}function K(ce){return c[ce.getMonth()]}function fe(ce){return l[ce.getMonth()]}function F(ce){return r[+(ce.getHours()>=12)]}function G(ce){return 1+~~(ce.getMonth()/3)}function le(ce){return s[ce.getUTCDay()]}function I(ce){return a[ce.getUTCDay()]}function J(ce){return c[ce.getUTCMonth()]}function ve(ce){return l[ce.getUTCMonth()]}function Ae(ce){return r[+(ce.getUTCHours()>=12)]}function ze(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var Le=k(ce+="",A);return Le.toString=function(){return ce},Le},parse:function(ce){var Le=T(ce+="",!1);return Le.toString=function(){return ce},Le},utcFormat:function(ce){var Le=k(ce+="",$);return Le.toString=function(){return ce},Le},utcParse:function(ce){var Le=T(ce+="",!0);return Le.toString=function(){return ce},Le}}}var cR={"-":"",_:" ",0:"0"},Tn=/^\s*\d+/,kQ=/^%/,OQ=/[\\^$*+?|[\]().{}]/g;function ct(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(t)+r:r)}function NQ(e){return e.replace(OQ,"\\$&")}function Kh(e){return new RegExp("^(?:"+e.map(NQ).join("|")+")","i")}function Jh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function DQ(e,t,n){var i=Tn.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function RQ(e,t,n){var i=Tn.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function zQ(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function FQ(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function LQ(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function fR(e,t,n){var i=Tn.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function dR(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function UQ(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function BQ(e,t,n){var i=Tn.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function jQ(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function hR(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function qQ(e,t,n){var i=Tn.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function gR(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function IQ(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function PQ(e,t,n){var i=Tn.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function HQ(e,t,n){var i=Tn.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function GQ(e,t,n){var i=Tn.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function YQ(e,t,n){var i=kQ.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function XQ(e,t,n){var i=Tn.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function VQ(e,t,n){var i=Tn.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function pR(e,t){return ct(e.getDate(),t,2)}function WQ(e,t){return ct(e.getHours(),t,2)}function QQ(e,t){return ct(e.getHours()%12||12,t,2)}function ZQ(e,t){return ct(1+Ws.count(Va(e),e),t,3)}function P9(e,t){return ct(e.getMilliseconds(),t,3)}function KQ(e,t){return P9(e,t)+"000"}function JQ(e,t){return ct(e.getMonth()+1,t,2)}function eZ(e,t){return ct(e.getMinutes(),t,2)}function tZ(e,t){return ct(e.getSeconds(),t,2)}function nZ(e){var t=e.getDay();return t===0?7:t}function iZ(e,t){return ct(Nd.count(Va(e)-1,e),t,2)}function H9(e){var t=e.getDay();return t>=4||t===0?Xf(e):Xf.ceil(e)}function rZ(e,t){return e=H9(e),ct(Xf.count(Va(e),e)+(Va(e).getDay()===4),t,2)}function aZ(e){return e.getDay()}function sZ(e,t){return ct(ay.count(Va(e)-1,e),t,2)}function oZ(e,t){return ct(e.getFullYear()%100,t,2)}function lZ(e,t){return e=H9(e),ct(e.getFullYear()%100,t,2)}function uZ(e,t){return ct(e.getFullYear()%1e4,t,4)}function cZ(e,t){var n=e.getDay();return e=n>=4||n===0?Xf(e):Xf.ceil(e),ct(e.getFullYear()%1e4,t,4)}function fZ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ct(t/60|0,"0",2)+ct(t%60,"0",2)}function mR(e,t){return ct(e.getUTCDate(),t,2)}function dZ(e,t){return ct(e.getUTCHours(),t,2)}function hZ(e,t){return ct(e.getUTCHours()%12||12,t,2)}function gZ(e,t){return ct(1+ul.count(Wa(e),e),t,3)}function G9(e,t){return ct(e.getUTCMilliseconds(),t,3)}function pZ(e,t){return G9(e,t)+"000"}function mZ(e,t){return ct(e.getUTCMonth()+1,t,2)}function yZ(e,t){return ct(e.getUTCMinutes(),t,2)}function vZ(e,t){return ct(e.getUTCSeconds(),t,2)}function bZ(e){var t=e.getUTCDay();return t===0?7:t}function xZ(e,t){return ct(Dd.count(Wa(e)-1,e),t,2)}function Y9(e){var t=e.getUTCDay();return t>=4||t===0?Vf(e):Vf.ceil(e)}function SZ(e,t){return e=Y9(e),ct(Vf.count(Wa(e),e)+(Wa(e).getUTCDay()===4),t,2)}function EZ(e){return e.getUTCDay()}function _Z(e,t){return ct(sy.count(Wa(e)-1,e),t,2)}function wZ(e,t){return ct(e.getUTCFullYear()%100,t,2)}function AZ(e,t){return e=Y9(e),ct(e.getUTCFullYear()%100,t,2)}function CZ(e,t){return ct(e.getUTCFullYear()%1e4,t,4)}function $Z(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Vf(e):Vf.ceil(e),ct(e.getUTCFullYear()%1e4,t,4)}function TZ(){return"+0000"}function yR(){return"%"}function vR(e){return+e}function bR(e){return Math.floor(+e/1e3)}var hf,NC,X9,DC,V9;MZ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function MZ(e){return hf=I9(e),NC=hf.format,X9=hf.parse,DC=hf.utcFormat,V9=hf.utcParse,hf}function Cg(e){const t={};return n=>t[n]||(t[n]=e(n))}function kZ(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let a=OZ(i,r);const s=a<i.length?i.slice(a):"";for(;--a>r;)if(i[a]!=="0"){++a;break}return i.slice(0,a)+s}}function OZ(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function W9(e){const t=Cg(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=Iu(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return kZ(t(r),t(".1f")(1)[1])}else return t(r)},formatSpan(i,r,a,s){s=Iu(s??",f");const l=pl(i,r,a),c=Math.max(Math.abs(i),Math.abs(r));let f;if(s.precision==null)switch(s.type){case"s":return isNaN(f=b9(l,c))||(s.precision=f),n(s,c);case"":case"e":case"g":case"p":case"r":{isNaN(f=x9(l,c))||(s.precision=f-(s.type==="e"));break}case"f":case"%":{isNaN(f=v9(l))||(s.precision=f-(s.type==="%")*2);break}}return t(s)}}}let ow;Q9();function Q9(){return ow=W9({format:Lv,formatPrefix:$C})}function Z9(e){return W9(y9(e))}function oy(e){return arguments.length?ow=Z9(e):ow}function xR(e,t,n){n=n||{},Ee(n)||ae(`Invalid time multi-format specifier: ${n}`);const i=t(Lr),r=t(dr),a=t(fr),s=t(Li),l=t(hn),c=t(ei),f=t(Fi),d=t(qn),g=e(n[fa]||".%L"),p=e(n[Lr]||":%S"),y=e(n[dr]||"%I:%M"),v=e(n[fr]||"%I %p"),b=e(n[Li]||n[Qn]||"%a %d"),S=e(n[hn]||"%b %d"),_=e(n[ei]||"%B"),w=e(n[Fi]||"%B"),A=e(n[qn]||"%Y");return $=>(i($)<$?g:r($)<$?p:a($)<$?y:s($)<$?v:c($)<$?l($)<$?b:S:d($)<$?f($)<$?_:w:A)($)}function K9(e){const t=Cg(e.format),n=Cg(e.utcFormat);return{timeFormat:i=>Se(i)?t(i):xR(t,Rd,i),utcFormat:i=>Se(i)?n(i):xR(n,zd,i),timeParse:Cg(e.parse),utcParse:Cg(e.utcParse)}}let lw;J9();function J9(){return lw=K9({format:NC,parse:X9,utcFormat:DC,utcParse:V9})}function e7(e){return K9(I9(e))}function rp(e){return arguments.length?lw=e7(e):lw}const uw=(e,t)=>He({},e,t);function t7(e,t){const n=e?Z9(e):oy(),i=t?e7(t):rp();return uw(n,i)}function RC(e,t){const n=arguments.length;return n&&n!==2&&ae("defaultLocale expects either zero or two arguments."),n?uw(oy(e),rp(t)):uw(oy(),rp())}function NZ(){return Q9(),J9(),RC()}const DZ=/^(data:|([A-Za-z]+:)?\/\/)/,RZ=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,zZ=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,SR="file://";function FZ(e){return t=>({options:t||{},sanitize:UZ,load:LZ,fileAccess:!1,file:BZ(),http:qZ})}async function LZ(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t?.http)}async function UZ(e,t){t=He({},this.options,t);const n=this.fileAccess,i={href:null};let r,a,s;const l=RZ.test(e.replace(zZ,""));(e==null||typeof e!="string"||!l)&&ae("Sanitize failure, invalid URI: "+ye(e));const c=DZ.test(e);return(s=t.baseURL)&&!c&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),a=(r=e.startsWith(SR))||t.mode==="file"||t.mode!=="http"&&!c&&n,r?e=e.slice(SR.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!a}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function BZ(e){return jZ}async function jZ(){ae("No file system access.")}async function qZ(e,t){const n=He({},this.options.http,t),i=t&&t.response,r=await fetch(e,n);return r.ok?Ge(r[i])?r[i]():r.text():ae(r.status+""+r.statusText)}const IZ=e=>e!=null&&e===e,PZ=e=>e==="true"||e==="false"||e===!0||e===!1,HZ=e=>!Number.isNaN(Date.parse(e)),n7=e=>!Number.isNaN(+e)&&!(e instanceof Date),GZ=e=>n7(e)&&Number.isInteger(+e),cw={boolean:_C,integer:Zn,number:Zn,date:wC,string:AC,unknown:ii},H0=[PZ,GZ,n7,HZ],YZ=["boolean","integer","number","date"];function i7(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=H0.length,r=H0.map((a,s)=>s+1);for(let a=0,s=0,l,c;a<n;++a)for(c=t?e[a][t]:e[a],l=0;l<i;++l)if(r[l]&&IZ(c)&&!H0[l](c)&&(r[l]=0,++s,s===H0.length))return"string";return YZ[r.reduce((a,s)=>a===0?s:a,0)-1]}function r7(e,t){return t.reduce((n,i)=>(n[i]=i7(e,i),n),{})}function ER(e){const t=function(n,i){const r={delimiter:e};return zC(n,i?He(i,r):r)};return t.responseType="text",t}function zC(e,t){return t.header&&(e=t.header.map(ye).join(t.delimiter)+`
`+e),$W(t.delimiter).parse(e+"")}zC.responseType="text";function XZ(e){return typeof Buffer=="function"&&Ge(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function FC(e,t){const n=t&&t.property?zr(t.property):ii;return Ee(e)&&!XZ(e)?VZ(n(e),t):n(JSON.parse(e))}FC.responseType="json";function VZ(e,t){return!se(e)&&Z8(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const WZ={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function a7(e,t){let n,i,r,a;return e=FC(e,t),t&&t.feature?(n=OW,r=t.feature):t&&t.mesh?(n=DW,r=t.mesh,a=WZ[t.filter]):ae("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,a):ae("Invalid TopoJSON object: "+r),i&&i.features||[i]}a7.responseType="json";const T1={dsv:zC,csv:ER(","),tsv:ER("	"),json:FC,topojson:a7};function LC(e,t){return arguments.length>1?(T1[e]=t,this):we(T1,e)?T1[e]:null}function s7(e){const t=LC(e);return t&&t.responseType||"text"}function o7(e,t,n,i){t=t||{};const r=LC(t.type||"json");return r||ae("Unknown data format type: "+t.type),e=r(e,t),t.parse&&QZ(e,t.parse,n,i),we(e,"columns")&&delete e.columns,e}function QZ(e,t,n,i){if(!e.length)return;const r=rp();n=n||r.timeParse,i=i||r.utcParse;let a=e.columns||Object.keys(e[0]),s,l,c,f,d,g;t==="auto"&&(t=r7(e,a)),a=Object.keys(t);const p=a.map(y=>{const v=t[y];let b,S;if(v&&(v.startsWith("date:")||v.startsWith("utc:")))return b=v.split(/:(.+)?/,2),S=b[1],(S[0]==="'"&&S[S.length-1]==="'"||S[0]==='"'&&S[S.length-1]==='"')&&(S=S.slice(1,-1)),(b[0]==="utc"?i:n)(S);if(!cw[v])throw Error("Illegal format pattern: "+y+":"+v);return cw[v]});for(c=0,d=e.length,g=a.length;c<d;++c)for(s=e[c],f=0;f<g;++f)l=a[f],s[l]=p[f](s[l])}const Pv=FZ();function Hv(e){const t=e||ii,n=[],i={};return n.add=r=>{const a=t(r);return i[a]||(i[a]=1,n.push(r)),n},n.remove=r=>{const a=t(r);if(i[a]){i[a]=0;const s=n.indexOf(r);s>=0&&n.splice(s,1)}return n},n}async function M1(e,t){try{await t(e)}catch(n){e.error(n)}}const l7=Symbol("vega_id");let ZZ=1;function Gv(e){return!!(e&&Oe(e))}function Oe(e){return e[l7]}function u7(e,t){return e[l7]=t,e}function gt(e){const t=e===Object(e)?e:{data:e};return Oe(t)?t:u7(t,ZZ++)}function UC(e){return Yv(e,gt({}))}function Yv(e,t){for(const n in e)t[n]=e[n];return t}function c7(e,t){return u7(t,Oe(e))}function dc(e,t){return e?t?(n,i)=>e(n,i)||Oe(t(n))-Oe(t(i)):(n,i)=>e(n,i)||Oe(n)-Oe(i):null}function f7(e){return e&&e.constructor===hc}function hc(){const e=[],t=[],n=[],i=[],r=[];let a=null,s=!1;return{constructor:hc,insert(l){const c=_e(l),f=c.length;for(let d=0;d<f;++d)e.push(c[d]);return this},remove(l){const c=Ge(l)?i:t,f=_e(l),d=f.length;for(let g=0;g<d;++g)c.push(f[g]);return this},modify(l,c,f){const d={field:c,value:ri(f)};return Ge(l)?(d.filter=l,r.push(d)):(d.tuple=l,n.push(d)),this},encode(l,c){return Ge(l)?r.push({filter:l,field:c}):n.push({tuple:l,field:c}),this},clean(l){return a=l,this},reflow(){return s=!0,this},pulse(l,c){const f={},d={};let g,p,y,v,b,S;for(g=0,p=c.length;g<p;++g)f[Oe(c[g])]=1;for(g=0,p=t.length;g<p;++g)b=t[g],f[Oe(b)]=-1;for(g=0,p=i.length;g<p;++g)v=i[g],c.forEach(w=>{v(w)&&(f[Oe(w)]=-1)});for(g=0,p=e.length;g<p;++g)b=e[g],S=Oe(b),f[S]?f[S]=1:l.add.push(gt(e[g]));for(g=0,p=c.length;g<p;++g)b=c[g],f[Oe(b)]<0&&l.rem.push(b);function _(w,A,$){$?w[A]=$(w):l.encode=A,s||(d[Oe(w)]=w)}for(g=0,p=n.length;g<p;++g)y=n[g],b=y.tuple,v=y.field,S=f[Oe(b)],S>0&&(_(b,v,y.value),l.modifies(v));for(g=0,p=r.length;g<p;++g)y=r[g],v=y.filter,c.forEach(w=>{v(w)&&f[Oe(w)]>0&&_(w,y.field,y.value)}),l.modifies(y.field);if(s)l.mod=t.length||i.length?c.filter(w=>f[Oe(w)]>0):c.slice();else for(S in d)l.mod.push(d[S]);return(a||a==null&&(t.length||i.length))&&l.clean(!0),l}}}const k1="_:mod:_";function Xv(){Object.defineProperty(this,k1,{writable:!0,value:{}})}Xv.prototype={set(e,t,n,i){const r=this,a=r[e],s=r[k1];return t!=null&&t>=0?(a[t]!==n||i)&&(a[t]=n,s[t+":"+e]=-1,s[e]=-1):(a!==n||i)&&(r[e]=n,s[e]=se(n)?1+n.length:-1),r},modified(e,t){const n=this[k1];if(arguments.length){if(se(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[k1]={},this}};let KZ=0;const JZ="pulse",eK=new Xv,tK=1,nK=2;function Tt(e,t,n,i){this.id=++KZ,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function _R(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Tt.prototype={targets(){return this._targets||(this._targets=Hv(Dp))},set(e){return this.value!==e?(this.value=e,1):0},skip:_R(tK),modified:_R(nK),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new Xv,r=this._argops=this._argops||[],a=[];let s,l,c,f;const d=(g,p,y)=>{y instanceof Tt?(y!==this&&(t&&y.targets().add(this),a.push(y)),r.push({op:y,name:g,index:p})):i.set(g,p,y)};for(s in e)if(l=e[s],s===JZ)_e(l).forEach(g=>{g instanceof Tt?g!==this&&(g.targets().add(this),a.push(g)):ae("Pulse parameters must be operator instances.")}),this.source=l;else if(se(l))for(i.set(s,-1,Array(c=l.length)),f=0;f<c;++f)d(s,f,l[f]);else d(s,-1,l);return this.marshall().clear(),n&&(r.initonly=!0),a},marshall(e){const t=this._argval||eK,n=this._argops;let i,r,a,s;if(n){const l=n.length;for(r=0;r<l;++r)i=n[r],a=i.op,s=a.modified()&&a.stamp===e,t.set(i.name,i.index,a.value,s);if(n.initonly){for(r=0;r<l;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function iK(e,t,n,i){let r=1,a;return e instanceof Tt?a=e:e&&e.prototype instanceof Tt?a=new e:Ge(e)?a=new Tt(null,e):(r=0,a=new Tt(e,t)),this.rank(a),r&&(i=n,n=t),n&&this.connect(a,a.parameters(n,i)),this.touch(a),a}function rK(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank){this.rerank(e);return}}let aK=0;function Vv(e,t,n){this.id=++aK,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Go(e,t,n){return new Vv(e,t,n)}Vv.prototype={_filter:Fr,_apply:ii,targets(){return this._targets||(this._targets=Hv(Dp))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Go(e);return this.targets().add(t),t},apply(e){const t=Go(null,e);return this.targets().add(t),t},merge(){const e=Go();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Go();return this.targets().add(Go(null,null,xC(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(Go(null,null,()=>n=!0)),t.targets().add(Go(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Fr,this._targets=null}};function sK(e,t,n,i){const r=this,a=Go(n,i),s=function(f){f.dataflow=r;try{a.receive(f)}catch(d){r.error(d)}finally{r.run()}};let l;typeof e=="string"&&typeof document<"u"?l=document.querySelectorAll(e):l=_e(e);const c=l.length;for(let f=0;f<c;++f)l[f].addEventListener(t,s);return a}function oK(e,t){const n=this.locale();return o7(e,t,n.timeParse,n.utcParse)}function lK(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function uK(e,t){const n=this;let i=0,r;try{r=await n.loader().load(e,{context:"dataflow",response:s7(t&&t.type)});try{r=n.parse(r,t)}catch(a){i=-2,n.warn("Data ingestion failed",e,a)}}catch(a){i=-1,n.warn("Loading failed",e,a)}return{data:r,status:i}}async function cK(e,t,n){const i=this,r=i._pending||fK(i);r.requests+=1;const a=await i.request(t,n);return i.pulse(e,i.changeset().remove(Fr).insert(a.data||[])),r.done(),a}function fK(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const dK={skip:!0};function hK(e,t,n,i,r){return(e instanceof Tt?pK:gK)(this,e,t,n,i,r),this}function gK(e,t,n,i,r,a){const s=He({},a,dK);let l,c;Ge(n)||(n=ri(n)),i===void 0?l=f=>e.touch(n(f)):Ge(i)?(c=new Tt(null,i,r,!1),l=f=>{c.evaluate(f);const d=n(f),g=c.value;f7(g)?e.pulse(d,g,a):e.update(d,g,s)}):l=f=>e.update(n(f),i,s),t.apply(l)}function pK(e,t,n,i,r,a){if(i===void 0)t.targets().add(n);else{const s=a||{},l=new Tt(null,mK(n,i),r,!1);l.modified(s.force),l.rank=t.rank,t.targets().add(l),n&&(l.skip(!0),l.value=n.value,l.targets().add(n),e.connect(n,[l]))}}function mK(e,t){return t=Ge(t)?t:ri(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}function yK(e){e.rank=++this._rank}function vK(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&ae("Cycle detected in dataflow graph.")}const ly={},Da=1,Vo=2,Ls=4,bK=Da|Vo,wR=Da|Ls,gf=Da|Vo|Ls,AR=8,eg=16,CR=32,$R=64;function cl(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function yE(e,t){const n=[];return Xo(e,t,i=>n.push(i)),n}function TR(e,t){const n={};return e.visit(t,i=>{n[Oe(i)]=1}),i=>n[Oe(i)]?null:i}function G0(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}cl.prototype={StopPropagation:ly,ADD:Da,REM:Vo,MOD:Ls,ADD_REM:bK,ADD_MOD:wR,ALL:gf,REFLOW:AR,SOURCE:eg,NO_SOURCE:CR,NO_FIELDS:$R,fork(e){return new cl(this.dataflow).init(this,e)},clone(){const e=this.fork(gf);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(gf|eg)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new cl(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&$R)&&(n.fields=e.fields),t&Da?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Vo?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Ls?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&CR?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||gf;return t&Da&&this.add.length||t&Vo&&this.rem.length||t&Ls&&this.mod.length},reflow(e){if(e)return this.fork(gf).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Ls,TR(this,Da))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return se(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?se(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Da&&(n.addF=G0(n.addF,t)),e&Vo&&(n.remF=G0(n.remF,t)),e&Ls&&(n.modF=G0(n.modF,t)),e&eg&&(n.srcF=G0(n.srcF,t)),n},materialize(e){e=e||gf;const t=this;return e&Da&&t.addF&&(t.add=yE(t.add,t.addF),t.addF=null),e&Vo&&t.remF&&(t.rem=yE(t.rem,t.remF),t.remF=null),e&Ls&&t.modF&&(t.mod=yE(t.mod,t.modF),t.modF=null),e&eg&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&eg)return Xo(n.source,n.srcF,i),n;e&Da&&Xo(n.add,n.addF,i),e&Vo&&Xo(n.rem,n.remF,i),e&Ls&&Xo(n.mod,n.modF,i);const r=n.source;if(e&AR&&r){const a=n.add.length+n.mod.length;a===r.length||(a?Xo(r,TR(n,wR),i):Xo(r,n.srcF,i))}return n}};function BC(e,t,n,i){const r=this;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const l=r.fields||(r.fields={});for(const c in s.fields)l[c]=1}s.changed(r.ADD)&&(a|=r.ADD),s.changed(r.REM)&&(a|=r.REM),s.changed(r.MOD)&&(a|=r.MOD)}this.changes=a}be(BC,cl,{fork(e){const t=new cl(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?se(e)?e.some(i=>n[i]):n[e]:0},filter(){ae("MultiPulse does not support filtering.")},materialize(){ae("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let a=0;if(e&n.SOURCE)for(;a<r;++a)i[a].visit(e,t);else for(;a<r;++a)i[a].stamp===n.stamp&&i[a].visit(e,t);return n}});async function xK(e,t,n){const i=this,r=[];if(i._pulse)return d7(i);if(i._pending&&await i._pending,t&&await M1(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const a=++i._clock;i._pulse=new cl(i,a,e),i._touched.forEach(d=>i._enqueue(d,!0)),i._touched=Hv(Dp);let s=0,l,c,f;try{for(;i._heap.size()>0;){if(l=i._heap.pop(),l.rank!==l.qrank){i._enqueue(l,!0);continue}c=l.run(i._getPulse(l,e)),c.then?c=await c:c.async&&(r.push(c.async),c=ly),c!==ly&&l._targets&&l._targets.forEach(d=>i._enqueue(d)),++s}}catch(d){i._heap.clear(),f=d}if(i._input={},i._pulse=null,i.debug(`Pulse ${a}: ${s} operators`),f&&(i._postrun=[],i.error(f)),i._postrun.length){const d=i._postrun.sort((g,p)=>p.priority-g.priority);i._postrun=[];for(let g=0;g<d.length;++g)await M1(i,d[g].callback)}return n&&await M1(i,n),r.length&&Promise.all(r).then(d=>i.runAsync(null,()=>{d.forEach(g=>{try{g(i)}catch(p){i.error(p)}})})),i}async function SK(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function EK(e,t,n){return this._pulse?d7(this):(this.evaluate(e,t,n),this)}function _K(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function d7(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function wK(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function AK(e,t){const n=e.source,i=this._clock;return n&&se(n)?new BC(this,i,n.map(r=>r.pulse),t):this._input[e.id]||CK(this._pulse,n&&n.pulse)}function CK(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==ly&&(e.source=t.source),e)}const jC={skip:!1,force:!1};function $K(e,t){const n=t||jC;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function TK(e,t,n){const i=n||jC;return(e.set(t)||i.force)&&this.touch(e,i),this}function MK(e,t,n){this.touch(e,n||jC);const i=new cl(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this}function kK(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),h7(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,OK(t,0,e)):i=n,i}}}function h7(e,t,n,i){let r,a;const s=e[n];for(;n>t;){if(a=n-1>>1,r=e[a],i(s,r)<0){e[n]=r,n=a;continue}break}return e[n]=s}function OK(e,t,n){const i=t,r=e.length,a=e[t];let s=(t<<1)+1,l;for(;s<r;)l=s+1,l<r&&n(e[s],e[l])>=0&&(s=l),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=a,h7(e,i,t,n)}function zf(){this.logger(Rv()),this.logLevel(gC),this._clock=0,this._rank=0,this._locale=RC();try{this._loader=Pv()}catch{}this._touched=Hv(Dp),this._input={},this._pulse=null,this._heap=kK((e,t)=>e.qrank-t.qrank),this._postrun=[]}function tg(e){return function(){return this._log[e].apply(this,arguments)}}zf.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:tg("error"),warn:tg("warn"),info:tg("info"),debug:tg("debug"),logLevel:tg("level"),cleanThreshold:1e4,add:iK,connect:rK,rank:yK,rerank:vK,pulse:MK,touch:$K,update:TK,changeset:hc,ingest:lK,parse:oK,preload:cK,request:uK,events:sK,on:hK,evaluate:xK,run:EK,runAsync:SK,runAfter:_K,_enqueue:wK,_getPulse:AK};function te(e,t){Tt.call(this,e,null,t)}be(te,Tt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Qf={};function g7(e){const t=p7(e);return t&&t.Definition||null}function p7(e){return e=e&&e.toLowerCase(),we(Qf,e)?Qf[e]:null}function*m7(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function qC(e,t,n){const i=Float64Array.from(m7(e,n));return i.sort(Vs),t.map(r=>d9(i,r))}function IC(e,t){return qC(e,[.25,.5,.75],t)}function PC(e,t){const n=e.length,i=qW(e,t),r=IC(e,t),a=(r[2]-r[0])/1.34;return 1.06*(Math.min(i,a)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function y7(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let a=e.extent[0],s=e.extent[1],l,c,f,d,g,p;const y=e.span||s-a||Math.abs(a)||1;if(e.step)l=e.step;else if(e.steps){for(d=y/t,g=0,p=e.steps.length;g<p&&e.steps[g]<d;++g);l=e.steps[Math.max(0,g-1)]}else{for(c=Math.ceil(Math.log(t)/i),f=e.minstep||0,l=Math.max(f,Math.pow(n,Math.round(Math.log(y)/i)-c));Math.ceil(y/l)>t;)l*=n;for(g=0,p=r.length;g<p;++g)d=l/r[g],d>=f&&y/d<=t&&(l=d)}d=Math.log(l);const v=d>=0?0:~~(-d/i)+1,b=Math.pow(n,-v-1);return(e.nice||e.nice===void 0)&&(d=Math.floor(a/l+b)*l,a=a<d?d-l:d,s=Math.ceil(s/l)*l),{start:a,stop:s===a?a+l:s,step:l}}var Ur=Math.random;function NK(e){Ur=e}function v7(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(m7(e,i)),a=r.length,s=t;let l,c,f,d;for(f=0,d=Array(s);f<s;++f){for(l=0,c=0;c<a;++c)l+=r[~~(Ur()*a)];d[f]=l/a}return d.sort(Vs),[tw(d,n/2),tw(d,1-n/2)]}function b7(e,t,n,i){i=i||(p=>p);const r=e.length,a=new Float64Array(r);let s=0,l=1,c=i(e[0]),f=c,d=c+t,g;for(;l<r;++l){if(g=i(e[l]),g>=d){for(f=(c+f)/2;s<l;++s)a[s]=f;d=g+t,c=g}f=g}for(f=(c+f)/2;s<l;++s)a[s]=f;return n?DK(a,t+t/4):a}function DK(e,t){const n=e.length;let i=0,r=1,a,s;for(;e[i]===e[r];)++r;for(;r<n;){for(a=r+1;e[r]===e[a];)++a;if(e[r]-e[r-1]<t){for(s=r+(i+a-r-r>>1);s<r;)e[s++]=e[r];for(;s>r;)e[s--]=e[i]}i=r,r=a}return e}function RK(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function zK(e,t){t==null&&(t=e,e=0);let n,i,r;const a={min(s){return arguments.length?(n=s||0,r=i-n,a):n},max(s){return arguments.length?(i=s||0,r=i-n,a):i},sample(){return n+Math.floor(r*Ur())},pdf(s){return s===Math.floor(s)&&s>=n&&s<i?1/r:0},cdf(s){const l=Math.floor(s);return l<n?0:l>=i?1:(l-n+1)/r},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*r):NaN}};return a.min(e).max(t)}const x7=Math.sqrt(2*Math.PI),FK=Math.SQRT2;let ng=NaN;function Wv(e,t){e=e||0,t=t??1;let n=0,i=0,r,a;if(ng===ng)n=ng,ng=NaN;else{do n=Ur()*2-1,i=Ur()*2-1,r=n*n+i*i;while(r===0||r>1);a=Math.sqrt(-2*Math.log(r)/r),n*=a,ng=i*a}return e+n*t}function HC(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*x7)}function Qv(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,r=Math.abs(i);let a;if(r>37)a=0;else{const s=Math.exp(-r*r/2);let l;r<7.07106781186547?(l=.0352624965998911*r+.700383064443688,l=l*r+6.37396220353165,l=l*r+33.912866078383,l=l*r+112.079291497871,l=l*r+221.213596169931,l=l*r+220.206867912376,a=s*l,l=.0883883476483184*r+1.75566716318264,l=l*r+16.064177579207,l=l*r+86.7807322029461,l=l*r+296.564248779674,l=l*r+637.333633378831,l=l*r+793.826512519948,l=l*r+440.413735824752,a=a/l):(l=r+.65,l=r+4/l,l=r+3/l,l=r+2/l,l=r+1/l,a=s/l/2.506628274631)}return i>0?1-a:a}function Zv(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*FK*LK(2*e-1)}function LK(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function GC(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>Wv(n,i),pdf:a=>HC(a,n,i),cdf:a=>Qv(a,n,i),icdf:a=>Zv(a,n,i)};return r.mean(e).stdev(t)}function YC(e,t){const n=GC();let i=0;const r={data(a){return arguments.length?(e=a,i=a?a.length:0,r.bandwidth(t)):e},bandwidth(a){return arguments.length?(t=a,!t&&e&&(t=PC(e)),r):t},sample(){return e[~~(Ur()*i)]+t*n.sample()},pdf(a){let s=0,l=0;for(;l<i;++l)s+=n.pdf((a-e[l])/t);return s/t/i},cdf(a){let s=0,l=0;for(;l<i;++l)s+=n.cdf((a-e[l])/t);return s/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function XC(e,t){return e=e||0,t=t??1,Math.exp(e+Wv()*t)}function VC(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*x7*e)}function WC(e,t,n){return Qv(Math.log(e),t,n)}function QC(e,t,n){return Math.exp(Zv(e,t,n))}function S7(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>XC(n,i),pdf:a=>VC(a,n,i),cdf:a=>WC(a,n,i),icdf:a=>QC(a,n,i)};return r.mean(e).stdev(t)}function E7(e,t){let n=0,i;function r(s){const l=[];let c=0,f;for(f=0;f<n;++f)c+=l[f]=s[f]==null?1:+s[f];for(f=0;f<n;++f)l[f]/=c;return l}const a={weights(s){return arguments.length?(i=r(t=s||[]),a):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),a.weights(t)):e},sample(){const s=Ur();let l=e[n-1],c=i[0],f=0;for(;f<n-1;c+=i[++f])if(s<c){l=e[f];break}return l.sample()},pdf(s){let l=0,c=0;for(;c<n;++c)l+=i[c]*e[c].pdf(s);return l},cdf(s){let l=0,c=0;for(;c<n;++c)l+=i[c]*e[c].cdf(s);return l},icdf(){throw Error("Mixture icdf not supported.")}};return a.distributions(e).weights(t)}function ZC(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Ur()}function KC(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function JC(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function e$(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function _7(e,t){let n,i;const r={min(a){return arguments.length?(n=a||0,r):n},max(a){return arguments.length?(i=a??1,r):i},sample:()=>ZC(n,i),pdf:a=>KC(a,n,i),cdf:a=>JC(a,n,i),icdf:a=>e$(a,n,i)};return t==null&&(t=e??1,e=0),r.min(e).max(t)}function t$(e,t,n){let i=0,r=0;for(const a of e){const s=n(a);t(a)==null||s==null||isNaN(s)||(i+=(s-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function zp(e,t,n,i){const r=i-e*e,a=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-a*e,a]}function Kv(e,t,n,i){e=e.filter(y=>{let v=t(y),b=n(y);return v!=null&&(v=+v)>=v&&b!=null&&(b=+b)>=b}),i&&e.sort((y,v)=>t(y)-t(v));const r=e.length,a=new Float64Array(r),s=new Float64Array(r);let l=0,c=0,f=0,d,g,p;for(p of e)a[l]=d=+t(p),s[l]=g=+n(p),++l,c+=(d-c)/l,f+=(g-f)/l;for(l=0;l<r;++l)a[l]-=c,s[l]-=f;return[a,s,c,f]}function Fp(e,t,n,i){let r=-1,a,s;for(const l of e)a=t(l),s=n(l),a!=null&&(a=+a)>=a&&s!=null&&(s=+s)>=s&&i(a,s,++r)}function Fd(e,t,n,i,r){let a=0,s=0;return Fp(e,t,n,(l,c)=>{const f=c-r(l),d=c-i;a+=f*f,s+=d*d}),1-a/s}function n$(e,t,n){let i=0,r=0,a=0,s=0,l=0;Fp(e,t,n,(d,g)=>{++l,i+=(d-i)/l,r+=(g-r)/l,a+=(d*g-a)/l,s+=(d*d-s)/l});const c=zp(i,r,a,s),f=d=>c[0]+c[1]*d;return{coef:c,predict:f,rSquared:Fd(e,t,n,r,f)}}function w7(e,t,n){let i=0,r=0,a=0,s=0,l=0;Fp(e,t,n,(d,g)=>{++l,d=Math.log(d),i+=(d-i)/l,r+=(g-r)/l,a+=(d*g-a)/l,s+=(d*d-s)/l});const c=zp(i,r,a,s),f=d=>c[0]+c[1]*Math.log(d);return{coef:c,predict:f,rSquared:Fd(e,t,n,r,f)}}function A7(e,t,n){const[i,r,a,s]=Kv(e,t,n);let l=0,c=0,f=0,d=0,g=0,p,y,v;Fp(e,t,n,(w,A)=>{p=i[g++],y=Math.log(A),v=p*A,l+=(A*y-l)/g,c+=(v-c)/g,f+=(v*y-f)/g,d+=(p*v-d)/g});const[b,S]=zp(c/s,l/s,f/s,d/s),_=w=>Math.exp(b+S*(w-a));return{coef:[Math.exp(b-S*a),S],predict:_,rSquared:Fd(e,t,n,s,_)}}function C7(e,t,n){let i=0,r=0,a=0,s=0,l=0,c=0;Fp(e,t,n,(g,p)=>{const y=Math.log(g),v=Math.log(p);++c,i+=(y-i)/c,r+=(v-r)/c,a+=(y*v-a)/c,s+=(y*y-s)/c,l+=(p-l)/c});const f=zp(i,r,a,s),d=g=>f[0]*Math.pow(g,f[1]);return f[0]=Math.exp(f[0]),{coef:f,predict:d,rSquared:Fd(e,t,n,l,d)}}function i$(e,t,n){const[i,r,a,s]=Kv(e,t,n),l=i.length;let c=0,f=0,d=0,g=0,p=0,y,v,b,S;for(y=0;y<l;)v=i[y],b=r[y++],S=v*v,c+=(S-c)/y,f+=(S*v-f)/y,d+=(S*S-d)/y,g+=(v*b-g)/y,p+=(S*b-p)/y;const _=d-c*c,w=c*_-f*f,A=(p*c-g*f)/w,$=(g*_-p*f)/w,M=-A*c,k=T=>(T=T-a,A*T*T+$*T+M+s);return{coef:[M-$*a+A*a*a+s,$-2*A*a,A],predict:k,rSquared:Fd(e,t,n,s,k)}}function $7(e,t,n,i){if(i===0)return t$(e,t,n);if(i===1)return n$(e,t,n);if(i===2)return i$(e,t,n);const[r,a,s,l]=Kv(e,t,n),c=r.length,f=[],d=[],g=i+1;let p,y,v,b,S;for(p=0;p<g;++p){for(v=0,b=0;v<c;++v)b+=Math.pow(r[v],p)*a[v];for(f.push(b),S=new Float64Array(g),y=0;y<g;++y){for(v=0,b=0;v<c;++v)b+=Math.pow(r[v],p+y);S[y]=b}d.push(S)}d.push(f);const _=BK(d),w=A=>{A-=s;let $=l+_[0]+_[1]*A+_[2]*A*A;for(p=3;p<g;++p)$+=_[p]*Math.pow(A,p);return $};return{coef:UK(g,_,-s,l),predict:w,rSquared:Fd(e,t,n,l,w)}}function UK(e,t,n,i){const r=Array(e);let a,s,l,c;for(a=0;a<e;++a)r[a]=0;for(a=e-1;a>=0;--a)for(l=t[a],c=1,r[a]+=l,s=1;s<=a;++s)c*=(a+1-s)/s,r[a-s]+=l*Math.pow(n,s)*c;return r[0]+=i,r}function BK(e){const t=e.length-1,n=[];let i,r,a,s,l;for(i=0;i<t;++i){for(s=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][s])&&(s=r);for(a=i;a<t+1;++a)l=e[a][i],e[a][i]=e[a][s],e[a][s]=l;for(r=i+1;r<t;++r)for(a=t;a>=i;a--)e[a][r]-=e[a][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(l=0,a=r+1;a<t;++a)l+=e[a][r]*n[a];n[r]=(e[t][r]-l)/e[r][r]}return n}const MR=2,kR=1e-12;function T7(e,t,n,i){const[r,a,s,l]=Kv(e,t,n,!0),c=r.length,f=Math.max(2,~~(i*c)),d=new Float64Array(c),g=new Float64Array(c),p=new Float64Array(c).fill(1);for(let y=-1;++y<=MR;){const v=[0,f-1];for(let S=0;S<c;++S){const _=r[S],w=v[0],A=v[1],$=_-r[w]>r[A]-_?w:A;let M=0,k=0,T=0,D=0,R=0;const B=1/Math.abs(r[$]-_||1);for(let Y=w;Y<=A;++Y){const P=r[Y],z=a[Y],N=jK(Math.abs(_-P)*B)*p[Y],j=P*N;M+=N,k+=j,T+=z*N,D+=z*j,R+=P*j}const[U,Q]=zp(k/M,T/M,D/M,R/M);d[S]=U+Q*_,g[S]=Math.abs(a[S]-d[S]),qK(r,S+1,v)}if(y===MR)break;const b=h9(g);if(Math.abs(b)<kR)break;for(let S=0,_,w;S<c;++S)_=g[S]/(6*b),p[S]=_>=1?kR:(w=1-_*_)*w}return IK(r,d,s,l)}function jK(e){return(e=1-e*e*e)*e*e}function qK(e,t,n){const i=e[t];let r=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>r&&e[a]-i<=i-e[r];)n[0]=++r,n[1]=a,++a}function IK(e,t,n,i){const r=e.length,a=[];let s=0,l=0,c=[],f;for(;s<r;++s)f=e[s]+n,c[0]===f?c[1]+=(t[s]-c[1])/++l:(l=0,c[1]+=i,c=[f,t[s]],a.push(c));return c[1]+=i,a}const PK=.5*Math.PI/180;function Jv(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=b=>[b,e(b)],a=t[0],s=t[1],l=s-a,c=l/i,f=[r(a)],d=[];if(n===i){for(let b=1;b<i;++b)f.push(r(a+b/n*l));return f.push(r(s)),f}else{d.push(r(s));for(let b=n;--b>0;)d.push(r(a+b/n*l))}let g=f[0],p=d[d.length-1];const y=1/l,v=HK(g[1],d);for(;p;){const b=r((g[0]+p[0])/2);b[0]-g[0]>=c&&GK(g,b,p,y,v)>PK?d.push(b):(g=p,f.push(p),d.pop()),p=d[d.length-1]}return f}function HK(e,t){let n=e,i=e;const r=t.length;for(let a=0;a<r;++a){const s=t[a][1];s<n&&(n=s),s>i&&(i=s)}return 1/(i-n)}function GK(e,t,n,i,r){const a=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),s=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(a-s)}function YK(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}function fw(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:YK(e)}function M7(e,t,n){return n||e+(t?"_"+t:"")}const vE=()=>{},XK={init:vE,add:vE,rem:vE,idx:0},ap={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Lp=Object.keys(ap).filter(e=>e!=="__count__");function VK(e,t){return(n,i)=>He({name:e,aggregate_param:i,out:n||e},XK,t)}[...Lp,"__count__"].forEach(e=>{ap[e]=VK(e,ap[e])});function k7(e,t,n){return ap[e](n,t)}function O7(e,t){return e.idx-t.idx}function WK(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{t[r]||n(t[r]=ap[r]())})};return e.forEach(n),Object.values(t).sort(O7)}function QK(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function ZK(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function KK(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function JK(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function N7(e,t){const n=t||ii,i=WK(e),r=e.slice().sort(O7);function a(s){this._ops=i,this._out=r,this.cell=s,this.init()}return a.prototype.init=QK,a.prototype.add=ZK,a.prototype.rem=KK,a.prototype.set=JK,a.prototype.get=n,a.fields=e.map(s=>s.out),a}function r$(e){this._key=e?zr(e):Oe,this.reset()}const Pn=r$.prototype;Pn.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Pn.add=function(e){this._add.push(e)};Pn.rem=function(e){this._rem.push(e)};Pn.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,a=Array(i-r),s={};let l,c,f;for(l=0;l<r;++l)s[n(t[l])]=1;for(l=0,c=0;l<i;++l)s[n(f=e[l])]?s[n(f)]=0:a[c++]=f;return this._rem=[],this._add=a};Pn.distinct=function(e){const t=this.values(),n={};let i=t.length,r=0,a;for(;--i>=0;)a=e(t[i])+"",we(n,a)||(n[a]=1,++r);return r};Pn.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=W8(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Pn.argmin=function(e){return this.extent(e)[0]||{}};Pn.argmax=function(e){return this.extent(e)[1]||{}};Pn.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Pn.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Pn.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=IC(this.values(),e),this._get=e),this._q};Pn.q1=function(e){return this.quartile(e)[0]};Pn.q2=function(e){return this.quartile(e)[1]};Pn.q3=function(e){return this.quartile(e)[2]};Pn.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=v7(this.values(),1e3,.05,e),this._get=e),this._ci};Pn.ci0=function(e){return this.ci(e)[0]};Pn.ci1=function(e){return this.ci(e)[1]};function ml(e){te.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ml.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Lp},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};be(ml,te,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,a=>n.add(a))):(n.value=n.value||n.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function a(l){let c,f,d,g;for(c in l)for(d=l[c].tuple,f=0;f<r;++f)i[f][g=d[n[f]]]=g}a(e._prev),a(t);function s(l,c,f){const d=n[f],g=i[f++];for(const p in g){const y=l?l+"|"+p:p;c[d]=g[p],f<r?s(y,c,f):t[y]||e.cell(y,c)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(w){const A=_e(Jn(w)),$=A.length;let M=0,k;for(;M<$;++M)i[k=A[M]]||(i[k]=1,t.push(k))}this._dims=_e(e.groupby),this._dnames=this._dims.map(w=>{const A=Vt(w);return r(w),n.push(A),A}),this.cellkey=e.key?e.key:fw(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=e.fields||[null],s=e.ops||["count"],l=e.aggregate_params||[null],c=e.as||[],f=a.length,d={};let g,p,y,v,b,S,_;for(f!==s.length&&ae("Unmatched number of fields and aggregate ops."),_=0;_<f;++_){if(g=a[_],p=s[_],y=l[_]||null,g==null&&p!=="count"&&ae("Null aggregate field specified."),b=Vt(g),S=M7(p,b,c[_]),n.push(S),p==="count"){this._counts.push(S);continue}v=d[b],v||(r(g),v=d[b]=[],v.field=g,this._measures.push(v)),p!=="count"&&(this._countOnly=!1),v.push(k7(p,y,S))}return this._measures=this._measures.map(w=>N7(w,w.field)),Object.create(null)},cellkey:fw(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let a=0;a<r;++a)n.agg[a]=new i[a](n)}return n.store&&(n.data=new r$),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,a={};for(let s=0;s<r;++s)a[n[s]]=i[s](e);return t?c7(t.tuple,a):gt(a)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,a=i.length;r<a;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,a=e.add,s=e.rem,l=e.mod;let c,f,d,g;if(i)for(f in i)c=i[f],(!r||c.num)&&s.push(c.tuple);for(d=0,g=this._alen;d<g;++d)a.push(this.celltuple(t[d])),t[d]=null;for(d=0,g=this._mlen;d<g;++d)c=n[d],(c.num===0&&r?s:l).push(this.celltuple(c)),n[d]=null;return this._alen=this._mlen=0,this._prev=null,e}});const eJ=1e-14;function a$(e){te.call(this,null,e)}a$.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};be(a$,te,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),r=i.start,a=i.step,s=e.as||["bin0","bin1"],l=s[0],c=s[1];let f;return e.modified()?(t=t.reflow(!0),f=t.SOURCE):f=t.modified(Jn(e.field))?t.ADD_MOD:t.ADD,t.visit(f,n?d=>{const g=i(d);d[l]=g,d[c]=g==null?null:r+a*(1+(g-r)/a)}:d=>d[l]=i(d)),t.modifies(n?s:l)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=y7(e),i=n.step;let r=n.start,a=r+Math.ceil((n.stop-r)/i)*i,s,l;(s=e.anchor)!=null&&(l=s-(r+i*Math.floor((s-r)/i)),r+=l,a+=l);const c=function(f){let d=Zn(t(f));return d==null?null:d<r?-1/0:d>a?1/0:(d=Math.max(r,Math.min(d,a-i)),r+i*Math.floor(eJ+(d-r)/i))};return c.start=r,c.stop=n.stop,c.step=i,this.value=Ii(c,Jn(t),e.name||"bin_"+Vt(t))}});function D7(e,t,n){const i=e;let r=t||[],a=n||[],s={},l=0;return{add:c=>a.push(c),remove:c=>s[i(c)]=++l,size:()=>r.length,data:(c,f)=>(l&&(r=r.filter(d=>!s[i(d)]),s={},l=0),f&&c&&r.sort(c),a.length&&(r=c?e9(c,r,a.sort(c)):r.concat(a),a=[]),r)}}function s$(e){te.call(this,[],e)}s$.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};be(s$,te,{transform(e,t){const n=t.fork(t.ALL),i=D7(Oe,this.value,n.materialize(n.ADD).add),r=e.sort,a=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(a),this.value=n.source=i.data(dc(r),a),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function R7(e){Tt.call(this,null,tJ,e)}be(R7,Tt);function tJ(e){return this.value&&!e.modified()?this.value:bC(e.fields,e.orders)}function o$(e){te.call(this,null,e)}o$.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function nJ(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}be(o$,te,{transform(e,t){const n=g=>p=>{for(var y=nJ(l(p),e.case,a)||[],v,b=0,S=y.length;b<S;++b)s.test(v=y[b])||g(v)},i=this._parameterCheck(e,t),r=this._counts,a=this._match,s=this._stop,l=e.field,c=e.as||["text","count"],f=n(g=>r[g]=1+(r[g]||0)),d=n(g=>r[g]-=1);return i?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,d)),this._finish(t,c)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],a=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let l,c,f;for(l in n)c=i[l],f=n[l]||0,!c&&f?(i[l]=c=gt({}),c[r]=l,c[a]=f,s.add.push(c)):f===0?(c&&s.rem.push(c),n[l]=null,i[l]=null):c[a]!==f&&(c[a]=f,s.mod.push(c));return s.modifies(t)}});function l$(e){te.call(this,null,e)}l$.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};be(l$,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],a=i[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let l=this.value;return s?(l&&(n.rem=l),l=t.materialize(t.SOURCE).source,n.add=this.value=iJ(l,r,a,e.filter||Fr)):n.mod=l,n.source=this.value,n.modifies(i)}});function iJ(e,t,n,i){for(var r=[],a={},s=e.length,l=0,c,f;l<s;++l)for(a[t]=f=e[l],c=0;c<s;++c)a[n]=e[c],i(a)&&(r.push(gt(a)),a={},a[t]=f);return r}const OR={kde:YC,mixture:E7,normal:GC,lognormal:S7,uniform:_7},rJ="distributions",NR="function",aJ="field";function z7(e,t){const n=e[NR];we(OR,n)||ae("Unknown distribution function: "+n);const i=OR[n]();for(const r in e)r===aJ?i.data((e.from||t()).map(e[r])):r===rJ?i[r](e[r].map(a=>z7(a,t))):typeof i[r]===NR&&i[r](e[r]);return i}function u$(e){te.call(this,null,e)}const F7=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],sJ={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:F7},{name:"weights",type:"number",array:!0}]};u$.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:F7.concat(sJ)},{name:"as",type:"string",array:!0,default:["value","density"]}]};be(u$,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=z7(e.distribution,oJ(t)),r=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&ae("Invalid density method: "+s),!e.extent&&!i.data&&ae("Missing density extent parameter."),s=i[s];const l=e.as||["value","density"],c=e.extent||Xa(i.data()),f=Jv(s,c,r,a).map(d=>{const g={};return g[l[0]]=d[0],g[l[1]]=d[1],gt(g)});this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function oJ(e){return()=>e.materialize(e.SOURCE).source}function L7(e,t){return e?e.map((n,i)=>t[i]||Vt(n)):null}function c$(e,t,n){const i=[],r=g=>g(c);let a,s,l,c,f,d;if(t==null)i.push(e.map(n));else for(a={},s=0,l=e.length;s<l;++s)c=e[s],f=t.map(r),d=a[f],d||(a[f]=d=[],d.dims=f,i.push(d)),d.push(n(c));return i}const U7="bin";function f$(e){te.call(this,null,e)}f$.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:U7}]};const lJ=(e,t)=>Rp(Xa(e,t))/30;be(f$,te,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=c$(t.source,e.groupby,ii),r=e.smooth||!1,a=e.field,s=e.step||lJ(n,a),l=dc((v,b)=>a(v)-a(b)),c=e.as||U7,f=i.length;let d=1/0,g=-1/0,p=0,y;for(;p<f;++p){const v=i[p].sort(l);y=-1;for(const b of b7(v,s,r,a))b<d&&(d=b),b>g&&(g=b),v[++y][c]=b}return this.value={start:d,stop:g,step:s},t.reflow(!0).modifies(c)}});function B7(e){Tt.call(this,null,uJ,e),this.modified(!0)}be(B7,Tt);function uJ(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Ii(n=>t(n,e),Jn(t),Vt(t))}function d$(e){te.call(this,[void 0,void 0],e)}d$.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};be(d$,te,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let a=n[0],s=n[1];if((r||a==null)&&(a=1/0,s=-1/0),t.visit(r?t.SOURCE:t.ADD,l=>{const c=Zn(i(l));c!=null&&(c<a&&(a=c),c>s&&(s=c))}),!Number.isFinite(a)||!Number.isFinite(s)){let l=Vt(i);l&&(l=` for field "${l}"`),t.dataflow.warn(`Infinite extent${l}: [${a}, ${s}]`),a=s=void 0}this.value=[a,s]}});function h$(e,t){Tt.call(this,e),this.parent=t,this.count=0}be(h$,Tt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function eb(e){te.call(this,{},e),this._keys=kd();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}be(eb,te,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let a=we(r,e)&&r[e],s,l;return a?a.value.stamp<n.stamp&&(a.init(n),this.activate(a)):(l=i||(l=this._group[e])&&l.tuple,s=n.dataflow,a=new h$(n.fork(n.NO_SOURCE),this),s.add(a).connect(t(s,e,l)),r[e]=a,this.activate(a)),a},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&t[r]!=null;++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,a=this._keys,s=e.modified("key"),l=c=>this.subflow(c,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,c=>{const f=Oe(c),d=a.get(f);d!==void 0&&(a.delete(f),l(d).rem(c))}),t.visit(t.ADD,c=>{const f=i(c);a.set(Oe(c),f),l(f).add(c)}),s||t.modified(i.fields)?t.visit(t.MOD,c=>{const f=Oe(c),d=a.get(f),g=i(c);d===g?l(g).mod(c):(a.set(f,g),l(d).rem(c),l(g).add(c))}):t.changed(t.MOD)&&t.visit(t.MOD,c=>{l(a.get(Oe(c))).mod(c)}),s&&t.visit(t.REFLOW,c=>{const f=Oe(c),d=a.get(f),g=i(c);d!==g&&(a.set(f,g),l(d).rem(c),l(g).add(c))}),t.clean()?n.runAfter(()=>{this.clean(),a.clean()}):a.empty>n.cleanThreshold&&n.runAfter(a.clean),t}});function j7(e){Tt.call(this,null,cJ,e)}be(j7,Tt);function cJ(e){return this.value&&!e.modified()?this.value:se(e.name)?_e(e.name).map(t=>zr(t)):zr(e.name,e.as)}function g$(e){te.call(this,kd(),e)}g$.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};be(g$,te,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),a=r.add,s=r.rem,l=r.mod,c=e.expr;let f=!0;t.visit(t.REM,g=>{const p=Oe(g);i.has(p)?i.delete(p):s.push(g)}),t.visit(t.ADD,g=>{c(g,e)?a.push(g):i.set(Oe(g),1)});function d(g){const p=Oe(g),y=c(g,e),v=i.get(p);y&&v?(i.delete(p),a.push(g)):!y&&!v?(i.set(p,1),s.push(g)):f&&y&&!v&&l.push(g)}return t.visit(t.MOD,d),e.modified()&&(f=!1,t.visit(t.REFLOW,d)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function p$(e){te.call(this,[],e)}p$.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};be(p$,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=L7(i,e.as||[]),a=e.index||null,s=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{const c=i.map(v=>v(l)),f=c.reduce((v,b)=>Math.max(v,b.length),0);let d=0,g,p,y;for(;d<f;++d){for(p=UC(l),g=0;g<s;++g)p[r[g]]=(y=c[g][d])==null?null:y;a&&(p[a]=d),n.add.push(p)}}),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(r)}});function m$(e){te.call(this,[],e)}m$.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};be(m$,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(Vt),a=e.as||["key","value"],s=a[0],l=a[1],c=i.length;return n.rem=this.value,t.visit(t.SOURCE,f=>{for(let d=0,g;d<c;++d)g=UC(f),g[s]=r[d],g[l]=i[d](f),n.add.push(g)}),this.value=n.source=n.add,n.modifies(a)}});function y$(e){te.call(this,null,e)}y$.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};be(y$,te,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),a=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(a,s=>s[i]=n(s,e))}});function q7(e){te.call(this,[],e)}be(q7,te,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let r=this.value,a=e.size-r.length,s,l,c;if(a>0){for(s=[];--a>=0;)s.push(c=gt(i(e))),r.push(c);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else l=r.slice(0,-a),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(l):l,r=r.slice(-a);return n.source=this.value=r,n}});const Y0={value:"value",median:h9,mean:XW,min:ew,max:Nu},fJ=[];function v$(e){te.call(this,[],e)}v$.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function dJ(e){var t=e.method||Y0.value,n;if(Y0[t]==null)ae("Unrecognized imputation method: "+t);else return t===Y0.value?(n=e.value!==void 0?e.value:0,()=>n):Y0[t]}function hJ(e){const t=e.field;return n=>n?t(n):NaN}be(v$,te,{transform(e,t){var n=t.fork(t.ALL),i=dJ(e),r=hJ(e),a=Vt(e.field),s=Vt(e.key),l=(e.groupby||[]).map(Vt),c=gJ(t.source,e.groupby,e.key,e.keyvals),f=[],d=this.value,g=c.domain.length,p,y,v,b,S,_,w,A,$,M;for(S=0,A=c.length;S<A;++S)for(p=c[S],v=p.values,y=NaN,w=0;w<g;++w)if(p[w]==null){for(b=c.domain[w],M={_impute:!0},_=0,$=v.length;_<$;++_)M[l[_]]=v[_];M[s]=b,M[a]=Number.isNaN(y)?y=i(p,r):y,f.push(gt(M))}return f.length&&(n.add=n.materialize(n.ADD).add.concat(f)),d.length&&(n.rem=n.materialize(n.REM).rem.concat(d)),this.value=f,n}});function gJ(e,t,n,i){var r=_=>_(S),a=[],s=i?i.slice():[],l={},c={},f,d,g,p,y,v,b,S;for(s.forEach((_,w)=>l[_]=w+1),p=0,b=e.length;p<b;++p)S=e[p],v=n(S),y=l[v]||(l[v]=s.push(v)),d=(f=t?t.map(r):fJ)+"",(g=c[d])||(g=c[d]=[],a.push(g),g.values=f),g[y-1]=S;return a.domain=s,a}function b$(e){ml.call(this,e)}b$.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Lp},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};be(b$,ml,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,a=>n.add(a))):(r=n.value=n.value||this.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),n.changes(),t.visit(t.SOURCE,a=>{He(a,r[n.cellkey(a)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function x$(e){te.call(this,null,e)}x$.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};be(x$,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=c$(i,e.groupby,e.field),a=(e.groupby||[]).map(Vt),s=e.bandwidth,l=e.cumulative?"cdf":"pdf",c=e.as||["value","density"],f=[];let d=e.extent,g=e.steps||e.minsteps||25,p=e.steps||e.maxsteps||200;l!=="pdf"&&l!=="cdf"&&ae("Invalid density method: "+l),e.resolve==="shared"&&(d||(d=Xa(i,e.field)),g=p=e.steps||p),r.forEach(y=>{const v=YC(y,s)[l],b=e.counts?y.length:1,S=d||Xa(y);Jv(v,S,g,p).forEach(_=>{const w={};for(let A=0;A<a.length;++A)w[a[A]]=y.dims[A];w[c[0]]=_[0],w[c[1]]=_[1]*b,f.push(gt(w))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function I7(e){Tt.call(this,null,pJ,e)}be(I7,Tt);function pJ(e){return this.value&&!e.modified()?this.value:EC(e.fields,e.flat)}function P7(e){te.call(this,[],e),this._pending=null}be(P7,te,{transform(e,t){const n=t.dataflow;return this._pending?bE(this,t,this._pending):mJ(e)?t.StopPropagation:e.values?bE(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=_e(r.data),a=>a.touch(this)))}:n.request(e.url,e.format).then(i=>bE(this,t,_e(i.data)))}});function mJ(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function bE(e,t,n){n.forEach(gt);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function S$(e){te.call(this,{},e)}S$.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};be(S$,te,{transform(e,t){const n=e.fields,i=e.index,r=e.values,a=e.default==null?null:e.default,s=e.modified(),l=n.length;let c=s?t.SOURCE:t.ADD,f=t,d=e.as,g,p,y;return r?(p=r.length,l>1&&!d&&ae('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==l*p&&ae('The "as" parameter has too few output field names.'),d=d||r.map(Vt),g=function(v){for(var b=0,S=0,_,w;b<l;++b)if(w=i.get(n[b](v)),w==null)for(_=0;_<p;++_,++S)v[d[S]]=a;else for(_=0;_<p;++_,++S)v[d[S]]=r[_](w)}):(d||ae("Missing output field names."),g=function(v){for(var b=0,S;b<l;++b)S=i.get(n[b](v)),v[d[b]]=S??a}),s?f=t.reflow(!0):(y=n.some(v=>t.modified(v.fields)),c|=y?t.MOD:0),t.visit(c,g),f.modifies(d)}});function H7(e){Tt.call(this,null,yJ,e)}be(H7,Tt);function yJ(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,r=-1/0,a,s;for(a=0;a<n;++a)s=t[a],s[0]<i&&(i=s[0]),s[1]>r&&(r=s[1]);return[i,r]}function G7(e){Tt.call(this,null,vJ,e)}be(G7,Tt);function vJ(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function Y7(e){te.call(this,null,e)}be(Y7,te,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function E$(e){ml.call(this,e)}E$.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Lp,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};be(E$,ml,{_transform:ml.prototype.transform,transform(e,t){return this._transform(bJ(e,t),t)}});function bJ(e,t){const n=e.field,i=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",a=Jn(n).concat(Jn(i)),s=SJ(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>r),fields:s.map(l=>xJ(l,n,i,a)),as:s.map(l=>l+""),modified:e.modified.bind(e)}}function xJ(e,t,n,i){return Ii(r=>t(r)===e?n(r):NaN,i,e+"")}function SJ(e,t,n){const i={},r=[];return n.visit(n.SOURCE,a=>{const s=e(a);i[s]||(i[s]=1,r.push(s))}),r.sort(Md),t?r.slice(0,t):r}function X7(e){eb.call(this,e)}be(X7,eb,{transform(e,t){const n=e.subflow,i=e.field,r=a=>this.subflow(Oe(a),n,t,a);return(e.modified("field")||i&&t.modified(Jn(i)))&&ae("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,a=>{const s=r(a);i(a).forEach(l=>s.mod(l))}),t.visit(t.ADD,a=>{const s=r(a);i(a).forEach(l=>s.add(gt(l)))}),t.visit(t.REM,a=>{const s=r(a);i(a).forEach(l=>s.rem(l))})):(t.visit(t.MOD,a=>r(a).mod(a)),t.visit(t.ADD,a=>r(a).add(a)),t.visit(t.REM,a=>r(a).rem(a))),t.clean()&&t.runAfter(()=>this.clean()),t}});function _$(e){te.call(this,null,e)}_$.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};be(_$,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=L7(e.fields,e.as||[]),a=i?(l,c)=>EJ(l,c,i,r):Yv;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,l=>{const c=Oe(l);n.rem.push(s[c]),s[c]=null}),t.visit(t.ADD,l=>{const c=a(l,gt({}));s[Oe(l)]=c,n.add.push(c)}),t.visit(t.MOD,l=>{n.mod.push(a(l,s[Oe(l)]))}),n}});function EJ(e,t,n,i){for(let r=0,a=n.length;r<a;++r)t[i[r]]=n[r](e);return t}function V7(e){te.call(this,null,e)}be(V7,te,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function w$(e){te.call(this,null,e)}w$.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const _J=1e-14;be(w$,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const r=t.materialize(t.SOURCE).source,a=c$(r,e.groupby,e.field),s=(e.groupby||[]).map(Vt),l=[],c=e.step||.01,f=e.probs||rr(c/2,1-_J,c),d=f.length;return a.forEach(g=>{const p=qC(g,f);for(let y=0;y<d;++y){const v={};for(let b=0;b<s.length;++b)v[s[b]]=g.dims[b];v[i[0]]=f[y],v[i[1]]=p[y],l.push(gt(v))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l,n}});function W7(e){te.call(this,null,e)}be(W7,te,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const a=Oe(r);n.rem.push(i[a]),i[a]=null}),t.visit(t.ADD,r=>{const a=UC(r);i[Oe(r)]=a,n.add.push(a)}),t.visit(t.MOD,r=>{const a=i[Oe(r)];for(const s in r)a[s]=r[s],n.modifies(s);n.mod.push(a)})),n}});function A$(e){te.call(this,[],e),this.count=0}A$.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};be(A$,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,a=this.value.reduce((d,g)=>(d[Oe(g)]=1,d),{});let s=this.value,l=this.count,c=0;function f(d){let g,p;s.length<r?s.push(d):(p=~~((l+1)*Ur()),p<s.length&&p>=c&&(g=s[p],a[Oe(g)]&&n.rem.push(g),s[p]=d)),++l}if(t.rem.length&&(t.visit(t.REM,d=>{const g=Oe(d);a[g]&&(a[g]=-1,n.rem.push(d)),--l}),s=s.filter(d=>a[Oe(d)]!==-1)),(t.rem.length||i)&&s.length<r&&t.source&&(c=l=s.length,t.visit(t.SOURCE,d=>{a[Oe(d)]||f(d)}),c=-1),i&&s.length>r){const d=s.length-r;for(let g=0;g<d;++g)a[Oe(s[g])]=-1,n.rem.push(s[g]);s=s.slice(d)}return t.mod.length&&t.visit(t.MOD,d=>{a[Oe(d)]&&n.mod.push(d)}),t.add.length&&t.visit(t.ADD,f),(t.add.length||c<0)&&(n.add=s.filter(d=>!a[Oe(d)])),this.count=l,this.value=n.source=s,n}});function C$(e){te.call(this,null,e)}C$.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};be(C$,te,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=rr(e.start,e.stop,e.step||1).map(r=>{const a={};return a[i]=r,gt(a)}),n.add=t.add.concat(this.value),n}});function Q7(e){te.call(this,null,e),this.modified(!0)}be(Q7,te,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function $$(e){te.call(this,null,e)}const Z7=["unit0","unit1"];$$.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:MC,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:Z7}]};be($$,te,{transform(e,t){const n=e.field,i=e.interval!==!1,r=e.timezone==="utc",a=this._floor(e,t),s=(r?zd:Rd)(a.unit).offset,l=e.as||Z7,c=l[0],f=l[1],d=a.step;let g=a.start||1/0,p=a.stop||-1/0,y=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Jn(n)))&&(t=t.reflow(!0),y=t.SOURCE,g=1/0,p=-1/0),t.visit(y,v=>{const b=n(v);let S,_;b==null?(v[c]=null,i&&(v[f]=null)):(v[c]=S=_=a(b),i&&(v[f]=_=s(S,d)),S<g&&(g=S),_>p&&(p=_))}),a.start=g,a.stop=p,t.modifies(i?l:c)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:q9({extent:e.extent||Xa(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a=kC(i),s=this.value||{},l=(n?N9:O9)(a,r);return l.unit=rt(a),l.units=a,l.step=r,l.start=s.start,l.stop=s.stop,this.value=l}});function K7(e){te.call(this,kd(),e)}be(K7,te,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,a=l=>r.set(i(l),l);let s=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,a)):t.changed()?(t.visit(t.REM,l=>r.delete(i(l))),t.visit(t.ADD,a)):s=!1,this.modified(s),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}});function J7(e){te.call(this,null,e)}be(J7,te,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(dc(e.sort)):t.source).map(e.field))}});function wJ(e,t,n,i){const r=sp[e](t,n);return{init:r.init||Ko,update:function(a,s){s[i]=r.next(a)}}}const sp={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=sp.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||ae("ntile num must be greater than zero.");const n=sp.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||ae("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=AJ(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}};function AJ(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const CJ=Object.keys(sp);function eL(e){const t=_e(e.ops),n=_e(e.fields),i=_e(e.params),r=_e(e.aggregate_params),a=_e(e.as),s=this.outputs=[],l=this.windows=[],c={},f={},d=[],g=[];let p=!0;function y(v){_e(Jn(v)).forEach(b=>c[b]=1)}y(e.sort),t.forEach((v,b)=>{const S=n[b],_=i[b],w=r[b]||null,A=Vt(S),$=M7(v,A,a[b]);if(y(S),s.push($),we(sp,v))l.push(wJ(v,S,_,$));else{if(S==null&&v!=="count"&&ae("Null aggregate field specified."),v==="count"){d.push($);return}p=!1;let M=f[A];M||(M=f[A]=[],M.field=S,g.push(M)),M.push(k7(v,w,$))}}),(d.length||g.length)&&(this.cell=$J(g,d,p)),this.inputs=Object.keys(c)}const tL=eL.prototype;tL.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};tL.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,a=i&&i.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(r[s]);for(s=e.p1;s<e.i1;++s)n.add(r[s]);n.set(t)}for(s=0;s<a;++s)i[s].update(e,t)};function $J(e,t,n){e=e.map(c=>N7(c,c.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,a=i.agg=Array(r),s=0;s<r;++s)a[s]=new e[s](i);if(i.store)var l=i.data=new r$;return i.add=function(c){if(i.num+=1,!n){l&&l.add(c);for(let f=0;f<r;++f)a[f].add(a[f].get(c),c)}},i.rem=function(c){if(i.num-=1,!n){l&&l.rem(c);for(let f=0;f<r;++f)a[f].rem(a[f].get(c),c)}},i.set=function(c){let f,d;for(l&&l.values(),f=0,d=t.length;f<d;++f)c[t[f]]=i.num;if(!n)for(f=0,d=a.length;f<d;++f)a[f].set(c)},i.init=function(){i.num=0,l&&l.reset();for(let c=0;c<r;++c)a[c].init()},i}function T$(e){te.call(this,{},e),this._mlen=0,this._mods=[]}T$.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:CJ.concat(Lp)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};be(T$,te,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=dc(e.sort),r=fw(e.groupby),a=l=>this.group(r(l));let s=this.state;(!s||n)&&(s=this.state=new eL(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,l=>a(l).add(l))):(t.visit(t.REM,l=>a(l).remove(l)),t.visit(t.ADD,l=>a(l).add(l)));for(let l=0,c=this._mlen;l<c;++l)TJ(this._mods[l],s,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=D7(Oe),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function TJ(e,t,n,i){const r=i.sort,a=r&&!i.ignorePeers,s=i.frame||[null,0],l=e.data(n),c=l.length,f=a?Od(r):null,d={i0:0,i1:0,p0:0,p1:0,index:0,data:l,compare:r||ri(-1)};t.init();for(let g=0;g<c;++g)MJ(d,s,g,c),a&&kJ(d,f),t.update(d,l[g])}function MJ(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function kJ(e,t){const n=e.i0,i=e.i1-1,r=e.compare,a=e.data,s=a.length-1;n>0&&!r(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),i<s&&!r(a[i],a[i+1])&&(e.i1=t.right(a,a[i]))}const OJ=Object.freeze(Object.defineProperty({__proto__:null,aggregate:ml,bin:a$,collect:s$,compare:R7,countpattern:o$,cross:l$,density:u$,dotbin:f$,expression:B7,extent:d$,facet:eb,field:j7,filter:g$,flatten:p$,fold:m$,formula:y$,generate:q7,impute:v$,joinaggregate:b$,kde:x$,key:I7,load:P7,lookup:S$,multiextent:H7,multivalues:G7,params:Y7,pivot:E$,prefacet:X7,project:_$,proxy:V7,quantile:w$,relay:W7,sample:A$,sequence:C$,sieve:Q7,subflow:h$,timeunit:$$,tupleindex:K7,values:J7,window:T$},Symbol.toStringTag,{value:"Module"}));function pt(e){return function(){return e}}const DR=Math.abs,Gn=Math.atan2,lu=Math.cos,NJ=Math.max,xE=Math.min,Ma=Math.sin,$u=Math.sqrt,Xn=1e-12,Zf=Math.PI,uy=Zf/2,nL=2*Zf;function DJ(e){return e>1?0:e<-1?Zf:Math.acos(e)}function RR(e){return e>=1?uy:e<=-1?-uy:Math.asin(e)}const dw=Math.PI,hw=2*dw,bu=1e-6,RJ=hw-bu;function iL(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function zJ(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return iL;const n=10**t;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let M$=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?iL:zJ(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,a,s){this._append`C${+t},${+n},${+i},${+r},${this._x1=+a},${this._y1=+s}`}arcTo(t,n,i,r,a){if(t=+t,n=+n,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,l=this._y1,c=i-t,f=r-n,d=s-t,g=l-n,p=d*d+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>bu)if(!(Math.abs(g*c-f*d)>bu)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let y=i-s,v=r-l,b=c*c+f*f,S=y*y+v*v,_=Math.sqrt(b),w=Math.sqrt(p),A=a*Math.tan((dw-Math.acos((b+p-S)/(2*_*w)))/2),$=A/w,M=A/_;Math.abs($-1)>bu&&this._append`L${t+$*d},${n+$*g}`,this._append`A${a},${a},0,0,${+(g*y>d*v)},${this._x1=t+M*c},${this._y1=n+M*f}`}}arc(t,n,i,r,a,s){if(t=+t,n=+n,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(r),c=i*Math.sin(r),f=t+l,d=n+c,g=1^s,p=s?r-a:a-r;this._x1===null?this._append`M${f},${d}`:(Math.abs(this._x1-f)>bu||Math.abs(this._y1-d)>bu)&&this._append`L${f},${d}`,i&&(p<0&&(p=p%hw+hw),p>RJ?this._append`A${i},${i},0,1,${g},${t-l},${n-c}A${i},${i},0,1,${g},${this._x1=f},${this._y1=d}`:p>bu&&this._append`A${i},${i},0,${+(p>=dw)},${g},${this._x1=t+i*Math.cos(a)},${this._y1=n+i*Math.sin(a)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function tb(){return new M$}tb.prototype=M$.prototype;function nb(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new M$(t)}function FJ(e){return e.innerRadius}function LJ(e){return e.outerRadius}function UJ(e){return e.startAngle}function BJ(e){return e.endAngle}function jJ(e){return e&&e.padAngle}function qJ(e,t,n,i,r,a,s,l){var c=n-e,f=i-t,d=s-r,g=l-a,p=g*c-d*f;if(!(p*p<Xn))return p=(d*(t-a)-g*(e-r))/p,[e+p*c,t+p*f]}function X0(e,t,n,i,r,a,s){var l=e-n,c=t-i,f=(s?a:-a)/$u(l*l+c*c),d=f*c,g=-f*l,p=e+d,y=t+g,v=n+d,b=i+g,S=(p+v)/2,_=(y+b)/2,w=v-p,A=b-y,$=w*w+A*A,M=r-a,k=p*b-v*y,T=(A<0?-1:1)*$u(NJ(0,M*M*$-k*k)),D=(k*A-w*T)/$,R=(-k*w-A*T)/$,B=(k*A+w*T)/$,U=(-k*w+A*T)/$,Q=D-S,Y=R-_,P=B-S,z=U-_;return Q*Q+Y*Y>P*P+z*z&&(D=B,R=U),{cx:D,cy:R,x01:-d,y01:-g,x11:D*(r/M-1),y11:R*(r/M-1)}}function IJ(){var e=FJ,t=LJ,n=pt(0),i=null,r=UJ,a=BJ,s=jJ,l=null,c=nb(f);function f(){var d,g,p=+e.apply(this,arguments),y=+t.apply(this,arguments),v=r.apply(this,arguments)-uy,b=a.apply(this,arguments)-uy,S=DR(b-v),_=b>v;if(l||(l=d=c()),y<p&&(g=y,y=p,p=g),!(y>Xn))l.moveTo(0,0);else if(S>nL-Xn)l.moveTo(y*lu(v),y*Ma(v)),l.arc(0,0,y,v,b,!_),p>Xn&&(l.moveTo(p*lu(b),p*Ma(b)),l.arc(0,0,p,b,v,_));else{var w=v,A=b,$=v,M=b,k=S,T=S,D=s.apply(this,arguments)/2,R=D>Xn&&(i?+i.apply(this,arguments):$u(p*p+y*y)),B=xE(DR(y-p)/2,+n.apply(this,arguments)),U=B,Q=B,Y,P;if(R>Xn){var z=RR(R/p*Ma(D)),N=RR(R/y*Ma(D));(k-=z*2)>Xn?(z*=_?1:-1,$+=z,M-=z):(k=0,$=M=(v+b)/2),(T-=N*2)>Xn?(N*=_?1:-1,w+=N,A-=N):(T=0,w=A=(v+b)/2)}var j=y*lu(w),X=y*Ma(w),K=p*lu(M),fe=p*Ma(M);if(B>Xn){var F=y*lu(A),G=y*Ma(A),le=p*lu($),I=p*Ma($),J;if(S<Zf)if(J=qJ(j,X,le,I,F,G,K,fe)){var ve=j-J[0],Ae=X-J[1],ze=F-J[0],ce=G-J[1],Le=1/Ma(DJ((ve*ze+Ae*ce)/($u(ve*ve+Ae*Ae)*$u(ze*ze+ce*ce)))/2),je=$u(J[0]*J[0]+J[1]*J[1]);U=xE(B,(p-je)/(Le-1)),Q=xE(B,(y-je)/(Le+1))}else U=Q=0}T>Xn?Q>Xn?(Y=X0(le,I,j,X,y,Q,_),P=X0(F,G,K,fe,y,Q,_),l.moveTo(Y.cx+Y.x01,Y.cy+Y.y01),Q<B?l.arc(Y.cx,Y.cy,Q,Gn(Y.y01,Y.x01),Gn(P.y01,P.x01),!_):(l.arc(Y.cx,Y.cy,Q,Gn(Y.y01,Y.x01),Gn(Y.y11,Y.x11),!_),l.arc(0,0,y,Gn(Y.cy+Y.y11,Y.cx+Y.x11),Gn(P.cy+P.y11,P.cx+P.x11),!_),l.arc(P.cx,P.cy,Q,Gn(P.y11,P.x11),Gn(P.y01,P.x01),!_))):(l.moveTo(j,X),l.arc(0,0,y,w,A,!_)):l.moveTo(j,X),!(p>Xn)||!(k>Xn)?l.lineTo(K,fe):U>Xn?(Y=X0(K,fe,F,G,p,-U,_),P=X0(j,X,le,I,p,-U,_),l.lineTo(Y.cx+Y.x01,Y.cy+Y.y01),U<B?l.arc(Y.cx,Y.cy,U,Gn(Y.y01,Y.x01),Gn(P.y01,P.x01),!_):(l.arc(Y.cx,Y.cy,U,Gn(Y.y01,Y.x01),Gn(Y.y11,Y.x11),!_),l.arc(0,0,p,Gn(Y.cy+Y.y11,Y.cx+Y.x11),Gn(P.cy+P.y11,P.cx+P.x11),_),l.arc(P.cx,P.cy,U,Gn(P.y11,P.x11),Gn(P.y01,P.x01),!_))):l.arc(0,0,p,M,$,_)}if(l.closePath(),d)return l=null,d+""||null}return f.centroid=function(){var d=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,g=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-Zf/2;return[lu(g)*d,Ma(g)*d]},f.innerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:pt(+d),f):e},f.outerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:pt(+d),f):t},f.cornerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:pt(+d),f):n},f.padRadius=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:pt(+d),f):i},f.startAngle=function(d){return arguments.length?(r=typeof d=="function"?d:pt(+d),f):r},f.endAngle=function(d){return arguments.length?(a=typeof d=="function"?d:pt(+d),f):a},f.padAngle=function(d){return arguments.length?(s=typeof d=="function"?d:pt(+d),f):s},f.context=function(d){return arguments.length?(l=d??null,f):l},f}function rL(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function aL(e){this._context=e}aL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function k$(e){return new aL(e)}function sL(e){return e[0]}function oL(e){return e[1]}function lL(e,t){var n=pt(!0),i=null,r=k$,a=null,s=nb(l);e=typeof e=="function"?e:e===void 0?sL:pt(e),t=typeof t=="function"?t:t===void 0?oL:pt(t);function l(c){var f,d=(c=rL(c)).length,g,p=!1,y;for(i==null&&(a=r(y=s())),f=0;f<=d;++f)!(f<d&&n(g=c[f],f,c))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(g,f,c),+t(g,f,c));if(y)return a=null,y+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:pt(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:pt(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:pt(!!c),l):n},l.curve=function(c){return arguments.length?(r=c,i!=null&&(a=r(i)),l):r},l.context=function(c){return arguments.length?(c==null?i=a=null:a=r(i=c),l):i},l}function uL(e,t,n){var i=null,r=pt(!0),a=null,s=k$,l=null,c=nb(f);e=typeof e=="function"?e:e===void 0?sL:pt(+e),t=typeof t=="function"?t:pt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?oL:pt(+n);function f(g){var p,y,v,b=(g=rL(g)).length,S,_=!1,w,A=new Array(b),$=new Array(b);for(a==null&&(l=s(w=c())),p=0;p<=b;++p){if(!(p<b&&r(S=g[p],p,g))===_)if(_=!_)y=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=p-1;v>=y;--v)l.point(A[v],$[v]);l.lineEnd(),l.areaEnd()}_&&(A[p]=+e(S,p,g),$[p]=+t(S,p,g),l.point(i?+i(S,p,g):A[p],n?+n(S,p,g):$[p]))}if(w)return l=null,w+""||null}function d(){return lL().defined(r).curve(s).context(a)}return f.x=function(g){return arguments.length?(e=typeof g=="function"?g:pt(+g),i=null,f):e},f.x0=function(g){return arguments.length?(e=typeof g=="function"?g:pt(+g),f):e},f.x1=function(g){return arguments.length?(i=g==null?null:typeof g=="function"?g:pt(+g),f):i},f.y=function(g){return arguments.length?(t=typeof g=="function"?g:pt(+g),n=null,f):t},f.y0=function(g){return arguments.length?(t=typeof g=="function"?g:pt(+g),f):t},f.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:pt(+g),f):n},f.lineX0=f.lineY0=function(){return d().x(e).y(t)},f.lineY1=function(){return d().x(e).y(n)},f.lineX1=function(){return d().x(i).y(t)},f.defined=function(g){return arguments.length?(r=typeof g=="function"?g:pt(!!g),f):r},f.curve=function(g){return arguments.length?(s=g,a!=null&&(l=s(a)),f):s},f.context=function(g){return arguments.length?(g==null?a=l=null:l=s(a=g),f):a},f}const PJ={draw(e,t){const n=$u(t/Zf);e.moveTo(n,0),e.arc(0,0,n,0,nL)}};function HJ(e,t){let n=null,i=nb(r);e=typeof e=="function"?e:pt(e||PJ),t=typeof t=="function"?t:pt(t===void 0?64:+t);function r(){let a;if(n||(n=a=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return r.type=function(a){return arguments.length?(e=typeof a=="function"?a:pt(a),r):e},r.size=function(a){return arguments.length?(t=typeof a=="function"?a:pt(+a),r):t},r.context=function(a){return arguments.length?(n=a??null,r):n},r}function yl(){}function cy(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function ib(e){this._context=e}ib.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:cy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:cy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function GJ(e){return new ib(e)}function cL(e){this._context=e}cL.prototype={areaStart:yl,areaEnd:yl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:cy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function YJ(e){return new cL(e)}function fL(e){this._context=e}fL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:cy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function XJ(e){return new fL(e)}function dL(e,t){this._basis=new ib(e),this._beta=t}dL.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],a=e[n]-i,s=t[n]-r,l=-1,c;++l<=n;)c=l/n,this._basis.point(this._beta*e[l]+(1-this._beta)*(i+c*a),this._beta*t[l]+(1-this._beta)*(r+c*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const VJ=(function e(t){function n(i){return t===1?new ib(i):new dL(i,t)}return n.beta=function(i){return e(+i)},n})(.85);function fy(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function O$(e,t){this._context=e,this._k=(1-t)/6}O$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:fy(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:fy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const WJ=(function e(t){function n(i){return new O$(i,t)}return n.tension=function(i){return e(+i)},n})(0);function N$(e,t){this._context=e,this._k=(1-t)/6}N$.prototype={areaStart:yl,areaEnd:yl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:fy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const QJ=(function e(t){function n(i){return new N$(i,t)}return n.tension=function(i){return e(+i)},n})(0);function D$(e,t){this._context=e,this._k=(1-t)/6}D$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:fy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ZJ=(function e(t){function n(i){return new D$(i,t)}return n.tension=function(i){return e(+i)},n})(0);function R$(e,t,n){var i=e._x1,r=e._y1,a=e._x2,s=e._y2;if(e._l01_a>Xn){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,r=(r*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>Xn){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*f+e._x1*e._l23_2a-t*e._l12_2a)/d,s=(s*f+e._y1*e._l23_2a-n*e._l12_2a)/d}e._context.bezierCurveTo(i,r,a,s,e._x2,e._y2)}function hL(e,t){this._context=e,this._alpha=t}hL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:R$(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const KJ=(function e(t){function n(i){return t?new hL(i,t):new O$(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function gL(e,t){this._context=e,this._alpha=t}gL.prototype={areaStart:yl,areaEnd:yl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:R$(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const JJ=(function e(t){function n(i){return t?new gL(i,t):new N$(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function pL(e,t){this._context=e,this._alpha=t}pL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:R$(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const eee=(function e(t){function n(i){return t?new pL(i,t):new D$(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function mL(e){this._context=e}mL.prototype={areaStart:yl,areaEnd:yl,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function tee(e){return new mL(e)}function zR(e){return e<0?-1:1}function FR(e,t,n){var i=e._x1-e._x0,r=t-e._x1,a=(e._y1-e._y0)/(i||r<0&&-0),s=(n-e._y1)/(r||i<0&&-0),l=(a*r+s*i)/(i+r);return(zR(a)+zR(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(l))||0}function LR(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function SE(e,t,n){var i=e._x0,r=e._y0,a=e._x1,s=e._y1,l=(a-i)/3;e._context.bezierCurveTo(i+l,r+l*t,a-l,s-l*n,a,s)}function dy(e){this._context=e}dy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:SE(this,this._t0,LR(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,SE(this,LR(this,n=FR(this,e,t)),n);break;default:SE(this,this._t0,n=FR(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function yL(e){this._context=new vL(e)}(yL.prototype=Object.create(dy.prototype)).point=function(e,t){dy.prototype.point.call(this,t,e)};function vL(e){this._context=e}vL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,a){this._context.bezierCurveTo(t,e,i,n,a,r)}};function nee(e){return new dy(e)}function iee(e){return new yL(e)}function bL(e){this._context=e}bL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=UR(e),r=UR(t),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function UR(e){var t,n=e.length-1,i,r=new Array(n),a=new Array(n),s=new Array(n);for(r[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,a[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/a[t-1],a[t]-=i,s[t]-=i*s[t-1];for(r[n-1]=s[n-1]/a[n-1],t=n-2;t>=0;--t)r[t]=(s[t]-r[t+1])/a[t];for(a[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-r[t+1];return[r,a]}function ree(e){return new bL(e)}function rb(e,t){this._context=e,this._t=t}rb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function aee(e){return new rb(e,.5)}function see(e){return new rb(e,0)}function oee(e){return new rb(e,1)}function fl(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const lee=()=>typeof Image<"u"?Image:null;function is(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function kl(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const gw=Symbol("implicit");function z$(){var e=new tR,t=[],n=[],i=gw;function r(a){let s=e.get(a);if(s===void 0){if(i!==gw)return i;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return r.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new tR;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return z$(t,n).unknown(i)},is.apply(r,arguments),r}function Ld(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Up(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Ol(){}var Pu=.7,Kf=1/Pu,Ff="\\s*([+-]?\\d+)\\s*",op="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",uee=/^#([0-9a-f]{3,8})$/,cee=new RegExp(`^rgb\\(${Ff},${Ff},${Ff}\\)$`),fee=new RegExp(`^rgb\\(${qa},${qa},${qa}\\)$`),dee=new RegExp(`^rgba\\(${Ff},${Ff},${Ff},${op}\\)$`),hee=new RegExp(`^rgba\\(${qa},${qa},${qa},${op}\\)$`),gee=new RegExp(`^hsl\\(${op},${qa},${qa}\\)$`),pee=new RegExp(`^hsla\\(${op},${qa},${qa},${op}\\)$`),BR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ld(Ol,lp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:jR,formatHex:jR,formatHex8:mee,formatHsl:yee,formatRgb:qR,toString:qR});function jR(){return this.rgb().formatHex()}function mee(){return this.rgb().formatHex8()}function yee(){return xL(this).formatHsl()}function qR(){return this.rgb().formatRgb()}function lp(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=uee.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?IR(t):n===3?new Sn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?V0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?V0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=cee.exec(e))?new Sn(t[1],t[2],t[3],1):(t=fee.exec(e))?new Sn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=dee.exec(e))?V0(t[1],t[2],t[3],t[4]):(t=hee.exec(e))?V0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gee.exec(e))?GR(t[1],t[2]/100,t[3]/100,1):(t=pee.exec(e))?GR(t[1],t[2]/100,t[3]/100,t[4]):BR.hasOwnProperty(e)?IR(BR[e]):e==="transparent"?new Sn(NaN,NaN,NaN,0):null}function IR(e){return new Sn(e>>16&255,e>>8&255,e&255,1)}function V0(e,t,n,i){return i<=0&&(e=t=n=NaN),new Sn(e,t,n,i)}function F$(e){return e instanceof Ol||(e=lp(e)),e?(e=e.rgb(),new Sn(e.r,e.g,e.b,e.opacity)):new Sn}function vl(e,t,n,i){return arguments.length===1?F$(e):new Sn(e,t,n,i??1)}function Sn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Ld(Sn,vl,Up(Ol,{brighter(e){return e=e==null?Kf:Math.pow(Kf,e),new Sn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Pu:Math.pow(Pu,e),new Sn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Sn(Du(this.r),Du(this.g),Du(this.b),hy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:PR,formatHex:PR,formatHex8:vee,formatRgb:HR,toString:HR}));function PR(){return`#${Tu(this.r)}${Tu(this.g)}${Tu(this.b)}`}function vee(){return`#${Tu(this.r)}${Tu(this.g)}${Tu(this.b)}${Tu((isNaN(this.opacity)?1:this.opacity)*255)}`}function HR(){const e=hy(this.opacity);return`${e===1?"rgb(":"rgba("}${Du(this.r)}, ${Du(this.g)}, ${Du(this.b)}${e===1?")":`, ${e})`}`}function hy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Du(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Tu(e){return e=Du(e),(e<16?"0":"")+e.toString(16)}function GR(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new na(e,t,n,i)}function xL(e){if(e instanceof na)return new na(e.h,e.s,e.l,e.opacity);if(e instanceof Ol||(e=lp(e)),!e)return new na;if(e instanceof na)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,l=a-r,c=(a+r)/2;return l?(t===a?s=(n-i)/l+(n<i)*6:n===a?s=(i-t)/l+2:s=(t-n)/l+4,l/=c<.5?a+r:2-a-r,s*=60):l=c>0&&c<1?0:s,new na(s,l,c,e.opacity)}function gy(e,t,n,i){return arguments.length===1?xL(e):new na(e,t,n,i??1)}function na(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Ld(na,gy,Up(Ol,{brighter(e){return e=e==null?Kf:Math.pow(Kf,e),new na(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Pu:Math.pow(Pu,e),new na(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Sn(EE(e>=240?e-240:e+120,r,i),EE(e,r,i),EE(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new na(YR(this.h),W0(this.s),W0(this.l),hy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=hy(this.opacity);return`${e===1?"hsl(":"hsla("}${YR(this.h)}, ${W0(this.s)*100}%, ${W0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function YR(e){return e=(e||0)%360,e<0?e+360:e}function W0(e){return Math.max(0,Math.min(1,e||0))}function EE(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const SL=Math.PI/180,EL=180/Math.PI,py=18,_L=.96422,wL=1,AL=.82521,CL=4/29,Lf=6/29,$L=3*Lf*Lf,bee=Lf*Lf*Lf;function TL(e){if(e instanceof Ia)return new Ia(e.l,e.a,e.b,e.opacity);if(e instanceof Gs)return ML(e);e instanceof Sn||(e=F$(e));var t=CE(e.r),n=CE(e.g),i=CE(e.b),r=_E((.2225045*t+.7168786*n+.0606169*i)/wL),a,s;return t===n&&n===i?a=s=r:(a=_E((.4360747*t+.3850649*n+.1430804*i)/_L),s=_E((.0139322*t+.0971045*n+.7141733*i)/AL)),new Ia(116*r-16,500*(a-r),200*(r-s),e.opacity)}function my(e,t,n,i){return arguments.length===1?TL(e):new Ia(e,t,n,i??1)}function Ia(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}Ld(Ia,my,Up(Ol,{brighter(e){return new Ia(this.l+py*(e??1),this.a,this.b,this.opacity)},darker(e){return new Ia(this.l-py*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=_L*wE(t),e=wL*wE(e),n=AL*wE(n),new Sn(AE(3.1338561*t-1.6168667*e-.4906146*n),AE(-.9787684*t+1.9161415*e+.033454*n),AE(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function _E(e){return e>bee?Math.pow(e,1/3):e/$L+CL}function wE(e){return e>Lf?e*e*e:$L*(e-CL)}function AE(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function CE(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function xee(e){if(e instanceof Gs)return new Gs(e.h,e.c,e.l,e.opacity);if(e instanceof Ia||(e=TL(e)),e.a===0&&e.b===0)return new Gs(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*EL;return new Gs(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function yy(e,t,n,i){return arguments.length===1?xee(e):new Gs(e,t,n,i??1)}function Gs(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function ML(e){if(isNaN(e.h))return new Ia(e.l,0,0,e.opacity);var t=e.h*SL;return new Ia(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Ld(Gs,yy,Up(Ol,{brighter(e){return new Gs(this.h,this.c,this.l+py*(e??1),this.opacity)},darker(e){return new Gs(this.h,this.c,this.l-py*(e??1),this.opacity)},rgb(){return ML(this).rgb()}}));var kL=-.14861,L$=1.78277,U$=-.29227,ab=-.90649,up=1.97294,XR=up*ab,VR=up*L$,WR=L$*U$-ab*kL;function See(e){if(e instanceof Ru)return new Ru(e.h,e.s,e.l,e.opacity);e instanceof Sn||(e=F$(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(WR*i+XR*t-VR*n)/(WR+XR-VR),a=i-r,s=(up*(n-r)-U$*a)/ab,l=Math.sqrt(s*s+a*a)/(up*r*(1-r)),c=l?Math.atan2(s,a)*EL-120:NaN;return new Ru(c<0?c+360:c,l,r,e.opacity)}function pw(e,t,n,i){return arguments.length===1?See(e):new Ru(e,t,n,i??1)}function Ru(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Ld(Ru,pw,Up(Ol,{brighter(e){return e=e==null?Kf:Math.pow(Kf,e),new Ru(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Pu:Math.pow(Pu,e),new Ru(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*SL,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Sn(255*(t+n*(kL*i+L$*r)),255*(t+n*(U$*i+ab*r)),255*(t+n*(up*i)),this.opacity)}}));function OL(e,t,n,i,r){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*n+(1+3*e+3*a-3*s)*i+s*r)/6}function NL(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],a=e[i+1],s=i>0?e[i-1]:2*r-a,l=i<t-1?e[i+2]:2*a-r;return OL((n-i/t)*t,s,r,a,l)}}function DL(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],a=e[i%t],s=e[(i+1)%t],l=e[(i+2)%t];return OL((n-i/t)*t,r,a,s,l)}}const sb=e=>()=>e;function RL(e,t){return function(n){return e+n*t}}function Eee(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function ob(e,t){var n=t-e;return n?RL(e,n>180||n<-180?n-360*Math.round(n/360):n):sb(isNaN(e)?t:e)}function _ee(e){return(e=+e)==1?En:function(t,n){return n-t?Eee(t,n,e):sb(isNaN(t)?n:t)}}function En(e,t){var n=t-e;return n?RL(e,n):sb(isNaN(e)?t:e)}const mw=(function e(t){var n=_ee(t);function i(r,a){var s=n((r=vl(r)).r,(a=vl(a)).r),l=n(r.g,a.g),c=n(r.b,a.b),f=En(r.opacity,a.opacity);return function(d){return r.r=s(d),r.g=l(d),r.b=c(d),r.opacity=f(d),r+""}}return i.gamma=e,i})(1);function zL(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),a=new Array(n),s,l;for(s=0;s<n;++s)l=vl(t[s]),i[s]=l.r||0,r[s]=l.g||0,a[s]=l.b||0;return i=e(i),r=e(r),a=e(a),l.opacity=1,function(c){return l.r=i(c),l.g=r(c),l.b=a(c),l+""}}}var wee=zL(NL),Aee=zL(DL);function B$(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function FL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Cee(e,t){return(FL(t)?B$:LL)(e,t)}function LL(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),a=new Array(n),s;for(s=0;s<i;++s)r[s]=Nl(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(l){for(s=0;s<i;++s)a[s]=r[s](l);return a}}function UL(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function ea(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function BL(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Nl(e[r],t[r]):i[r]=t[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var yw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$E=new RegExp(yw.source,"g");function $ee(e){return function(){return e}}function Tee(e){return function(t){return e(t)+""}}function jL(e,t){var n=yw.lastIndex=$E.lastIndex=0,i,r,a,s=-1,l=[],c=[];for(e=e+"",t=t+"";(i=yw.exec(e))&&(r=$E.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),l[s]?l[s]+=a:l[++s]=a),(i=i[0])===(r=r[0])?l[s]?l[s]+=r:l[++s]=r:(l[++s]=null,c.push({i:s,x:ea(i,r)})),n=$E.lastIndex;return n<t.length&&(a=t.slice(n),l[s]?l[s]+=a:l[++s]=a),l.length<2?c[0]?Tee(c[0].x):$ee(t):(t=c.length,function(f){for(var d=0,g;d<t;++d)l[(g=c[d]).i]=g.x(f);return l.join("")})}function Nl(e,t){var n=typeof t,i;return t==null||n==="boolean"?sb(t):(n==="number"?ea:n==="string"?(i=lp(t))?(t=i,mw):jL:t instanceof lp?mw:t instanceof Date?UL:FL(t)?B$:Array.isArray(t)?LL:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?BL:ea)(e,t)}function Mee(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function kee(e,t){var n=ob(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function Bp(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var QR=180/Math.PI,vw={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qL(e,t,n,i,r,a){var s,l,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*i)&&(n-=e*c,i-=t*c),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,c/=l),e*i<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*QR,skewX:Math.atan(c)*QR,scaleX:s,scaleY:l}}var Q0;function Oee(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?vw:qL(t.a,t.b,t.c,t.d,t.e,t.f)}function Nee(e){return e==null||(Q0||(Q0=document.createElementNS("http://www.w3.org/2000/svg","g")),Q0.setAttribute("transform",e),!(e=Q0.transform.baseVal.consolidate()))?vw:(e=e.matrix,qL(e.a,e.b,e.c,e.d,e.e,e.f))}function IL(e,t,n,i){function r(f){return f.length?f.pop()+" ":""}function a(f,d,g,p,y,v){if(f!==g||d!==p){var b=y.push("translate(",null,t,null,n);v.push({i:b-4,x:ea(f,g)},{i:b-2,x:ea(d,p)})}else(g||p)&&y.push("translate("+g+t+p+n)}function s(f,d,g,p){f!==d?(f-d>180?d+=360:d-f>180&&(f+=360),p.push({i:g.push(r(g)+"rotate(",null,i)-2,x:ea(f,d)})):d&&g.push(r(g)+"rotate("+d+i)}function l(f,d,g,p){f!==d?p.push({i:g.push(r(g)+"skewX(",null,i)-2,x:ea(f,d)}):d&&g.push(r(g)+"skewX("+d+i)}function c(f,d,g,p,y,v){if(f!==g||d!==p){var b=y.push(r(y)+"scale(",null,",",null,")");v.push({i:b-4,x:ea(f,g)},{i:b-2,x:ea(d,p)})}else(g!==1||p!==1)&&y.push(r(y)+"scale("+g+","+p+")")}return function(f,d){var g=[],p=[];return f=e(f),d=e(d),a(f.translateX,f.translateY,d.translateX,d.translateY,g,p),s(f.rotate,d.rotate,g,p),l(f.skewX,d.skewX,g,p),c(f.scaleX,f.scaleY,d.scaleX,d.scaleY,g,p),f=d=null,function(y){for(var v=-1,b=p.length,S;++v<b;)g[(S=p[v]).i]=S.x(y);return g.join("")}}}var Dee=IL(Oee,"px, ","px)","deg)"),Ree=IL(Nee,", ",")",")"),zee=1e-12;function ZR(e){return((e=Math.exp(e))+1/e)/2}function Fee(e){return((e=Math.exp(e))-1/e)/2}function Lee(e){return((e=Math.exp(2*e))-1)/(e+1)}const Uee=(function e(t,n,i){function r(a,s){var l=a[0],c=a[1],f=a[2],d=s[0],g=s[1],p=s[2],y=d-l,v=g-c,b=y*y+v*v,S,_;if(b<zee)_=Math.log(p/f)/t,S=function(T){return[l+T*y,c+T*v,f*Math.exp(t*T*_)]};else{var w=Math.sqrt(b),A=(p*p-f*f+i*b)/(2*f*n*w),$=(p*p-f*f-i*b)/(2*p*n*w),M=Math.log(Math.sqrt(A*A+1)-A),k=Math.log(Math.sqrt($*$+1)-$);_=(k-M)/t,S=function(T){var D=T*_,R=ZR(M),B=f/(n*w)*(R*Lee(t*D+M)-Fee(M));return[l+B*y,c+B*v,f*R/ZR(t*D+M)]}}return S.duration=_*1e3*t/Math.SQRT2,S}return r.rho=function(a){var s=Math.max(.001,+a),l=s*s,c=l*l;return e(s,l,c)},r})(Math.SQRT2,2,4);function PL(e){return function(t,n){var i=e((t=gy(t)).h,(n=gy(n)).h),r=En(t.s,n.s),a=En(t.l,n.l),s=En(t.opacity,n.opacity);return function(l){return t.h=i(l),t.s=r(l),t.l=a(l),t.opacity=s(l),t+""}}}const Bee=PL(ob);var jee=PL(En);function qee(e,t){var n=En((e=my(e)).l,(t=my(t)).l),i=En(e.a,t.a),r=En(e.b,t.b),a=En(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=i(s),e.b=r(s),e.opacity=a(s),e+""}}function HL(e){return function(t,n){var i=e((t=yy(t)).h,(n=yy(n)).h),r=En(t.c,n.c),a=En(t.l,n.l),s=En(t.opacity,n.opacity);return function(l){return t.h=i(l),t.c=r(l),t.l=a(l),t.opacity=s(l),t+""}}}const Iee=HL(ob);var Pee=HL(En);function GL(e){return(function t(n){n=+n;function i(r,a){var s=e((r=pw(r)).h,(a=pw(a)).h),l=En(r.s,a.s),c=En(r.l,a.l),f=En(r.opacity,a.opacity);return function(d){return r.h=s(d),r.s=l(d),r.l=c(Math.pow(d,n)),r.opacity=f(d),r+""}}return i.gamma=t,i})(1)}const Hee=GL(ob);var Gee=GL(En);function j$(e,t){t===void 0&&(t=e,e=Nl);for(var n=0,i=t.length-1,r=t[0],a=new Array(i<0?0:i);n<i;)a[n]=e(r,r=t[++n]);return function(s){var l=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return a[l](s-l)}}function Yee(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const Xee=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Nl,interpolateArray:Cee,interpolateBasis:NL,interpolateBasisClosed:DL,interpolateCubehelix:Hee,interpolateCubehelixLong:Gee,interpolateDate:UL,interpolateDiscrete:Mee,interpolateHcl:Iee,interpolateHclLong:Pee,interpolateHsl:Bee,interpolateHslLong:jee,interpolateHue:kee,interpolateLab:qee,interpolateNumber:ea,interpolateNumberArray:B$,interpolateObject:BL,interpolateRgb:mw,interpolateRgbBasis:wee,interpolateRgbBasisClosed:Aee,interpolateRound:Bp,interpolateString:jL,interpolateTransformCss:Dee,interpolateTransformSvg:Ree,interpolateZoom:Uee,piecewise:j$,quantize:Yee},Symbol.toStringTag,{value:"Module"}));function Vee(e){return function(){return e}}function bw(e){return+e}var KR=[0,1];function Ri(e){return e}function xw(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Vee(isNaN(t)?NaN:.5)}function Wee(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function Qee(e,t,n){var i=e[0],r=e[1],a=t[0],s=t[1];return r<i?(i=xw(r,i),a=n(s,a)):(i=xw(i,r),a=n(a,s)),function(l){return a(i(l))}}function Zee(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),a=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)r[s]=xw(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(l){var c=gl(e,l,1,i)-1;return a[c](r[c](l))}}function jp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function lb(){var e=KR,t=KR,n=Nl,i,r,a,s=Ri,l,c,f;function d(){var p=Math.min(e.length,t.length);return s!==Ri&&(s=Wee(e[0],e[p-1])),l=p>2?Zee:Qee,c=f=null,g}function g(p){return p==null||isNaN(p=+p)?a:(c||(c=l(e.map(i),t,n)))(i(s(p)))}return g.invert=function(p){return s(r((f||(f=l(t,e.map(i),ea)))(p)))},g.domain=function(p){return arguments.length?(e=Array.from(p,bw),d()):e.slice()},g.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},g.rangeRound=function(p){return t=Array.from(p),n=Bp,d()},g.clamp=function(p){return arguments.length?(s=p?!0:Ri,d()):s!==Ri},g.interpolate=function(p){return arguments.length?(n=p,d()):n},g.unknown=function(p){return arguments.length?(a=p,g):a},function(p,y){return i=p,r=y,d()}}function YL(){return lb()(Ri,Ri)}function XL(e,t,n,i){var r=pl(e,t,n),a;switch(i=Iu(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(a=b9(r,s))&&(i.precision=a),$C(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=x9(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=v9(r))&&(i.precision=a-(i.type==="%")*2);break}}return Lv(i)}function gc(e){var t=e.domain;return e.ticks=function(n){var i=t();return K_(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return XL(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,a=i.length-1,s=i[r],l=i[a],c,f,d=10;for(l<s&&(f=s,s=l,l=f,f=r,r=a,a=f);d-- >0;){if(f=J_(s,l,n),f===c)return i[r]=s,i[a]=l,t(i);if(f>0)s=Math.floor(s/f)*f,l=Math.ceil(l/f)*f;else if(f<0)s=Math.ceil(s*f)/f,l=Math.floor(l*f)/f;else break;c=f}return e},e}function VL(){var e=YL();return e.copy=function(){return jp(e,VL())},is.apply(e,arguments),gc(e)}function WL(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,bw),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return WL(e).unknown(t)},e=arguments.length?Array.from(e,bw):[0,1],gc(n)}function QL(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],a=e[i],s;return a<r&&(s=n,n=i,i=s,s=r,r=a,a=s),e[n]=t.floor(r),e[i]=t.ceil(a),e}function JR(e){return Math.log(e)}function e6(e){return Math.exp(e)}function Kee(e){return-Math.log(-e)}function Jee(e){return-Math.exp(-e)}function ete(e){return isFinite(e)?+("1e"+e):e<0?0:e}function tte(e){return e===10?ete:e===Math.E?Math.exp:t=>Math.pow(e,t)}function nte(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function t6(e){return(t,n)=>-e(-t,n)}function q$(e){const t=e(JR,e6),n=t.domain;let i=10,r,a;function s(){return r=nte(i),a=tte(i),n()[0]<0?(r=t6(r),a=t6(a),e(Kee,Jee)):e(JR,e6),t}return t.base=function(l){return arguments.length?(i=+l,s()):i},t.domain=function(l){return arguments.length?(n(l),s()):n()},t.ticks=l=>{const c=n();let f=c[0],d=c[c.length-1];const g=d<f;g&&([f,d]=[d,f]);let p=r(f),y=r(d),v,b;const S=l==null?10:+l;let _=[];if(!(i%1)&&y-p<S){if(p=Math.floor(p),y=Math.ceil(y),f>0){for(;p<=y;++p)for(v=1;v<i;++v)if(b=p<0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;_.push(b)}}else for(;p<=y;++p)for(v=i-1;v>=1;--v)if(b=p>0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;_.push(b)}_.length*2<S&&(_=K_(f,d,S))}else _=K_(p,y,Math.min(y-p,S)).map(a);return g?_.reverse():_},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=i===10?"s":","),typeof c!="function"&&(!(i%1)&&(c=Iu(c)).precision==null&&(c.trim=!0),c=Lv(c)),l===1/0)return c;const f=Math.max(1,i*l/t.ticks().length);return d=>{let g=d/a(Math.round(r(d)));return g*i<i-.5&&(g*=i),g<=f?c(d):""}},t.nice=()=>n(QL(n(),{floor:l=>a(Math.floor(r(l))),ceil:l=>a(Math.ceil(r(l)))})),t}function ZL(){const e=q$(lb()).domain([1,10]);return e.copy=()=>jp(e,ZL()).base(e.base()),is.apply(e,arguments),e}function n6(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function i6(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function I$(e){var t=1,n=e(n6(t),i6(t));return n.constant=function(i){return arguments.length?e(n6(t=+i),i6(t)):t},gc(n)}function KL(){var e=I$(lb());return e.copy=function(){return jp(e,KL()).constant(e.constant())},is.apply(e,arguments)}function r6(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ite(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function rte(e){return e<0?-e*e:e*e}function P$(e){var t=e(Ri,Ri),n=1;function i(){return n===1?e(Ri,Ri):n===.5?e(ite,rte):e(r6(n),r6(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},gc(t)}function H$(){var e=P$(lb());return e.copy=function(){return jp(e,H$()).exponent(e.exponent())},is.apply(e,arguments),e}function ate(){return H$.apply(null,arguments).exponent(.5)}function JL(){var e=[],t=[],n=[],i;function r(){var s=0,l=Math.max(1,t.length);for(n=new Array(l-1);++s<l;)n[s-1]=d9(e,s/l);return a}function a(s){return s==null||isNaN(s=+s)?i:t[gl(n,s)]}return a.invertExtent=function(s){var l=t.indexOf(s);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let l of s)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Vs),r()},a.range=function(s){return arguments.length?(t=Array.from(s),r()):t.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.quantiles=function(){return n.slice()},a.copy=function(){return JL().domain(e).range(t).unknown(i)},is.apply(a,arguments)}function eU(){var e=0,t=1,n=1,i=[.5],r=[0,1],a;function s(c){return c!=null&&c<=c?r[gl(i,c,0,n)]:a}function l(){var c=-1;for(i=new Array(n);++c<n;)i[c]=((c+1)*t-(c-n)*e)/(n+1);return s}return s.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},s.range=function(c){return arguments.length?(n=(r=Array.from(c)).length-1,l()):r.slice()},s.invertExtent=function(c){var f=r.indexOf(c);return f<0?[NaN,NaN]:f<1?[e,i[0]]:f>=n?[i[n-1],t]:[i[f-1],i[f]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return i.slice()},s.copy=function(){return eU().domain([e,t]).range(r).unknown(a)},is.apply(gc(s),arguments)}function tU(){var e=[.5],t=[0,1],n,i=1;function r(a){return a!=null&&a<=a?t[gl(e,a,0,i)]:n}return r.domain=function(a){return arguments.length?(e=Array.from(a),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(a){return arguments.length?(t=Array.from(a),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},r.unknown=function(a){return arguments.length?(n=a,r):n},r.copy=function(){return tU().domain(e).range(t).unknown(n)},is.apply(r,arguments)}function ste(e){return new Date(e)}function ote(e){return e instanceof Date?+e:+new Date(+e)}function G$(e,t,n,i,r,a,s,l,c,f){var d=YL(),g=d.invert,p=d.domain,y=f(".%L"),v=f(":%S"),b=f("%I:%M"),S=f("%I %p"),_=f("%a %d"),w=f("%b %d"),A=f("%B"),$=f("%Y");function M(k){return(c(k)<k?y:l(k)<k?v:s(k)<k?b:a(k)<k?S:i(k)<k?r(k)<k?_:w:n(k)<k?A:$)(k)}return d.invert=function(k){return new Date(g(k))},d.domain=function(k){return arguments.length?p(Array.from(k,ote)):p().map(ste)},d.ticks=function(k){var T=p();return e(T[0],T[T.length-1],k??10)},d.tickFormat=function(k,T){return T==null?M:f(T)},d.nice=function(k){var T=p();return(!k||typeof k.range!="function")&&(k=t(T[0],T[T.length-1],k??10)),k?p(QL(T,k)):d},d.copy=function(){return jp(d,G$(e,t,n,i,r,a,s,l,c,f))},d}function lte(){return is.apply(G$(pQ,mQ,Va,np,Nd,Ws,jv,Uv,Hs,NC).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ute(){return is.apply(G$(hQ,gQ,Wa,ip,Dd,ul,qv,Bv,Hs,DC).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ub(){var e=0,t=1,n,i,r,a,s=Ri,l=!1,c;function f(g){return g==null||isNaN(g=+g)?c:s(r===0?.5:(g=(a(g)-n)*r,l?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([e,t]=g,n=a(e=+e),i=a(t=+t),r=n===i?0:1/(i-n),f):[e,t]},f.clamp=function(g){return arguments.length?(l=!!g,f):l},f.interpolator=function(g){return arguments.length?(s=g,f):s};function d(g){return function(p){var y,v;return arguments.length?([y,v]=p,s=g(y,v),f):[s(0),s(1)]}}return f.range=d(Nl),f.rangeRound=d(Bp),f.unknown=function(g){return arguments.length?(c=g,f):c},function(g){return a=g,n=g(e),i=g(t),r=n===i?0:1/(i-n),f}}function Dl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Y$(){var e=gc(ub()(Ri));return e.copy=function(){return Dl(e,Y$())},kl.apply(e,arguments)}function nU(){var e=q$(ub()).domain([1,10]);return e.copy=function(){return Dl(e,nU()).base(e.base())},kl.apply(e,arguments)}function iU(){var e=I$(ub());return e.copy=function(){return Dl(e,iU()).constant(e.constant())},kl.apply(e,arguments)}function X$(){var e=P$(ub());return e.copy=function(){return Dl(e,X$()).exponent(e.exponent())},kl.apply(e,arguments)}function cte(){return X$.apply(null,arguments).exponent(.5)}function cb(){var e=0,t=.5,n=1,i=1,r,a,s,l,c,f=Ri,d,g=!1,p;function y(b){return isNaN(b=+b)?p:(b=.5+((b=+d(b))-a)*(i*b<i*a?l:c),f(g?Math.max(0,Math.min(1,b)):b))}y.domain=function(b){return arguments.length?([e,t,n]=b,r=d(e=+e),a=d(t=+t),s=d(n=+n),l=r===a?0:.5/(a-r),c=a===s?0:.5/(s-a),i=a<r?-1:1,y):[e,t,n]},y.clamp=function(b){return arguments.length?(g=!!b,y):g},y.interpolator=function(b){return arguments.length?(f=b,y):f};function v(b){return function(S){var _,w,A;return arguments.length?([_,w,A]=S,f=j$(b,[_,w,A]),y):[f(0),f(.5),f(1)]}}return y.range=v(Nl),y.rangeRound=v(Bp),y.unknown=function(b){return arguments.length?(p=b,y):p},function(b){return d=b,r=b(e),a=b(t),s=b(n),l=r===a?0:.5/(a-r),c=a===s?0:.5/(s-a),i=a<r?-1:1,y}}function rU(){var e=gc(cb()(Ri));return e.copy=function(){return Dl(e,rU())},kl.apply(e,arguments)}function aU(){var e=q$(cb()).domain([.1,1,10]);return e.copy=function(){return Dl(e,aU()).base(e.base())},kl.apply(e,arguments)}function sU(){var e=I$(cb());return e.copy=function(){return Dl(e,sU()).constant(e.constant())},kl.apply(e,arguments)}function V$(){var e=P$(cb());return e.copy=function(){return Dl(e,V$()).exponent(e.exponent())},kl.apply(e,arguments)}function fte(){return V$.apply(null,arguments).exponent(.5)}function rs(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const dte=rs("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),hte=rs("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),gte=rs("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),pte=rs("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),mte=rs("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),yte=rs("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),vte=rs("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),bte=rs("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),xte=rs("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Ste=rs("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function W$(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const Ete="identity",Jf="linear",io="log",qp="pow",Ip="sqrt",fb="symlog",Hu="time",Gu="utc",Pa="sequential",Ud="diverging",ed="quantile",db="quantize",hb="threshold",Q$="ordinal",Sw="point",oU="band",Z$="bin-ordinal",yn="continuous",Pp="discrete",Hp="discretizing",Ir="interpolating",K$="temporal";function _te(e){return function(t){let n=t[0],i=t[1],r;return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}function wte(e){return function(t){const n=e.range();let i=t[0],r=t[1],a=-1,s,l,c,f;for(r<i&&(l=i,i=r,r=l),c=0,f=n.length;c<f;++c)n[c]>=i&&n[c]<=r&&(a<0&&(a=c),s=c);if(!(a<0))return i=e.invertExtent(n[a]),r=e.invertExtent(n[s]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function J$(){const e=z$().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],r,a,s=!1,l=0,c=0,f=.5;delete e.unknown;function d(){const g=t().length,p=i[1]<i[0],y=i[1-p],v=W$(g,l,c);let b=i[p-0];r=(y-b)/(v||1),s&&(r=Math.floor(r)),b+=(y-b-r*(g-l))*f,a=r*(1-l),s&&(b=Math.round(b),a=Math.round(a));const S=rr(g).map(_=>b+r*_);return n(p?S.reverse():S)}return e.domain=function(g){return arguments.length?(t(g),d()):t()},e.range=function(g){return arguments.length?(i=[+g[0],+g[1]],d()):i.slice()},e.rangeRound=function(g){return i=[+g[0],+g[1]],s=!0,d()},e.bandwidth=function(){return a},e.step=function(){return r},e.round=function(g){return arguments.length?(s=!!g,d()):s},e.padding=function(g){return arguments.length?(c=Math.max(0,Math.min(1,g)),l=c,d()):l},e.paddingInner=function(g){return arguments.length?(l=Math.max(0,Math.min(1,g)),d()):l},e.paddingOuter=function(g){return arguments.length?(c=Math.max(0,Math.min(1,g)),d()):c},e.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),d()):f},e.invertRange=function(g){if(g[0]==null||g[1]==null)return;const p=i[1]<i[0],y=p?n().reverse():n(),v=y.length-1;let b=+g[0],S=+g[1],_,w,A;if(!(b!==b||S!==S)&&(S<b&&(A=b,b=S,S=A),!(S<y[0]||b>i[1-p])))return _=Math.max(0,gl(y,b)-1),w=b===S?_:gl(y,S)-1,b-y[_]>a+1e-10&&++_,p&&(A=_,_=v-w,w=v-A),_>w?void 0:t().slice(_,w+1)},e.invert=function(g){const p=e.invertRange([g,g]);return p&&p[0]},e.copy=function(){return J$().domain(t()).range(i).round(s).paddingInner(l).paddingOuter(c).align(f)},d()}function lU(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return lU(t())},e}function Ate(){return lU(J$().paddingInner(1))}var Cte=Array.prototype.map;function $te(e){return Cte.call(e,Zn)}const Tte=Array.prototype.slice;function uU(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(gl(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=$te(i),n):e.slice()},n.range=function(i){return arguments.length?(t=Tte.call(i),n):t.slice()},n.tickFormat=function(i,r){return XL(e[0],rt(e),i??10,r)},n.copy=function(){return uU().domain(n.domain()).range(n.range())},n}const vy=new Map,cU=Symbol("vega_scale");function fU(e){return e[cU]=!0,e}function a6(e){return e&&e[cU]===!0}function Mte(e,t,n){const i=function(){const a=t();return a.invertRange||(a.invertRange=a.invert?_te(a):a.invertExtent?wte(a):void 0),a.type=e,fU(a)};return i.metadata=ca(_e(n)),i}function ft(e,t,n){return arguments.length>1?(vy.set(e,Mte(e,t,n)),this):dU(e)?vy.get(e):void 0}ft(Ete,WL);ft(Jf,VL,yn);ft(io,ZL,[yn,io]);ft(qp,H$,yn);ft(Ip,ate,yn);ft(fb,KL,yn);ft(Hu,lte,[yn,K$]);ft(Gu,ute,[yn,K$]);ft(Pa,Y$,[yn,Ir]);ft(`${Pa}-${Jf}`,Y$,[yn,Ir]);ft(`${Pa}-${io}`,nU,[yn,Ir,io]);ft(`${Pa}-${qp}`,X$,[yn,Ir]);ft(`${Pa}-${Ip}`,cte,[yn,Ir]);ft(`${Pa}-${fb}`,iU,[yn,Ir]);ft(`${Ud}-${Jf}`,rU,[yn,Ir]);ft(`${Ud}-${io}`,aU,[yn,Ir,io]);ft(`${Ud}-${qp}`,V$,[yn,Ir]);ft(`${Ud}-${Ip}`,fte,[yn,Ir]);ft(`${Ud}-${fb}`,sU,[yn,Ir]);ft(ed,JL,[Hp,ed]);ft(db,eU,Hp);ft(hb,tU,Hp);ft(Z$,uU,[Pp,Hp]);ft(Q$,z$,Pp);ft(oU,J$,Pp);ft(Sw,Ate,Pp);function dU(e){return vy.has(e)}function pc(e,t){const n=vy.get(e);return n&&n.metadata[t]}function e3(e){return pc(e,yn)}function td(e){return pc(e,Pp)}function Ew(e){return pc(e,Hp)}function hU(e){return pc(e,io)}function kte(e){return pc(e,K$)}function gU(e){return pc(e,Ir)}function pU(e){return pc(e,ed)}const Ote=["clamp","base","constant","exponent"];function mU(e,t){const n=t[0],i=rt(t)-n;return function(r){return e(n+r*i)}}function gb(e,t,n){return j$(t3(t||"rgb",n),e)}function yU(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function vU(e,t,n){const i=n-t;let r,a,s;return!i||!Number.isFinite(i)?ri(.5):(r=(a=e.type).indexOf("-"),a=r<0?a:a.slice(r+1),s=ft(a)().domain([t,n]).range([0,1]),Ote.forEach(l=>e[l]?s[l](e[l]()):0),s)}function t3(e,t){const n=Xee[Nte(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Nte(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Dte={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Rte={accent:hte,category10:dte,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:gte,observable10:pte,paired:mte,pastel1:yte,pastel2:vte,set1:bte,set2:xte,set3:Ste,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function bU(e){if(se(e))return e;const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function xU(e,t){for(const n in e)n3(n,t(e[n]))}const s6={};xU(Rte,bU);xU(Dte,e=>gb(bU(e)));function n3(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(s6[e]=t,this):s6[e]}const O1="symbol",zte="discrete",Fte="gradient",Lte=e=>se(e)?e.map(t=>String(t)):String(e),Ute=(e,t)=>e[1]-t[1],Bte=(e,t)=>t[1]-e[1];function i3(e,t,n){let i;return ut(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Rp(e.domain())/n||1)+1))),Ee(t)&&(i=t.step,t=t.interval),Se(t)&&(t=e.type===Hu?Rd(t):e.type==Gu?zd(t):ae("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function SU(e,t,n){let i=e.range(),r=i[0],a=rt(i),s=Ute;if(r>a&&(i=a,a=r,r=i,s=Bte),r=Math.floor(r),a=Math.ceil(a),t=t.map(l=>[l,e(l)]).filter(l=>r<=l[1]&&l[1]<=a).sort(s).map(l=>l[0]),n>0&&t.length>1){const l=[t[0],rt(t)];for(;t.length>n&&t.length>=3;)t=t.filter((c,f)=>!(f%2));t.length<3&&(t=l)}return t}function r3(e,t){return e.bins?SU(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function EU(e,t,n,i,r,a){const s=t.type;let l=Lte;if(s===Hu||r===Hu)l=e.timeFormat(i);else if(s===Gu||r===Gu)l=e.utcFormat(i);else if(hU(s)){const c=e.formatFloat(i);if(a||t.bins)l=c;else{const f=_U(t,n,!1);l=d=>f(d)?c(d):""}}else if(t.tickFormat){const c=t.domain();l=e.formatSpan(c[0],c[c.length-1],n,i)}else i&&(l=e.format(i));return l}function _U(e,t,n){const i=r3(e,t),r=e.base(),a=Math.log(r),s=Math.max(1,r*t/i.length),l=c=>{let f=c/Math.pow(r,Math.round(Math.log(c)/a));return f*r<r-.5&&(f*=r),f<=s};return n?i.filter(l):l}const _w={[ed]:"quantiles",[db]:"thresholds",[hb]:"domain"},wU={[ed]:"quantiles",[db]:"domain"};function AU(e,t){return e.bins?Ite(e.bins):e.type===io?_U(e,t,!0):_w[e.type]?qte(e[_w[e.type]]()):r3(e,t)}function jte(e,t,n){const i=t[wU[t.type]](),r=i.length;let a=r>1?i[1]-i[0]:i[0],s;for(s=1;s<r;++s)a=Math.min(a,i[s]-i[s-1]);return e.formatSpan(0,a,30,n)}function qte(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Ite(e){const t=e.slice(0,-1);return t.max=rt(e),t}const Pte=e=>_w[e.type]||e.bins;function CU(e,t,n,i,r,a,s){const l=wU[t.type]&&a!==Hu&&a!==Gu?jte(e,t,r):EU(e,t,n,r,a,s);return i===O1&&Pte(t)?Hte(l):i===zte?Gte(l):Yte(l)}const Hte=e=>(t,n,i)=>{const r=o6(i[n+1],o6(i.max,1/0)),a=l6(t,e),s=l6(r,e);return a&&s?a+"  "+s:s?"< "+s:" "+a},o6=(e,t)=>e??t,Gte=e=>(t,n)=>n?e(t):null,Yte=e=>t=>e(t),l6=(e,t)=>Number.isFinite(e)?t(e):null;function Xte(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+rt(t),a=r-i;if(e.type===hb){const s=n?a/n:.1;i-=s,r+=s,a=r-i}return s=>(s-i)/a}function Vte(e,t,n,i){const r=i||t.type;return Se(n)&&kte(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===Hu?e.timeFormat("%A, %d %B %Y, %X"):!n&&r===Gu?e.utcFormat("%A, %d %B %Y, %X UTC"):CU(e,t,5,null,n,i,!0)}function $U(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=Vte(e,t,n.format,n.formatType);if(Ew(t.type)){const a=AU(t).slice(1).map(r),s=a.length;return`${s} boundar${s===1?"y":"ies"}: ${a.join(", ")}`}else if(td(t.type)){const a=t.domain(),s=a.length,l=s>i?a.slice(0,i-2).map(r).join(", ")+", ending with "+a.slice(-1).map(r):a.map(r).join(", ");return`${s} value${s===1?"":"s"}: ${l}`}else{const a=t.domain();return`values from ${r(a[0])} to ${r(rt(a))}`}}let TU=0;function Wte(){TU=0}const by="p_";function a3(e){return e&&e.gradient}function MU(e,t,n){const i=e.gradient;let r=e.id,a=i==="radial"?by:"";return r||(r=e.id="gradient_"+TU++,i==="radial"?(e.x1=ka(e.x1,.5),e.y1=ka(e.y1,.5),e.r1=ka(e.r1,0),e.x2=ka(e.x2,.5),e.y2=ka(e.y2,.5),e.r2=ka(e.r2,.5),a=by):(e.x1=ka(e.x1,0),e.y1=ka(e.y1,0),e.x2=ka(e.x2,1),e.y2=ka(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+a+r+")"}function ka(e,t){return e??t}function kU(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,a){return n.push({offset:r,color:a}),i}}}const u6={basis:{curve:GJ},"basis-closed":{curve:YJ},"basis-open":{curve:XJ},bundle:{curve:VJ,tension:"beta",value:.85},cardinal:{curve:WJ,tension:"tension",value:0},"cardinal-open":{curve:ZJ,tension:"tension",value:0},"cardinal-closed":{curve:QJ,tension:"tension",value:0},"catmull-rom":{curve:KJ,tension:"alpha",value:.5},"catmull-rom-closed":{curve:JJ,tension:"alpha",value:.5},"catmull-rom-open":{curve:eee,tension:"alpha",value:.5},linear:{curve:k$},"linear-closed":{curve:tee},monotone:{horizontal:iee,vertical:nee},natural:{curve:ree},step:{curve:aee},"step-after":{curve:oee},"step-before":{curve:see}};function s3(e,t,n){var i=we(u6,e)&&u6[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const Qte={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Zte=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Kte=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Jte=/^((\s+,?\s*)|(,\s*))/,ene=/^[01]/;function nd(e){const t=[];return(e.match(Zte)||[]).forEach(i=>{let r=i[0];const a=r.toLowerCase(),s=Qte[a],l=tne(a,s,i.slice(1).trim()),c=l.length;if(c<s||c&&c%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...l.slice(0,s)]),c!==s){a==="m"&&(r=r==="M"?"L":"l");for(let f=s;f<c;f+=s)t.push([r,...l.slice(f,f+s)])}}),t}function tne(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let a=0;a<t;++a){const s=e==="a"&&(a===3||a===4)?ene:Kte,l=n.slice(r).match(s);if(l===null)throw Error("Invalid SVG path, incorrect parameter type");r+=l[0].length,i.push(+l[0]);const c=n.slice(r).match(Jte);c!==null&&(r+=c[0].length)}return i}const bl=Math.PI/180,nne=1e-14,_u=Math.PI/2,Fa=Math.PI*2,pf=Math.sqrt(3)/2;var TE={},ME={},OU=[].join;function ine(e,t,n,i,r,a,s,l,c){const f=OU.call(arguments);if(TE[f])return TE[f];const d=s*bl,g=Math.sin(d),p=Math.cos(d);n=Math.abs(n),i=Math.abs(i);const y=p*(l-e)*.5+g*(c-t)*.5,v=p*(c-t)*.5-g*(l-e)*.5;let b=y*y/(n*n)+v*v/(i*i);b>1&&(b=Math.sqrt(b),n*=b,i*=b);const S=p/n,_=g/n,w=-g/i,A=p/i,$=S*l+_*c,M=w*l+A*c,k=S*e+_*t,T=w*e+A*t;let R=1/((k-$)*(k-$)+(T-M)*(T-M))-.25;R<0&&(R=0);let B=Math.sqrt(R);a==r&&(B=-B);const U=.5*($+k)-B*(T-M),Q=.5*(M+T)+B*(k-$),Y=Math.atan2(M-Q,$-U);let z=Math.atan2(T-Q,k-U)-Y;z<0&&a===1?z+=Fa:z>0&&a===0&&(z-=Fa);const N=Math.ceil(Math.abs(z/(_u+.001))),j=[];for(let X=0;X<N;++X){const K=Y+X*z/N,fe=Y+(X+1)*z/N;j[X]=[U,Q,K,fe,n,i,g,p]}return TE[f]=j}function rne(e){const t=OU.call(e);if(ME[t])return ME[t];var n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],c=e[6],f=e[7];const d=f*s,g=-c*l,p=c*s,y=f*l,v=Math.cos(r),b=Math.sin(r),S=Math.cos(a),_=Math.sin(a),w=.5*(a-r),A=Math.sin(w*.5),$=8/3*A*A/Math.sin(w),M=n+v-$*b,k=i+b+$*v,T=n+S,D=i+_,R=T+$*_,B=D-$*S;return ME[t]=[d*M+g*k,p*M+y*k,d*R+g*B,p*R+y*B,d*T+g*D,p*T+y*D]}const Ar=["l",0,0,0,0,0,0,0];function ane(e,t,n){const i=Ar[0]=e[0];if(i==="a"||i==="A")Ar[1]=t*e[1],Ar[2]=n*e[2],Ar[3]=e[3],Ar[4]=e[4],Ar[5]=e[5],Ar[6]=t*e[6],Ar[7]=n*e[7];else if(i==="h"||i==="H")Ar[1]=t*e[1];else if(i==="v"||i==="V")Ar[1]=n*e[1];else for(var r=1,a=e.length;r<a;++r)Ar[r]=(r%2==1?t:n)*e[r];return Ar}function cp(e,t,n,i,r,a){var s,l=null,c=0,f=0,d=0,g=0,p,y,v,b,S=0,_=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),a==null&&(a=r),e.beginPath&&e.beginPath();for(var w=0,A=t.length;w<A;++w){switch(s=t[w],(r!==1||a!==1)&&(s=ane(s,r,a)),s[0]){case"l":c+=s[1],f+=s[2],e.lineTo(c+n,f+i);break;case"L":c=s[1],f=s[2],e.lineTo(c+n,f+i);break;case"h":c+=s[1],e.lineTo(c+n,f+i);break;case"H":c=s[1],e.lineTo(c+n,f+i);break;case"v":f+=s[1],e.lineTo(c+n,f+i);break;case"V":f=s[1],e.lineTo(c+n,f+i);break;case"m":c+=s[1],f+=s[2],S=c,_=f,e.moveTo(c+n,f+i);break;case"M":c=s[1],f=s[2],S=c,_=f,e.moveTo(c+n,f+i);break;case"c":p=c+s[5],y=f+s[6],d=c+s[3],g=f+s[4],e.bezierCurveTo(c+s[1]+n,f+s[2]+i,d+n,g+i,p+n,y+i),c=p,f=y;break;case"C":c=s[5],f=s[6],d=s[3],g=s[4],e.bezierCurveTo(s[1]+n,s[2]+i,d+n,g+i,c+n,f+i);break;case"s":p=c+s[3],y=f+s[4],d=2*c-d,g=2*f-g,e.bezierCurveTo(d+n,g+i,c+s[1]+n,f+s[2]+i,p+n,y+i),d=c+s[1],g=f+s[2],c=p,f=y;break;case"S":p=s[3],y=s[4],d=2*c-d,g=2*f-g,e.bezierCurveTo(d+n,g+i,s[1]+n,s[2]+i,p+n,y+i),c=p,f=y,d=s[1],g=s[2];break;case"q":p=c+s[3],y=f+s[4],d=c+s[1],g=f+s[2],e.quadraticCurveTo(d+n,g+i,p+n,y+i),c=p,f=y;break;case"Q":p=s[3],y=s[4],e.quadraticCurveTo(s[1]+n,s[2]+i,p+n,y+i),c=p,f=y,d=s[1],g=s[2];break;case"t":p=c+s[1],y=f+s[2],l[0].match(/[QqTt]/)===null?(d=c,g=f):l[0]==="t"?(d=2*c-v,g=2*f-b):l[0]==="q"&&(d=2*c-d,g=2*f-g),v=d,b=g,e.quadraticCurveTo(d+n,g+i,p+n,y+i),c=p,f=y,d=c+s[1],g=f+s[2];break;case"T":p=s[1],y=s[2],d=2*c-d,g=2*f-g,e.quadraticCurveTo(d+n,g+i,p+n,y+i),c=p,f=y;break;case"a":c6(e,c+n,f+i,[s[1],s[2],s[3],s[4],s[5],s[6]+c+n,s[7]+f+i]),c+=s[6],f+=s[7];break;case"A":c6(e,c+n,f+i,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+i]),c=s[6],f=s[7];break;case"z":case"Z":c=S,f=_,e.closePath();break}l=s}}function c6(e,t,n,i){const r=ine(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let a=0;a<r.length;++a){const s=rne(r[a]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const f6=.5773502691896257,d6={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Fa)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,a=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-a),e.lineTo(r,-a),e.lineTo(0,-n),e.lineTo(-r,-a),e.lineTo(-i,-a),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=pf*n,r=i-n*f6,a=n/4;e.moveTo(0,-i-r),e.lineTo(-a,i-r),e.lineTo(a,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=pf*n,r=i-n*f6;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=pf*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=pf*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=pf*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=pf*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function NU(e){return we(d6,e)?d6[e]:sne(e)}var kE={};function sne(e){if(!we(kE,e)){const t=nd(e);kE[e]={draw:function(n,i){cp(n,t,0,0,Math.sqrt(i)/2)}}}return kE[e]}const Po=.448084975506;function one(e){return e.x}function lne(e){return e.y}function une(e){return e.width}function cne(e){return e.height}function Ds(e){return typeof e=="function"?e:()=>+e}function Z0(e,t,n){return Math.max(t,Math.min(e,n))}function DU(){var e=one,t=lne,n=une,i=cne,r=Ds(0),a=r,s=r,l=r,c=null;function f(d,g,p){var y,v=g??+e.call(this,d),b=p??+t.call(this,d),S=+n.call(this,d),_=+i.call(this,d),w=Math.min(S,_)/2,A=Z0(+r.call(this,d),0,w),$=Z0(+a.call(this,d),0,w),M=Z0(+s.call(this,d),0,w),k=Z0(+l.call(this,d),0,w);if(c||(c=y=tb()),A<=0&&$<=0&&M<=0&&k<=0)c.rect(v,b,S,_);else{var T=v+S,D=b+_;c.moveTo(v+A,b),c.lineTo(T-$,b),c.bezierCurveTo(T-Po*$,b,T,b+Po*$,T,b+$),c.lineTo(T,D-k),c.bezierCurveTo(T,D-Po*k,T-Po*k,D,T-k,D),c.lineTo(v+M,D),c.bezierCurveTo(v+Po*M,D,v,D-Po*M,v,D-M),c.lineTo(v,b+A),c.bezierCurveTo(v,b+Po*A,v+Po*A,b,v+A,b),c.closePath()}if(y)return c=null,y+""||null}return f.x=function(d){return arguments.length?(e=Ds(d),f):e},f.y=function(d){return arguments.length?(t=Ds(d),f):t},f.width=function(d){return arguments.length?(n=Ds(d),f):n},f.height=function(d){return arguments.length?(i=Ds(d),f):i},f.cornerRadius=function(d,g,p,y){return arguments.length?(r=Ds(d),a=g!=null?Ds(g):r,l=p!=null?Ds(p):r,s=y!=null?Ds(y):a,f):r},f.context=function(d){return arguments.length?(c=d??null,f):c},f}function RU(){var e,t,n,i,r=null,a,s,l,c;function f(g,p,y){const v=y/2;if(a){var b=l-p,S=g-s;if(b||S){var _=Math.hypot(b,S),w=(b/=_)*c,A=(S/=_)*c,$=Math.atan2(S,b);r.moveTo(s-w,l-A),r.lineTo(g-b*v,p-S*v),r.arc(g,p,v,$-Math.PI,$),r.lineTo(s+w,l+A),r.arc(s,l,c,$,$+Math.PI)}else r.arc(g,p,v,0,Fa);r.closePath()}else a=1;s=g,l=p,c=v}function d(g){var p,y=g.length,v,b=!1,S;for(r==null&&(r=S=tb()),p=0;p<=y;++p)!(p<y&&i(v=g[p],p,g))===b&&(b=!b)&&(a=0),b&&f(+e(v,p,g),+t(v,p,g),+n(v,p,g));if(S)return r=null,S+""||null}return d.x=function(g){return arguments.length?(e=g,d):e},d.y=function(g){return arguments.length?(t=g,d):t},d.size=function(g){return arguments.length?(n=g,d):n},d.defined=function(g){return arguments.length?(i=g,d):i},d.context=function(g){return arguments.length?(g==null?r=null:r=g,d):r},d}function Gp(e,t){return e??t}const Yp=e=>e.x||0,Xp=e=>e.y||0,fne=e=>e.width||0,dne=e=>e.height||0,hne=e=>(e.x||0)+(e.width||0),gne=e=>(e.y||0)+(e.height||0),pne=e=>e.startAngle||0,mne=e=>e.endAngle||0,yne=e=>e.padAngle||0,vne=e=>e.innerRadius||0,bne=e=>e.outerRadius||0,xne=e=>e.cornerRadius||0,Sne=e=>Gp(e.cornerRadiusTopLeft,e.cornerRadius)||0,Ene=e=>Gp(e.cornerRadiusTopRight,e.cornerRadius)||0,_ne=e=>Gp(e.cornerRadiusBottomRight,e.cornerRadius)||0,wne=e=>Gp(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Ane=e=>Gp(e.size,64),Cne=e=>e.size||1,pb=e=>e.defined!==!1,$ne=e=>NU(e.shape||"circle"),Tne=IJ().startAngle(pne).endAngle(mne).padAngle(yne).innerRadius(vne).outerRadius(bne).cornerRadius(xne),Mne=uL().x(Yp).y1(Xp).y0(gne).defined(pb),kne=uL().y(Xp).x1(Yp).x0(hne).defined(pb),One=lL().x(Yp).y(Xp).defined(pb),Nne=DU().x(Yp).y(Xp).width(fne).height(dne).cornerRadius(Sne,Ene,_ne,wne),Dne=HJ().type($ne).size(Ane),Rne=RU().x(Yp).y(Xp).defined(pb).size(Cne);function o3(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function zne(e,t){return Tne.context(e)(t)}function Fne(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?kne:Mne).curve(s3(i,n.orient,n.tension)).context(e)(t)}function Lne(e,t){const n=t[0],i=n.interpolate||"linear";return One.curve(s3(i,n.orient,n.tension)).context(e)(t)}function Bd(e,t,n,i){return Nne.context(e)(t,n,i)}function Une(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Bne(e,t){return Dne.context(e)(t)}function jne(e,t){return Rne.context(e)(t)}var zU=1;function qne(){zU=1}function l3(e,t,n){var i=t.clip,r=e._defs,a=t.clip_id||(t.clip_id="clip"+zU++),s=r.clipping[a]||(r.clipping[a]={id:a});return Ge(i)?s.path=i(null):o3(n)?s.path=Bd(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+a+")"}function un(e){this.clear(),e&&this.union(e)}un.prototype={clone(){return new un(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:a,y2:s}=this,l=Math.cos(e),c=Math.sin(e),f=t-t*l+n*c,d=n-t*c-n*l;return[l*i-c*r+f,c*i+l*r+d,l*i-c*s+f,c*i+l*s+d,l*a-c*r+f,c*a+l*r+d,l*a-c*s+f,c*a+l*s+d]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function mb(e){this.mark=e,this.bounds=this.bounds||new un}function yb(e){mb.call(this,e),this.items=this.items||[]}be(yb,mb);class FU{constructor(t){this._pending=0,this._loader=t||Pv()}pending(){return this._pending}sanitizeURL(t){const n=this;return h6(n),n._loader.sanitize(t,{context:"href"}).then(i=>(ig(n),i)).catch(()=>(ig(n),null))}loadImage(t){const n=this,i=lee();return h6(n),n._loader.sanitize(t,{context:"image"}).then(r=>{const a=r.href;if(!a||!i)throw{url:a};const s=new i,l=we(r,"crossOrigin")?r.crossOrigin:"anonymous";return l!=null&&(s.crossOrigin=l),s.onload=()=>ig(n),s.onerror=()=>ig(n),s.src=a,s}).catch(r=>(ig(n),{complete:!1,width:0,height:0,src:r&&r.url||""}))}ready(){const t=this;return new Promise(n=>{function i(r){t.pending()?setTimeout(()=>{i(!0)},10):n(r)}i(!1)})}}function h6(e){e._pending+=1}function ig(e){e._pending-=1}function lo(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?Ine(t,i):0))}return e}function Ine(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Pne=Fa-1e-8;let vb,N1,D1,Mu,ww,R1,Aw,Cw;const Jo=(e,t)=>vb.add(e,t),z1=(e,t)=>Jo(N1=e,D1=t),g6=e=>Jo(e,vb.y1),p6=e=>Jo(vb.x1,e),wu=(e,t)=>ww*e+Aw*t,Au=(e,t)=>R1*e+Cw*t,OE=(e,t)=>Jo(wu(e,t),Au(e,t)),NE=(e,t)=>z1(wu(e,t),Au(e,t));function Vp(e,t){return vb=e,t?(Mu=t*bl,ww=Cw=Math.cos(Mu),R1=Math.sin(Mu),Aw=-R1):(ww=Cw=1,Mu=R1=Aw=0),Hne}const Hne={beginPath(){},closePath(){},moveTo:NE,lineTo:NE,rect(e,t,n,i){Mu?(OE(e+n,t),OE(e+n,t+i),OE(e,t+i),NE(e,t)):(Jo(e+n,t+i),z1(e,t))},quadraticCurveTo(e,t,n,i){const r=wu(e,t),a=Au(e,t),s=wu(n,i),l=Au(n,i);m6(N1,r,s,g6),m6(D1,a,l,p6),z1(s,l)},bezierCurveTo(e,t,n,i,r,a){const s=wu(e,t),l=Au(e,t),c=wu(n,i),f=Au(n,i),d=wu(r,a),g=Au(r,a);y6(N1,s,c,d,g6),y6(D1,l,f,g,p6),z1(d,g)},arc(e,t,n,i,r,a){if(i+=Mu,r+=Mu,N1=n*Math.cos(r)+e,D1=n*Math.sin(r)+t,Math.abs(r-i)>Pne)Jo(e-n,t-n),Jo(e+n,t+n);else{const s=f=>Jo(n*Math.cos(f)+e,n*Math.sin(f)+t);let l,c;if(s(i),s(r),r!==i)if(i=i%Fa,i<0&&(i+=Fa),r=r%Fa,r<0&&(r+=Fa),r<i&&(a=!a,l=i,i=r,r=l),a)for(r-=Fa,l=i-i%_u,c=0;c<4&&l>r;++c,l-=_u)s(l);else for(l=i-i%_u+_u,c=0;c<4&&l<r;++c,l=l+_u)s(l)}}};function m6(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function y6(e,t,n,i,r){const a=i-e+3*t-3*n,s=e+n-2*t,l=e-t;let c=0,f=0,d;Math.abs(a)>nne?(d=s*s+l*a,d>=0&&(d=Math.sqrt(d),c=(-s+d)/a,f=(-s-d)/a)):c=.5*l/s,0<c&&c<1&&r(v6(c,e,t,n,i)),0<f&&f<1&&r(v6(f,e,t,n,i))}function v6(e,t,n,i,r){const a=1-e,s=a*a,l=e*e;return s*a*t+3*s*e*n+3*a*l*i+l*e*r}var dl=(dl=fl(1,1))?dl.getContext("2d"):null;const $w=new un;function u3(e){return function(t,n){if(!dl)return!0;e(dl,t),$w.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:a,y2:s}=$w;for(let l=r;l<=s;++l)for(let c=i;c<=a;++c)if(dl.isPointInPath(c,l))return!0;return!1}}function c3(e,t){return t.contains(e.x||0,e.y||0)}function LU(e,t){const n=e.x||0,i=e.y||0,r=e.width||0,a=e.height||0;return t.intersects($w.set(n,i,n+r,i+a))}function UU(e,t){const n=e.x||0,i=e.y||0,r=e.x2!=null?e.x2:n,a=e.y2!=null?e.y2:i;return Mf(t,n,i,r,a)}function Mf(e,t,n,i,r){const{x1:a,y1:s,x2:l,y2:c}=e,f=i-t,d=r-n;let g=0,p=1,y,v,b,S;for(S=0;S<4;++S){if(S===0&&(y=-f,v=-(a-t)),S===1&&(y=f,v=l-t),S===2&&(y=-d,v=-(s-n)),S===3&&(y=d,v=c-n),Math.abs(y)<1e-10&&v<0)return!1;if(b=v/y,y<0){if(b>p)return!1;b>g&&(g=b)}else if(y>0){if(b<g)return!1;b<p&&(p=b)}}return!0}function id(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Qr(e,t){return e??t}function b6(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function Gne(e,t,n){const i=n.width(),r=n.height();let a;if(t.gradient==="radial")a=e.createRadialGradient(n.x1+Qr(t.x1,.5)*i,n.y1+Qr(t.y1,.5)*r,Math.max(i,r)*Qr(t.r1,0),n.x1+Qr(t.x2,.5)*i,n.y1+Qr(t.y2,.5)*r,Math.max(i,r)*Qr(t.r2,.5));else{const s=Qr(t.x1,0),l=Qr(t.y1,0),c=Qr(t.x2,1),f=Qr(t.y2,0);if(s===c||l===f||i===r)a=e.createLinearGradient(n.x1+s*i,n.y1+l*r,n.x1+c*i,n.y1+f*r);else{const d=fl(Math.ceil(i),Math.ceil(r)),g=d.getContext("2d");return g.scale(i,r),g.fillStyle=b6(g.createLinearGradient(s,l,c,f),t.stops),g.fillRect(0,0,i,r),e.createPattern(d,"no-repeat")}}return b6(a,t.stops)}function BU(e,t,n){return a3(n)?Gne(e,n,t.bounds):n}function xy(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=BU(e,t,t.fill),!0):!1}var Yne=[];function rd(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=BU(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Yne),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Xne(e,t){return e.zindex-t.zindex||e.index-t.index}function f3(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,r,a;for(r=0,a=t.length;r<a;++r)i=t[r],i.index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(Xne)}function da(e,t){var n=e.items,i,r;if(!n||!n.length)return;const a=f3(e);if(a&&a.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=a}for(i=0,r=n.length;i<r;++i)t(n[i])}function Sy(e,t){var n=e.items,i,r;if(!n||!n.length)return null;const a=f3(e);for(a&&a.length&&(n=a),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===a){for(n=e.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i}return null}function d3(e){return function(t,n,i){da(n,r=>{(!i||i.intersects(r.bounds))&&jU(e,t,r,r)})}}function Vne(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&jU(e,t,n.items[0],n.items)}}function jU(e,t,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(e(t,i)||(id(t,n),n.fill&&xy(t,n,r)&&t.fill(),n.stroke&&rd(t,n,r)&&t.stroke()))}function bb(e){return e=e||Fr,function(t,n,i,r,a,s){return i*=t.pixelRatio,r*=t.pixelRatio,Sy(n,l=>{const c=l.bounds;if(!(c&&!c.contains(a,s)||!c)&&e(t,l,i,r,a,s))return l})}}function Wp(e,t){return function(n,i,r,a){var s=Array.isArray(i)?i[0]:i,l=t??s.fill,c=s.stroke&&n.isPointInStroke,f,d;return c&&(f=s.strokeWidth,d=s.strokeCap,n.lineWidth=f??1,n.lineCap=d??"butt"),e(n,i)?!1:l&&n.isPointInPath(r,a)||c&&n.isPointInStroke(r,a)}}function h3(e){return bb(Wp(e))}function zu(e,t){return"translate("+e+","+t+")"}function g3(e){return"rotate("+e+")"}function Wne(e,t){return"scale("+e+","+t+")"}function qU(e){return zu(e.x||0,e.y||0)}function Qne(e){return zu(e.x||0,e.y||0)+(e.angle?" "+g3(e.angle):"")}function Zne(e){return zu(e.x||0,e.y||0)+(e.angle?" "+g3(e.angle):"")+(e.scaleX||e.scaleY?" "+Wne(e.scaleX||1,e.scaleY||1):"")}function p3(e,t,n){function i(s,l){s("transform",Qne(l)),s("d",t(null,l))}function r(s,l){return t(Vp(s,l.angle),l),lo(s,l).translate(l.x||0,l.y||0)}function a(s,l){var c=l.x||0,f=l.y||0,d=l.angle||0;s.translate(c,f),d&&s.rotate(d*=bl),s.beginPath(),t(s,l),d&&s.rotate(-d),s.translate(-c,-f)}return{type:e,tag:"path",nested:!1,attr:i,bound:r,draw:d3(a),pick:h3(a),isect:n||u3(a)}}var Kne=p3("arc",zne);function Jne(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",r=e.length,a=1/0,s,l;--r>=0;)e[r].defined!==!1&&(l=Math.abs(e[r][i]-n),l<a&&(a=l,s=e[r]));return s}function eie(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,r,a,s;--i>=0;)if(e[i].defined!==!1&&(r=e[i].x-t[0],a=e[i].y-t[1],s=r*r+a*a,s<n))return e[i];return null}function tie(e,t){for(var n=e.length,i,r,a;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],r=e[n].y-t[1],a=i*i+r*r,i=e[n].size||1,a<i*i))return e[n];return null}function m3(e,t,n){function i(c,f){var d=f.mark.items;d.length&&c("d",t(null,d))}function r(c,f){var d=f.items;return d.length===0?c:(t(Vp(c),d),lo(c,d[0]))}function a(c,f){c.beginPath(),t(c,f)}const s=Wp(a);function l(c,f,d,g,p,y){var v=f.items,b=f.bounds;return!v||!v.length||b&&!b.contains(p,y)?null:(d*=c.pixelRatio,g*=c.pixelRatio,s(c,v,d,g)?v[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:r,draw:Vne(a),pick:l,isect:c3,tip:n}}var nie=m3("area",Fne,Jne);function iie(e,t){var n=t.clip;e.save(),Ge(n)?(e.beginPath(),n(e),e.clip()):IU(e,t.group)}function IU(e,t){e.beginPath(),o3(t)?Bd(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function PU(e){const t=Qr(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function rie(e,t){e("transform",qU(t))}function HU(e,t){const n=PU(t);e("d",Bd(null,t,n,n))}function aie(e,t){e("class","background"),e("aria-hidden",!0),HU(e,t)}function sie(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?HU(e,t):e("d","")}function oie(e,t,n){const i=t.clip?l3(n,t,t):null;e("clip-path",i)}function lie(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),lo(e,t),e.translate(t.x||0,t.y||0)}function fp(e,t,n,i){const r=PU(t);e.beginPath(),Bd(e,t,(n||0)+r,(i||0)+r)}const uie=Wp(fp),cie=Wp(fp,!1),fie=Wp(fp,!0);function die(e,t,n,i){da(t,r=>{const a=r.x||0,s=r.y||0,l=r.strokeForeground,c=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&c&&(fp(e,r,a,s),id(e,r),r.fill&&xy(e,r,c)&&e.fill(),r.stroke&&!l&&rd(e,r,c)&&e.stroke()),e.save(),e.translate(a,s),r.clip&&IU(e,r),n&&n.translate(-a,-s),da(r,f=>{(f.marktype==="group"||i==null||i.includes(f.marktype))&&this.draw(e,f,n,i)}),n&&n.translate(a,s),e.restore(),l&&r.stroke&&c&&(fp(e,r,a,s),id(e,r),rd(e,r,c)&&e.stroke())})}function hie(e,t,n,i,r,a){if(t.bounds&&!t.bounds.contains(r,a)||!t.items)return null;const s=n*e.pixelRatio,l=i*e.pixelRatio;return Sy(t,c=>{let f,d,g;const p=c.bounds;if(p&&!p.contains(r,a))return;d=c.x||0,g=c.y||0;const y=d+(c.width||0),v=g+(c.height||0),b=c.clip;if(b&&(r<d||r>y||a<g||a>v))return;if(e.save(),e.translate(d,g),d=r-d,g=a-g,b&&o3(c)&&!fie(e,c,s,l))return e.restore(),null;const S=c.strokeForeground,_=t.interactive!==!1;return _&&S&&c.stroke&&cie(e,c,s,l)?(e.restore(),c):(f=Sy(c,w=>gie(w,d,g)?this.pick(w,n,i,d,g):null),!f&&_&&(c.fill||!S&&c.stroke)&&uie(e,c,s,l)&&(f=c),e.restore(),f||null)})}function gie(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var pie={type:"group",tag:"g",nested:!1,attr:rie,bound:lie,draw:die,pick:hie,isect:LU,content:oie,background:aie,foreground:sie},dp={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function y3(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function v3(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function b3(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function xb(e,t){return e==="center"?t/2:e==="right"?t:0}function Sb(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function mie(e,t,n){const i=y3(t,n),r=v3(t,i),a=b3(t,i),s=(t.x||0)-xb(t.align,r),l=(t.y||0)-Sb(t.baseline,a),c=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",c,dp["xmlns:xlink"],"xlink:href"),e("transform",zu(s,l)),e("width",r),e("height",a),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function yie(e,t){const n=t.image,i=v3(t,n),r=b3(t,n),a=(t.x||0)-xb(t.align,i),s=(t.y||0)-Sb(t.baseline,r);return e.set(a,s,a+i,s+r)}function vie(e,t,n){da(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=y3(i,this);let a=v3(i,r),s=b3(i,r);if(a===0||s===0)return;let l=(i.x||0)-xb(i.align,a),c=(i.y||0)-Sb(i.baseline,s),f,d,g,p;i.aspect!==!1&&(d=r.width/r.height,g=i.width/i.height,d===d&&g===g&&d!==g&&(g<d?(p=a/d,c+=(s-p)/2,s=p):(p=s*d,l+=(a-p)/2,a=p))),(r.complete||r.toDataURL)&&(id(e,i),e.globalAlpha=(f=i.opacity)!=null?f:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(r,l,c,a,s))})}var bie={type:"image",tag:"image",nested:!1,attr:mie,bound:yie,draw:vie,pick:bb(),isect:Fr,get:y3,xOffset:xb,yOffset:Sb},xie=m3("line",Lne,eie);function Sie(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Zne(t)),e("d",t.path)}function F1(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,r=t.y||0,a=t.scaleX||1,s=t.scaleY||1,l=(t.angle||0)*bl,c=t.pathCache;(!c||c.path!==n)&&((t.pathCache=c=nd(n)).path=n),l&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(l),cp(e,c,0,0,a,s),e.rotate(-l),e.translate(-i,-r)):cp(e,c,i,r,a,s)}function Eie(e,t){return F1(Vp(e,t.angle),t)?e.set(0,0,0,0):lo(e,t,!0)}var _ie={type:"path",tag:"path",nested:!1,attr:Sie,bound:Eie,draw:d3(F1),pick:h3(F1),isect:u3(F1)};function wie(e,t){e("d",Bd(null,t))}function Aie(e,t){var n,i;return lo(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function x6(e,t){e.beginPath(),Bd(e,t)}var Cie={type:"rect",tag:"path",nested:!1,attr:wie,bound:Aie,draw:d3(x6),pick:h3(x6),isect:LU};function $ie(e,t){e("transform",qU(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Tie(e,t){var n,i;return lo(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function GU(e,t,n){var i,r,a,s;return t.stroke&&rd(e,t,n)?(i=t.x||0,r=t.y||0,a=t.x2!=null?t.x2:i,s=t.y2!=null?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(a,s),!0):!1}function Mie(e,t,n){da(t,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&GU(e,i,r)&&(id(e,i),e.stroke())}})}function kie(e,t,n,i){return e.isPointInStroke?GU(e,t,1)&&e.isPointInStroke(n,i):!1}var Oie={type:"rule",tag:"line",nested:!1,attr:$ie,bound:Tie,draw:Mie,pick:bb(kie),isect:UU},Nie=p3("shape",Une),Die=p3("symbol",Bne,c3);const S6=J8();var or={height:as,measureWidth:x3,estimateWidth:Ey,width:Ey,canvas:YU};YU(!0);function YU(e){or.width=e&&dl?x3:Ey}function Ey(e,t){return XU(Sl(e,t),as(e))}function XU(e,t){return~~(.8*e.length*t)}function x3(e,t){return as(e)<=0||!(t=Sl(e,t))?0:VU(t,Eb(e))}function VU(e,t){const n=`(${t}) ${e}`;let i=S6.get(n);return i===void 0&&(dl.font=t,i=dl.measureText(e).width,S6.set(n,i)),i}function as(e){return e.fontSize!=null?+e.fontSize||0:11}function xl(e){return e.lineHeight!=null?e.lineHeight:as(e)+2}function Rie(e){return se(e)?e.length>1?e:e[0]:e}function Qp(e){return Rie(e.lineBreak&&e.text&&!se(e.text)?e.text.split(e.lineBreak):e.text)}function S3(e){const t=Qp(e);return(se(t)?t.length-1:0)*xl(e)}function Sl(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Fie(e,n):n}function zie(e){if(or.width===x3){const t=Eb(e);return n=>VU(n,t)}else if(or.width===Ey){const t=as(e);return n=>XU(n,t)}else return t=>or.width(e,t)}function Fie(e,t){var n=+e.limit,i=zie(e);if(i(t)<n)return t;var r=e.ellipsis||"",a=e.dir==="rtl",s=0,l=t.length,c;if(n-=i(r),a){for(;s<l;)c=s+l>>>1,i(t.slice(c))>n?s=c+1:l=c;return r+t.slice(s)}else{for(;s<l;)c=1+(s+l>>>1),i(t.slice(0,c))<n?s=c:l=c-1;return t.slice(0,s)+r}}function Zp(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Eb(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+as(e)+"px "+Zp(e,t)}function E3(e){var t=e.baseline,n=as(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*xl(e):t==="line-bottom"?.29*n-.5*xl(e):0)}const Lie={left:"start",center:"middle",right:"end"},Ig=new un;function _b(e){var t=e.x||0,n=e.y||0,i=e.radius||0,r;return i&&(r=(e.theta||0)-_u,t+=i*Math.cos(r),n+=i*Math.sin(r)),Ig.x1=t,Ig.y1=n,Ig}function Uie(e,t){var n=t.dx||0,i=(t.dy||0)+E3(t),r=_b(t),a=r.x1,s=r.y1,l=t.angle||0,c;e("text-anchor",Lie[t.align]||"start"),l?(c=zu(a,s)+" "+g3(l),(n||i)&&(c+=" "+zu(n,i))):c=zu(a+n,s+i),e("transform",c)}function _3(e,t,n){var i=or.height(t),r=t.align,a=_b(t),s=a.x1,l=a.y1,c=t.dx||0,f=(t.dy||0)+E3(t)-Math.round(.8*i),d=Qp(t),g;if(se(d)?(i+=xl(t)*(d.length-1),g=d.reduce((p,y)=>Math.max(p,or.width(t,y)),0)):g=or.width(t,d),r==="center"?c-=g/2:r==="right"&&(c-=g),e.set(c+=s,f+=l,c+g,f+i),t.angle&&!n)e.rotate(t.angle*bl,s,l);else if(n===2)return e.rotatedPoints(t.angle*bl,s,l);return e}function Bie(e,t,n){da(t,i=>{var r=i.opacity==null?1:i.opacity,a,s,l,c,f,d,g;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=Eb(i),e.textAlign=i.align||"left",a=_b(i),s=a.x1,l=a.y1,i.angle&&(e.save(),e.translate(s,l),e.rotate(i.angle*bl),s=l=0),s+=i.dx||0,l+=(i.dy||0)+E3(i),d=Qp(i),id(e,i),se(d))for(f=xl(i),c=0;c<d.length;++c)g=Sl(i,d[c]),i.fill&&xy(e,i,r)&&e.fillText(g,s,l),i.stroke&&rd(e,i,r)&&e.strokeText(g,s,l),l+=f;else g=Sl(i,d),i.fill&&xy(e,i,r)&&e.fillText(g,s,l),i.stroke&&rd(e,i,r)&&e.strokeText(g,s,l);i.angle&&e.restore()}})}function jie(e,t,n,i,r,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=_b(t),l=s.x1,c=s.y1,f=_3(Ig,t,1),d=-t.angle*bl,g=Math.cos(d),p=Math.sin(d),y=g*r-p*a+(l-g*l+p*c),v=p*r+g*a+(c-p*l-g*c);return f.contains(y,v)}function qie(e,t){const n=_3(Ig,e,2);return Mf(t,n[0],n[1],n[2],n[3])||Mf(t,n[0],n[1],n[4],n[5])||Mf(t,n[4],n[5],n[6],n[7])||Mf(t,n[2],n[3],n[6],n[7])}var Iie={type:"text",tag:"text",nested:!1,attr:Uie,bound:_3,draw:Bie,pick:bb(jie),isect:qie},Pie=m3("trail",jne,tie),hr={arc:Kne,area:nie,group:pie,image:bie,line:xie,path:_ie,rect:Cie,rule:Oie,shape:Nie,symbol:Die,text:Iie,trail:Pie};function Tw(e,t,n){var i=hr[e.mark.marktype],r=t||i.bound;return i.nested&&(e=e.mark),r(e.bounds||(e.bounds=new un),e,n)}var E6={mark:null};function WU(e,t,n){var i=hr[e.marktype],r=i.bound,a=e.items,s=a&&a.length,l,c,f,d;if(i.nested)return s?f=a[0]:(E6.mark=e,f=E6),d=Tw(f,r,n),t=t&&t.union(d)||d,t;if(t=t||e.bounds&&e.bounds.clear()||new un,s)for(l=0,c=a.length;l<c;++l)t.union(Tw(a[l],r,n));return e.bounds=t}const Hie=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function QU(e,t){return JSON.stringify(e,Hie,t)}function ZU(e){const t=typeof e=="string"?JSON.parse(e):e;return KU(t)}function KU(e){var t=e.marktype,n=e.items,i,r,a;if(n)for(r=0,a=n.length;r<a;++r)i=t?"mark":"group",n[r][i]=e,n[r].zindex&&(n[r][i].zdirty=!0),(t||i)==="group"&&KU(n[r]);return t&&WU(e),e}class JU{constructor(t){arguments.length?this.root=ZU(t):(this.root=_6({marktype:"group",name:"root",role:"frame"}),this.root.items=[new yb(this.root)])}toJSON(t){return QU(this.root,t||0)}mark(t,n,i){n=n||this.root.items[0];const r=_6(t,n);return n.items[i]=r,r.zindex&&(r.group.zdirty=!0),r}}function _6(e,t){const n={bounds:new un,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function el(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function w3(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function dn(e,t,n,i){var r=e.childNodes[t],a;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(a=r||null,r=el(e.ownerDocument,n,i),e.insertBefore(r,a)),r}function $r(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function eB(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function wb(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Gie(e,t,n,i){var r=e&&e.mark,a,s;if(r&&(a=hr[r.marktype]).tip){for(s=wb(t,n),s[0]-=i[0],s[1]-=i[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=a.tip(r.items,s)}return e}let A3=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||Pv(),this._tooltip=n||Yie}initialize(t,n,i){return this._el=t,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,i){for(let r=t?t.length:0;--r>=0;)if(t[r].type===n&&(!i||t[r].handler===i))return r;return-1}handlers(t){const n=this._handlers,i=[];if(t)i.push(...n[this.eventName(t)]);else for(const r in n)i.push(...n[r]);return i}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,i){this._loader.sanitize(i,{context:"href"}).then(r=>{const a=new MouseEvent(t.type,t),s=el(null,"a");for(const l in r)s.setAttribute(l,r[l]);s.dispatchEvent(a)}).catch(()=>{})}handleTooltip(t,n,i){if(n&&n.tooltip!=null){n=Gie(n,t,this.canvas(),this._origin);const r=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,r)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),r=this._origin,a=t.bounds,s=a.width(),l=a.height();let c=a.x1+r[0]+i.left,f=a.y1+r[1]+i.top;for(;t.mark&&(t=t.mark.group);)c+=t.x||0,f+=t.y||0;return{x:c,y:f,width:s,height:l,left:c,top:f,right:c+s,bottom:f+l}}};function Yie(e,t,n,i){e.element().setAttribute("title",i||"")}class Kp{constructor(t){this._el=null,this._bgcolor=null,this._loader=new FU(t)}initialize(t,n,i,r,a){return this._el=t,this.resize(n,i,r,a)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,i,r){return this._width=t,this._height=n,this._origin=i||[0,0],this._scale=r||1,this}dirty(){}render(t,n){const i=this;return i._call=function(){i._render(t,n)},i._call(),i._call=null,i}_render(){}renderAsync(t,n){const i=this.render(t,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(t,n){var i=this,r=i._loader[t](n);if(!i._ready){const a=i._call;i._ready=i._loader.ready().then(s=>{s&&a(),i._ready=null})}return r}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const Xie="keydown",Vie="keypress",Wie="keyup",tB="dragenter",L1="dragleave",nB="dragover",Mw="pointerdown",Qie="pointerup",_y="pointermove",U1="pointerout",iB="pointerover",kw="mousedown",Zie="mouseup",rB="mousemove",wy="mouseout",aB="mouseover",Ay="click",Kie="dblclick",Jie="wheel",sB="mousewheel",Cy="touchstart",$y="touchmove",Ty="touchend",ere=[Xie,Vie,Wie,tB,L1,nB,Mw,Qie,_y,U1,iB,kw,Zie,rB,wy,aB,Ay,Kie,Jie,sB,Cy,$y,Ty],Ow=_y,Pg=wy,Nw=Ay;class Jp extends A3{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=ere,this.pointermove=A6([_y,rB],[iB,aB],[U1,wy]),this.dragover=A6([nB],[tB],[L1]),this.pointerout=C6([U1,wy]),this.dragleave=C6([L1])}initialize(t,n,i){return this._canvas=t&&w3(t,"canvas"),[Ay,kw,Mw,_y,U1,L1].forEach(r=>w6(this,r)),super.initialize(t,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(sB,t)}pointerdown(t){this._down=this._active,this.fire(Mw,t)}mousedown(t){this._down=this._active,this.fire(kw,t)}click(t){this._down===this._active&&(this.fire(Ay,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Cy,t,!0)}touchmove(t){this.fire($y,t,!0)}touchend(t){this.fire(Ty,t,!0),this._touch=null}fire(t,n,i){const r=i?this._touch:this._active,a=this._handlers[t];if(n.vegaType=t,t===Nw&&r&&r.href?this.handleHref(n,r,r.href):(t===Ow||t===Pg)&&this.handleTooltip(n,r,t!==Pg),a)for(let s=0,l=a.length;s<l;++s)a[s].handler.call(this._obj,n,r)}on(t,n){const i=this.eventName(t),r=this._handlers;return this._handlerIndex(r[i],t,n)<0&&(w6(this,t),(r[i]||(r[i]=[])).push({type:t,handler:n})),this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&r.splice(a,1),this}pickEvent(t){const n=wb(t,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(t,n,i,r,a){const s=this.context();return hr[t.marktype].pick.call(this,s,t,n,i,r,a)}}const tre=e=>e===Cy||e===$y||e===Ty?[Cy,$y,Ty]:[e];function w6(e,t){tre(t).forEach(n=>nre(e,n))}function nre(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function $g(e,t,n){t.forEach(i=>e.fire(i,n))}function A6(e,t,n){return function(i){const r=this._active,a=this.pickEvent(i);a===r?$g(this,e,i):((!r||!r.exit)&&$g(this,n,i),this._active=a,$g(this,t,i),$g(this,e,i))}}function C6(e){return function(t){$g(this,e,t),this._active=null}}function ire(){return typeof window<"u"&&window.devicePixelRatio||1}function rre(e,t,n,i,r,a){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,l=e.getContext("2d"),c=s?ire():r;e.width=t*c,e.height=n*c;for(const f in a)l[f]=a[f];return s&&c!==1&&(e.style.width=t+"px",e.style.height=n+"px"),l.pixelRatio=c,l.setTransform(c,0,0,c,c*i[0],c*i[1]),e}class My extends Kp{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new un,this._tempb=new un}initialize(t,n,i,r,a,s){return this._options=s||{},this._canvas=this._options.externalContext?null:fl(1,1,this._options.type),t&&this._canvas&&($r(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,i,r,a)}resize(t,n,i,r){if(super.resize(t,n,i,r),this._canvas)rre(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const a=this._options.externalContext;a||ae("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(t,n){const i=this.context(),r=this._origin,a=this._width,s=this._height,l=this._dirty,c=are(r,a,s);i.save();const f=this._redraw||l.empty()?(this._redraw=!1,c.expand(1)):sre(i,c.intersect(l),r);return this.clear(-r[0],-r[1],a,s),this.draw(i,t,f,n),i.restore(),l.clear(),this}draw(t,n,i,r){if(n.marktype!=="group"&&r!=null&&!r.includes(n.marktype))return;const a=hr[n.marktype];n.clip&&iie(t,n),a.draw.call(this,t,n,i,r),n.clip&&t.restore()}clear(t,n,i,r){const a=this._options,s=this.context();a.type!=="pdf"&&!a.externalContext&&s.clearRect(t,n,i,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,i,r))}}const are=(e,t,n)=>new un().set(0,0,t,n).translate(-e[0],-e[1]);function sre(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class oB extends A3{constructor(t,n){super(t,n);const i=this;i._hrefHandler=DE(i,(r,a)=>{a&&a.href&&i.handleHref(r,a,a.href)}),i._tooltipHandler=DE(i,(r,a)=>{i.handleTooltip(r,a,r.type!==Pg)})}initialize(t,n,i){let r=this._svg;return r&&(r.removeEventListener(Nw,this._hrefHandler),r.removeEventListener(Ow,this._tooltipHandler),r.removeEventListener(Pg,this._tooltipHandler)),this._svg=r=t&&w3(t,"svg"),r&&(r.addEventListener(Nw,this._hrefHandler),r.addEventListener(Ow,this._tooltipHandler),r.addEventListener(Pg,this._tooltipHandler)),super.initialize(t,n,i)}canvas(){return this._svg}on(t,n){const i=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[i],t,n)<0){const s={type:t,handler:n,listener:DE(this,n)};(r[i]||(r[i]=[])).push(s),this._svg&&this._svg.addEventListener(i,s.listener)}return this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&(this._svg&&this._svg.removeEventListener(i,r[a].listener),r.splice(a,1)),this}}const DE=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)},lB="aria-hidden",C3="aria-label",$3="role",T3="aria-roledescription",uB="graphics-object",M3="graphics-symbol",cB=(e,t,n)=>({[$3]:e,[T3]:t,[C3]:n||void 0}),ore=ca(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),$6={axis:{desc:"axis",caption:cre},legend:{desc:"legend",caption:fre},"title-text":{desc:"title",caption:e=>`Title text '${M6(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${M6(e)}'`}},T6={ariaRole:$3,ariaRoleDescription:T3,description:C3};function fB(e,t){const n=t.aria===!1;if(e(lB,n||void 0),n||t.description==null)for(const i in T6)e(T6[i],void 0);else{const i=t.mark.marktype;e(C3,t.description),e($3,t.ariaRole||(i==="group"?uB:M3)),e(T3,t.ariaRoleDescription||`${i} mark`)}}function dB(e){return e.aria===!1?{[lB]:!0}:ore[e.role]?null:$6[e.role]?ure(e,$6[e.role]):lre(e)}function lre(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return cB(n?uB:M3,`${t} mark container`,e.description)}function ure(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return cB(t.role||M3,t.desc,n.description||i(n))}catch{return null}}function M6(e){return _e(e.text).join(" ")}function cre(e){const t=e.datum,n=e.orient,i=t.title?hB(e):null,r=e.context,a=r.scales[t.scale].value,s=r.dataflow.locale(),l=a.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${td(l)?"discrete":l} scale with ${$U(s,a,e)}`}function fre(e){const t=e.datum,n=t.title?hB(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,a=Object.keys(r),s=e.context,l=s.scales[r[a[0]]].value,c=s.dataflow.locale();return hre(i)+(n?` titled '${n}'`:"")+` for ${dre(a)} with ${$U(c,l,e)}`}function hB(e){try{return _e(rt(e.items).items[0].text).join(" ")}catch{return null}}function dre(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+rt(e)}function hre(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const gB=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),gre=e=>gB(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function k3(){let e="",t="",n="";const i=[],r=()=>t=n="",a=c=>{t&&(e+=`${t}>${n}`,r()),i.push(c)},s=(c,f)=>(f!=null&&(t+=` ${c}="${gre(f)}"`),l),l={open(c,...f){a(c),t="<"+c;for(const d of f)for(const g in d)s(g,d[g]);return l},close(){const c=i.pop();return t?e+=t+(n?`>${n}</${c}>`:"/>"):e+=`</${c}>`,r(),l},attr:s,text:c=>(n+=gB(c),l),toString:()=>e};return l}const pB=e=>mB(k3(),e)+"";function mB(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):mB(e,i)}return e.close()}const ky={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Oy={blend:"mix-blend-mode"},yB={fill:"none","stroke-miterlimit":10},rg=0,k6="http://www.w3.org/2000/xmlns/",fn=dp.xmlns;class O3 extends Kp{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,i,r,a){return this._defs={},this._clearDefs(),t&&(this._svg=dn(t,0,"svg",fn),this._svg.setAttributeNS(k6,"xmlns",fn),this._svg.setAttributeNS(k6,"xmlns:xlink",dp["xmlns:xlink"]),this._svg.setAttribute("version",dp.version),this._svg.setAttribute("class","marks"),$r(t,1),this._root=dn(this._svg,rg,"g",fn),tl(this._root,yB),$r(this._svg,rg+1)),this.background(this._bgcolor),super.initialize(t,n,i,r,a)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svg&&(tl(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let i;n&&(t.removeAttribute("style"),i=dn(t,rg,"rect",fn),tl(i,{width:this._width,height:this._height,fill:n}));const r=pB(t);return n&&(t.removeChild(i),this._svg.style.setProperty("background-color",n)),r}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),$r(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,r,a,s,l,c,f;for(l=0,c=t.length;l<c;++l)if(i=t[l],r=i.mark,r.marktype!==a&&(a=r.marktype,s=hr[a]),r.zdirty&&r.dirty!==n&&(this._dirtyAll=!1,O6(i,n),r.items.forEach(d=>{d.dirty=n})),!r.zdirty){if(i.exit){s.nested&&r.items.length?(f=r.items[0],f._svg&&this._update(s,f._svg,f)):i._svg&&(f=i._svg.parentNode,f&&f.removeChild(i._svg)),i._svg=null;continue}i=s.nested?r.items[0]:i,i._update!==n&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,O6(i,n)):this._update(s,i._svg,i),i._update=n)}return!this._dirtyAll}mark(t,n,i,r){if(!this.isDirty(n))return n._svg;const a=this._svg,s=n.marktype,l=hr[s],c=n.interactive===!1?"none":null,f=l.tag==="g",d=N6(n,t,i,"g",a);if(s!=="group"&&r!=null&&!r.includes(s))return $r(d,0),n._svg;d.setAttribute("class",eB(n));const g=dB(n);for(const b in g)li(d,b,g[b]);f||li(d,"pointer-events",c),li(d,"clip-path",n.clip?l3(this,n,n.group):null);let p=null,y=0;const v=b=>{const S=this.isDirty(b),_=N6(b,d,p,l.tag,a);S&&(this._update(l,_,b),f&&yre(this,_,b,r)),p=_,++y};return l.nested?n.items.length&&v(n.items[0]):da(n,v),$r(d,y),d}_update(t,n,i){Ys=n,Wn=n.__values__,fB(Hg,i),t.attr(Hg,i,this);const r=bre[t.type];r&&r.call(this,t,n,i),Ys&&this.style(Ys,i)}style(t,n){if(n!=null){for(const i in ky){let r=i==="font"?Zp(n):n[i];if(r===Wn[i])continue;const a=ky[i];r==null?t.removeAttribute(a):(a3(r)&&(r=MU(r,this._defs.gradient,vB())),t.setAttribute(a,r+"")),Wn[i]=r}for(const i in Oy)B1(t,Oy[i],n[i])}}defs(){const t=this._svg,n=this._defs;let i=n.el,r=0;for(const a in n.gradient)i||(n.el=i=dn(t,rg+1,"defs",fn)),r=pre(i,n.gradient[a],r);for(const a in n.clipping)i||(n.el=i=dn(t,rg+1,"defs",fn)),r=mre(i,n.clipping[a],r);i&&(r===0?(t.removeChild(i),n.el=null):$r(i,r))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function O6(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function pre(e,t,n){let i,r,a;if(t.gradient==="radial"){let s=dn(e,n++,"pattern",fn);tl(s,{id:by+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=dn(s,0,"rect",fn),tl(s,{width:1,height:1,fill:`url(${vB()}#${t.id})`}),e=dn(e,n++,"radialGradient",fn),tl(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=dn(e,n++,"linearGradient",fn),tl(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)a=dn(e,i,"stop",fn),a.setAttribute("offset",t.stops[i].offset),a.setAttribute("stop-color",t.stops[i].color);return $r(e,i),n}function mre(e,t,n){let i;return e=dn(e,n,"clipPath",fn),e.setAttribute("id",t.id),t.path?(i=dn(e,0,"path",fn),i.setAttribute("d",t.path)):(i=dn(e,0,"rect",fn),tl(i,{x:0,y:0,width:t.width,height:t.height})),$r(e,1),n+1}function yre(e,t,n,i){t=t.lastChild.previousSibling;let r,a=0;da(n,s=>{r=e.mark(t,s,r,i),++a}),$r(t,1+a)}function N6(e,t,n,i,r){let a=e._svg,s;if(!a&&(s=t.ownerDocument,a=el(s,i,fn),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},i==="g"))){const l=el(s,"path",fn);a.appendChild(l),l.__data__=e;const c=el(s,"g",fn);a.appendChild(c),c.__data__=e;const f=el(s,"path",fn);a.appendChild(f),f.__data__=e,f.__values__={fill:"default"}}return(a.ownerSVGElement!==r||vre(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}function vre(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Ys=null,Wn=null;const bre={group(e,t,n){const i=Ys=t.childNodes[2];Wn=i.__values__,e.foreground(Hg,n,this),Wn=t.__values__,Ys=t.childNodes[1],e.content(Hg,n,this);const r=Ys=t.childNodes[0];e.background(Hg,n,this);const a=n.mark.interactive===!1?"none":null;if(a!==Wn.events&&(li(i,"pointer-events",a),li(r,"pointer-events",a),Wn.events=a),n.strokeForeground&&n.stroke){const s=n.fill;li(i,"display",null),this.style(r,n),li(r,"stroke",null),s&&(n.fill=null),Wn=i.__values__,this.style(i,n),s&&(n.fill=s),Ys=null}else li(i,"display","none")},image(e,t,n){n.smooth===!1?(B1(t,"image-rendering","optimizeSpeed"),B1(t,"image-rendering","pixelated")):B1(t,"image-rendering",null)},text(e,t,n){const i=Qp(n);let r,a,s,l;se(i)?(a=i.map(c=>Sl(n,c)),r=a.join(`
`),r!==Wn.text&&($r(t,0),s=t.ownerDocument,l=xl(n),a.forEach((c,f)=>{const d=el(s,"tspan",fn);d.__data__=n,d.textContent=c,f&&(d.setAttribute("x",0),d.setAttribute("dy",l)),t.appendChild(d)}),Wn.text=r)):(a=Sl(n,i),a!==Wn.text&&(t.textContent=a,Wn.text=a)),li(t,"font-family",Zp(n)),li(t,"font-size",as(n)+"px"),li(t,"font-style",n.fontStyle),li(t,"font-variant",n.fontVariant),li(t,"font-weight",n.fontWeight)}};function Hg(e,t,n){t!==Wn[e]&&(n?xre(Ys,e,t,n):li(Ys,e,t),Wn[e]=t)}function B1(e,t,n){n!==Wn[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Wn[t]=n)}function tl(e,t){for(const n in t)li(e,n,t[n])}function li(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function xre(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function vB(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class bB extends Kp{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=k3();n.open("svg",He({},dp,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",yB,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const i=hr[n.marktype],r=i.tag,a=[fB,i.attr];t.open("g",{class:eB(n),"clip-path":n.clip?l3(this,n,n.group):null},dB(n),{"pointer-events":r!=="g"&&n.interactive===!1?"none":null});const s=l=>{const c=this.href(l);if(c&&t.open("a",c),t.open(r,this.attr(n,l,a,r!=="g"?r:null)),r==="text"){const f=Qp(l);if(se(f)){const d={x:0,dy:xl(l)};for(let g=0;g<f.length;++g)t.open("tspan",g?d:null).text(Sl(l,f[g])).close()}else t.text(Sl(l,f))}else if(r==="g"){const f=l.strokeForeground,d=l.fill,g=l.stroke;f&&g&&(l.stroke=null),t.open("path",this.attr(n,l,i.background,"bgrect")).close(),t.open("g",this.attr(n,l,i.content)),da(l,p=>this.mark(t,p)),t.close(),f&&g?(d&&(l.fill=null),l.stroke=g,t.open("path",this.attr(n,l,i.foreground,"bgrect")).close(),d&&(l.fill=d)):t.open("path",this.attr(n,l,i.foreground,"bgfore")).close()}t.close(),c&&t.close()};return i.nested?n.items&&n.items.length&&s(n.items[0]):da(n,s),t.close()}href(t){const n=t.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[n]=r})}return null}attr(t,n,i,r){const a={},s=(l,c,f,d)=>{a[d||l]=c};return Array.isArray(i)?i.forEach(l=>l(s,n,this)):i(s,n,this),r&&Sre(a,n,t,r,this._defs),a}defs(t){const n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){t.open("defs");for(const a in n){const s=n[a],l=s.stops;s.gradient==="radial"?(t.open("pattern",{id:by+a,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+a+")"}).close(),t.close(),t.open("radialGradient",{id:a,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:a,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let c=0;c<l.length;++c)t.open("stop",{offset:l[c].offset,"stop-color":l[c].color}).close();t.close()}for(const a in i){const s=i[a];t.open("clipPath",{id:a}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function Sre(e,t,n,i,r){let a;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=Zp(t),e["font-size"]=as(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in ky){let l=t[s];const c=ky[s];l==="transparent"&&(c==="fill"||c==="stroke")||l!=null&&(a3(l)&&(l=MU(l,r.gradient,"")),e[c]=l)}for(const s in Oy){const l=t[s];l!=null&&(a=a||[],a.push(`${Oy[s]}: ${l};`))}return a&&(e.style=a.join(" ")),e}const Kr={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Ere(e){Kr.svgMarkTypes=e.svgMarkTypes??["text"],Kr.svgOnTop=e.svgOnTop??!0,Kr.debug=e.debug??!1}class Dw extends Kp{constructor(t){super(t),this._svgRenderer=new O3(t),this._canvasRenderer=new My(t)}initialize(t,n,i,r,a){this._root_el=dn(t,0,"div");const s=dn(this._root_el,0,"div"),l=dn(this._root_el,1,"div");return this._root_el.style.position="relative",Kr.debug||(s.style.height="100%",l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.height="100%",l.style.width="100%"),this._svgEl=Kr.svgOnTop?l:s,this._canvasEl=Kr.svgOnTop?s:l,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,r,a),this._svgRenderer.initialize(this._svgEl,n,i,r,a),super.initialize(t,n,i,r,a)}dirty(t){return Kr.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const r=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(a=>!Kr.svgMarkTypes.includes(a));this._svgRenderer.render(t,Kr.svgMarkTypes),this._canvasRenderer.render(t,r)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svgRenderer.resize(t,n,i,r),this._canvasRenderer.resize(t,n,i,r),this}background(t){return Kr.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class xB extends Jp{constructor(t,n){super(t,n)}initialize(t,n,i){const r=dn(dn(t,0,"div"),Kr.svgOnTop?0:1,"div");return super.initialize(r,n,i)}}const SB="canvas",EB="hybrid",_B="png",wB="svg",AB="none",nl={Canvas:SB,PNG:_B,SVG:wB,Hybrid:EB,None:AB},Yu={};Yu[SB]=Yu[_B]={renderer:My,headless:My,handler:Jp};Yu[wB]={renderer:O3,headless:bB,handler:oB};Yu[EB]={renderer:Dw,headless:Dw,handler:xB};Yu[AB]={};function Ab(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Yu[e]=t,this):Yu[e]}function CB(e,t,n){const i=[],r=new un().union(t),a=e.marktype;return a?$B(e,r,n,i):a==="group"?TB(e,r,n,i):ae("Intersect scene must be mark node or group item.")}function $B(e,t,n,i){if(_re(e,t,n)){const r=e.items,a=e.marktype,s=r.length;let l=0;if(a==="group")for(;l<s;++l)TB(r[l],t,n,i);else for(const c=hr[a].isect;l<s;++l){const f=r[l];MB(f,t,c)&&i.push(f)}}return i}function _re(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function TB(e,t,n,i){n&&n(e.mark)&&MB(e,t,hr.group.isect)&&i.push(e);const r=e.items,a=r&&r.length;if(a){const s=e.x||0,l=e.y||0;t.translate(-s,-l);for(let c=0;c<a;++c)$B(r[c],t,n,i);t.translate(s,l)}return i}function MB(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const RE=new un;function kB(e){const t=e.clip;if(Ge(t))t(Vp(RE.clear()));else if(t)RE.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(RE)}const wre=1e-9;function N3(e,t,n){return e===t?!0:n==="path"?OB(e,t):e instanceof Date&&t instanceof Date?+e==+t:ut(e)&&ut(t)?Math.abs(e-t)<=wre:!e||!t||!Ee(e)&&!Ee(t)?e==t:Are(e,t)}function OB(e,t){return N3(nd(e),nd(t))}function Are(e,t){var n=Object.keys(e),i=Object.keys(t),r,a;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),a=n.length-1;a>=0;a--)if(n[a]!=i[a])return!1;for(a=n.length-1;a>=0;a--)if(r=n[a],!N3(e[r],t[r],r))return!1;return typeof e==typeof t}function Cre(){qne(),Wte()}const ad="top",ia="left",ra="right",El="bottom",$re="top-left",Tre="top-right",Mre="bottom-left",kre="bottom-right",D3="start",Rw="middle",ui="end",Ore="x",Nre="y",Cb="group",R3="axis",z3="title",Dre="frame",Rre="scope",F3="legend",NB="row-header",DB="row-footer",RB="row-title",zB="column-header",FB="column-footer",LB="column-title",zre="padding",Fre="symbol",UB="fit",BB="fit-x",jB="fit-y",Lre="pad",L3="none",K0="all",zw="each",U3="flush",il="column",rl="row";function qB(e){te.call(this,null,e)}be(qB,te,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,a=hr[r],s=a.bound;let l=i.bounds,c;if(a.nested)i.items.length&&n.dirty(i.items[0]),l=J0(i,s),i.items.forEach(f=>{f.bounds.clear().union(l)});else if(r===Cb||e.modified())switch(t.visit(t.MOD,f=>n.dirty(f)),l.clear(),i.items.forEach(f=>l.union(J0(f,s))),i.role){case R3:case F3:case z3:t.reflow()}else c=t.changed(t.REM),t.visit(t.ADD,f=>{l.union(J0(f,s))}),t.visit(t.MOD,f=>{c=c||l.alignsWith(f.bounds),n.dirty(f),l.union(J0(f,s))}),c&&(l.clear(),i.items.forEach(f=>l.union(f.bounds)));return kB(i),t.modifies("bounds")}});function J0(e,t,n){return t(e.bounds.clear(),e,n)}const D6=":vega_identifier:";function B3(e){te.call(this,0,e)}B3.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};be(B3,te,{transform(e,t){const n=Ure(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,a=>a[i]=a[i]||++r),n.set(this.value=r),t}});function Ure(e){return e._signals[D6]||(e._signals[D6]=e.add(0))}function IB(e){te.call(this,null,e)}be(IB,te,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Bre(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===Cb?yb:mb;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Bre(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function PB(e){te.call(this,null,e)}const R6={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>!r||!HB(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},HB=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),z6=(e,t)=>{for(var n=1,i=e.length,r=e[0].bounds,a;n<i;r=a,++n)if(HB(r,a=e[n].bounds,t))return!0},jre=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},qre=(e,t,n)=>{var i=e.range(),r=new un;return t===ad||t===El?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),a=>r.encloses(a.bounds)},F6=e=>(e.forEach(t=>t.opacity=1),e),L6=(e,t)=>e.reflow(t.modified()).modifies("opacity");be(PB,te,{transform(e,t){const n=R6[e.method]||R6.parity,i=e.separation||0;let r=t.materialize(t.SOURCE).source,a,s;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(F6(r),t=L6(t,e)),t;if(r=r.filter(jre),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),a=F6(r),t=L6(t,e),a.length>=3&&z6(a,i)){do a=n(a,i);while(a.length>=3&&z6(a,i));a.length<3&&!rt(r).opacity&&(a.length>1&&(rt(a).opacity=0),rt(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=qre(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(c=>{s(c)||(c.opacity=0)}));const l=a[0].mark.bounds.clear();return r.forEach(c=>{c.opacity&&l.union(c.bounds)}),t}});function GB(e){te.call(this,null,e)}be(GB,te,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const Vn=new un;function kf(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Ire(e){var t=e.items[0].orient;return t===ia||t===ra}function Pre(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Hre(e,t,n,i){var r=t.items[0],a=r.datum,s=r.translate!=null?r.translate:.5,l=r.orient,c=Pre(a),f=r.range,d=r.offset,g=r.position,p=r.minExtent,y=r.maxExtent,v=a.title&&r.items[c[2]].items[0],b=r.titlePadding,S=r.bounds,_=v&&S3(v),w=0,A=0,$,M;switch(Vn.clear().union(S),S.clear(),($=c[0])>-1&&S.union(r.items[$].bounds),($=c[1])>-1&&S.union(r.items[$].bounds),l){case ad:w=g||0,A=-d,M=Math.max(p,Math.min(y,-S.y1)),S.add(0,-M).add(f,0),v&&e1(e,v,M,b,_,0,-1,S);break;case ia:w=-d,A=g||0,M=Math.max(p,Math.min(y,-S.x1)),S.add(-M,0).add(0,f),v&&e1(e,v,M,b,_,1,-1,S);break;case ra:w=n+d,A=g||0,M=Math.max(p,Math.min(y,S.x2)),S.add(0,0).add(M,f),v&&e1(e,v,M,b,_,1,1,S);break;case El:w=g||0,A=i+d,M=Math.max(p,Math.min(y,S.y2)),S.add(0,0).add(f,M),v&&e1(e,v,M,b,0,0,1,S);break;default:w=r.x,A=r.y}return lo(S.translate(w,A),r),kf(r,"x",w+s)|kf(r,"y",A+s)&&(r.bounds=Vn,e.dirty(r),r.bounds=S,e.dirty(r)),r.mark.bounds.clear().union(S)}function e1(e,t,n,i,r,a,s,l){const c=t.bounds;if(t.auto){const f=s*(n+r+i);let d=0,g=0;e.dirty(t),a?d=(t.x||0)-(t.x=f):g=(t.y||0)-(t.y=f),t.mark.bounds.clear().union(c.translate(-d,-g)),e.dirty(t)}l.union(c)}const U6=(e,t)=>Math.floor(Math.min(e,t)),B6=(e,t)=>Math.ceil(Math.max(e,t));function Gre(e){var t=e.items,n=t.length,i=0,r,a;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=t[i],a=r.items,r.marktype===Cb)switch(r.role){case R3:case F3:case z3:break;case NB:s.rowheaders.push(...a);break;case DB:s.rowfooters.push(...a);break;case zB:s.colheaders.push(...a);break;case FB:s.colfooters.push(...a);break;case RB:s.rowtitle=a[0];break;case LB:s.coltitle=a[0];break;default:s.marks.push(...a)}return s}function Yre(e){return new un().set(0,0,e.width||0,e.height||0)}function Xre(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Ft(e,t,n){const i=Ee(e)?e[t]:e;return i??(n!==void 0?n:0)}function j6(e){return e<0?Math.ceil(-e):0}function YB(e,t,n){var i=!n.nodirty,r=n.bounds===U3?Yre:Xre,a=Vn.set(0,0,0,0),s=Ft(n.align,il),l=Ft(n.align,rl),c=Ft(n.padding,il),f=Ft(n.padding,rl),d=n.columns||t.length,g=d<=0?1:Math.ceil(t.length/d),p=t.length,y=Array(p),v=Array(d),b=0,S=Array(p),_=Array(g),w=0,A=Array(p),$=Array(p),M=Array(p),k,T,D,R,B,U,Q,Y,P,z,N;for(T=0;T<d;++T)v[T]=0;for(T=0;T<g;++T)_[T]=0;for(T=0;T<p;++T)U=t[T],B=M[T]=r(U),U.x=U.x||0,A[T]=0,U.y=U.y||0,$[T]=0,D=T%d,R=~~(T/d),b=Math.max(b,Q=Math.ceil(B.x2)),w=Math.max(w,Y=Math.ceil(B.y2)),v[D]=Math.max(v[D],Q),_[R]=Math.max(_[R],Y),y[T]=c+j6(B.x1),S[T]=f+j6(B.y1),i&&e.dirty(t[T]);for(T=0;T<p;++T)T%d===0&&(y[T]=0),T<d&&(S[T]=0);if(s===zw)for(D=1;D<d;++D){for(N=0,T=D;T<p;T+=d)N<y[T]&&(N=y[T]);for(T=D;T<p;T+=d)y[T]=N+v[D-1]}else if(s===K0){for(N=0,T=0;T<p;++T)T%d&&N<y[T]&&(N=y[T]);for(T=0;T<p;++T)T%d&&(y[T]=N+b)}else for(s=!1,D=1;D<d;++D)for(T=D;T<p;T+=d)y[T]+=v[D-1];if(l===zw)for(R=1;R<g;++R){for(N=0,T=R*d,k=T+d;T<k;++T)N<S[T]&&(N=S[T]);for(T=R*d;T<k;++T)S[T]=N+_[R-1]}else if(l===K0){for(N=0,T=d;T<p;++T)N<S[T]&&(N=S[T]);for(T=d;T<p;++T)S[T]=N+w}else for(l=!1,R=1;R<g;++R)for(T=R*d,k=T+d;T<k;++T)S[T]+=_[R-1];for(P=0,T=0;T<p;++T)P=y[T]+(T%d?P:0),A[T]+=P-t[T].x;for(D=0;D<d;++D)for(z=0,T=D;T<p;T+=d)z+=S[T],$[T]+=z-t[T].y;if(s&&Ft(n.center,il)&&g>1)for(T=0;T<p;++T)B=s===K0?b:v[T%d],P=B-M[T].x2-t[T].x-A[T],P>0&&(A[T]+=P/2);if(l&&Ft(n.center,rl)&&d!==1)for(T=0;T<p;++T)B=l===K0?w:_[~~(T/d)],z=B-M[T].y2-t[T].y-$[T],z>0&&($[T]+=z/2);for(T=0;T<p;++T)a.union(M[T].translate(A[T],$[T]));switch(P=Ft(n.anchor,Ore),z=Ft(n.anchor,Nre),Ft(n.anchor,il)){case ui:P-=a.width();break;case Rw:P-=a.width()/2}switch(Ft(n.anchor,rl)){case ui:z-=a.height();break;case Rw:z-=a.height()/2}for(P=Math.round(P),z=Math.round(z),a.clear(),T=0;T<p;++T)t[T].mark.bounds.clear();for(T=0;T<p;++T)U=t[T],U.x+=A[T]+=P,U.y+=$[T]+=z,a.union(U.mark.bounds.union(U.bounds.translate(A[T],$[T]))),i&&e.dirty(U);return a}function Vre(e,t,n){var i=Gre(t),r=i.marks,a=n.bounds===U3?Wre:Qre,s=n.offset,l=n.columns||r.length,c=l<=0?1:Math.ceil(r.length/l),f=c*l,d,g,p,y,v,b,S;const _=YB(e,r,n);_.empty()&&_.set(0,0,0,0),i.rowheaders&&(b=Ft(n.headerBand,rl,null),d=t1(e,i.rowheaders,r,l,c,-Ft(s,"rowHeader"),U6,0,a,"x1",0,l,1,b)),i.colheaders&&(b=Ft(n.headerBand,il,null),g=t1(e,i.colheaders,r,l,l,-Ft(s,"columnHeader"),U6,1,a,"y1",0,1,l,b)),i.rowfooters&&(b=Ft(n.footerBand,rl,null),p=t1(e,i.rowfooters,r,l,c,Ft(s,"rowFooter"),B6,0,a,"x2",l-1,l,1,b)),i.colfooters&&(b=Ft(n.footerBand,il,null),y=t1(e,i.colfooters,r,l,l,Ft(s,"columnFooter"),B6,1,a,"y2",f-l,1,l,b)),i.rowtitle&&(v=Ft(n.titleAnchor,rl),S=Ft(s,"rowTitle"),S=v===ui?p+S:d-S,b=Ft(n.titleBand,rl,.5),q6(e,i.rowtitle,S,0,_,b)),i.coltitle&&(v=Ft(n.titleAnchor,il),S=Ft(s,"columnTitle"),S=v===ui?y+S:g-S,b=Ft(n.titleBand,il,.5),q6(e,i.coltitle,S,1,_,b))}function Wre(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Qre(e,t){return e.bounds[t]}function t1(e,t,n,i,r,a,s,l,c,f,d,g,p,y){var v=n.length,b=0,S=0,_,w,A,$,M,k,T,D,R;if(!v)return b;for(_=d;_<v;_+=g)n[_]&&(b=s(b,c(n[_],f)));if(!t.length)return b;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),b+=a,w=0,$=t.length;w<$;++w)e.dirty(t[w]),t[w].mark.bounds.clear();for(_=d,w=0,$=t.length;w<$;++w,_+=g){for(k=t[w],M=k.mark.bounds,A=_;A>=0&&(T=n[A])==null;A-=p);l?(D=y==null?T.x:Math.round(T.bounds.x1+y*T.bounds.width()),R=b):(D=b,R=y==null?T.y:Math.round(T.bounds.y1+y*T.bounds.height())),M.union(k.bounds.translate(D-(k.x||0),R-(k.y||0))),k.x=D,k.y=R,e.dirty(k),S=s(S,M[f])}return S}function q6(e,t,n,i,r,a){if(t){e.dirty(t);var s=n,l=n;i?s=Math.round(r.x1+a*r.width()):l=Math.round(r.y1+a*r.height()),t.bounds.translate(s-(t.x||0),l-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=l,e.dirty(t)}}function Zre(e,t){const n=e[t]||{};return(i,r)=>n[i]!=null?n[i]:e[i]!=null?e[i]:r}function Kre(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function Jre(e,t,n,i,r,a,s){const l=Zre(n,t),c=Kre(e,l("offset",0)),f=l("anchor",D3),d=f===ui?1:f===Rw?.5:0,g={align:zw,bounds:l("bounds",U3),columns:l("direction")==="vertical"?1:e.length,padding:l("margin",8),center:l("center"),nodirty:!0};switch(t){case ia:g.anchor={x:Math.floor(i.x1)-c,column:ui,y:d*(s||i.height()+2*i.y1),row:f};break;case ra:g.anchor={x:Math.ceil(i.x2)+c,y:d*(s||i.height()+2*i.y1),row:f};break;case ad:g.anchor={y:Math.floor(r.y1)-c,row:ui,x:d*(a||r.width()+2*r.x1),column:f};break;case El:g.anchor={y:Math.ceil(r.y2)+c,x:d*(a||r.width()+2*r.x1),column:f};break;case $re:g.anchor={x:c,y:c};break;case Tre:g.anchor={x:a-c,y:c,column:ui};break;case Mre:g.anchor={x:c,y:s-c,row:ui};break;case kre:g.anchor={x:a-c,y:s-c,column:ui,row:ui};break}return g}function eae(e,t){var n=t.items[0],i=n.datum,r=n.orient,a=n.bounds,s=n.x,l=n.y,c,f;return n._bounds?n._bounds.clear().union(a):n._bounds=a.clone(),a.clear(),nae(e,n,n.items[0].items[0]),a=tae(n,a),c=2*n.padding,f=2*n.padding,a.empty()||(c=Math.ceil(a.width()+c),f=Math.ceil(a.height()+f)),i.type===Fre&&iae(n.items[0].items[0].items[0].items),r!==L3&&(n.x=s=0,n.y=l=0),n.width=c,n.height=f,lo(a.set(s,l,s+c,l+f),n),n.mark.bounds.clear().union(a),n}function tae(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function nae(e,t,n){var i=t.padding,r=i-n.x,a=i-n.y;if(!t.datum.title)(r||a)&&ag(e,n,r,a);else{var s=t.items[1].items[0],l=s.anchor,c=t.titlePadding||0,f=i-s.x,d=i-s.y;switch(s.orient){case ia:r+=Math.ceil(s.bounds.width())+c;break;case ra:case El:break;default:a+=s.bounds.height()+c}switch((r||a)&&ag(e,n,r,a),s.orient){case ia:d+=mf(t,n,s,l,1,1);break;case ra:f+=mf(t,n,s,ui,0,0)+c,d+=mf(t,n,s,l,1,1);break;case El:f+=mf(t,n,s,l,0,0),d+=mf(t,n,s,ui,-1,0,1)+c;break;default:f+=mf(t,n,s,l,0,0)}(f||d)&&ag(e,s,f,d),(f=Math.round(s.bounds.x1-i))<0&&(ag(e,n,-f,0),ag(e,s,-f,0))}}function mf(e,t,n,i,r,a,s){const l=e.datum.type!=="symbol",c=n.datum.vgrad,f=l&&(a||!c)&&!s?t.items[0]:t,d=f.bounds[r?"y2":"x2"]-e.padding,g=c&&a?d:0,p=c&&a?0:d,y=r<=0?0:S3(n);return Math.round(i===D3?g:i===ui?p-y:.5*(d-y))}function ag(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function iae(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function rae(e,t,n,i,r){var a=t.items[0],s=a.frame,l=a.orient,c=a.anchor,f=a.offset,d=a.padding,g=a.items[0].items[0],p=a.items[1]&&a.items[1].items[0],y=l===ia||l===ra?i:n,v=0,b=0,S=0,_=0,w=0,A;if(s!==Cb?l===ia?(v=r.y2,y=r.y1):l===ra?(v=r.y1,y=r.y2):(v=r.x1,y=r.x2):l===ia&&(v=i,y=0),A=c===D3?v:c===ui?y:(v+y)/2,p&&p.text){switch(l){case ad:case El:w=g.bounds.height()+d;break;case ia:_=g.bounds.width()+d;break;case ra:_=-g.bounds.width()-d;break}Vn.clear().union(p.bounds),Vn.translate(_-(p.x||0),w-(p.y||0)),kf(p,"x",_)|kf(p,"y",w)&&(e.dirty(p),p.bounds.clear().union(Vn),p.mark.bounds.clear().union(Vn),e.dirty(p)),Vn.clear().union(p.bounds)}else Vn.clear();switch(Vn.union(g.bounds),l){case ad:b=A,S=r.y1-Vn.height()-f;break;case ia:b=r.x1-Vn.width()-f,S=A;break;case ra:b=r.x2+Vn.width()+f,S=A;break;case El:b=A,S=r.y2+f;break;default:b=a.x,S=a.y}return kf(a,"x",b)|kf(a,"y",S)&&(Vn.translate(b,S),e.dirty(a),a.bounds.clear().union(Vn),t.bounds.clear().union(Vn),e.dirty(a)),a.bounds}function XB(e){te.call(this,null,e)}be(XB,te,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&Vre(n,i,e.layout),sae(n,i,e)}),aae(e.mark.group)?t.reflow():t}});function aae(e){return e&&e.mark.role!=="legend-entry"}function sae(e,t,n){var i=t.items,r=Math.max(0,t.width||0),a=Math.max(0,t.height||0),s=new un().set(0,0,r,a),l=s.clone(),c=s.clone(),f=[],d,g,p,y,v,b;for(v=0,b=i.length;v<b;++v)switch(g=i[v],g.role){case R3:y=Ire(g)?l:c,y.union(Hre(e,g,r,a));break;case z3:d=g;break;case F3:f.push(eae(e,g));break;case Dre:case Rre:case NB:case DB:case RB:case zB:case FB:case LB:l.union(g.bounds),c.union(g.bounds);break;default:s.union(g.bounds)}if(f.length){const S={};f.forEach(_=>{p=_.orient||ra,p!==L3&&(S[p]||(S[p]=[])).push(_)});for(const _ in S){const w=S[_];YB(e,w,Jre(w,_,n.legends,l,c,r,a))}f.forEach(_=>{const w=_.bounds;if(w.equals(_._bounds)||(_.bounds=_._bounds,e.dirty(_),_.bounds=w,e.dirty(_)),n.autosize&&(n.autosize.type===UB||n.autosize.type===BB||n.autosize.type===jB))switch(_.orient){case ia:case ra:s.add(w.x1,0).add(w.x2,0);break;case ad:case El:s.add(0,w.y1).add(0,w.y2)}else s.union(w)})}s.union(l).union(c),d&&s.union(rae(e,d,r,a,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),oae(e,t,s,n)}function oae(e,t,n,i){const r=i.autosize||{},a=r.type;if(e._autosize<1||!a)return;let s=e._width,l=e._height,c=Math.max(0,t.width||0),f=Math.max(0,Math.ceil(-n.x1)),d=Math.max(0,t.height||0),g=Math.max(0,Math.ceil(-n.y1));const p=Math.max(0,Math.ceil(n.x2-c)),y=Math.max(0,Math.ceil(n.y2-d));if(r.contains===zre){const v=e.padding();s-=v.left+v.right,l-=v.top+v.bottom}a===L3?(f=0,g=0,c=s,d=l):a===UB?(c=Math.max(0,s-f-p),d=Math.max(0,l-g-y)):a===BB?(c=Math.max(0,s-f-p),l=d+g+y):a===jB?(s=c+f+p,d=Math.max(0,l-g-y)):a===Lre&&(s=c+f+p,l=d+g+y),e._resizeView(s,l,c,d,[f,g],r.resize)}const lae=Object.freeze(Object.defineProperty({__proto__:null,bound:qB,identifier:B3,mark:IB,overlap:PB,render:GB,viewlayout:XB},Symbol.toStringTag,{value:"Module"}));function VB(e){te.call(this,null,e)}be(VB,te,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,l=i3(a,s,e.minstep),c=e.format||EU(n,a,l,e.formatSpecifier,e.formatType,!!e.values),f=e.values?SU(a,e.values,l):r3(a,l);return r&&(i.rem=r),r=f.map((d,g)=>gt({index:g/(f.length-1||1),value:d,label:c(d)})),e.extra&&r.length&&r.push(gt({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function WB(e){te.call(this,null,e)}function uae(){return gt({})}function cae(e){const t=kd().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}be(WB,te,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||uae,a=e.key||Oe,s=this.value;return se(i.encode)&&(i.encode=null),s&&(e.modified("key")||t.modified(a))&&ae("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=cae(a)),t.visit(t.ADD,l=>{const c=a(l);let f=s.get(c);f?f.exit?(s.empty--,i.add.push(f)):i.mod.push(f):(f=r(l),s.set(c,f),i.add.push(f)),f.datum=l,f.exit=!1}),t.visit(t.MOD,l=>{const c=a(l),f=s.get(c);f&&(f.datum=l,i.mod.push(f))}),t.visit(t.REM,l=>{const c=a(l),f=s.get(c);l===f.datum&&!f.exit&&(i.rem.push(f),f.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),i}});function QB(e){te.call(this,null,e)}be(QB,te,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,a=t.encode;if(se(a))if(n.changed()||a.every(g=>r[g]))a=a[0],n.encode=null;else return t.StopPropagation;var s=a==="enter",l=r.update||Ho,c=r.enter||Ho,f=r.exit||Ho,d=(a&&!s?r[a]:l)||Ho;if(t.changed(t.ADD)&&(t.visit(t.ADD,g=>{c(g,e),l(g,e)}),n.modifies(c.output),n.modifies(l.output),d!==Ho&&d!==l&&(t.visit(t.ADD,g=>{d(g,e)}),n.modifies(d.output))),t.changed(t.REM)&&f!==Ho&&(t.visit(t.REM,g=>{f(g,e)}),n.modifies(f.output)),s||d!==Ho){const g=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(g,p=>{const y=c(p,e)||i;(d(p,e)||y)&&n.mod.push(p)}),n.mod.length&&n.modifies(c.output)):t.visit(g,p=>{(d(p,e)||i)&&n.mod.push(p)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:t.StopPropagation}});function ZB(e){te.call(this,[],e)}be(ZB,te,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.type||O1,s=e.scale,l=+e.limit,c=i3(s,e.count==null?5:e.count,e.minstep),f=!!e.values||a===O1,d=e.format||CU(n,s,c,a,e.formatSpecifier,e.formatType,f),g=e.values||AU(s,c),p,y,v,b,S;return r&&(i.rem=r),a===O1?(l&&g.length>l?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=g.slice(0,l-1),S=!0):r=g,Ge(v=e.size)?(!e.values&&s(r[0])===0&&(r=r.slice(1)),b=r.reduce((_,w)=>Math.max(_,v(w,e)),0)):v=ri(b=v||8),r=r.map((_,w)=>gt({index:w,label:d(_,w,r),value:_,offset:b,size:v(_,e)})),S&&(S=g[r.length],r.push(gt({index:r.length,label:`${g.length-r.length} entries`,value:S,offset:b,size:v(S,e)})))):a===Fte?(p=s.domain(),y=vU(s,p[0],rt(p)),g.length<3&&!e.values&&p[0]!==rt(p)&&(g=[p[0],rt(p)]),r=g.map((_,w)=>gt({index:w,label:d(_,w,g),value:_,perc:y(_)}))):(v=g.length-1,y=Xte(s),r=g.map((_,w)=>gt({index:w,label:d(_,w,g),value:_,perc:w?y(_):0,perc2:w===v?1:y(g[w+1])}))),i.source=r,i.add=r,this.value=r,i}});const fae=e=>e.source.x,dae=e=>e.source.y,hae=e=>e.target.x,gae=e=>e.target.y;function j3(e){te.call(this,{},e)}j3.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};be(j3,te,{transform(e,t){var n=e.sourceX||fae,i=e.sourceY||dae,r=e.targetX||hae,a=e.targetY||gae,s=e.as||"path",l=e.orient||"vertical",c=e.shape||"line",f=I6.get(c+"-"+l)||I6.get(c);return f||ae("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,d=>{d[s]=f(n(d),i(d),r(d),a(d))}),t.reflow(e.modified()).modifies(s)}});const KB=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,pae=(e,t,n,i)=>KB(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),JB=(e,t,n,i)=>{var r=n-e,a=i-t,s=Math.hypot(r,a)/2,l=180*Math.atan2(a,r)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+l+" 0 1 "+n+","+i},mae=(e,t,n,i)=>JB(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),ej=(e,t,n,i)=>{const r=n-e,a=i-t,s=.2*(r+a),l=.2*(a-r);return"M"+e+","+t+"C"+(e+s)+","+(t+l)+" "+(n+l)+","+(i-s)+" "+n+","+i},yae=(e,t,n,i)=>ej(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),vae=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,bae=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,xae=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),l=Math.sin(n),c=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*r+","+t*a+"A"+t+","+t+" 0 0,"+(c?1:0)+" "+t*s+","+t*l+"L"+i*s+","+i*l},Sae=(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},Eae=(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},_ae=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),l=Math.sin(n),c=(t+i)/2;return"M"+t*r+","+t*a+"C"+c*r+","+c*a+" "+c*s+","+c*l+" "+i*s+","+i*l},I6=kd({line:KB,"line-radial":pae,arc:JB,"arc-radial":mae,curve:ej,"curve-radial":yae,"orthogonal-horizontal":vae,"orthogonal-vertical":bae,"orthogonal-radial":xae,"diagonal-horizontal":Sae,"diagonal-vertical":Eae,"diagonal-radial":_ae});function q3(e){te.call(this,null,e)}q3.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};be(q3,te,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],a=e.field||Cd,s=e.startAngle||0,l=e.endAngle!=null?e.endAngle:2*Math.PI,c=t.source,f=c.map(a),d=f.length,g=s,p=(l-s)/p9(f),y=rr(d),v,b,S;for(e.sort&&y.sort((_,w)=>f[_]-f[w]),v=0;v<d;++v)S=f[y[v]],b=c[y[v]],b[i]=g,b[r]=g+=S*p;return this.value=f,t.reflow(e.modified()).modifies(n)}});const wae=5;function Aae(e){const t=e.type;return!e.bins&&(t===Jf||t===qp||t===Ip)}function tj(e){return e3(e)&&e!==Pa}const Cae=ca(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function nj(e){te.call(this,null,e),this.modified(!0)}be(nj,te,{transform(e,t){var n=t.dataflow,i=this.value,r=$ae(e);(!i||r!==i.type)&&(this.value=i=ft(r)());for(r in e)if(!Cae[r]){if(r==="padding"&&tj(i.type))continue;Ge(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return Dae(i,e,Nae(i,e,Mae(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function $ae(e){var t=e.type,n="",i;return t===Pa?Pa+"-"+Jf:(Tae(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?Pa+"-":i===3?Ud+"-":""),(n+t||Jf).toLowerCase())}function Tae(e){const t=e.type;return e3(t)&&t!==Hu&&t!==Gu&&(e.scheme||e.range&&e.range.length&&e.range.every(Se))}function Mae(e,t,n){const i=kae(e,t.domainRaw,n);if(i>-1)return i;var r=t.domain,a=e.type,s=t.zero||t.zero===void 0&&Aae(e),l,c;if(!r)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(l=(r=r.slice()).length-1||1,s&&(r[0]>0&&(r[0]=0),r[l]<0&&(r[l]=0)),t.domainMin!=null&&(r[0]=t.domainMin),t.domainMax!=null&&(r[l]=t.domainMax),t.domainMid!=null)){c=t.domainMid;const f=c>r[l]?l+1:c<r[0]?0:l;f!==l&&n.warn("Scale domainMid exceeds domain min or max.",c),r.splice(f,0,c)}return tj(a)&&t.padding&&r[0]!==rt(r)&&(r=Oae(a,r,t.range,t.padding,t.exponent,t.constant)),e.domain(ij(a,r,n)),a===Q$&&e.unknown(t.domainImplicit?gw:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&i3(e,t.nice)||null),r.length}function kae(e,t,n){return t?(e.domain(ij(e.type,t,n)),t.length):-1}function Oae(e,t,n,i,r,a){var s=Math.abs(rt(n)-n[0]),l=s/(s-2*i),c=e===io?yC(t,null,l):e===Ip?ty(t,null,l,.5):e===qp?ty(t,null,l,r||1):e===fb?vC(t,null,l,a||1):mC(t,null,l);return t=t.slice(),t[0]=c[0],t[t.length-1]=c[1],t}function ij(e,t,n){if(hU(e)){var i=Math.abs(t.reduce((r,a)=>r+(a<0?-1:a>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+ye(t))}return t}function Nae(e,t,n){let i=t.bins;if(i&&!se(i)){const r=e.domain(),a=r[0],s=rt(r),l=i.step;let c=i.start==null?a:i.start,f=i.stop==null?s:i.stop;l||ae("Scale bins parameter missing step property."),c<a&&(c=l*Math.ceil(a/l)),f>s&&(f=l*Math.floor(s/l)),i=rr(c,f+l/2,l)}return i?e.bins=i:e.bins&&delete e.bins,e.type===Z$&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function Dae(e,t,n){var i=e.type,r=t.round||!1,a=t.range;if(t.rangeStep!=null)a=Rae(i,t,n);else if(t.scheme&&(a=zae(i,t,n),Ge(a))){if(e.interpolator)return e.interpolator(a);ae(`Scale type ${i} does not support interpolating color schemes.`)}if(a&&gU(i))return e.interpolator(gb(Fw(a,t.reverse),t.interpolate,t.interpolateGamma));a&&t.interpolate&&e.interpolate?e.interpolate(t3(t.interpolate,t.interpolateGamma)):Ge(e.round)?e.round(r):Ge(e.rangeRound)&&e.interpolate(r?Bp:Nl),a&&e.range(Fw(a,t.reverse))}function Rae(e,t,n){e!==oU&&e!==Sw&&ae("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,r=e===Sw?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*W$(n,r,i)]}function zae(e,t,n){var i=t.schemeExtent,r,a;return se(t.scheme)?a=gb(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),a=n3(r),a||ae(`Unrecognized scheme name: ${t.scheme}`)),n=e===hb?n+1:e===Z$?n-1:e===ed||e===db?+t.schemeCount||wae:n,gU(e)?P6(a,i,t.reverse):Ge(a)?yU(P6(a,i),n):e===Q$?a:a.slice(0,n)}function P6(e,t,n){return Ge(e)&&(t||n)?mU(e,Fw(t||[0,1],n)):e}function Fw(e,t){return t?e.slice().reverse():e}function rj(e){te.call(this,null,e)}be(rj,te,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(dc(e.sort)),this.modified(n),t}});const H6="zero",aj="center",sj="normalize",oj=["y0","y1"];function I3(e){te.call(this,null,e)}I3.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:H6,values:[H6,aj,sj]},{name:"as",type:"string",array:!0,length:2,default:oj}]};be(I3,te,{transform(e,t){var n=e.as||oj,i=n[0],r=n[1],a=dc(e.sort),s=e.field||Cd,l=e.offset===aj?Fae:e.offset===sj?Lae:Uae,c,f,d,g;for(c=Bae(t.source,e.groupby,a,s),f=0,d=c.length,g=c.max;f<d;++f)l(c[f],g,s,i,r);return t.reflow(e.modified()).modifies(n)}});function Fae(e,t,n,i,r){for(var a=(t-e.sum)/2,s=e.length,l=0,c;l<s;++l)c=e[l],c[i]=a,c[r]=a+=Math.abs(n(c))}function Lae(e,t,n,i,r){for(var a=1/e.sum,s=0,l=e.length,c=0,f=0,d;c<l;++c)d=e[c],d[i]=s,d[r]=s=a*(f+=Math.abs(n(d)))}function Uae(e,t,n,i,r){for(var a=0,s=0,l=e.length,c=0,f,d;c<l;++c)d=e[c],f=+n(d),f<0?(d[i]=s,d[r]=s+=f):(d[i]=a,d[r]=a+=f)}function Bae(e,t,n,i){var r=[],a=b=>b(d),s,l,c,f,d,g,p,y,v;if(t==null)r.push(e.slice());else for(s={},l=0,c=e.length;l<c;++l)d=e[l],g=t.map(a),p=s[g],p||(s[g]=p=[],r.push(p)),p.push(d);for(g=0,v=0,f=r.length;g<f;++g){for(p=r[g],l=0,y=0,c=p.length;l<c;++l)y+=Math.abs(i(p[l]));p.sum=y,y>v&&(v=y),n&&p.sort(n)}return r.max=v,r}const jae=Object.freeze(Object.defineProperty({__proto__:null,axisticks:VB,datajoin:WB,encode:QB,legendentries:ZB,linkpath:j3,pie:q3,scale:nj,sortitems:rj,stack:I3},Symbol.toStringTag,{value:"Module"}));var Re=1e-6,Ny=1e-12,Ve=Math.PI,Xt=Ve/2,Dy=Ve/4,vi=Ve*2,Zt=180/Ve,Xe=Ve/180,it=Math.abs,jd=Math.atan,Br=Math.atan2,Fe=Math.cos,n1=Math.ceil,lj=Math.exp,Lw=Math.hypot,Ry=Math.log,zE=Math.pow,Ne=Math.sin,kr=Math.sign||function(e){return e>0?1:e<0?-1:0},bi=Math.sqrt,P3=Math.tan;function uj(e){return e>1?0:e<-1?Ve:Math.acos(e)}function Ui(e){return e>1?Xt:e<-1?-Xt:Math.asin(e)}function Bn(){}function zy(e,t){e&&Y6.hasOwnProperty(e.type)&&Y6[e.type](e,t)}var G6={Feature:function(e,t){zy(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)zy(n[i].geometry,t)}},Y6={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){Uw(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)Uw(n[i],t,0)},Polygon:function(e,t){X6(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)X6(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)zy(n[i],t)}};function Uw(e,t,n){var i=-1,r=e.length-n,a;for(t.lineStart();++i<r;)a=e[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function X6(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)Uw(e[n],t,1);t.polygonEnd()}function js(e,t){e&&G6.hasOwnProperty(e.type)?G6[e.type](e,t):zy(e,t)}var Fy=new mi,Ly=new mi,cj,fj,Bw,jw,qw,Za={point:Bn,lineStart:Bn,lineEnd:Bn,polygonStart:function(){Fy=new mi,Za.lineStart=qae,Za.lineEnd=Iae},polygonEnd:function(){var e=+Fy;Ly.add(e<0?vi+e:e),this.lineStart=this.lineEnd=this.point=Bn},sphere:function(){Ly.add(vi)}};function qae(){Za.point=Pae}function Iae(){dj(cj,fj)}function Pae(e,t){Za.point=dj,cj=e,fj=t,e*=Xe,t*=Xe,Bw=e,jw=Fe(t=t/2+Dy),qw=Ne(t)}function dj(e,t){e*=Xe,t*=Xe,t=t/2+Dy;var n=e-Bw,i=n>=0?1:-1,r=i*n,a=Fe(t),s=Ne(t),l=qw*s,c=jw*a+l*Fe(r),f=l*i*Ne(r);Fy.add(Br(f,c)),Bw=e,jw=a,qw=s}function Hae(e){return Ly=new mi,js(e,Za),Ly*2}function Uy(e){return[Br(e[1],e[0]),Ui(e[2])]}function Xu(e){var t=e[0],n=e[1],i=Fe(n);return[i*Fe(t),i*Ne(t),Ne(n)]}function i1(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function sd(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function FE(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function r1(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function By(e){var t=bi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Bt,Ni,Gt,nr,xu,hj,gj,Uf,Gg,Wo,ro,Us={point:Iw,lineStart:V6,lineEnd:W6,polygonStart:function(){Us.point=mj,Us.lineStart=Gae,Us.lineEnd=Yae,Gg=new mi,Za.polygonStart()},polygonEnd:function(){Za.polygonEnd(),Us.point=Iw,Us.lineStart=V6,Us.lineEnd=W6,Fy<0?(Bt=-(Gt=180),Ni=-(nr=90)):Gg>Re?nr=90:Gg<-Re&&(Ni=-90),ro[0]=Bt,ro[1]=Gt},sphere:function(){Bt=-(Gt=180),Ni=-(nr=90)}};function Iw(e,t){Wo.push(ro=[Bt=e,Gt=e]),t<Ni&&(Ni=t),t>nr&&(nr=t)}function pj(e,t){var n=Xu([e*Xe,t*Xe]);if(Uf){var i=sd(Uf,n),r=[i[1],-i[0],0],a=sd(r,i);By(a),a=Uy(a);var s=e-xu,l=s>0?1:-1,c=a[0]*Zt*l,f,d=it(s)>180;d^(l*xu<c&&c<l*e)?(f=a[1]*Zt,f>nr&&(nr=f)):(c=(c+360)%360-180,d^(l*xu<c&&c<l*e)?(f=-a[1]*Zt,f<Ni&&(Ni=f)):(t<Ni&&(Ni=t),t>nr&&(nr=t))),d?e<xu?tr(Bt,e)>tr(Bt,Gt)&&(Gt=e):tr(e,Gt)>tr(Bt,Gt)&&(Bt=e):Gt>=Bt?(e<Bt&&(Bt=e),e>Gt&&(Gt=e)):e>xu?tr(Bt,e)>tr(Bt,Gt)&&(Gt=e):tr(e,Gt)>tr(Bt,Gt)&&(Bt=e)}else Wo.push(ro=[Bt=e,Gt=e]);t<Ni&&(Ni=t),t>nr&&(nr=t),Uf=n,xu=e}function V6(){Us.point=pj}function W6(){ro[0]=Bt,ro[1]=Gt,Us.point=Iw,Uf=null}function mj(e,t){if(Uf){var n=e-xu;Gg.add(it(n)>180?n+(n>0?360:-360):n)}else hj=e,gj=t;Za.point(e,t),pj(e,t)}function Gae(){Za.lineStart()}function Yae(){mj(hj,gj),Za.lineEnd(),it(Gg)>Re&&(Bt=-(Gt=180)),ro[0]=Bt,ro[1]=Gt,Uf=null}function tr(e,t){return(t-=e)<0?t+360:t}function Xae(e,t){return e[0]-t[0]}function Q6(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Vae(e){var t,n,i,r,a,s,l;if(nr=Gt=-(Bt=Ni=1/0),Wo=[],js(e,Us),n=Wo.length){for(Wo.sort(Xae),t=1,i=Wo[0],a=[i];t<n;++t)r=Wo[t],Q6(i,r[0])||Q6(i,r[1])?(tr(i[0],r[1])>tr(i[0],i[1])&&(i[1]=r[1]),tr(r[0],i[1])>tr(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(s=-1/0,n=a.length-1,t=0,i=a[n];t<=n;i=r,++t)r=a[t],(l=tr(i[1],r[0]))>s&&(s=l,Bt=r[0],Gt=i[1])}return Wo=ro=null,Bt===1/0||Ni===1/0?[[NaN,NaN],[NaN,NaN]]:[[Bt,Ni],[Gt,nr]]}var Tg,jy,qy,Iy,Py,Hy,Gy,Yy,Pw,Hw,Gw,yj,vj,ci,fi,di,aa={sphere:Bn,point:H3,lineStart:Z6,lineEnd:K6,polygonStart:function(){aa.lineStart=Zae,aa.lineEnd=Kae},polygonEnd:function(){aa.lineStart=Z6,aa.lineEnd=K6}};function H3(e,t){e*=Xe,t*=Xe;var n=Fe(t);em(n*Fe(e),n*Ne(e),Ne(t))}function em(e,t,n){++Tg,qy+=(e-qy)/Tg,Iy+=(t-Iy)/Tg,Py+=(n-Py)/Tg}function Z6(){aa.point=Wae}function Wae(e,t){e*=Xe,t*=Xe;var n=Fe(t);ci=n*Fe(e),fi=n*Ne(e),di=Ne(t),aa.point=Qae,em(ci,fi,di)}function Qae(e,t){e*=Xe,t*=Xe;var n=Fe(t),i=n*Fe(e),r=n*Ne(e),a=Ne(t),s=Br(bi((s=fi*a-di*r)*s+(s=di*i-ci*a)*s+(s=ci*r-fi*i)*s),ci*i+fi*r+di*a);jy+=s,Hy+=s*(ci+(ci=i)),Gy+=s*(fi+(fi=r)),Yy+=s*(di+(di=a)),em(ci,fi,di)}function K6(){aa.point=H3}function Zae(){aa.point=Jae}function Kae(){bj(yj,vj),aa.point=H3}function Jae(e,t){yj=e,vj=t,e*=Xe,t*=Xe,aa.point=bj;var n=Fe(t);ci=n*Fe(e),fi=n*Ne(e),di=Ne(t),em(ci,fi,di)}function bj(e,t){e*=Xe,t*=Xe;var n=Fe(t),i=n*Fe(e),r=n*Ne(e),a=Ne(t),s=fi*a-di*r,l=di*i-ci*a,c=ci*r-fi*i,f=Lw(s,l,c),d=Ui(f),g=f&&-d/f;Pw.add(g*s),Hw.add(g*l),Gw.add(g*c),jy+=d,Hy+=d*(ci+(ci=i)),Gy+=d*(fi+(fi=r)),Yy+=d*(di+(di=a)),em(ci,fi,di)}function ese(e){Tg=jy=qy=Iy=Py=Hy=Gy=Yy=0,Pw=new mi,Hw=new mi,Gw=new mi,js(e,aa);var t=+Pw,n=+Hw,i=+Gw,r=Lw(t,n,i);return r<Ny&&(t=Hy,n=Gy,i=Yy,jy<Re&&(t=qy,n=Iy,i=Py),r=Lw(t,n,i),r<Ny)?[NaN,NaN]:[Br(n,t)*Zt,Ui(i/r)*Zt]}function Yw(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function Xw(e,t){return it(e)>Ve&&(e-=Math.round(e/vi)*vi),[e,t]}Xw.invert=Xw;function xj(e,t,n){return(e%=vi)?t||n?Yw(e4(e),t4(t,n)):e4(e):t||n?t4(t,n):Xw}function J6(e){return function(t,n){return t+=e,it(t)>Ve&&(t-=Math.round(t/vi)*vi),[t,n]}}function e4(e){var t=J6(e);return t.invert=J6(-e),t}function t4(e,t){var n=Fe(e),i=Ne(e),r=Fe(t),a=Ne(t);function s(l,c){var f=Fe(c),d=Fe(l)*f,g=Ne(l)*f,p=Ne(c),y=p*n+d*i;return[Br(g*r-y*a,d*n-p*i),Ui(y*r+g*a)]}return s.invert=function(l,c){var f=Fe(c),d=Fe(l)*f,g=Ne(l)*f,p=Ne(c),y=p*r-g*a;return[Br(g*r+p*a,d*n+y*i),Ui(y*n-d*i)]},s}function tse(e){e=xj(e[0]*Xe,e[1]*Xe,e.length>2?e[2]*Xe:0);function t(n){return n=e(n[0]*Xe,n[1]*Xe),n[0]*=Zt,n[1]*=Zt,n}return t.invert=function(n){return n=e.invert(n[0]*Xe,n[1]*Xe),n[0]*=Zt,n[1]*=Zt,n},t}function nse(e,t,n,i,r,a){if(n){var s=Fe(t),l=Ne(t),c=i*n;r==null?(r=t+i*vi,a=t-c/2):(r=n4(s,r),a=n4(s,a),(i>0?r<a:r>a)&&(r+=i*vi));for(var f,d=r;i>0?d>a:d<a;d-=c)f=Uy([s,-l*Fe(d),-l*Ne(d)]),e.point(f[0],f[1])}}function n4(e,t){t=Xu(t),t[0]-=e,By(t);var n=uj(-t[1]);return((-t[2]<0?-n:n)+vi-Re)%vi}function Sj(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Bn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function j1(e,t){return it(e[0]-t[0])<Re&&it(e[1]-t[1])<Re}function a1(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Ej(e,t,n,i,r){var a=[],s=[],l,c;if(e.forEach(function(v){if(!((b=v.length-1)<=0)){var b,S=v[0],_=v[b],w;if(j1(S,_)){if(!S[2]&&!_[2]){for(r.lineStart(),l=0;l<b;++l)r.point((S=v[l])[0],S[1]);r.lineEnd();return}_[0]+=2*Re}a.push(w=new a1(S,v,null,!0)),s.push(w.o=new a1(S,null,w,!1)),a.push(w=new a1(_,v,null,!1)),s.push(w.o=new a1(_,null,w,!0))}}),!!a.length){for(s.sort(t),i4(a),i4(s),l=0,c=s.length;l<c;++l)s[l].e=n=!n;for(var f=a[0],d,g;;){for(var p=f,y=!0;p.v;)if((p=p.n)===f)return;d=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(y)for(l=0,c=d.length;l<c;++l)r.point((g=d[l])[0],g[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(y)for(d=p.p.z,l=d.length-1;l>=0;--l)r.point((g=d[l])[0],g[1]);else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,d=p.z,y=!y}while(!p.v);r.lineEnd()}}}function i4(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function LE(e){return it(e[0])<=Ve?e[0]:kr(e[0])*((it(e[0])+Ve)%vi-Ve)}function ise(e,t){var n=LE(t),i=t[1],r=Ne(i),a=[Ne(n),-Fe(n),0],s=0,l=0,c=new mi;r===1?i=Xt+Re:r===-1&&(i=-Xt-Re);for(var f=0,d=e.length;f<d;++f)if(p=(g=e[f]).length)for(var g,p,y=g[p-1],v=LE(y),b=y[1]/2+Dy,S=Ne(b),_=Fe(b),w=0;w<p;++w,v=$,S=k,_=T,y=A){var A=g[w],$=LE(A),M=A[1]/2+Dy,k=Ne(M),T=Fe(M),D=$-v,R=D>=0?1:-1,B=R*D,U=B>Ve,Q=S*k;if(c.add(Br(Q*R*Ne(B),_*T+Q*Fe(B))),s+=U?D+R*vi:D,U^v>=n^$>=n){var Y=sd(Xu(y),Xu(A));By(Y);var P=sd(a,Y);By(P);var z=(U^D>=0?-1:1)*Ui(P[2]);(i>z||i===z&&(Y[0]||Y[1]))&&(l+=U^D>=0?1:-1)}}return(s<-Re||s<Re&&c<-Ny)^l&1}function _j(e,t,n,i){return function(r){var a=t(r),s=Sj(),l=t(s),c=!1,f,d,g,p={point:y,lineStart:b,lineEnd:S,polygonStart:function(){p.point=_,p.lineStart=w,p.lineEnd=A,d=[],f=[]},polygonEnd:function(){p.point=y,p.lineStart=b,p.lineEnd=S,d=g9(d);var $=ise(f,i);d.length?(c||(r.polygonStart(),c=!0),Ej(d,ase,$,n,r)):$&&(c||(r.polygonStart(),c=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),c&&(r.polygonEnd(),c=!1),d=f=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function y($,M){e($,M)&&r.point($,M)}function v($,M){a.point($,M)}function b(){p.point=v,a.lineStart()}function S(){p.point=y,a.lineEnd()}function _($,M){g.push([$,M]),l.point($,M)}function w(){l.lineStart(),g=[]}function A(){_(g[0][0],g[0][1]),l.lineEnd();var $=l.clean(),M=s.result(),k,T=M.length,D,R,B;if(g.pop(),f.push(g),g=null,!!T){if($&1){if(R=M[0],(D=R.length-1)>0){for(c||(r.polygonStart(),c=!0),r.lineStart(),k=0;k<D;++k)r.point((B=R[k])[0],B[1]);r.lineEnd()}return}T>1&&$&2&&M.push(M.pop().concat(M.shift())),d.push(M.filter(rse))}}return p}}function rse(e){return e.length>1}function ase(e,t){return((e=e.x)[0]<0?e[1]-Xt-Re:Xt-e[1])-((t=t.x)[0]<0?t[1]-Xt-Re:Xt-t[1])}const r4=_j(function(){return!0},sse,lse,[-Ve,-Xt]);function sse(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(a,s){var l=a>0?Ve:-Ve,c=it(a-t);it(c-Ve)<Re?(e.point(t,n=(n+s)/2>0?Xt:-Xt),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(l,n),e.point(a,n),r=0):i!==l&&c>=Ve&&(it(t-i)<Re&&(t-=i*Re),it(a-l)<Re&&(a-=l*Re),n=ose(t,n,a,s),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(l,n),r=0),e.point(t=a,n=s),i=l},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function ose(e,t,n,i){var r,a,s=Ne(e-n);return it(s)>Re?jd((Ne(t)*(a=Fe(i))*Ne(n)-Ne(i)*(r=Fe(t))*Ne(e))/(r*a*s)):(t+i)/2}function lse(e,t,n,i){var r;if(e==null)r=n*Xt,i.point(-Ve,r),i.point(0,r),i.point(Ve,r),i.point(Ve,0),i.point(Ve,-r),i.point(0,-r),i.point(-Ve,-r),i.point(-Ve,0),i.point(-Ve,r);else if(it(e[0]-t[0])>Re){var a=e[0]<t[0]?Ve:-Ve;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function use(e){var t=Fe(e),n=2*Xe,i=t>0,r=it(t)>Re;function a(d,g,p,y){nse(y,e,n,p,d,g)}function s(d,g){return Fe(d)*Fe(g)>t}function l(d){var g,p,y,v,b;return{lineStart:function(){v=y=!1,b=1},point:function(S,_){var w=[S,_],A,$=s(S,_),M=i?$?0:f(S,_):$?f(S+(S<0?Ve:-Ve),_):0;if(!g&&(v=y=$)&&d.lineStart(),$!==y&&(A=c(g,w),(!A||j1(g,A)||j1(w,A))&&(w[2]=1)),$!==y)b=0,$?(d.lineStart(),A=c(w,g),d.point(A[0],A[1])):(A=c(g,w),d.point(A[0],A[1],2),d.lineEnd()),g=A;else if(r&&g&&i^$){var k;!(M&p)&&(k=c(w,g,!0))&&(b=0,i?(d.lineStart(),d.point(k[0][0],k[0][1]),d.point(k[1][0],k[1][1]),d.lineEnd()):(d.point(k[1][0],k[1][1]),d.lineEnd(),d.lineStart(),d.point(k[0][0],k[0][1],3)))}$&&(!g||!j1(g,w))&&d.point(w[0],w[1]),g=w,y=$,p=M},lineEnd:function(){y&&d.lineEnd(),g=null},clean:function(){return b|(v&&y)<<1}}}function c(d,g,p){var y=Xu(d),v=Xu(g),b=[1,0,0],S=sd(y,v),_=i1(S,S),w=S[0],A=_-w*w;if(!A)return!p&&d;var $=t*_/A,M=-t*w/A,k=sd(b,S),T=r1(b,$),D=r1(S,M);FE(T,D);var R=k,B=i1(T,R),U=i1(R,R),Q=B*B-U*(i1(T,T)-1);if(!(Q<0)){var Y=bi(Q),P=r1(R,(-B-Y)/U);if(FE(P,T),P=Uy(P),!p)return P;var z=d[0],N=g[0],j=d[1],X=g[1],K;N<z&&(K=z,z=N,N=K);var fe=N-z,F=it(fe-Ve)<Re,G=F||fe<Re;if(!F&&X<j&&(K=j,j=X,X=K),G?F?j+X>0^P[1]<(it(P[0]-z)<Re?j:X):j<=P[1]&&P[1]<=X:fe>Ve^(z<=P[0]&&P[0]<=N)){var le=r1(R,(-B+Y)/U);return FE(le,T),[P,Uy(le)]}}}function f(d,g){var p=i?e:Ve-e,y=0;return d<-p?y|=1:d>p&&(y|=2),g<-p?y|=4:g>p&&(y|=8),y}return _j(s,l,a,i?[0,-e]:[-Ve,e-Ve])}function cse(e,t,n,i,r,a){var s=e[0],l=e[1],c=t[0],f=t[1],d=0,g=1,p=c-s,y=f-l,v;if(v=n-s,!(!p&&v>0)){if(v/=p,p<0){if(v<d)return;v<g&&(g=v)}else if(p>0){if(v>g)return;v>d&&(d=v)}if(v=r-s,!(!p&&v<0)){if(v/=p,p<0){if(v>g)return;v>d&&(d=v)}else if(p>0){if(v<d)return;v<g&&(g=v)}if(v=i-l,!(!y&&v>0)){if(v/=y,y<0){if(v<d)return;v<g&&(g=v)}else if(y>0){if(v>g)return;v>d&&(d=v)}if(v=a-l,!(!y&&v<0)){if(v/=y,y<0){if(v>g)return;v>d&&(d=v)}else if(y>0){if(v<d)return;v<g&&(g=v)}return d>0&&(e[0]=s+d*p,e[1]=l+d*y),g<1&&(t[0]=s+g*p,t[1]=l+g*y),!0}}}}}var Mg=1e9,s1=-Mg;function wj(e,t,n,i){function r(f,d){return e<=f&&f<=n&&t<=d&&d<=i}function a(f,d,g,p){var y=0,v=0;if(f==null||(y=s(f,g))!==(v=s(d,g))||c(f,d)<0^g>0)do p.point(y===0||y===3?e:n,y>1?i:t);while((y=(y+g+4)%4)!==v);else p.point(d[0],d[1])}function s(f,d){return it(f[0]-e)<Re?d>0?0:3:it(f[0]-n)<Re?d>0?2:1:it(f[1]-t)<Re?d>0?1:0:d>0?3:2}function l(f,d){return c(f.x,d.x)}function c(f,d){var g=s(f,1),p=s(d,1);return g!==p?g-p:g===0?d[1]-f[1]:g===1?f[0]-d[0]:g===2?f[1]-d[1]:d[0]-f[0]}return function(f){var d=f,g=Sj(),p,y,v,b,S,_,w,A,$,M,k,T={point:D,lineStart:Q,lineEnd:Y,polygonStart:B,polygonEnd:U};function D(z,N){r(z,N)&&d.point(z,N)}function R(){for(var z=0,N=0,j=y.length;N<j;++N)for(var X=y[N],K=1,fe=X.length,F=X[0],G,le,I=F[0],J=F[1];K<fe;++K)G=I,le=J,F=X[K],I=F[0],J=F[1],le<=i?J>i&&(I-G)*(i-le)>(J-le)*(e-G)&&++z:J<=i&&(I-G)*(i-le)<(J-le)*(e-G)&&--z;return z}function B(){d=g,p=[],y=[],k=!0}function U(){var z=R(),N=k&&z,j=(p=g9(p)).length;(N||j)&&(f.polygonStart(),N&&(f.lineStart(),a(null,null,1,f),f.lineEnd()),j&&Ej(p,l,z,a,f),f.polygonEnd()),d=f,p=y=v=null}function Q(){T.point=P,y&&y.push(v=[]),M=!0,$=!1,w=A=NaN}function Y(){p&&(P(b,S),_&&$&&g.rejoin(),p.push(g.result())),T.point=D,$&&d.lineEnd()}function P(z,N){var j=r(z,N);if(y&&v.push([z,N]),M)b=z,S=N,_=j,M=!1,j&&(d.lineStart(),d.point(z,N));else if(j&&$)d.point(z,N);else{var X=[w=Math.max(s1,Math.min(Mg,w)),A=Math.max(s1,Math.min(Mg,A))],K=[z=Math.max(s1,Math.min(Mg,z)),N=Math.max(s1,Math.min(Mg,N))];cse(X,K,e,t,n,i)?($||(d.lineStart(),d.point(X[0],X[1])),d.point(K[0],K[1]),j||d.lineEnd(),k=!1):j&&(d.lineStart(),d.point(z,N),k=!1)}w=z,A=N,$=j}return T}}function a4(e,t,n){var i=rr(e,t-Re,n).concat(t);return function(r){return i.map(function(a){return[r,a]})}}function s4(e,t,n){var i=rr(e,t-Re,n).concat(t);return function(r){return i.map(function(a){return[a,r]})}}function fse(){var e,t,n,i,r,a,s,l,c=10,f=c,d=90,g=360,p,y,v,b,S=2.5;function _(){return{type:"MultiLineString",coordinates:w()}}function w(){return rr(n1(i/d)*d,n,d).map(v).concat(rr(n1(l/g)*g,s,g).map(b)).concat(rr(n1(t/c)*c,e,c).filter(function(A){return it(A%d)>Re}).map(p)).concat(rr(n1(a/f)*f,r,f).filter(function(A){return it(A%g)>Re}).map(y))}return _.lines=function(){return w().map(function(A){return{type:"LineString",coordinates:A}})},_.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(b(s).slice(1),v(n).reverse().slice(1),b(l).reverse().slice(1))]}},_.extent=function(A){return arguments.length?_.extentMajor(A).extentMinor(A):_.extentMinor()},_.extentMajor=function(A){return arguments.length?(i=+A[0][0],n=+A[1][0],l=+A[0][1],s=+A[1][1],i>n&&(A=i,i=n,n=A),l>s&&(A=l,l=s,s=A),_.precision(S)):[[i,l],[n,s]]},_.extentMinor=function(A){return arguments.length?(t=+A[0][0],e=+A[1][0],a=+A[0][1],r=+A[1][1],t>e&&(A=t,t=e,e=A),a>r&&(A=a,a=r,r=A),_.precision(S)):[[t,a],[e,r]]},_.step=function(A){return arguments.length?_.stepMajor(A).stepMinor(A):_.stepMinor()},_.stepMajor=function(A){return arguments.length?(d=+A[0],g=+A[1],_):[d,g]},_.stepMinor=function(A){return arguments.length?(c=+A[0],f=+A[1],_):[c,f]},_.precision=function(A){return arguments.length?(S=+A,p=a4(a,r,90),y=s4(t,e,S),v=a4(l,s,90),b=s4(i,n,S),_):S},_.extentMajor([[-180,-90+Re],[180,90-Re]]).extentMinor([[-180,-80-Re],[180,80+Re]])}const hp=e=>e;var UE=new mi,Vw=new mi,Aj,Cj,Ww,Qw,qs={point:Bn,lineStart:Bn,lineEnd:Bn,polygonStart:function(){qs.lineStart=dse,qs.lineEnd=gse},polygonEnd:function(){qs.lineStart=qs.lineEnd=qs.point=Bn,UE.add(it(Vw)),Vw=new mi},result:function(){var e=UE/2;return UE=new mi,e}};function dse(){qs.point=hse}function hse(e,t){qs.point=$j,Aj=Ww=e,Cj=Qw=t}function $j(e,t){Vw.add(Qw*e-Ww*t),Ww=e,Qw=t}function gse(){$j(Aj,Cj)}var od=1/0,Xy=od,gp=-od,Vy=gp,Wy={point:pse,lineStart:Bn,lineEnd:Bn,polygonStart:Bn,polygonEnd:Bn,result:function(){var e=[[od,Xy],[gp,Vy]];return gp=Vy=-(Xy=od=1/0),e}};function pse(e,t){e<od&&(od=e),e>gp&&(gp=e),t<Xy&&(Xy=t),t>Vy&&(Vy=t)}var Zw=0,Kw=0,kg=0,Qy=0,Zy=0,Of=0,Jw=0,eA=0,Og=0,Tj,Mj,La,Ua,Tr={point:Vu,lineStart:o4,lineEnd:l4,polygonStart:function(){Tr.lineStart=vse,Tr.lineEnd=bse},polygonEnd:function(){Tr.point=Vu,Tr.lineStart=o4,Tr.lineEnd=l4},result:function(){var e=Og?[Jw/Og,eA/Og]:Of?[Qy/Of,Zy/Of]:kg?[Zw/kg,Kw/kg]:[NaN,NaN];return Zw=Kw=kg=Qy=Zy=Of=Jw=eA=Og=0,e}};function Vu(e,t){Zw+=e,Kw+=t,++kg}function o4(){Tr.point=mse}function mse(e,t){Tr.point=yse,Vu(La=e,Ua=t)}function yse(e,t){var n=e-La,i=t-Ua,r=bi(n*n+i*i);Qy+=r*(La+e)/2,Zy+=r*(Ua+t)/2,Of+=r,Vu(La=e,Ua=t)}function l4(){Tr.point=Vu}function vse(){Tr.point=xse}function bse(){kj(Tj,Mj)}function xse(e,t){Tr.point=kj,Vu(Tj=La=e,Mj=Ua=t)}function kj(e,t){var n=e-La,i=t-Ua,r=bi(n*n+i*i);Qy+=r*(La+e)/2,Zy+=r*(Ua+t)/2,Of+=r,r=Ua*e-La*t,Jw+=r*(La+e),eA+=r*(Ua+t),Og+=r*3,Vu(La=e,Ua=t)}function Oj(e){this._context=e}Oj.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,vi);break}}},result:Bn};var tA=new mi,BE,Nj,Dj,Ng,Dg,pp={point:Bn,lineStart:function(){pp.point=Sse},lineEnd:function(){BE&&Rj(Nj,Dj),pp.point=Bn},polygonStart:function(){BE=!0},polygonEnd:function(){BE=null},result:function(){var e=+tA;return tA=new mi,e}};function Sse(e,t){pp.point=Rj,Nj=Ng=e,Dj=Dg=t}function Rj(e,t){Ng-=e,Dg-=t,tA.add(bi(Ng*Ng+Dg*Dg)),Ng=e,Dg=t}let u4,Ky,c4,f4;class d4{constructor(t){this._append=t==null?zj:Ese(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==c4||this._append!==Ky){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,c4=i,Ky=this._append,f4=this._,this._=r}this._+=f4;break}}}result(){const t=this._;return this._="",t.length?t:null}}function zj(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Ese(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return zj;if(t!==u4){const n=10**t;u4=t,Ky=function(r){let a=1;this._+=r[0];for(const s=r.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}return Ky}function Fj(e,t){let n=3,i=4.5,r,a;function s(l){return l&&(typeof i=="function"&&a.pointRadius(+i.apply(this,arguments)),js(l,r(a))),a.result()}return s.area=function(l){return js(l,r(qs)),qs.result()},s.measure=function(l){return js(l,r(pp)),pp.result()},s.bounds=function(l){return js(l,r(Wy)),Wy.result()},s.centroid=function(l){return js(l,r(Tr)),Tr.result()},s.projection=function(l){return arguments.length?(r=l==null?(e=null,hp):(e=l).stream,s):e},s.context=function(l){return arguments.length?(a=l==null?(t=null,new d4(n)):new Oj(t=l),typeof i!="function"&&a.pointRadius(i),s):t},s.pointRadius=function(l){return arguments.length?(i=typeof l=="function"?l:(a.pointRadius(+l),+l),s):i},s.digits=function(l){if(!arguments.length)return n;if(l==null)n=null;else{const c=Math.floor(l);if(!(c>=0))throw new RangeError(`invalid digits: ${l}`);n=c}return t===null&&(a=new d4(n)),s},s.projection(e).digits(n).context(t)}function $b(e){return function(t){var n=new nA;for(var i in e)n[i]=e[i];return n.stream=t,n}}function nA(){}nA.prototype={constructor:nA,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function G3(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),js(n,e.stream(Wy)),t(Wy.result()),i!=null&&e.clipExtent(i),e}function Tb(e,t,n){return G3(e,function(i){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],s=Math.min(r/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),l=+t[0][0]+(r-s*(i[1][0]+i[0][0]))/2,c=+t[0][1]+(a-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([l,c])},n)}function Y3(e,t,n){return Tb(e,[[0,0],t],n)}function X3(e,t,n){return G3(e,function(i){var r=+t,a=r/(i[1][0]-i[0][0]),s=(r-a*(i[1][0]+i[0][0]))/2,l=-a*i[0][1];e.scale(150*a).translate([s,l])},n)}function V3(e,t,n){return G3(e,function(i){var r=+t,a=r/(i[1][1]-i[0][1]),s=-a*i[0][0],l=(r-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([s,l])},n)}var h4=16,_se=Fe(30*Xe);function g4(e,t){return+t?Ase(e,t):wse(e)}function wse(e){return $b({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Ase(e,t){function n(i,r,a,s,l,c,f,d,g,p,y,v,b,S){var _=f-i,w=d-r,A=_*_+w*w;if(A>4*t&&b--){var $=s+p,M=l+y,k=c+v,T=bi($*$+M*M+k*k),D=Ui(k/=T),R=it(it(k)-1)<Re||it(a-g)<Re?(a+g)/2:Br(M,$),B=e(R,D),U=B[0],Q=B[1],Y=U-i,P=Q-r,z=w*Y-_*P;(z*z/A>t||it((_*Y+w*P)/A-.5)>.3||s*p+l*y+c*v<_se)&&(n(i,r,a,s,l,c,U,Q,R,$/=T,M/=T,k,b,S),S.point(U,Q),n(U,Q,R,$,M,k,f,d,g,p,y,v,b,S))}}return function(i){var r,a,s,l,c,f,d,g,p,y,v,b,S={point:_,lineStart:w,lineEnd:$,polygonStart:function(){i.polygonStart(),S.lineStart=M},polygonEnd:function(){i.polygonEnd(),S.lineStart=w}};function _(D,R){D=e(D,R),i.point(D[0],D[1])}function w(){g=NaN,S.point=A,i.lineStart()}function A(D,R){var B=Xu([D,R]),U=e(D,R);n(g,p,d,y,v,b,g=U[0],p=U[1],d=D,y=B[0],v=B[1],b=B[2],h4,i),i.point(g,p)}function $(){S.point=_,i.lineEnd()}function M(){w(),S.point=k,S.lineEnd=T}function k(D,R){A(r=D,R),a=g,s=p,l=y,c=v,f=b,S.point=A}function T(){n(g,p,d,y,v,b,a,s,r,l,c,f,h4,i),S.lineEnd=$,$()}return S}}var Cse=$b({point:function(e,t){this.stream.point(e*Xe,t*Xe)}});function $se(e){return $b({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function Tse(e,t,n,i,r){function a(s,l){return s*=i,l*=r,[t+e*s,n-e*l]}return a.invert=function(s,l){return[(s-t)/e*i,(n-l)/e*r]},a}function p4(e,t,n,i,r,a){if(!a)return Tse(e,t,n,i,r);var s=Fe(a),l=Ne(a),c=s*e,f=l*e,d=s/e,g=l/e,p=(l*n-s*t)/e,y=(l*t+s*n)/e;function v(b,S){return b*=i,S*=r,[c*b-f*S+t,n-f*b-c*S]}return v.invert=function(b,S){return[i*(d*b-g*S+p),r*(y-g*b-d*S)]},v}function ss(e){return Lj(function(){return e})()}function Lj(e){var t,n=150,i=480,r=250,a=0,s=0,l=0,c=0,f=0,d,g=0,p=1,y=1,v=null,b=r4,S=null,_,w,A,$=hp,M=.5,k,T,D,R,B;function U(z){return D(z[0]*Xe,z[1]*Xe)}function Q(z){return z=D.invert(z[0],z[1]),z&&[z[0]*Zt,z[1]*Zt]}U.stream=function(z){return R&&B===z?R:R=Cse($se(d)(b(k($(B=z)))))},U.preclip=function(z){return arguments.length?(b=z,v=void 0,P()):b},U.postclip=function(z){return arguments.length?($=z,S=_=w=A=null,P()):$},U.clipAngle=function(z){return arguments.length?(b=+z?use(v=z*Xe):(v=null,r4),P()):v*Zt},U.clipExtent=function(z){return arguments.length?($=z==null?(S=_=w=A=null,hp):wj(S=+z[0][0],_=+z[0][1],w=+z[1][0],A=+z[1][1]),P()):S==null?null:[[S,_],[w,A]]},U.scale=function(z){return arguments.length?(n=+z,Y()):n},U.translate=function(z){return arguments.length?(i=+z[0],r=+z[1],Y()):[i,r]},U.center=function(z){return arguments.length?(a=z[0]%360*Xe,s=z[1]%360*Xe,Y()):[a*Zt,s*Zt]},U.rotate=function(z){return arguments.length?(l=z[0]%360*Xe,c=z[1]%360*Xe,f=z.length>2?z[2]%360*Xe:0,Y()):[l*Zt,c*Zt,f*Zt]},U.angle=function(z){return arguments.length?(g=z%360*Xe,Y()):g*Zt},U.reflectX=function(z){return arguments.length?(p=z?-1:1,Y()):p<0},U.reflectY=function(z){return arguments.length?(y=z?-1:1,Y()):y<0},U.precision=function(z){return arguments.length?(k=g4(T,M=z*z),P()):bi(M)},U.fitExtent=function(z,N){return Tb(U,z,N)},U.fitSize=function(z,N){return Y3(U,z,N)},U.fitWidth=function(z,N){return X3(U,z,N)},U.fitHeight=function(z,N){return V3(U,z,N)};function Y(){var z=p4(n,0,0,p,y,g).apply(null,t(a,s)),N=p4(n,i-z[0],r-z[1],p,y,g);return d=xj(l,c,f),T=Yw(t,N),D=Yw(d,T),k=g4(T,M),P()}function P(){return R=B=null,U}return function(){return t=e.apply(this,arguments),U.invert=t.invert&&Q,Y()}}function W3(e){var t=0,n=Ve/3,i=Lj(e),r=i(t,n);return r.parallels=function(a){return arguments.length?i(t=a[0]*Xe,n=a[1]*Xe):[t*Zt,n*Zt]},r}function Mse(e){var t=Fe(e);function n(i,r){return[i*t,Ne(r)/t]}return n.invert=function(i,r){return[i/t,Ui(r*t)]},n}function kse(e,t){var n=Ne(e),i=(n+Ne(t))/2;if(it(i)<Re)return Mse(e);var r=1+n*(2*i-n),a=bi(r)/i;function s(l,c){var f=bi(r-2*i*Ne(c))/i;return[f*Ne(l*=i),a-f*Fe(l)]}return s.invert=function(l,c){var f=a-c,d=Br(l,it(f))*kr(f);return f*i<0&&(d-=Ve*kr(l)*kr(f)),[d/i,Ui((r-(l*l+f*f)*i*i)/(2*i))]},s}function Jy(){return W3(kse).scale(155.424).center([0,33.6442])}function Uj(){return Jy().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Ose(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Nse(){var e,t,n=Uj(),i,r=Jy().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,s=Jy().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,c,f={point:function(p,y){c=[p,y]}};function d(p){var y=p[0],v=p[1];return c=null,i.point(y,v),c||(a.point(y,v),c)||(l.point(y,v),c)}d.invert=function(p){var y=n.scale(),v=n.translate(),b=(p[0]-v[0])/y,S=(p[1]-v[1])/y;return(S>=.12&&S<.234&&b>=-.425&&b<-.214?r:S>=.166&&S<.234&&b>=-.214&&b<-.115?s:n).invert(p)},d.stream=function(p){return e&&t===p?e:e=Ose([n.stream(t=p),r.stream(p),s.stream(p)])},d.precision=function(p){return arguments.length?(n.precision(p),r.precision(p),s.precision(p),g()):n.precision()},d.scale=function(p){return arguments.length?(n.scale(p),r.scale(p*.35),s.scale(p),d.translate(n.translate())):n.scale()},d.translate=function(p){if(!arguments.length)return n.translate();var y=n.scale(),v=+p[0],b=+p[1];return i=n.translate(p).clipExtent([[v-.455*y,b-.238*y],[v+.455*y,b+.238*y]]).stream(f),a=r.translate([v-.307*y,b+.201*y]).clipExtent([[v-.425*y+Re,b+.12*y+Re],[v-.214*y-Re,b+.234*y-Re]]).stream(f),l=s.translate([v-.205*y,b+.212*y]).clipExtent([[v-.214*y+Re,b+.166*y+Re],[v-.115*y-Re,b+.234*y-Re]]).stream(f),g()},d.fitExtent=function(p,y){return Tb(d,p,y)},d.fitSize=function(p,y){return Y3(d,p,y)},d.fitWidth=function(p,y){return X3(d,p,y)},d.fitHeight=function(p,y){return V3(d,p,y)};function g(){return e=t=null,d}return d.scale(1070)}function Bj(e){return function(t,n){var i=Fe(t),r=Fe(n),a=e(i*r);return a===1/0?[2,0]:[a*r*Ne(t),a*Ne(n)]}}function tm(e){return function(t,n){var i=bi(t*t+n*n),r=e(i),a=Ne(r),s=Fe(r);return[Br(t*a,i*s),Ui(i&&n*a/i)]}}var jj=Bj(function(e){return bi(2/(1+e))});jj.invert=tm(function(e){return 2*Ui(e/2)});function Dse(){return ss(jj).scale(124.75).clipAngle(180-.001)}var qj=Bj(function(e){return(e=uj(e))&&e/Ne(e)});qj.invert=tm(function(e){return e});function Rse(){return ss(qj).scale(79.4188).clipAngle(180-.001)}function Mb(e,t){return[e,Ry(P3((Xt+t)/2))]}Mb.invert=function(e,t){return[e,2*jd(lj(t))-Xt]};function zse(){return Ij(Mb).scale(961/vi)}function Ij(e){var t=ss(e),n=t.center,i=t.scale,r=t.translate,a=t.clipExtent,s=null,l,c,f;t.scale=function(g){return arguments.length?(i(g),d()):i()},t.translate=function(g){return arguments.length?(r(g),d()):r()},t.center=function(g){return arguments.length?(n(g),d()):n()},t.clipExtent=function(g){return arguments.length?(g==null?s=l=c=f=null:(s=+g[0][0],l=+g[0][1],c=+g[1][0],f=+g[1][1]),d()):s==null?null:[[s,l],[c,f]]};function d(){var g=Ve*i(),p=t(tse(t.rotate()).invert([0,0]));return a(s==null?[[p[0]-g,p[1]-g],[p[0]+g,p[1]+g]]:e===Mb?[[Math.max(p[0]-g,s),l],[Math.min(p[0]+g,c),f]]:[[s,Math.max(p[1]-g,l)],[c,Math.min(p[1]+g,f)]])}return d()}function o1(e){return P3((Xt+e)/2)}function Fse(e,t){var n=Fe(e),i=e===t?Ne(e):Ry(n/Fe(t))/Ry(o1(t)/o1(e)),r=n*zE(o1(e),i)/i;if(!i)return Mb;function a(s,l){r>0?l<-Xt+Re&&(l=-Xt+Re):l>Xt-Re&&(l=Xt-Re);var c=r/zE(o1(l),i);return[c*Ne(i*s),r-c*Fe(i*s)]}return a.invert=function(s,l){var c=r-l,f=kr(i)*bi(s*s+c*c),d=Br(s,it(c))*kr(c);return c*i<0&&(d-=Ve*kr(s)*kr(c)),[d/i,2*jd(zE(r/f,1/i))-Xt]},a}function Lse(){return W3(Fse).scale(109.5).parallels([30,30])}function ev(e,t){return[e,t]}ev.invert=ev;function Use(){return ss(ev).scale(152.63)}function Bse(e,t){var n=Fe(e),i=e===t?Ne(e):(n-Fe(t))/(t-e),r=n/i+e;if(it(i)<Re)return ev;function a(s,l){var c=r-l,f=i*s;return[c*Ne(f),r-c*Fe(f)]}return a.invert=function(s,l){var c=r-l,f=Br(s,it(c))*kr(c);return c*i<0&&(f-=Ve*kr(s)*kr(c)),[f/i,r-kr(i)*bi(s*s+c*c)]},a}function jse(){return W3(Bse).scale(131.154).center([0,13.9389])}var Yg=1.340264,Xg=-.081106,Vg=893e-6,Wg=.003796,tv=bi(3)/2,qse=12;function Pj(e,t){var n=Ui(tv*Ne(t)),i=n*n,r=i*i*i;return[e*Fe(n)/(tv*(Yg+3*Xg*i+r*(7*Vg+9*Wg*i))),n*(Yg+Xg*i+r*(Vg+Wg*i))]}Pj.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,a=0,s,l,c;a<qse&&(l=n*(Yg+Xg*i+r*(Vg+Wg*i))-t,c=Yg+3*Xg*i+r*(7*Vg+9*Wg*i),n-=s=l/c,i=n*n,r=i*i*i,!(it(s)<Ny));++a);return[tv*e*(Yg+3*Xg*i+r*(7*Vg+9*Wg*i))/Fe(n),Ui(Ne(n)/tv)]};function Ise(){return ss(Pj).scale(177.158)}function Hj(e,t){var n=Fe(t),i=Fe(e)*n;return[n*Ne(e)/i,Ne(t)/i]}Hj.invert=tm(jd);function Pse(){return ss(Hj).scale(144.049).clipAngle(60)}function Hse(){var e=1,t=0,n=0,i=1,r=1,a=0,s,l,c=null,f,d,g,p=1,y=1,v=$b({point:function($,M){var k=A([$,M]);this.stream.point(k[0],k[1])}}),b=hp,S,_;function w(){return p=e*i,y=e*r,S=_=null,A}function A($){var M=$[0]*p,k=$[1]*y;if(a){var T=k*s-M*l;M=M*s+k*l,k=T}return[M+t,k+n]}return A.invert=function($){var M=$[0]-t,k=$[1]-n;if(a){var T=k*s+M*l;M=M*s-k*l,k=T}return[M/p,k/y]},A.stream=function($){return S&&_===$?S:S=v(b(_=$))},A.postclip=function($){return arguments.length?(b=$,c=f=d=g=null,w()):b},A.clipExtent=function($){return arguments.length?(b=$==null?(c=f=d=g=null,hp):wj(c=+$[0][0],f=+$[0][1],d=+$[1][0],g=+$[1][1]),w()):c==null?null:[[c,f],[d,g]]},A.scale=function($){return arguments.length?(e=+$,w()):e},A.translate=function($){return arguments.length?(t=+$[0],n=+$[1],w()):[t,n]},A.angle=function($){return arguments.length?(a=$%360*Xe,l=Ne(a),s=Fe(a),w()):a*Zt},A.reflectX=function($){return arguments.length?(i=$?-1:1,w()):i<0},A.reflectY=function($){return arguments.length?(r=$?-1:1,w()):r<0},A.fitExtent=function($,M){return Tb(A,$,M)},A.fitSize=function($,M){return Y3(A,$,M)},A.fitWidth=function($,M){return X3(A,$,M)},A.fitHeight=function($,M){return V3(A,$,M)},A}function Gj(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}Gj.invert=function(e,t){var n=t,i=25,r;do{var a=n*n,s=a*a;n-=r=(n*(1.007226+a*(.015085+s*(-.044475+.028874*a-.005916*s)))-t)/(1.007226+a*(.015085*3+s*(-.044475*7+.028874*9*a-.005916*11*s)))}while(it(r)>Re&&--i>0);return[e/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function Gse(){return ss(Gj).scale(175.295)}function Yj(e,t){return[Fe(t)*Ne(e),Ne(t)]}Yj.invert=tm(Ui);function Yse(){return ss(Yj).scale(249.5).clipAngle(90+Re)}function Xj(e,t){var n=Fe(t),i=1+Fe(e)*n;return[n*Ne(e)/i,Ne(t)/i]}Xj.invert=tm(function(e){return 2*jd(e)});function Xse(){return ss(Xj).scale(250).clipAngle(142)}function Vj(e,t){return[Ry(P3((Xt+t)/2)),-e]}Vj.invert=function(e,t){return[-t,2*jd(lj(e))-Xt]};function Vse(){var e=Ij(Vj),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var Wse=Math.abs,iA=Math.cos,nv=Math.sin,Qse=1e-6,Wj=Math.PI,rA=Wj/2,m4=Zse(2);function y4(e){return e>1?rA:e<-1?-rA:Math.asin(e)}function Zse(e){return e>0?Math.sqrt(e):0}function Kse(e,t){var n=e*nv(t),i=30,r;do t-=r=(t+nv(t)-n)/(1+iA(t));while(Wse(r)>Qse&&--i>0);return t/2}function Jse(e,t,n){function i(r,a){return[e*r*iA(a=Kse(n,a)),t*nv(a)]}return i.invert=function(r,a){return a=y4(a/t),[r/(e*iA(a)),y4((2*a+nv(2*a))/n)]},i}var eoe=Jse(m4/rA,m4,Wj);function toe(){return ss(eoe).scale(169.529)}const noe=Fj(),aA=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function ioe(e,t){return function n(){const i=t();return i.type=e,i.path=Fj().projection(i),i.copy=i.copy||function(){const r=n();return aA.forEach(a=>{i[a]&&r[a](i[a]())}),r.path.pointRadius(i.path.pointRadius()),r},fU(i)}}function Q3(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(iv[e]=ioe(e,t),this):iv[e]||null}function Qj(e){return e&&e.path||noe}const iv={albers:Uj,albersusa:Nse,azimuthalequalarea:Dse,azimuthalequidistant:Rse,conicconformal:Lse,conicequalarea:Jy,conicequidistant:jse,equalEarth:Ise,equirectangular:Use,gnomonic:Pse,identity:Hse,mercator:zse,mollweide:toe,naturalEarth1:Gse,orthographic:Yse,stereographic:Xse,transversemercator:Vse};for(const e in iv)Q3(e,iv[e]);function roe(){}const Rs=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Zj(){var e=1,t=1,n=l;function i(c,f){return f.map(d=>r(c,d))}function r(c,f){var d=[],g=[];return a(c,f,p=>{n(p,c,f),aoe(p)>0?d.push([p]):g.push(p)}),g.forEach(p=>{for(var y=0,v=d.length,b;y<v;++y)if(soe((b=d[y])[0],p)!==-1){b.push(p);return}}),{type:"MultiPolygon",value:f,coordinates:d}}function a(c,f,d){var g=[],p=[],y,v,b,S,_,w;for(y=v=-1,S=c[0]>=f,Rs[S<<1].forEach(A);++y<e-1;)b=S,S=c[y+1]>=f,Rs[b|S<<1].forEach(A);for(Rs[S<<0].forEach(A);++v<t-1;){for(y=-1,S=c[v*e+e]>=f,_=c[v*e]>=f,Rs[S<<1|_<<2].forEach(A);++y<e-1;)b=S,S=c[v*e+e+y+1]>=f,w=_,_=c[v*e+y+1]>=f,Rs[b|S<<1|_<<2|w<<3].forEach(A);Rs[S|_<<3].forEach(A)}for(y=-1,_=c[v*e]>=f,Rs[_<<2].forEach(A);++y<e-1;)w=_,_=c[v*e+y+1]>=f,Rs[_<<2|w<<3].forEach(A);Rs[_<<3].forEach(A);function A($){var M=[$[0][0]+y,$[0][1]+v],k=[$[1][0]+y,$[1][1]+v],T=s(M),D=s(k),R,B;(R=p[T])?(B=g[D])?(delete p[R.end],delete g[B.start],R===B?(R.ring.push(k),d(R.ring)):g[R.start]=p[B.end]={start:R.start,end:B.end,ring:R.ring.concat(B.ring)}):(delete p[R.end],R.ring.push(k),p[R.end=D]=R):(R=g[D])?(B=p[T])?(delete g[R.start],delete p[B.end],R===B?(R.ring.push(k),d(R.ring)):g[B.start]=p[R.end]={start:B.start,end:R.end,ring:B.ring.concat(R.ring)}):(delete g[R.start],R.ring.unshift(M),g[R.start=T]=R):g[T]=p[D]={start:T,end:D,ring:[M,k]}}}function s(c){return c[0]*2+c[1]*(e+1)*4}function l(c,f,d){c.forEach(g=>{var p=g[0],y=g[1],v=p|0,b=y|0,S,_=f[b*e+v];p>0&&p<e&&v===p&&(S=f[b*e+v-1],g[0]=p+(d-S)/(_-S)-.5),y>0&&y<t&&b===y&&(S=f[(b-1)*e+v],g[1]=y+(d-S)/(_-S)-.5)})}return i.contour=r,i.size=function(c){if(!arguments.length)return[e,t];var f=Math.floor(c[0]),d=Math.floor(c[1]);return f>=0&&d>=0||ae("invalid size"),e=f,t=d,i},i.smooth=function(c){return arguments.length?(n=c?l:roe,i):n===l},i}function aoe(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function soe(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=ooe(e,t[n]))return r;return 0}function ooe(e,t){for(var n=t[0],i=t[1],r=-1,a=0,s=e.length,l=s-1;a<s;l=a++){var c=e[a],f=c[0],d=c[1],g=e[l],p=g[0],y=g[1];if(loe(c,g,t))return 0;d>i!=y>i&&n<(p-f)*(i-d)/(y-d)+f&&(r=-r)}return r}function loe(e,t,n){var i;return uoe(e,t,n)&&coe(e[i=+(e[0]===t[0])],n[i],t[i])}function uoe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function coe(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function Kj(e,t,n){return function(i){var r=Xa(i),a=n?Math.min(r[0],0):r[0],s=r[1],l=s-a,c=t?pl(a,s,e):l/(e+1);return rr(a+c,s,c)}}function Z3(e){te.call(this,null,e)}Z3.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};be(Z3,te,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||ii,a=Zj().smooth(e.smooth!==!1),s=e.thresholds||foe(i,r,e),l=e.as===null?null:e.as||"contour",c=[];return i.forEach(f=>{const d=r(f),g=a.size([d.width,d.height])(d.values,se(s)?s:s(d.values));doe(g,d,f,e),g.forEach(p=>{c.push(Yv(f,gt(l!=null?{[l]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function foe(e,t,n){const i=Kj(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(r=>Nu(t(r).values)))}function doe(e,t,n,i){let r=i.scale||t.scale,a=i.translate||t.translate;if(Ge(r)&&(r=r(n,i)),Ge(a)&&(a=a(n,i)),(r===1||r==null)&&!a)return;const s=(ut(r)?r:r[0])||1,l=(ut(r)?r:r[1])||1,c=a&&a[0]||0,f=a&&a[1]||0;e.forEach(Jj(t,s,l,c,f))}function Jj(e,t,n,i,r){const a=e.x1||0,s=e.y1||0,l=t*n<0;function c(g){g.forEach(f)}function f(g){l&&g.reverse(),g.forEach(d)}function d(g){g[0]=(g[0]-a)*t+i,g[1]=(g[1]-s)*n+r}return function(g){return g.coordinates.forEach(c),g}}function v4(e,t,n){const i=e>=0?e:PC(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function jE(e){return Ge(e)?e:ri(+e)}function eq(){var e=c=>c[0],t=c=>c[1],n=Cd,i=[-1,-1],r=960,a=500,s=2;function l(c,f){const d=v4(i[0],c,e)>>s,g=v4(i[1],c,t)>>s,p=d?d+2:0,y=g?g+2:0,v=2*p+(r>>s),b=2*y+(a>>s),S=new Float32Array(v*b),_=new Float32Array(v*b);let w=S;c.forEach($=>{const M=p+(+e($)>>s),k=y+(+t($)>>s);M>=0&&M<v&&k>=0&&k<b&&(S[M+k*v]+=+n($))}),d>0&&g>0?(yf(v,b,S,_,d),vf(v,b,_,S,g),yf(v,b,S,_,d),vf(v,b,_,S,g),yf(v,b,S,_,d),vf(v,b,_,S,g)):d>0?(yf(v,b,S,_,d),yf(v,b,_,S,d),yf(v,b,S,_,d),w=_):g>0&&(vf(v,b,S,_,g),vf(v,b,_,S,g),vf(v,b,S,_,g),w=_);const A=f?Math.pow(2,-2*s):1/p9(w);for(let $=0,M=v*b;$<M;++$)w[$]*=A;return{values:w,scale:1<<s,width:v,height:b,x1:p,y1:y,x2:p+(r>>s),y2:y+(a>>s)}}return l.x=function(c){return arguments.length?(e=jE(c),l):e},l.y=function(c){return arguments.length?(t=jE(c),l):t},l.weight=function(c){return arguments.length?(n=jE(c),l):n},l.size=function(c){if(!arguments.length)return[r,a];var f=+c[0],d=+c[1];return f>=0&&d>=0||ae("invalid size"),r=f,a=d,l},l.cellSize=function(c){return arguments.length?((c=+c)>=1||ae("invalid cell size"),s=Math.floor(Math.log(c)/Math.LN2),l):1<<s},l.bandwidth=function(c){return arguments.length?(c=_e(c),c.length===1&&(c=[+c[0],+c[0]]),c.length!==2&&ae("invalid bandwidth"),i=c,l):i},l}function yf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<t;++s)for(let l=0,c=0;l<e+r;++l)l<e&&(c+=n[l+s*e]),l>=r&&(l>=a&&(c-=n[l-a+s*e]),i[l-r+s*e]=c/Math.min(l+1,e-1+a-l,a))}function vf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<e;++s)for(let l=0,c=0;l<t+r;++l)l<t&&(c+=n[s+l*e]),l>=r&&(l>=a&&(c-=n[s+(l-a)*e]),i[s+(l-r)*e]=c/Math.min(l+1,t-1+a-l,a))}function K3(e){te.call(this,null,e)}K3.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const hoe=["x","y","weight","size","cellSize","bandwidth"];function tq(e,t){return hoe.forEach(n=>t[n]!=null?e[n](t[n]):0),e}be(K3,te,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=goe(i,e.groupby),a=(e.groupby||[]).map(Vt),s=tq(eq(),e),l=e.as||"grid",c=[];function f(d,g){for(let p=0;p<a.length;++p)d[a[p]]=g[p];return d}return c=r.map(d=>gt(f({[l]:s(d,e.counts)},d.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function goe(e,t){var n=[],i=d=>d(l),r,a,s,l,c,f;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)l=e[a],c=t.map(i),f=r[c],f||(r[c]=f=[],f.dims=c,n.push(f)),f.push(l);return n}function J3(e){te.call(this,null,e)}J3.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};be(J3,te,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=Zj().smooth(e.smooth!==!1),r=e.values,a=e.thresholds||Kj(e.count||10,e.nice,!!r),s=e.size,l,c;return r||(r=t.materialize(t.SOURCE).source,l=tq(eq(),e)(r,!0),c=Jj(l,l.scale||1,l.scale||1,0,0),s=[l.width,l.height],r=l.values),a=se(a)?a:a(r),r=i.size(s)(r,a),c&&r.forEach(c),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(gt),n}});const sA="Feature",eT="FeatureCollection",poe="MultiPoint";function tT(e){te.call(this,null,e)}tT.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};be(tT,te,{transform(e,t){var n=this._features,i=this._points,r=e.fields,a=r&&r[0],s=r&&r[1],l=e.geojson||!r&&ii,c=t.ADD,f;f=e.modified()||t.changed(t.REM)||t.modified(Jn(l))||a&&t.modified(Jn(a))||s&&t.modified(Jn(s)),(!this.value||f)&&(c=t.SOURCE,this._features=n=[],this._points=i=[]),l&&t.visit(c,d=>n.push(l(d))),a&&s&&(t.visit(c,d=>{var g=a(d),p=s(d);g!=null&&p!=null&&(g=+g)===g&&(p=+p)===p&&i.push([g,p])}),n=n.concat({type:sA,geometry:{type:poe,coordinates:i}})),this.value={type:eT,features:n}}});function nT(e){te.call(this,null,e)}nT.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};be(nT,te,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||ii,a=e.as||"path",s=n.SOURCE;!i||e.modified()?(this.value=i=Qj(e.projection),n.materialize().reflow()):s=r===ii||t.modified(r.fields)?n.ADD_MOD:n.ADD;const l=moe(i,e.pointRadius);return n.visit(s,c=>c[a]=i(r(c))),i.pointRadius(l),n.modifies(a)}});function moe(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function iT(e){te.call(this,null,e)}iT.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};be(iT,te,{transform(e,t){var n=e.projection,i=e.fields[0],r=e.fields[1],a=e.as||["x","y"],s=a[0],l=a[1],c;function f(d){const g=n([i(d),r(d)]);g?(d[s]=g[0],d[l]=g[1]):(d[s]=void 0,d[l]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,f):(c=t.modified(i.fields)||t.modified(r.fields),t.visit(c?t.ADD_MOD:t.ADD,f)),t.modifies(a)}});function rT(e){te.call(this,null,e)}rT.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};be(rT,te,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",a=n.ADD;return(!i||e.modified())&&(this.value=i=yoe(Qj(e.projection),e.field||zr("datum"),e.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,s=>s[r]=i),n.modifies(r)}});function yoe(e,t,n){const i=n==null?r=>e(t(r)):r=>{var a=e.pointRadius(),s=e.pointRadius(n)(t(r));return e.pointRadius(a),s};return i.context=r=>(e.context(r),i),i}function aT(e){te.call(this,[],e),this.generator=fse()}aT.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};be(aT,te,{transform(e,t){var n=this.value,i=this.generator,r;if(!n.length||e.modified())for(const a in e)Ge(i[a])&&i[a](e[a]);return r=i(),n.length?t.mod.push(c7(n[0],r)):t.add.push(gt(r)),n[0]=r,t}});function sT(e){te.call(this,null,e)}sT.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};be(sT,te,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",r=e.field||ii,a=boe(e.opacity,e),s=voe(e.color,e),l=e.as||"image",c={$x:0,$y:0,$value:0,$max:i?Nu(n.map(f=>Nu(r(f).values))):0};return n.forEach(f=>{const d=r(f),g=He({},f,c);i||(g.$max=Nu(d.values||[])),f[l]=xoe(d,g,s.dep?s:ri(s(g)),a.dep?a:ri(a(g)))}),t.reflow(!0).modifies(l)}});function voe(e,t){let n;return Ge(e)?(n=i=>vl(e(i,t)),n.dep=nq(e)):n=ri(vl(e||"#888")),n}function boe(e,t){let n;return Ge(e)?(n=i=>e(i,t),n.dep=nq(e)):e?n=ri(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function nq(e){if(!Ge(e))return!1;const t=ca(Jn(e));return t.$x||t.$y||t.$value||t.$max}function xoe(e,t,n,i){const r=e.width,a=e.height,s=e.x1||0,l=e.y1||0,c=e.x2||r,f=e.y2||a,d=e.values,g=d?S=>d[S]:Ko,p=fl(c-s,f-l),y=p.getContext("2d"),v=y.getImageData(0,0,c-s,f-l),b=v.data;for(let S=l,_=0;S<f;++S){t.$y=S-l;for(let w=s,A=S*r;w<c;++w,_+=4){t.$x=w-s,t.$value=g(w+A);const $=n(t);b[_+0]=$.r,b[_+1]=$.g,b[_+2]=$.b,b[_+3]=~~(255*i(t))}}return y.putImageData(v,0,0),p}function iq(e){te.call(this,null,e),this.modified(!0)}be(iq,te,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Eoe(e.type),aA.forEach(i=>{e[i]!=null&&b4(n,i,e[i])})):aA.forEach(i=>{e.modified(i)&&b4(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Soe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Soe(e,t){const n=_oe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Eoe(e){const t=Q3((e||"mercator").toLowerCase());return t||ae("Unrecognized projection type: "+e),t()}function b4(e,t,n){Ge(e[t])&&e[t](n)}function _oe(e){return e=_e(e),e.length===1?e[0]:{type:eT,features:e.reduce((t,n)=>t.concat(woe(n)),[])}}function woe(e){return e.type===eT?e.features:_e(e).filter(t=>t!=null).map(t=>t.type===sA?t:{type:sA,geometry:t})}const Aoe=Object.freeze(Object.defineProperty({__proto__:null,contour:J3,geojson:tT,geopath:nT,geopoint:iT,geoshape:rT,graticule:aT,heatmap:sT,isocontour:Z3,kde2d:K3,projection:iq},Symbol.toStringTag,{value:"Module"}));function Coe(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function r(){var a,s=n.length,l,c=0,f=0;for(a=0;a<s;++a)l=n[a],c+=l.x,f+=l.y;for(c=(c/s-e)*i,f=(f/s-t)*i,a=0;a<s;++a)l=n[a],l.x-=c,l.y-=f}return r.initialize=function(a){n=a},r.x=function(a){return arguments.length?(e=+a,r):e},r.y=function(a){return arguments.length?(t=+a,r):t},r.strength=function(a){return arguments.length?(i=+a,r):i},r}function $oe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return rq(this.cover(t,n),t,n,e)}function rq(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,a=e._root,s={data:i},l=e._x0,c=e._y0,f=e._x1,d=e._y1,g,p,y,v,b,S,_,w;if(!a)return e._root=s,e;for(;a.length;)if((b=t>=(g=(l+f)/2))?l=g:f=g,(S=n>=(p=(c+d)/2))?c=p:d=p,r=a,!(a=a[_=S<<1|b]))return r[_]=s,e;if(y=+e._x.call(null,a.data),v=+e._y.call(null,a.data),t===y&&n===v)return s.next=a,r?r[_]=s:e._root=s,e;do r=r?r[_]=new Array(4):e._root=new Array(4),(b=t>=(g=(l+f)/2))?l=g:f=g,(S=n>=(p=(c+d)/2))?c=p:d=p;while((_=S<<1|b)===(w=(v>=p)<<1|y>=g));return r[w]=a,r[_]=s,e}function Toe(e){var t,n,i=e.length,r,a,s=new Array(i),l=new Array(i),c=1/0,f=1/0,d=-1/0,g=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(s[n]=r,l[n]=a,r<c&&(c=r),r>d&&(d=r),a<f&&(f=a),a>g&&(g=a));if(c>d||f>g)return this;for(this.cover(c,f).cover(d,g),n=0;n<i;++n)rq(this,s[n],l[n],e[n]);return this}function Moe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,a=(i=Math.floor(t))+1;else{for(var s=r-n||1,l=this._root,c,f;n>e||e>=r||i>t||t>=a;)switch(f=(t<i)<<1|e<n,c=new Array(4),c[f]=l,l=c,s*=2,f){case 0:r=n+s,a=i+s;break;case 1:n=r-s,a=i+s;break;case 2:r=n+s,i=a-s;break;case 3:n=r-s,i=a-s;break}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this}function koe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Ooe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function hi(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function Noe(e,t,n){var i,r=this._x0,a=this._y0,s,l,c,f,d=this._x1,g=this._y1,p=[],y=this._root,v,b;for(y&&p.push(new hi(y,r,a,d,g)),n==null?n=1/0:(r=e-n,a=t-n,d=e+n,g=t+n,n*=n);v=p.pop();)if(!(!(y=v.node)||(s=v.x0)>d||(l=v.y0)>g||(c=v.x1)<r||(f=v.y1)<a))if(y.length){var S=(s+c)/2,_=(l+f)/2;p.push(new hi(y[3],S,_,c,f),new hi(y[2],s,_,S,f),new hi(y[1],S,l,c,_),new hi(y[0],s,l,S,_)),(b=(t>=_)<<1|e>=S)&&(v=p[p.length-1],p[p.length-1]=p[p.length-1-b],p[p.length-1-b]=v)}else{var w=e-+this._x.call(null,y.data),A=t-+this._y.call(null,y.data),$=w*w+A*A;if($<n){var M=Math.sqrt(n=$);r=e-M,a=t-M,d=e+M,g=t+M,i=y.data}}return i}function Doe(e){if(isNaN(d=+this._x.call(null,e))||isNaN(g=+this._y.call(null,e)))return this;var t,n=this._root,i,r,a,s=this._x0,l=this._y0,c=this._x1,f=this._y1,d,g,p,y,v,b,S,_;if(!n)return this;if(n.length)for(;;){if((v=d>=(p=(s+c)/2))?s=p:c=p,(b=g>=(y=(l+f)/2))?l=y:f=y,t=n,!(n=n[S=b<<1|v]))return this;if(!n.length)break;(t[S+1&3]||t[S+2&3]||t[S+3&3])&&(i=t,_=S)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,r?(a?r.next=a:delete r.next,this):t?(a?t[S]=a:delete t[S],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[_]=n:this._root=n),this):(this._root=a,this)}function Roe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function zoe(){return this._root}function Foe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Loe(e){var t=[],n,i=this._root,r,a,s,l,c;for(i&&t.push(new hi(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,a=n.x0,s=n.y0,l=n.x1,c=n.y1)&&i.length){var f=(a+l)/2,d=(s+c)/2;(r=i[3])&&t.push(new hi(r,f,d,l,c)),(r=i[2])&&t.push(new hi(r,a,d,f,c)),(r=i[1])&&t.push(new hi(r,f,s,l,d)),(r=i[0])&&t.push(new hi(r,a,s,f,d))}return this}function Uoe(e){var t=[],n=[],i;for(this._root&&t.push(new hi(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var a,s=i.x0,l=i.y0,c=i.x1,f=i.y1,d=(s+c)/2,g=(l+f)/2;(a=r[0])&&t.push(new hi(a,s,l,d,g)),(a=r[1])&&t.push(new hi(a,d,l,c,g)),(a=r[2])&&t.push(new hi(a,s,g,d,f)),(a=r[3])&&t.push(new hi(a,d,g,c,f))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Boe(e){return e[0]}function joe(e){return arguments.length?(this._x=e,this):this._x}function qoe(e){return e[1]}function Ioe(e){return arguments.length?(this._y=e,this):this._y}function oT(e,t,n){var i=new lT(t??Boe,n??qoe,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function lT(e,t,n,i,r,a){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function x4(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Si=oT.prototype=lT.prototype;Si.copy=function(){var e=new lT(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=x4(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=x4(i));return e};Si.add=$oe;Si.addAll=Toe;Si.cover=Moe;Si.data=koe;Si.extent=Ooe;Si.find=Noe;Si.remove=Doe;Si.removeAll=Roe;Si.root=zoe;Si.size=Foe;Si.visit=Loe;Si.visitAfter=Uoe;Si.x=joe;Si.y=Ioe;function gi(e){return function(){return e}}function al(e){return(e()-.5)*1e-6}function Poe(e){return e.x+e.vx}function Hoe(e){return e.y+e.vy}function Goe(e){var t,n,i,r=1,a=1;typeof e!="function"&&(e=gi(e==null?1:+e));function s(){for(var f,d=t.length,g,p,y,v,b,S,_=0;_<a;++_)for(g=oT(t,Poe,Hoe).visitAfter(l),f=0;f<d;++f)p=t[f],b=n[p.index],S=b*b,y=p.x+p.vx,v=p.y+p.vy,g.visit(w);function w(A,$,M,k,T){var D=A.data,R=A.r,B=b+R;if(D){if(D.index>p.index){var U=y-D.x-D.vx,Q=v-D.y-D.vy,Y=U*U+Q*Q;Y<B*B&&(U===0&&(U=al(i),Y+=U*U),Q===0&&(Q=al(i),Y+=Q*Q),Y=(B-(Y=Math.sqrt(Y)))/Y*r,p.vx+=(U*=Y)*(B=(R*=R)/(S+R)),p.vy+=(Q*=Y)*B,D.vx-=U*(B=1-B),D.vy-=Q*B)}return}return $>y+B||k<y-B||M>v+B||T<v-B}}function l(f){if(f.data)return f.r=n[f.data.index];for(var d=f.r=0;d<4;++d)f[d]&&f[d].r>f.r&&(f.r=f[d].r)}function c(){if(t){var f,d=t.length,g;for(n=new Array(d),f=0;f<d;++f)g=t[f],n[g.index]=+e(g,f,t)}}return s.initialize=function(f,d){t=f,i=d,c()},s.iterations=function(f){return arguments.length?(a=+f,s):a},s.strength=function(f){return arguments.length?(r=+f,s):r},s.radius=function(f){return arguments.length?(e=typeof f=="function"?f:gi(+f),c(),s):e},s}function Yoe(e){return e.index}function S4(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Xoe(e){var t=Yoe,n=g,i,r=gi(30),a,s,l,c,f,d=1;e==null&&(e=[]);function g(S){return 1/Math.min(l[S.source.index],l[S.target.index])}function p(S){for(var _=0,w=e.length;_<d;++_)for(var A=0,$,M,k,T,D,R,B;A<w;++A)$=e[A],M=$.source,k=$.target,T=k.x+k.vx-M.x-M.vx||al(f),D=k.y+k.vy-M.y-M.vy||al(f),R=Math.sqrt(T*T+D*D),R=(R-a[A])/R*S*i[A],T*=R,D*=R,k.vx-=T*(B=c[A]),k.vy-=D*B,M.vx+=T*(B=1-B),M.vy+=D*B}function y(){if(s){var S,_=s.length,w=e.length,A=new Map(s.map((M,k)=>[t(M,k,s),M])),$;for(S=0,l=new Array(_);S<w;++S)$=e[S],$.index=S,typeof $.source!="object"&&($.source=S4(A,$.source)),typeof $.target!="object"&&($.target=S4(A,$.target)),l[$.source.index]=(l[$.source.index]||0)+1,l[$.target.index]=(l[$.target.index]||0)+1;for(S=0,c=new Array(w);S<w;++S)$=e[S],c[S]=l[$.source.index]/(l[$.source.index]+l[$.target.index]);i=new Array(w),v(),a=new Array(w),b()}}function v(){if(s)for(var S=0,_=e.length;S<_;++S)i[S]=+n(e[S],S,e)}function b(){if(s)for(var S=0,_=e.length;S<_;++S)a[S]=+r(e[S],S,e)}return p.initialize=function(S,_){s=S,f=_,y()},p.links=function(S){return arguments.length?(e=S,y(),p):e},p.id=function(S){return arguments.length?(t=S,p):t},p.iterations=function(S){return arguments.length?(d=+S,p):d},p.strength=function(S){return arguments.length?(n=typeof S=="function"?S:gi(+S),v(),p):n},p.distance=function(S){return arguments.length?(r=typeof S=="function"?S:gi(+S),b(),p):r},p}var Voe={value:()=>{}};function aq(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new q1(n)}function q1(e){this._=e}function Woe(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}q1.prototype=aq.prototype={constructor:q1,on:function(e,t){var n=this._,i=Woe(e+"",n),r,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((r=(e=i[a]).type)&&(r=Qoe(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(r=(e=i[a]).type)n[r]=E4(n[r],e.name,t);else if(t==null)for(r in n)n[r]=E4(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new q1(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,r=a.length;i<r;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};function Qoe(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function E4(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Voe,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var ld=0,Rg=0,sg=0,sq=1e3,rv,zg,av=0,Wu=0,kb=0,mp=typeof performance=="object"&&performance.now?performance:Date,oq=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function uT(){return Wu||(oq(Zoe),Wu=mp.now()+kb)}function Zoe(){Wu=0}function sv(){this._call=this._time=this._next=null}sv.prototype=lq.prototype={constructor:sv,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?uT():+n)+(t==null?0:+t),!this._next&&zg!==this&&(zg?zg._next=this:rv=this,zg=this),this._call=e,this._time=n,oA()},stop:function(){this._call&&(this._call=null,this._time=1/0,oA())}};function lq(e,t,n){var i=new sv;return i.restart(e,t,n),i}function Koe(){uT(),++ld;for(var e=rv,t;e;)(t=Wu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ld}function _4(){Wu=(av=mp.now())+kb,ld=Rg=0;try{Koe()}finally{ld=0,ele(),Wu=0}}function Joe(){var e=mp.now(),t=e-av;t>sq&&(kb-=t,av=e)}function ele(){for(var e,t=rv,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:rv=n);zg=e,oA(i)}function oA(e){if(!ld){Rg&&(Rg=clearTimeout(Rg));var t=e-Wu;t>24?(e<1/0&&(Rg=setTimeout(_4,e-mp.now()-kb)),sg&&(sg=clearInterval(sg))):(sg||(av=mp.now(),sg=setInterval(Joe,sq)),ld=1,oq(_4))}}function tle(e,t,n){var i=new sv,r=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(a,s,l){s=+s,l=l==null?uT():+l,i._restart(function c(f){f+=r,i._restart(c,r+=s,l),a(f)},s,l)},i.restart(e,t,n),i)}const nle=1664525,ile=1013904223,w4=4294967296;function rle(){let e=1;return()=>(e=(nle*e+ile)%w4)/w4}function ale(e){return e.x}function sle(e){return e.y}var ole=10,lle=Math.PI*(3-Math.sqrt(5));function ule(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),a=0,s=.6,l=new Map,c=lq(g),f=aq("tick","end"),d=rle();e==null&&(e=[]);function g(){p(),f.call("tick",t),n<i&&(c.stop(),f.call("end",t))}function p(b){var S,_=e.length,w;b===void 0&&(b=1);for(var A=0;A<b;++A)for(n+=(a-n)*r,l.forEach(function($){$(n)}),S=0;S<_;++S)w=e[S],w.fx==null?w.x+=w.vx*=s:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=s:(w.y=w.fy,w.vy=0);return t}function y(){for(var b=0,S=e.length,_;b<S;++b){if(_=e[b],_.index=b,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var w=ole*Math.sqrt(.5+b),A=b*lle;_.x=w*Math.cos(A),_.y=w*Math.sin(A)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function v(b){return b.initialize&&b.initialize(e,d),b}return y(),t={tick:p,restart:function(){return c.restart(g),t},stop:function(){return c.stop(),t},nodes:function(b){return arguments.length?(e=b,y(),l.forEach(v),t):e},alpha:function(b){return arguments.length?(n=+b,t):n},alphaMin:function(b){return arguments.length?(i=+b,t):i},alphaDecay:function(b){return arguments.length?(r=+b,t):+r},alphaTarget:function(b){return arguments.length?(a=+b,t):a},velocityDecay:function(b){return arguments.length?(s=1-b,t):1-s},randomSource:function(b){return arguments.length?(d=b,l.forEach(v),t):d},force:function(b,S){return arguments.length>1?(S==null?l.delete(b):l.set(b,v(S)),t):l.get(b)},find:function(b,S,_){var w=0,A=e.length,$,M,k,T,D;for(_==null?_=1/0:_*=_,w=0;w<A;++w)T=e[w],$=b-T.x,M=S-T.y,k=$*$+M*M,k<_&&(D=T,_=k);return D},on:function(b,S){return arguments.length>1?(f.on(b,S),t):f.on(b)}}}function cle(){var e,t,n,i,r=gi(-30),a,s=1,l=1/0,c=.81;function f(y){var v,b=e.length,S=oT(e,ale,sle).visitAfter(g);for(i=y,v=0;v<b;++v)t=e[v],S.visit(p)}function d(){if(e){var y,v=e.length,b;for(a=new Array(v),y=0;y<v;++y)b=e[y],a[b.index]=+r(b,y,e)}}function g(y){var v=0,b,S,_=0,w,A,$;if(y.length){for(w=A=$=0;$<4;++$)(b=y[$])&&(S=Math.abs(b.value))&&(v+=b.value,_+=S,w+=S*b.x,A+=S*b.y);y.x=w/_,y.y=A/_}else{b=y,b.x=b.data.x,b.y=b.data.y;do v+=a[b.data.index];while(b=b.next)}y.value=v}function p(y,v,b,S){if(!y.value)return!0;var _=y.x-t.x,w=y.y-t.y,A=S-v,$=_*_+w*w;if(A*A/c<$)return $<l&&(_===0&&(_=al(n),$+=_*_),w===0&&(w=al(n),$+=w*w),$<s&&($=Math.sqrt(s*$)),t.vx+=_*y.value*i/$,t.vy+=w*y.value*i/$),!0;if(y.length||$>=l)return;(y.data!==t||y.next)&&(_===0&&(_=al(n),$+=_*_),w===0&&(w=al(n),$+=w*w),$<s&&($=Math.sqrt(s*$)));do y.data!==t&&(A=a[y.data.index]*i/$,t.vx+=_*A,t.vy+=w*A);while(y=y.next)}return f.initialize=function(y,v){e=y,n=v,d()},f.strength=function(y){return arguments.length?(r=typeof y=="function"?y:gi(+y),d(),f):r},f.distanceMin=function(y){return arguments.length?(s=y*y,f):Math.sqrt(s)},f.distanceMax=function(y){return arguments.length?(l=y*y,f):Math.sqrt(l)},f.theta=function(y){return arguments.length?(c=y*y,f):Math.sqrt(c)},f}function fle(e){var t=gi(.1),n,i,r;typeof e!="function"&&(e=gi(e==null?0:+e));function a(l){for(var c=0,f=n.length,d;c<f;++c)d=n[c],d.vx+=(r[c]-d.x)*i[c]*l}function s(){if(n){var l,c=n.length;for(i=new Array(c),r=new Array(c),l=0;l<c;++l)i[l]=isNaN(r[l]=+e(n[l],l,n))?0:+t(n[l],l,n)}}return a.initialize=function(l){n=l,s()},a.strength=function(l){return arguments.length?(t=typeof l=="function"?l:gi(+l),s(),a):t},a.x=function(l){return arguments.length?(e=typeof l=="function"?l:gi(+l),s(),a):e},a}function dle(e){var t=gi(.1),n,i,r;typeof e!="function"&&(e=gi(e==null?0:+e));function a(l){for(var c=0,f=n.length,d;c<f;++c)d=n[c],d.vy+=(r[c]-d.y)*i[c]*l}function s(){if(n){var l,c=n.length;for(i=new Array(c),r=new Array(c),l=0;l<c;++l)i[l]=isNaN(r[l]=+e(n[l],l,n))?0:+t(n[l],l,n)}}return a.initialize=function(l){n=l,s()},a.strength=function(l){return arguments.length?(t=typeof l=="function"?l:gi(+l),s(),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:gi(+l),s(),a):e},a}const A4={center:Coe,collide:Goe,nbody:cle,link:Xoe,x:fle,y:dle},Fg="forces",lA=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],hle=["static","iterations"],uq=["x","y","vx","vy"];function cT(e){te.call(this,null,e)}cT.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:uq}]};be(cT,te,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(lA),a=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&cq(n,e,0,t)):(this.value=n=ple(t.source,e),n.on("tick",gle(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(hle)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let l=this._argops,c=0,f=l.length,d;c<f;++c)if(d=l[c],!(d.name!==Fg||d.op._argval.force!=="link")){for(var i=d.op._argops,r=0,a=i.length,s;r<a;++r)if(i[r].name==="links"&&(s=i[r].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(uq)}});function gle(e,t){return()=>e.touch(t).run()}function ple(e,t){const n=ule(e),i=n.stop,r=n.restart;let a=!1;return n.stopped=()=>a,n.restart=()=>(a=!1,r()),n.stop=()=>(a=!0,i()),cq(n,t,!0).on("end",()=>a=!0)}function cq(e,t,n,i){var r=_e(t.forces),a,s,l,c;for(a=0,s=lA.length;a<s;++a)l=lA[a],l!==Fg&&t.modified(l)&&e[l](t[l]);for(a=0,s=r.length;a<s;++a)c=Fg+a,l=n||t.modified(Fg,a)?yle(r[a]):i&&mle(r[a],i)?e.force(c):null,l&&e.force(c,l);for(s=e.numForces||0;a<s;++a)e.force(Fg+a,null);return e.numForces=r.length,e}function mle(e,t){var n,i;for(n in e)if(Ge(i=e[n])&&t.modified(Jn(i)))return 1;return 0}function yle(e){var t,n;we(A4,e.force)||ae("Unrecognized force: "+e.force),t=A4[e.force]();for(n in e)Ge(t[n])&&vle(t[n],e[n],e);return t}function vle(e,t,n){e(Ge(t)?i=>t(i,n):t)}const ble=Object.freeze(Object.defineProperty({__proto__:null,force:cT},Symbol.toStringTag,{value:"Module"}));function xle(e,t){return e.parent===t.parent?1:2}function Sle(e){return e.reduce(Ele,0)/e.length}function Ele(e,t){return e+t.x}function _le(e){return 1+e.reduce(wle,0)}function wle(e,t){return Math.max(e,t.y)}function Ale(e){for(var t;t=e.children;)e=t[0];return e}function Cle(e){for(var t;t=e.children;)e=t[t.length-1];return e}function $le(){var e=xle,t=1,n=1,i=!1;function r(a){var s,l=0;a.eachAfter(function(p){var y=p.children;y?(p.x=Sle(y),p.y=_le(y)):(p.x=s?l+=e(p,s):0,p.y=0,s=p)});var c=Ale(a),f=Cle(a),d=c.x-e(c,f)/2,g=f.x+e(f,c)/2;return a.eachAfter(i?function(p){p.x=(p.x-a.x)*t,p.y=(a.y-p.y)*n}:function(p){p.x=(p.x-d)/(g-d)*t,p.y=(1-(a.y?p.y/a.y:1))*n})}return r.separation=function(a){return arguments.length?(e=a,r):e},r.size=function(a){return arguments.length?(i=!1,t=+a[0],n=+a[1],r):i?null:[t,n]},r.nodeSize=function(a){return arguments.length?(i=!0,t=+a[0],n=+a[1],r):i?[t,n]:null},r}function Tle(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function Mle(){return this.eachAfter(Tle)}function kle(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function Ole(e,t){for(var n=this,i=[n],r,a,s=-1;n=i.pop();)if(e.call(t,n,++s,this),r=n.children)for(a=r.length-1;a>=0;--a)i.push(r[a]);return this}function Nle(e,t){for(var n=this,i=[n],r=[],a,s,l,c=-1;n=i.pop();)if(r.push(n),a=n.children)for(s=0,l=a.length;s<l;++s)i.push(a[s]);for(;n=r.pop();)e.call(t,n,++c,this);return this}function Dle(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function Rle(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function zle(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Fle(e){for(var t=this,n=Lle(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function Lle(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function Ule(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Ble(){return Array.from(this)}function jle(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function qle(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Ile(){var e=this,t,n=[e],i,r,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,a=i.length;r<a;++r)n.push(i[r]);while(n.length)}function fT(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Gle)):t===void 0&&(t=Hle);for(var n=new ud(e),i,r=[n],a,s,l,c;i=r.pop();)if((s=t(i.data))&&(c=(s=Array.from(s)).length))for(i.children=s,l=c-1;l>=0;--l)r.push(a=s[l]=new ud(s[l])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(fq)}function Ple(){return fT(this).eachBefore(Yle)}function Hle(e){return e.children}function Gle(e){return Array.isArray(e)?e[1]:null}function Yle(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function fq(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function ud(e){this.data=e,this.depth=this.height=0,this.parent=null}ud.prototype=fT.prototype={constructor:ud,count:Mle,each:kle,eachAfter:Nle,eachBefore:Ole,find:Dle,sum:Rle,sort:zle,path:Fle,ancestors:Ule,descendants:Ble,leaves:jle,links:qle,copy:Ple,[Symbol.iterator]:Ile};function I1(e){return e==null?null:dq(e)}function dq(e){if(typeof e!="function")throw new Error;return e}function Cu(){return 0}function Af(e){return function(){return e}}const Xle=1664525,Vle=1013904223,C4=4294967296;function Wle(){let e=1;return()=>(e=(Xle*e+Vle)%C4)/C4}function Qle(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Zle(e,t){let n=e.length,i,r;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}function Kle(e,t){for(var n=0,i=(e=Zle(Array.from(e),t)).length,r=[],a,s;n<i;)a=e[n],s&&hq(s,a)?++n:(s=eue(r=Jle(r,a)),n=0);return s}function Jle(e,t){var n,i;if(qE(t,e))return[t];for(n=0;n<e.length;++n)if(l1(t,e[n])&&qE(Lg(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(l1(Lg(e[n],e[i]),t)&&l1(Lg(e[n],t),e[i])&&l1(Lg(e[i],t),e[n])&&qE(gq(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function l1(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function hq(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function qE(e,t){for(var n=0;n<t.length;++n)if(!hq(e,t[n]))return!1;return!0}function eue(e){switch(e.length){case 1:return tue(e[0]);case 2:return Lg(e[0],e[1]);case 3:return gq(e[0],e[1],e[2])}}function tue(e){return{x:e.x,y:e.y,r:e.r}}function Lg(e,t){var n=e.x,i=e.y,r=e.r,a=t.x,s=t.y,l=t.r,c=a-n,f=s-i,d=l-r,g=Math.sqrt(c*c+f*f);return{x:(n+a+c/g*d)/2,y:(i+s+f/g*d)/2,r:(g+r+l)/2}}function gq(e,t,n){var i=e.x,r=e.y,a=e.r,s=t.x,l=t.y,c=t.r,f=n.x,d=n.y,g=n.r,p=i-s,y=i-f,v=r-l,b=r-d,S=c-a,_=g-a,w=i*i+r*r-a*a,A=w-s*s-l*l+c*c,$=w-f*f-d*d+g*g,M=y*v-p*b,k=(v*$-b*A)/(M*2)-i,T=(b*S-v*_)/M,D=(y*A-p*$)/(M*2)-r,R=(p*_-y*S)/M,B=T*T+R*R-1,U=2*(a+k*T+D*R),Q=k*k+D*D-a*a,Y=-(Math.abs(B)>1e-6?(U+Math.sqrt(U*U-4*B*Q))/(2*B):Q/U);return{x:i+k+T*Y,y:r+D+R*Y,r:Y}}function $4(e,t,n){var i=e.x-t.x,r,a,s=e.y-t.y,l,c,f=i*i+s*s;f?(a=t.r+n.r,a*=a,c=e.r+n.r,c*=c,a>c?(r=(f+c-a)/(2*f),l=Math.sqrt(Math.max(0,c/f-r*r)),n.x=e.x-r*i-l*s,n.y=e.y-r*s+l*i):(r=(f+a-c)/(2*f),l=Math.sqrt(Math.max(0,a/f-r*r)),n.x=t.x+r*i-l*s,n.y=t.y+r*s+l*i)):(n.x=t.x+n.r,n.y=t.y)}function T4(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function M4(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,a=(t.y*n.r+n.y*t.r)/i;return r*r+a*a}function u1(e){this._=e,this.next=null,this.previous=null}function nue(e,t){if(!(a=(e=Qle(e)).length))return 0;var n,i,r,a,s,l,c,f,d,g,p;if(n=e[0],n.x=0,n.y=0,!(a>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(a>2))return n.r+i.r;$4(i,n,r=e[2]),n=new u1(n),i=new u1(i),r=new u1(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(c=3;c<a;++c){$4(n._,i._,r=e[c]),r=new u1(r),f=i.next,d=n.previous,g=i._.r,p=n._.r;do if(g<=p){if(T4(f._,r._)){i=f,n.next=i,i.previous=n,--c;continue e}g+=f._.r,f=f.next}else{if(T4(d._,r._)){n=d,n.next=i,i.previous=n,--c;continue e}p+=d._.r,d=d.previous}while(f!==d.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,s=M4(n);(r=r.next)!==i;)(l=M4(r))<s&&(n=r,s=l);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=Kle(n,t),c=0;c<a;++c)n=e[c],n.x-=r.x,n.y-=r.y;return r.r}function iue(e){return Math.sqrt(e.value)}function rue(){var e=null,t=1,n=1,i=Cu;function r(a){const s=Wle();return a.x=t/2,a.y=n/2,e?a.eachBefore(k4(e)).eachAfter(IE(i,.5,s)).eachBefore(O4(1)):a.eachBefore(k4(iue)).eachAfter(IE(Cu,1,s)).eachAfter(IE(i,a.r/Math.min(t,n),s)).eachBefore(O4(Math.min(t,n)/(2*a.r))),a}return r.radius=function(a){return arguments.length?(e=I1(a),r):e},r.size=function(a){return arguments.length?(t=+a[0],n=+a[1],r):[t,n]},r.padding=function(a){return arguments.length?(i=typeof a=="function"?a:Af(+a),r):i},r}function k4(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function IE(e,t,n){return function(i){if(r=i.children){var r,a,s=r.length,l=e(i)*t||0,c;if(l)for(a=0;a<s;++a)r[a].r+=l;if(c=nue(r,n),l)for(a=0;a<s;++a)r[a].r-=l;i.r=c+l}}}function O4(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function pq(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function nm(e,t,n,i,r){for(var a=e.children,s,l=-1,c=a.length,f=e.value&&(i-t)/e.value;++l<c;)s=a[l],s.y0=n,s.y1=r,s.x0=t,s.x1=t+=s.value*f}function aue(){var e=1,t=1,n=0,i=!1;function r(s){var l=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/l,s.eachBefore(a(t,l)),i&&s.eachBefore(pq),s}function a(s,l){return function(c){c.children&&nm(c,c.x0,s*(c.depth+1)/l,c.x1,s*(c.depth+2)/l);var f=c.x0,d=c.y0,g=c.x1-n,p=c.y1-n;g<f&&(f=g=(f+g)/2),p<d&&(d=p=(d+p)/2),c.x0=f,c.y0=d,c.x1=g,c.y1=p}}return r.round=function(s){return arguments.length?(i=!!s,r):i},r.size=function(s){return arguments.length?(e=+s[0],t=+s[1],r):[e,t]},r.padding=function(s){return arguments.length?(n=+s,r):n},r}var sue={depth:-1},N4={},PE={};function oue(e){return e.id}function lue(e){return e.parentId}function D4(){var e=oue,t=lue,n;function i(r){var a=Array.from(r),s=e,l=t,c,f,d,g,p,y,v,b,S=new Map;if(n!=null){const _=a.map(($,M)=>uue(n($,M,r))),w=_.map(R4),A=new Set(_).add("");for(const $ of w)A.has($)||(A.add($),_.push($),w.push(R4($)),a.push(PE));s=($,M)=>_[M],l=($,M)=>w[M]}for(d=0,c=a.length;d<c;++d)f=a[d],y=a[d]=new ud(f),(v=s(f,d,r))!=null&&(v+="")&&(b=y.id=v,S.set(b,S.has(b)?N4:y)),(v=l(f,d,r))!=null&&(v+="")&&(y.parent=v);for(d=0;d<c;++d)if(y=a[d],v=y.parent){if(p=S.get(v),!p)throw new Error("missing: "+v);if(p===N4)throw new Error("ambiguous: "+v);p.children?p.children.push(y):p.children=[y],y.parent=p}else{if(g)throw new Error("multiple roots");g=y}if(!g)throw new Error("no root");if(n!=null){for(;g.data===PE&&g.children.length===1;)g=g.children[0],--c;for(let _=a.length-1;_>=0&&(y=a[_],y.data===PE);--_)y.data=null}if(g.parent=sue,g.eachBefore(function(_){_.depth=_.parent.depth+1,--c}).eachBefore(fq),g.parent=null,c>0)throw new Error("cycle");return g}return i.id=function(r){return arguments.length?(e=I1(r),i):e},i.parentId=function(r){return arguments.length?(t=I1(r),i):t},i.path=function(r){return arguments.length?(n=I1(r),i):n},i}function uue(e){e=`${e}`;let t=e.length;return uA(e,t-1)&&!uA(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function R4(e){let t=e.length;if(t<2)return"";for(;--t>1&&!uA(e,t););return e.slice(0,t)}function uA(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function cue(e,t){return e.parent===t.parent?1:2}function HE(e){var t=e.children;return t?t[0]:e.t}function GE(e){var t=e.children;return t?t[t.length-1]:e.t}function fue(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function due(e){for(var t=0,n=0,i=e.children,r=i.length,a;--r>=0;)a=i[r],a.z+=t,a.m+=t,t+=a.s+(n+=a.c)}function hue(e,t,n){return e.a.parent===t.parent?e.a:n}function P1(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}P1.prototype=Object.create(ud.prototype);function gue(e){for(var t=new P1(e,0),n,i=[t],r,a,s,l;n=i.pop();)if(a=n._.children)for(n.children=new Array(l=a.length),s=l-1;s>=0;--s)i.push(r=n.children[s]=new P1(a[s],s)),r.parent=n;return(t.parent=new P1(null,0)).children=[t],t}function pue(){var e=cue,t=1,n=1,i=null;function r(f){var d=gue(f);if(d.eachAfter(a),d.parent.m=-d.z,d.eachBefore(s),i)f.eachBefore(c);else{var g=f,p=f,y=f;f.eachBefore(function(w){w.x<g.x&&(g=w),w.x>p.x&&(p=w),w.depth>y.depth&&(y=w)});var v=g===p?1:e(g,p)/2,b=v-g.x,S=t/(p.x+v+b),_=n/(y.depth||1);f.eachBefore(function(w){w.x=(w.x+b)*S,w.y=w.depth*_})}return f}function a(f){var d=f.children,g=f.parent.children,p=f.i?g[f.i-1]:null;if(d){due(f);var y=(d[0].z+d[d.length-1].z)/2;p?(f.z=p.z+e(f._,p._),f.m=f.z-y):f.z=y}else p&&(f.z=p.z+e(f._,p._));f.parent.A=l(f,p,f.parent.A||g[0])}function s(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m}function l(f,d,g){if(d){for(var p=f,y=f,v=d,b=p.parent.children[0],S=p.m,_=y.m,w=v.m,A=b.m,$;v=GE(v),p=HE(p),v&&p;)b=HE(b),y=GE(y),y.a=f,$=v.z+w-p.z-S+e(v._,p._),$>0&&(fue(hue(v,f,g),f,$),S+=$,_+=$),w+=v.m,S+=p.m,A+=b.m,_+=y.m;v&&!GE(y)&&(y.t=v,y.m+=w-_),p&&!HE(b)&&(b.t=p,b.m+=S-A,g=f)}return g}function c(f){f.x*=t,f.y=f.depth*n}return r.separation=function(f){return arguments.length?(e=f,r):e},r.size=function(f){return arguments.length?(i=!1,t=+f[0],n=+f[1],r):i?null:[t,n]},r.nodeSize=function(f){return arguments.length?(i=!0,t=+f[0],n=+f[1],r):i?[t,n]:null},r}function Ob(e,t,n,i,r){for(var a=e.children,s,l=-1,c=a.length,f=e.value&&(r-n)/e.value;++l<c;)s=a[l],s.x0=t,s.x1=i,s.y0=n,s.y1=n+=s.value*f}var mq=(1+Math.sqrt(5))/2;function yq(e,t,n,i,r,a){for(var s=[],l=t.children,c,f,d=0,g=0,p=l.length,y,v,b=t.value,S,_,w,A,$,M,k;d<p;){y=r-n,v=a-i;do S=l[g++].value;while(!S&&g<p);for(_=w=S,M=Math.max(v/y,y/v)/(b*e),k=S*S*M,$=Math.max(w/k,k/_);g<p;++g){if(S+=f=l[g].value,f<_&&(_=f),f>w&&(w=f),k=S*S*M,A=Math.max(w/k,k/_),A>$){S-=f;break}$=A}s.push(c={value:S,dice:y<v,children:l.slice(d,g)}),c.dice?nm(c,n,i,r,b?i+=v*S/b:a):Ob(c,n,i,b?n+=y*S/b:r,a),b-=S,d=g}return s}const vq=(function e(t){function n(i,r,a,s,l){yq(t,i,r,a,s,l)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n})(mq);function mue(){var e=vq,t=!1,n=1,i=1,r=[0],a=Cu,s=Cu,l=Cu,c=Cu,f=Cu;function d(p){return p.x0=p.y0=0,p.x1=n,p.y1=i,p.eachBefore(g),r=[0],t&&p.eachBefore(pq),p}function g(p){var y=r[p.depth],v=p.x0+y,b=p.y0+y,S=p.x1-y,_=p.y1-y;S<v&&(v=S=(v+S)/2),_<b&&(b=_=(b+_)/2),p.x0=v,p.y0=b,p.x1=S,p.y1=_,p.children&&(y=r[p.depth+1]=a(p)/2,v+=f(p)-y,b+=s(p)-y,S-=l(p)-y,_-=c(p)-y,S<v&&(v=S=(v+S)/2),_<b&&(b=_=(b+_)/2),e(p,v,b,S,_))}return d.round=function(p){return arguments.length?(t=!!p,d):t},d.size=function(p){return arguments.length?(n=+p[0],i=+p[1],d):[n,i]},d.tile=function(p){return arguments.length?(e=dq(p),d):e},d.padding=function(p){return arguments.length?d.paddingInner(p).paddingOuter(p):d.paddingInner()},d.paddingInner=function(p){return arguments.length?(a=typeof p=="function"?p:Af(+p),d):a},d.paddingOuter=function(p){return arguments.length?d.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):d.paddingTop()},d.paddingTop=function(p){return arguments.length?(s=typeof p=="function"?p:Af(+p),d):s},d.paddingRight=function(p){return arguments.length?(l=typeof p=="function"?p:Af(+p),d):l},d.paddingBottom=function(p){return arguments.length?(c=typeof p=="function"?p:Af(+p),d):c},d.paddingLeft=function(p){return arguments.length?(f=typeof p=="function"?p:Af(+p),d):f},d}function yue(e,t,n,i,r){var a=e.children,s,l=a.length,c,f=new Array(l+1);for(f[0]=c=s=0;s<l;++s)f[s+1]=c+=a[s].value;d(0,l,e.value,t,n,i,r);function d(g,p,y,v,b,S,_){if(g>=p-1){var w=a[g];w.x0=v,w.y0=b,w.x1=S,w.y1=_;return}for(var A=f[g],$=y/2+A,M=g+1,k=p-1;M<k;){var T=M+k>>>1;f[T]<$?M=T+1:k=T}$-f[M-1]<f[M]-$&&g+1<M&&--M;var D=f[M]-A,R=y-D;if(S-v>_-b){var B=y?(v*R+S*D)/y:S;d(g,M,D,v,b,B,_),d(M,p,R,B,b,S,_)}else{var U=y?(b*R+_*D)/y:_;d(g,M,D,v,b,S,U),d(M,p,R,v,U,S,_)}}}function vue(e,t,n,i,r){(e.depth&1?Ob:nm)(e,t,n,i,r)}const bue=(function e(t){function n(i,r,a,s,l){if((c=i._squarify)&&c.ratio===t)for(var c,f,d,g,p=-1,y,v=c.length,b=i.value;++p<v;){for(f=c[p],d=f.children,g=f.value=0,y=d.length;g<y;++g)f.value+=d[g].value;f.dice?nm(f,r,a,s,b?a+=(l-a)*f.value/b:l):Ob(f,r,a,b?r+=(s-r)*f.value/b:s,l),b-=f.value}else i._squarify=c=yq(t,i,r,a,s,l),c.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n})(mq);function cA(e,t,n){const i={};return e.each(r=>{const a=r.data;n(a)&&(i[t(a)]=r)}),e.lookup=i,e}function dT(e){te.call(this,null,e)}dT.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const xue=e=>e.values;be(dT,te,{transform(e,t){t.source||ae("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),a=this.value;return(!a||i||t.changed())&&(a&&a.each(s=>{s.children&&Gv(s.data)&&r.rem.push(s.data)}),this.value=a=fT({values:_e(e.keys).reduce((s,l)=>(s.key(l),s),Sue()).entries(r.source)},xue),n&&a.each(s=>{s.children&&(s=gt(s.data),r.add.push(s),r.source.push(s))}),cA(a,Oe,Oe)),r.source.root=a,r}});function Sue(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,a){if(a>=e.length)return r;const s=r.length,l=e[a++],c={},f={};let d=-1,g,p,y;for(;++d<s;)g=l(p=r[d])+"",(y=c[g])?y.push(p):c[g]=[p];for(g in c)f[g]=n(c[g],a);return f}function i(r,a){if(++a>e.length)return r;const s=[];for(const l in r)s.push({key:l,values:i(r[l],a)});return s}return t}function uo(e){te.call(this,null,e)}const Eue=(e,t)=>e.parent===t.parent?1:2;be(uo,te,{transform(e,t){(!t.source||!t.source.root)&&ae(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,a=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(dc(e.sort,s=>s.data)),_ue(n,this.params,e),n.separation&&n.separation(e.separation!==!1?Eue:Cd);try{this.value=n(r)}catch(s){ae(s)}return r.each(s=>wue(s,i,a)),t.reflow(e.modified()).modifies(a).modifies("leaf")}});function _ue(e,t,n){for(let i,r=0,a=t.length;r<a;++r)i=t[r],i in n&&e[i](n[i])}function wue(e,t,n){const i=e.data,r=t.length-1;for(let a=0;a<r;++a)i[n[a]]=e[t[a]];i[n[r]]=e.children?e.children.length:0}const fA=["x","y","r","depth","children"];function hT(e){uo.call(this,e)}hT.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:fA.length,default:fA}]};be(hT,uo,{layout:rue,params:["radius","size","padding"],fields:fA});const dA=["x0","y0","x1","y1","depth","children"];function gT(e){uo.call(this,e)}gT.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:dA.length,default:dA}]};be(gT,uo,{layout:aue,params:["size","round","padding"],fields:dA});function pT(e){te.call(this,null,e)}pT.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};be(pT,te,{transform(e,t){t.source||ae("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),a=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),a&&(n=r.source.length?cA(D4().id(e.key).parentId(e.parentKey)(r.source),e.key,Fr):cA(D4()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const z4={tidy:pue,cluster:$le},hA=["x","y","depth","children"];function mT(e){uo.call(this,e)}mT.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:hA.length,default:hA}]};be(mT,uo,{layout(e){const t=e||"tidy";if(we(z4,t))return z4[t]();ae("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:hA});function yT(e){te.call(this,[],e)}yT.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};be(yT,te,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),a={};return i||ae("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,s=>a[Oe(s)]=1),i.each(s=>{const l=s.data,c=s.parent&&s.parent.data;c&&a[Oe(l)]&&a[Oe(c)]&&r.add.push(gt({source:c,target:l}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>a[Oe(s)]=1),n.forEach(s=>{(a[Oe(s.source)]||a[Oe(s.target)])&&r.mod.push(s)})),r}});const F4={binary:yue,dice:nm,slice:Ob,slicedice:vue,squarify:vq,resquarify:bue},gA=["x0","y0","x1","y1","depth","children"];function vT(e){uo.call(this,e)}vT.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:gA.length,default:gA}]};be(vT,uo,{layout(){const e=mue();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{we(F4,t)?e.tile(F4[t]):ae("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:gA});const Aue=Object.freeze(Object.defineProperty({__proto__:null,nest:dT,pack:hT,partition:gT,stratify:pT,tree:mT,treelinks:yT,treemap:vT},Symbol.toStringTag,{value:"Module"})),YE=4278190080;function Cue(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function $ue(e,t,n,i,r){const a=e.width,s=e.height,l=i||r,c=fl(a,s).getContext("2d"),f=fl(a,s).getContext("2d"),d=l&&fl(a,s).getContext("2d");n.forEach(D=>H1(c,D,!1)),H1(f,t,!1),l&&H1(d,t,!0);const g=XE(c,a,s),p=XE(f,a,s),y=l&&XE(d,a,s),v=e.bitmap(),b=l&&e.bitmap();let S,_,w,A,$,M,k,T;for(_=0;_<s;++_)for(S=0;S<a;++S)$=_*a+S,M=g[$]&YE,T=p[$]&YE,k=l&&y[$]&YE,(M||k||T)&&(w=e(S),A=e(_),!r&&(M||T)&&v.set(w,A),l&&(M||k)&&b.set(w,A));return[v,b]}function XE(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function H1(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(r=>{r.items.forEach(a=>H1(e,a.items,n))}):hr[i].draw(e,{items:n?t.map(Tue):t})}function Tue(e){const t=Yv(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const zs=5,si=31,yp=32,Qo=new Uint32Array(yp+1),ta=new Uint32Array(yp+1);ta[0]=0;Qo[0]=~ta[0];for(let e=1;e<=yp;++e)ta[e]=ta[e-1]<<1|1,Qo[e]=~ta[e];function Mue(e,t){const n=new Uint32Array(~~((e*t+yp)/yp));function i(a,s){n[a]|=s}function r(a,s){n[a]&=s}return{array:n,get:(a,s)=>{const l=s*e+a;return n[l>>>zs]&1<<(l&si)},set:(a,s)=>{const l=s*e+a;i(l>>>zs,1<<(l&si))},clear:(a,s)=>{const l=s*e+a;r(l>>>zs,~(1<<(l&si)))},getRange:(a,s,l,c)=>{let f=c,d,g,p,y;for(;f>=s;--f)if(d=f*e+a,g=f*e+l,p=d>>>zs,y=g>>>zs,p===y){if(n[p]&Qo[d&si]&ta[(g&si)+1])return!0}else{if(n[p]&Qo[d&si]||n[y]&ta[(g&si)+1])return!0;for(let v=p+1;v<y;++v)if(n[v])return!0}return!1},setRange:(a,s,l,c)=>{let f,d,g,p,y;for(;s<=c;++s)if(f=s*e+a,d=s*e+l,g=f>>>zs,p=d>>>zs,g===p)i(g,Qo[f&si]&ta[(d&si)+1]);else for(i(g,Qo[f&si]),i(p,ta[(d&si)+1]),y=g+1;y<p;++y)i(y,4294967295)},clearRange:(a,s,l,c)=>{let f,d,g,p,y;for(;s<=c;++s)if(f=s*e+a,d=s*e+l,g=f>>>zs,p=d>>>zs,g===p)r(g,ta[f&si]|Qo[(d&si)+1]);else for(r(g,ta[f&si]),r(p,Qo[(d&si)+1]),y=g+1;y<p;++y)r(y,0)},outOfBounds:(a,s,l,c)=>a<0||s<0||c>=t||l>=e}}function kue(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),a=~~((t+2*n+i)/i),s=l=>~~((l+n)/i);return s.invert=l=>l*i-n,s.bitmap=()=>Mue(r,a),s.ratio=i,s.padding=n,s.width=e,s.height=t,s}function Oue(e,t,n,i){const r=e.width,a=e.height;return function(s){const l=s.datum.datum.items[i].items,c=l.length,f=s.datum.fontSize,d=or.width(s.datum,s.datum.text);let g=0,p,y,v,b,S,_,w;for(let A=0;A<c;++A)p=l[A].x,v=l[A].y,y=l[A].x2===void 0?p:l[A].x2,b=l[A].y2===void 0?v:l[A].y2,S=(p+y)/2,_=(v+b)/2,w=Math.abs(y-p+b-v),w>=g&&(g=w,s.x=S,s.y=_);return S=d/2,_=f/2,p=s.x-S,y=s.x+S,v=s.y-_,b=s.y+_,s.align="center",p<0&&y<=r?s.align="left":0<=p&&r<y&&(s.align="right"),s.baseline="middle",v<0&&b<=a?s.baseline="top":0<=v&&a<b&&(s.baseline="bottom"),!0}}function ov(e,t,n,i,r,a){let s=n/2;return e-s<0||e+s>r||t-(s=i/2)<0||t+s>a}function sl(e,t,n,i,r,a,s,l){const c=r*a/(i*2),f=e(t-c),d=e(t+c),g=e(n-(a=a/2)),p=e(n+a);return s.outOfBounds(f,g,d,p)||s.getRange(f,g,d,p)||l&&l.getRange(f,g,d,p)}function Nue(e,t,n,i){const r=e.width,a=e.height,s=t[0],l=t[1];function c(f,d,g,p,y){const v=e.invert(f),b=e.invert(d);let S=g,_=a,w;if(!ov(v,b,p,y,r,a)&&!sl(e,v,b,y,p,S,s,l)&&!sl(e,v,b,y,p,y,s,null)){for(;_-S>=1;)w=(S+_)/2,sl(e,v,b,y,p,w,s,l)?_=w:S=w;if(S>g)return[v,b,S,!0]}}return function(f){const d=f.datum.datum.items[i].items,g=d.length,p=f.datum.fontSize,y=or.width(f.datum,f.datum.text);let v=n?p:0,b=!1,S=!1,_=0,w,A,$,M,k,T,D,R,B,U,Q,Y,P,z,N,j,X;for(let K=0;K<g;++K){for(w=d[K].x,$=d[K].y,A=d[K].x2===void 0?w:d[K].x2,M=d[K].y2===void 0?$:d[K].y2,w>A&&(X=w,w=A,A=X),$>M&&(X=$,$=M,M=X),B=e(w),Q=e(A),U=~~((B+Q)/2),Y=e($),z=e(M),P=~~((Y+z)/2),D=U;D>=B;--D)for(R=P;R>=Y;--R)j=c(D,R,v,y,p),j&&([f.x,f.y,v,b]=j);for(D=U;D<=Q;++D)for(R=P;R<=z;++R)j=c(D,R,v,y,p),j&&([f.x,f.y,v,b]=j);!b&&!n&&(N=Math.abs(A-w+M-$),k=(w+A)/2,T=($+M)/2,N>=_&&!ov(k,T,y,p,r,a)&&!sl(e,k,T,p,y,p,s,null)&&(_=N,f.x=k,f.y=T,S=!0))}return b||S?(k=y/2,T=p/2,s.setRange(e(f.x-k),e(f.y-T),e(f.x+k),e(f.y+T)),f.align="center",f.baseline="middle",!0):!1}}const Due=[-1,-1,1,1],Rue=[-1,1,-1,1];function zue(e,t,n,i){const r=e.width,a=e.height,s=t[0],l=t[1],c=e.bitmap();return function(f){const d=f.datum.datum.items[i].items,g=d.length,p=f.datum.fontSize,y=or.width(f.datum,f.datum.text),v=[];let b=n?p:0,S=!1,_=!1,w=0,A,$,M,k,T,D,R,B,U,Q,Y,P;for(let z=0;z<g;++z){for(A=d[z].x,M=d[z].y,$=d[z].x2===void 0?A:d[z].x2,k=d[z].y2===void 0?M:d[z].y2,v.push([e((A+$)/2),e((M+k)/2)]);v.length;)if([R,B]=v.pop(),!(s.get(R,B)||l.get(R,B)||c.get(R,B))){c.set(R,B);for(let N=0;N<4;++N)T=R+Due[N],D=B+Rue[N],c.outOfBounds(T,D,T,D)||v.push([T,D]);if(T=e.invert(R),D=e.invert(B),U=b,Q=a,!ov(T,D,y,p,r,a)&&!sl(e,T,D,p,y,U,s,l)&&!sl(e,T,D,p,y,p,s,null)){for(;Q-U>=1;)Y=(U+Q)/2,sl(e,T,D,p,y,Y,s,l)?Q=Y:U=Y;U>b&&(f.x=T,f.y=D,b=U,S=!0)}}!S&&!n&&(P=Math.abs($-A+k-M),T=(A+$)/2,D=(M+k)/2,P>=w&&!ov(T,D,y,p,r,a)&&!sl(e,T,D,p,y,p,s,null)&&(w=P,f.x=T,f.y=D,_=!0))}return S||_?(T=y/2,D=p/2,s.setRange(e(f.x-T),e(f.y-D),e(f.x+T),e(f.y+D)),f.align="center",f.baseline="middle",!0):!1}}const Fue=["right","center","left"],Lue=["bottom","middle","top"];function Uue(e,t,n,i){const r=e.width,a=e.height,s=t[0],l=t[1],c=i.length;return function(f){const d=f.boundary,g=f.datum.fontSize;if(d[2]<0||d[5]<0||d[0]>r||d[3]>a)return!1;let p=f.textWidth??0,y,v,b,S,_,w,A,$,M,k,T,D,R,B,U;for(let Q=0;Q<c;++Q){if(y=(n[Q]&3)-1,v=(n[Q]>>>2&3)-1,b=y===0&&v===0||i[Q]<0,S=y&&v?Math.SQRT1_2:1,_=i[Q]<0?-1:1,w=d[1+y]+i[Q]*y*S,T=d[4+v]+_*g*v/2+i[Q]*v*S,$=T-g/2,M=T+g/2,D=e(w),B=e($),U=e(M),!p)if(L4(D,D,B,U,s,l,w,w,$,M,d,b))p=or.width(f.datum,f.datum.text);else continue;if(k=w+_*p*y/2,w=k-p/2,A=k+p/2,D=e(w),R=e(A),L4(D,R,B,U,s,l,w,A,$,M,d,b))return f.x=y?y*_<0?A:w:k,f.y=v?v*_<0?M:$:T,f.align=Fue[y*_+1],f.baseline=Lue[v*_+1],s.setRange(D,B,R,U),!0}return!1}}function L4(e,t,n,i,r,a,s,l,c,f,d,g){return!(r.outOfBounds(e,n,t,i)||(g&&a||r).getRange(e,n,t,i))}const VE=0,WE=4,QE=8,ZE=0,KE=1,JE=2,Bue={"top-left":VE+ZE,top:VE+KE,"top-right":VE+JE,left:WE+ZE,middle:WE+KE,right:WE+JE,"bottom-left":QE+ZE,bottom:QE+KE,"bottom-right":QE+JE},jue={naive:Oue,"reduced-search":Nue,floodfill:zue};function que(e,t,n,i,r,a,s,l,c,f,d){if(!e.length)return e;const g=Math.max(i.length,r.length),p=Iue(i,g),y=Pue(r,g),v=Hue(e[0].datum),b=v==="group"&&e[0].datum.items[c].marktype,S=b==="area",_=Gue(v,b,l,c),w=f===null||f===1/0,A=S&&d==="naive";let $=-1,M=-1;const k=e.map(B=>{const U=w?or.width(B,B.text):void 0;return $=Math.max($,U),M=Math.max(M,B.fontSize),{datum:B,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:_(B),textWidth:U}});f=f===null||f===1/0?Math.max($,M)+Math.max(...i):f;const T=kue(t[0],t[1],f);let D;if(!A){n&&k.sort((Q,Y)=>n(Q.datum,Y.datum));let B=!1;for(let Q=0;Q<y.length&&!B;++Q)B=y[Q]===5||p[Q]<0;const U=(v&&s||S)&&e.map(Q=>Q.datum);D=a.length||U?$ue(T,U||[],a,B,S):Cue(T,s&&k)}const R=S?jue[d](T,D,s,c):Uue(T,D,y,p);return k.forEach(B=>B.opacity=+R(B)),k}function Iue(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}function Pue(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=Bue[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}function Hue(e){return e&&e.mark&&e.mark.marktype}function Gue(e,t,n,i){const r=a=>[a.x,a.x,a.x,a.y,a.y,a.y];return e?e==="line"||e==="area"?a=>r(a.datum):t==="line"?a=>{const s=a.datum.items[i].items;return r(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:a=>{const s=a.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:r}const pA=["x","y","opacity","align","baseline"],bq=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function bT(e){te.call(this,null,e)}bT.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:bq},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:pA.length,default:pA}]};be(bT,te,{transform(e,t){function n(a){const s=e[a];return Ge(s)&&t.modified(s.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&ae("Size parameter should be specified as a [width, height] array.");const r=e.as||pA;return que(t.materialize(t.SOURCE).source||[],e.size,e.sort,_e(e.offset==null?1:e.offset),_e(e.anchor||bq),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(a=>{const s=a.datum;s[r[0]]=a.x,s[r[1]]=a.y,s[r[2]]=a.opacity,s[r[3]]=a.align,s[r[4]]=a.baseline}),t.reflow(i).modifies(r)}});const Yue=Object.freeze(Object.defineProperty({__proto__:null,label:bT},Symbol.toStringTag,{value:"Module"}));function xq(e,t){var n=[],i=function(d){return d(l)},r,a,s,l,c,f;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)l=e[a],c=t.map(i),f=r[c],f||(r[c]=f=[],f.dims=c,n.push(f)),f.push(l);return n}function xT(e){te.call(this,null,e)}xT.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};be(xT,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=xq(i,e.groupby),a=(e.groupby||[]).map(Vt),s=a.length,l=e.as||[Vt(e.x),Vt(e.y)],c=[];r.forEach(f=>{T7(f,e.x,e.y,e.bandwidth||.3).forEach(d=>{const g={};for(let p=0;p<s;++p)g[a[p]]=f.dims[p];g[l[0]]=d[0],g[l[1]]=d[1],c.push(gt(g))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});const mA={constant:t$,linear:n$,log:w7,exp:A7,pow:C7,quad:i$,poly:$7},Xue=(e,t)=>e==="poly"?t:e==="quad"?2:1;function ST(e){te.call(this,null,e)}ST.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(mA)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};be(ST,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=xq(i,e.groupby),a=(e.groupby||[]).map(Vt),s=e.method||"linear",l=e.order==null?3:e.order,c=Xue(s,l),f=e.as||[Vt(e.x),Vt(e.y)],d=mA[s],g=[];let p=e.extent;we(mA,s)||ae("Invalid regression method: "+s),p!=null&&s==="log"&&p[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),r.forEach(y=>{if(y.length<=c){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const b=d(y,e.x,e.y,l);if(e.params){g.push(gt({keys:y.dims,coef:b.coef,rSquared:b.rSquared}));return}const S=p||Xa(y,e.x),_=w=>{const A={};for(let $=0;$<a.length;++$)A[a[$]]=y.dims[$];A[f[0]]=w[0],A[f[1]]=w[1],g.push(gt(A))};s==="linear"||s==="constant"?S.forEach(w=>_([w,b.predict(w)])):Jv(b.predict,S,25,200).forEach(_)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=g}return n}});const Vue=Object.freeze(Object.defineProperty({__proto__:null,loess:xT,regression:ST},Symbol.toStringTag,{value:"Module"})),Qs=11102230246251565e-32,Yn=134217729,Wue=(3+8*Qs)*Qs;function e_(e,t,n,i,r){let a,s,l,c,f=t[0],d=i[0],g=0,p=0;d>f==d>-f?(a=f,f=t[++g]):(a=d,d=i[++p]);let y=0;if(g<e&&p<n)for(d>f==d>-f?(s=f+a,l=a-(s-f),f=t[++g]):(s=d+a,l=a-(s-d),d=i[++p]),a=s,l!==0&&(r[y++]=l);g<e&&p<n;)d>f==d>-f?(s=a+f,c=s-a,l=a-(s-c)+(f-c),f=t[++g]):(s=a+d,c=s-a,l=a-(s-c)+(d-c),d=i[++p]),a=s,l!==0&&(r[y++]=l);for(;g<e;)s=a+f,c=s-a,l=a-(s-c)+(f-c),f=t[++g],a=s,l!==0&&(r[y++]=l);for(;p<n;)s=a+d,c=s-a,l=a-(s-c)+(d-c),d=i[++p],a=s,l!==0&&(r[y++]=l);return(a!==0||y===0)&&(r[y++]=a),y}function Que(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function im(e){return new Float64Array(e)}const Zue=(3+16*Qs)*Qs,Kue=(2+12*Qs)*Qs,Jue=(9+64*Qs)*Qs*Qs,bf=im(4),U4=im(8),B4=im(12),j4=im(16),oi=im(4);function ece(e,t,n,i,r,a,s){let l,c,f,d,g,p,y,v,b,S,_,w,A,$,M,k,T,D;const R=e-r,B=n-r,U=t-a,Q=i-a;$=R*Q,p=Yn*R,y=p-(p-R),v=R-y,p=Yn*Q,b=p-(p-Q),S=Q-b,M=v*S-($-y*b-v*b-y*S),k=U*B,p=Yn*U,y=p-(p-U),v=U-y,p=Yn*B,b=p-(p-B),S=B-b,T=v*S-(k-y*b-v*b-y*S),_=M-T,g=M-_,bf[0]=M-(_+g)+(g-T),w=$+_,g=w-$,A=$-(w-g)+(_-g),_=A-k,g=A-_,bf[1]=A-(_+g)+(g-k),D=w+_,g=D-w,bf[2]=w-(D-g)+(_-g),bf[3]=D;let Y=Que(4,bf),P=Kue*s;if(Y>=P||-Y>=P||(g=e-R,l=e-(R+g)+(g-r),g=n-B,f=n-(B+g)+(g-r),g=t-U,c=t-(U+g)+(g-a),g=i-Q,d=i-(Q+g)+(g-a),l===0&&c===0&&f===0&&d===0)||(P=Jue*s+Wue*Math.abs(Y),Y+=R*d+Q*l-(U*f+B*c),Y>=P||-Y>=P))return Y;$=l*Q,p=Yn*l,y=p-(p-l),v=l-y,p=Yn*Q,b=p-(p-Q),S=Q-b,M=v*S-($-y*b-v*b-y*S),k=c*B,p=Yn*c,y=p-(p-c),v=c-y,p=Yn*B,b=p-(p-B),S=B-b,T=v*S-(k-y*b-v*b-y*S),_=M-T,g=M-_,oi[0]=M-(_+g)+(g-T),w=$+_,g=w-$,A=$-(w-g)+(_-g),_=A-k,g=A-_,oi[1]=A-(_+g)+(g-k),D=w+_,g=D-w,oi[2]=w-(D-g)+(_-g),oi[3]=D;const z=e_(4,bf,4,oi,U4);$=R*d,p=Yn*R,y=p-(p-R),v=R-y,p=Yn*d,b=p-(p-d),S=d-b,M=v*S-($-y*b-v*b-y*S),k=U*f,p=Yn*U,y=p-(p-U),v=U-y,p=Yn*f,b=p-(p-f),S=f-b,T=v*S-(k-y*b-v*b-y*S),_=M-T,g=M-_,oi[0]=M-(_+g)+(g-T),w=$+_,g=w-$,A=$-(w-g)+(_-g),_=A-k,g=A-_,oi[1]=A-(_+g)+(g-k),D=w+_,g=D-w,oi[2]=w-(D-g)+(_-g),oi[3]=D;const N=e_(z,U4,4,oi,B4);$=l*d,p=Yn*l,y=p-(p-l),v=l-y,p=Yn*d,b=p-(p-d),S=d-b,M=v*S-($-y*b-v*b-y*S),k=c*f,p=Yn*c,y=p-(p-c),v=c-y,p=Yn*f,b=p-(p-f),S=f-b,T=v*S-(k-y*b-v*b-y*S),_=M-T,g=M-_,oi[0]=M-(_+g)+(g-T),w=$+_,g=w-$,A=$-(w-g)+(_-g),_=A-k,g=A-_,oi[1]=A-(_+g)+(g-k),D=w+_,g=D-w,oi[2]=w-(D-g)+(_-g),oi[3]=D;const j=e_(N,B4,4,oi,j4);return j4[j-1]}function c1(e,t,n,i,r,a){const s=(t-a)*(n-r),l=(e-r)*(i-a),c=s-l,f=Math.abs(s+l);return Math.abs(c)>=Zue*f?c:-ece(e,t,n,i,r,a,f)}const q4=Math.pow(2,-52),f1=new Uint32Array(512);class lv{static from(t,n=ace,i=sce){const r=t.length,a=new Float64Array(r*2);for(let s=0;s<r;s++){const l=t[s];a[2*s]=n(l),a[2*s+1]=i(l)}return new lv(a)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:a}=this,s=t.length>>1;let l=1/0,c=1/0,f=-1/0,d=-1/0;for(let R=0;R<s;R++){const B=t[2*R],U=t[2*R+1];B<l&&(l=B),U<c&&(c=U),B>f&&(f=B),U>d&&(d=U),this._ids[R]=R}const g=(l+f)/2,p=(c+d)/2;let y,v,b;for(let R=0,B=1/0;R<s;R++){const U=t_(g,p,t[2*R],t[2*R+1]);U<B&&(y=R,B=U)}const S=t[2*y],_=t[2*y+1];for(let R=0,B=1/0;R<s;R++){if(R===y)continue;const U=t_(S,_,t[2*R],t[2*R+1]);U<B&&U>0&&(v=R,B=U)}let w=t[2*v],A=t[2*v+1],$=1/0;for(let R=0;R<s;R++){if(R===y||R===v)continue;const B=ice(S,_,w,A,t[2*R],t[2*R+1]);B<$&&(b=R,$=B)}let M=t[2*b],k=t[2*b+1];if($===1/0){for(let U=0;U<s;U++)this._dists[U]=t[2*U]-t[0]||t[2*U+1]-t[1];Nf(this._ids,this._dists,0,s-1);const R=new Uint32Array(s);let B=0;for(let U=0,Q=-1/0;U<s;U++){const Y=this._ids[U],P=this._dists[Y];P>Q&&(R[B++]=Y,Q=P)}this.hull=R.subarray(0,B),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(c1(S,_,w,A,M,k)<0){const R=v,B=w,U=A;v=b,w=M,A=k,b=R,M=B,k=U}const T=rce(S,_,w,A,M,k);this._cx=T.x,this._cy=T.y;for(let R=0;R<s;R++)this._dists[R]=t_(t[2*R],t[2*R+1],T.x,T.y);Nf(this._ids,this._dists,0,s-1),this._hullStart=y;let D=3;i[y]=n[b]=v,i[v]=n[y]=b,i[b]=n[v]=y,r[y]=0,r[v]=1,r[b]=2,a.fill(-1),a[this._hashKey(S,_)]=y,a[this._hashKey(w,A)]=v,a[this._hashKey(M,k)]=b,this.trianglesLen=0,this._addTriangle(y,v,b,-1,-1,-1);for(let R=0,B,U;R<this._ids.length;R++){const Q=this._ids[R],Y=t[2*Q],P=t[2*Q+1];if(R>0&&Math.abs(Y-B)<=q4&&Math.abs(P-U)<=q4||(B=Y,U=P,Q===y||Q===v||Q===b))continue;let z=0;for(let fe=0,F=this._hashKey(Y,P);fe<this._hashSize&&(z=a[(F+fe)%this._hashSize],!(z!==-1&&z!==i[z]));fe++);z=n[z];let N=z,j;for(;j=i[N],c1(Y,P,t[2*N],t[2*N+1],t[2*j],t[2*j+1])>=0;)if(N=j,N===z){N=-1;break}if(N===-1)continue;let X=this._addTriangle(N,Q,i[N],-1,-1,r[N]);r[Q]=this._legalize(X+2),r[N]=X,D++;let K=i[N];for(;j=i[K],c1(Y,P,t[2*K],t[2*K+1],t[2*j],t[2*j+1])<0;)X=this._addTriangle(K,Q,j,r[Q],-1,r[K]),r[Q]=this._legalize(X+2),i[K]=K,D--,K=j;if(N===z)for(;j=n[N],c1(Y,P,t[2*j],t[2*j+1],t[2*N],t[2*N+1])<0;)X=this._addTriangle(j,Q,N,-1,r[N],r[j]),this._legalize(X+2),r[j]=X,i[N]=N,D--,N=j;this._hullStart=n[Q]=N,i[N]=n[K]=Q,i[Q]=K,a[this._hashKey(Y,P)]=Q,a[this._hashKey(t[2*N],t[2*N+1])]=N}this.hull=new Uint32Array(D);for(let R=0,B=this._hullStart;R<D;R++)this.hull[R]=B,B=i[B];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(tce(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let a=0,s=0;for(;;){const l=i[t],c=t-t%3;if(s=c+(t+2)%3,l===-1){if(a===0)break;t=f1[--a];continue}const f=l-l%3,d=c+(t+1)%3,g=f+(l+2)%3,p=n[s],y=n[t],v=n[d],b=n[g];if(nce(r[2*p],r[2*p+1],r[2*y],r[2*y+1],r[2*v],r[2*v+1],r[2*b],r[2*b+1])){n[t]=b,n[l]=p;const _=i[g];if(_===-1){let A=this._hullStart;do{if(this._hullTri[A]===g){this._hullTri[A]=t;break}A=this._hullPrev[A]}while(A!==this._hullStart)}this._link(t,_),this._link(l,i[s]),this._link(s,g);const w=f+(l+1)%3;a<f1.length&&(f1[a++]=w)}else{if(a===0)break;t=f1[--a]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,a,s){const l=this.trianglesLen;return this._triangles[l]=t,this._triangles[l+1]=n,this._triangles[l+2]=i,this._link(l,r),this._link(l+1,a),this._link(l+2,s),this.trianglesLen+=3,l}}function tce(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function t_(e,t,n,i){const r=e-n,a=t-i;return r*r+a*a}function nce(e,t,n,i,r,a,s,l){const c=e-s,f=t-l,d=n-s,g=i-l,p=r-s,y=a-l,v=c*c+f*f,b=d*d+g*g,S=p*p+y*y;return c*(g*S-b*y)-f*(d*S-b*p)+v*(d*y-g*p)<0}function ice(e,t,n,i,r,a){const s=n-e,l=i-t,c=r-e,f=a-t,d=s*s+l*l,g=c*c+f*f,p=.5/(s*f-l*c),y=(f*d-l*g)*p,v=(s*g-c*d)*p;return y*y+v*v}function rce(e,t,n,i,r,a){const s=n-e,l=i-t,c=r-e,f=a-t,d=s*s+l*l,g=c*c+f*f,p=.5/(s*f-l*c),y=e+(f*d-l*g)*p,v=t+(s*g-c*d)*p;return{x:y,y:v}}function Nf(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const a=e[r],s=t[a];let l=r-1;for(;l>=n&&t[e[l]]>s;)e[l+1]=e[l--];e[l+1]=a}else{const r=n+i>>1;let a=n+1,s=i;og(e,r,a),t[e[n]]>t[e[i]]&&og(e,n,i),t[e[a]]>t[e[i]]&&og(e,a,i),t[e[n]]>t[e[a]]&&og(e,n,a);const l=e[a],c=t[l];for(;;){do a++;while(t[e[a]]<c);do s--;while(t[e[s]]>c);if(s<a)break;og(e,a,s)}e[n+1]=e[s],e[s]=l,i-a+1>=s-n?(Nf(e,t,a,i),Nf(e,t,n,s-1)):(Nf(e,t,n,s-1),Nf(e,t,a,i))}}function og(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function ace(e){return e[0]}function sce(e){return e[1]}const I4=1e-6;class ku{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,a=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${a}`:(Math.abs(this._x1-r)>I4||Math.abs(this._y1-a)>I4)&&(this._+="L"+r+","+a),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=a}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class yA{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let oce=class{constructor(t,[n,i,r,a]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((a=+a)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=a,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let a,s;const l=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let b=0,S=0,_=i.length,w,A;b<_;b+=3,S+=2){const $=i[b]*2,M=i[b+1]*2,k=i[b+2]*2,T=t[$],D=t[$+1],R=t[M],B=t[M+1],U=t[k],Q=t[k+1],Y=R-T,P=B-D,z=U-T,N=Q-D,j=(Y*N-P*z)*2;if(Math.abs(j)<1e-9){if(a===void 0){a=s=0;for(const K of n)a+=t[K*2],s+=t[K*2+1];a/=n.length,s/=n.length}const X=1e9*Math.sign((a-T)*N-(s-D)*z);w=(T+U)/2-X*N,A=(D+Q)/2+X*z}else{const X=1/j,K=Y*Y+P*P,fe=z*z+N*N;w=T+(N*K-P*fe)*X,A=D+(Y*fe-z*K)*X}l[S]=w,l[S+1]=A}let c=n[n.length-1],f,d=c*4,g,p=t[2*c],y,v=t[2*c+1];r.fill(0);for(let b=0;b<n.length;++b)c=n[b],f=d,g=p,y=v,d=c*4,p=t[2*c],v=t[2*c+1],r[f+2]=r[d]=y-v,r[f+3]=r[d+1]=p-g}render(t){const n=t==null?t=new ku:void 0,{delaunay:{halfedges:i,inedges:r,hull:a},circumcenters:s,vectors:l}=this;if(a.length<=1)return null;for(let d=0,g=i.length;d<g;++d){const p=i[d];if(p<d)continue;const y=Math.floor(d/3)*2,v=Math.floor(p/3)*2,b=s[y],S=s[y+1],_=s[v],w=s[v+1];this._renderSegment(b,S,_,w,t)}let c,f=a[a.length-1];for(let d=0;d<a.length;++d){c=f,f=a[d];const g=Math.floor(r[f]/3)*2,p=s[g],y=s[g+1],v=c*4,b=this._project(p,y,l[v+2],l[v+3]);b&&this._renderSegment(p,y,b[0],b[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new ku:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new ku:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let a=r.length;for(;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(r[s]!==r[s-2]||r[s+1]!==r[s-1])&&n.lineTo(r[s],r[s+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new yA;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,a){let s;const l=this._regioncode(t,n),c=this._regioncode(i,r);l===0&&c===0?(a.moveTo(t,n),a.lineTo(i,r)):(s=this._clipSegment(t,n,i,r,l,c))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){e:for(let a=0,s=n.length;a<s;a+=2)for(let l=0,c=r.length;l<c;l+=2)if(n[a]===r[l]&&n[a+1]===r[l+1]&&n[(a+2)%s]===r[(l+c-2)%c]&&n[(a+3)%s]===r[(l+c-1)%c]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:a}}=this,s=i[t];if(s===-1)return null;const l=[];let c=s;do{const f=Math.floor(c/3);if(l.push(n[f*2],n[f*2+1]),c=c%3===2?c-2:c+1,a[c]!==t)break;c=r[c]}while(c!==s&&c!==-1);return l}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,a,s,l=n[i-2],c=n[i-1],f,d=this._regioncode(l,c),g,p=0;for(let y=0;y<i;y+=2)if(a=l,s=c,l=n[y],c=n[y+1],f=d,d=this._regioncode(l,c),f===0&&d===0)g=p,p=0,r?r.push(l,c):r=[l,c];else{let v,b,S,_,w;if(f===0){if((v=this._clipSegment(a,s,l,c,f,d))===null)continue;[b,S,_,w]=v}else{if((v=this._clipSegment(l,c,a,s,d,f))===null)continue;[_,w,b,S]=v,g=p,p=this._edgecode(b,S),g&&p&&this._edge(t,g,p,r,r.length),r?r.push(b,S):r=[b,S]}g=p,p=this._edgecode(_,w),g&&p&&this._edge(t,g,p,r,r.length),r?r.push(_,w):r=[_,w]}if(r)g=p,p=this._edgecode(r[0],r[1]),g&&p&&this._edge(t,g,p,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,a,s){const l=a<s;for(l&&([t,n,i,r,a,s]=[i,r,t,n,s,a]);;){if(a===0&&s===0)return l?[i,r,t,n]:[t,n,i,r];if(a&s)return null;let c,f,d=a||s;d&8?(c=t+(i-t)*(this.ymax-n)/(r-n),f=this.ymax):d&4?(c=t+(i-t)*(this.ymin-n)/(r-n),f=this.ymin):d&2?(f=n+(r-n)*(this.xmax-t)/(i-t),c=this.xmax):(f=n+(r-n)*(this.xmin-t)/(i-t),c=this.xmin),a?(t=c,n=f,a=this._regioncode(t,n)):(i=c,r=f,s=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,a,s){let l=Array.from(n),c;if((c=this._project(l[0],l[1],i,r))&&l.unshift(c[0],c[1]),(c=this._project(l[l.length-2],l[l.length-1],a,s))&&l.push(c[0],c[1]),l=this._clipFinite(t,l))for(let f=0,d=l.length,g,p=this._edgecode(l[d-2],l[d-1]);f<d;f+=2)g=p,p=this._edgecode(l[f],l[f+1]),g&&p&&(f=this._edge(t,g,p,l,f),d=l.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(l=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return l}_edge(t,n,i,r,a){for(;n!==i;){let s,l;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,l=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,l=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,l=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,l=this.ymin;break}(r[a]!==s||r[a+1]!==l)&&this.contains(t,s,l)&&(r.splice(a,0,s,l),a+=2)}return a}_project(t,n,i,r){let a=1/0,s,l,c;if(r<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/r)<a&&(c=this.ymin,l=t+(a=s)*i)}else if(r>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/r)<a&&(c=this.ymax,l=t+(a=s)*i)}if(i>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/i)<a&&(l=this.xmax,c=n+(a=s)*r)}else if(i<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/i)<a&&(l=this.xmin,c=n+(a=s)*r)}return[l,c]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const lce=2*Math.PI,xf=Math.pow;function uce(e){return e[0]}function cce(e){return e[1]}function fce(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],a=2*t[i+1],s=2*t[i+2];if((n[s]-n[r])*(n[a+1]-n[r+1])-(n[a]-n[r])*(n[s+1]-n[r+1])>1e-10)return!1}return!0}function dce(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class ET{static from(t,n=uce,i=cce,r){return new ET("length"in t?hce(t,n,i,r):Float64Array.from(gce(t,n,i,r)))}constructor(t){this._delaunator=new lv(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&fce(t)){this.collinear=Int32Array.from({length:n.length/2},(p,y)=>y).sort((p,y)=>n[2*p]-n[2*y]||n[2*p+1]-n[2*y+1]);const c=this.collinear[0],f=this.collinear[this.collinear.length-1],d=[n[2*c],n[2*c+1],n[2*f],n[2*f+1]],g=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let p=0,y=n.length/2;p<y;++p){const v=dce(n[2*p],n[2*p+1],g);n[2*p]=v[0],n[2*p+1]=v[1]}this._delaunator=new lv(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),l=this._hullIndex.fill(-1);for(let c=0,f=i.length;c<f;++c){const d=a[c%3===2?c-2:c+1];(i[c]===-1||s[d]===-1)&&(s[d]=c)}for(let c=0,f=r.length;c<f;++c)l[r[c]]=c;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],s[r[0]]=1,r.length===2&&(s[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new oce(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:a,triangles:s,collinear:l}=this;if(l){const g=l.indexOf(t);g>0&&(yield l[g-1]),g<l.length-1&&(yield l[g+1]);return}const c=n[t];if(c===-1)return;let f=c,d=-1;do{if(yield d=s[f],f=f%3===2?f-2:f+1,s[f]!==t)return;if(f=a[f],f===-1){const g=i[(r[t]+1)%i.length];g!==d&&(yield g);return}}while(f!==c)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let a;for(;(a=this._step(i,t,n))>=0&&a!==i&&a!==r;)i=a;return a}_step(t,n,i){const{inedges:r,hull:a,_hullIndex:s,halfedges:l,triangles:c,points:f}=this;if(r[t]===-1||!f.length)return(t+1)%(f.length>>1);let d=t,g=xf(n-f[t*2],2)+xf(i-f[t*2+1],2);const p=r[t];let y=p;do{let v=c[y];const b=xf(n-f[v*2],2)+xf(i-f[v*2+1],2);if(b<g&&(g=b,d=v),y=y%3===2?y-2:y+1,c[y]!==t)break;if(y=l[y],y===-1){if(y=a[(s[t]+1)%a.length],y!==v&&xf(n-f[y*2],2)+xf(i-f[y*2+1],2)<g)return y;break}}while(y!==p);return d}render(t){const n=t==null?t=new ku:void 0,{points:i,halfedges:r,triangles:a}=this;for(let s=0,l=r.length;s<l;++s){const c=r[s];if(c<s)continue;const f=a[s]*2,d=a[c]*2;t.moveTo(i[f],i[f+1]),t.lineTo(i[d],i[d+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new ku:void 0,{points:r}=this;for(let a=0,s=r.length;a<s;a+=2){const l=r[a],c=r[a+1];t.moveTo(l+n,c),t.arc(l,c,n,0,lce)}return i&&i.value()}renderHull(t){const n=t==null?t=new ku:void 0,{hull:i,points:r}=this,a=i[0]*2,s=i.length;t.moveTo(r[a],r[a+1]);for(let l=1;l<s;++l){const c=2*i[l];t.lineTo(r[c],r[c+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new yA;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new ku:void 0,{points:r,triangles:a}=this,s=a[t*=3]*2,l=a[t+1]*2,c=a[t+2]*2;return n.moveTo(r[s],r[s+1]),n.lineTo(r[l],r[l+1]),n.lineTo(r[c],r[c+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new yA;return this.renderTriangle(t,n),n.value()}}function hce(e,t,n,i){const r=e.length,a=new Float64Array(r*2);for(let s=0;s<r;++s){const l=e[s];a[s*2]=t.call(i,l,s,e),a[s*2+1]=n.call(i,l,s,e)}return a}function*gce(e,t,n,i){let r=0;for(const a of e)yield t.call(i,a,r,e),yield n.call(i,a,r,e),++r}function _T(e){te.call(this,null,e)}_T.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const pce=[-1e5,-1e5,1e5,1e5];be(_T,te,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:pce;const a=this.value=ET.from(i,e.x,e.y).voronoi(r);for(let s=0,l=i.length;s<l;++s){const c=a.cellPolygon(s);i[s][n]=c&&!yce(c)?mce(c):null}return t.reflow(e.modified()).modifies(n)}});function mce(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function yce(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const vce=Object.freeze(Object.defineProperty({__proto__:null,voronoi:_T},Symbol.toStringTag,{value:"Module"}));var n_=Math.PI/180,Ug=64,G1=2048;function bce(){var e=[256,256],t,n,i,r,a,s,l,c=Sq,f=[],d=Math.random,g={};g.layout=function(){for(var v=p(fl()),b=Ace((e[0]>>5)*e[1]),S=null,_=f.length,w=-1,A=[],$=f.map(k=>({text:t(k),font:n(k),style:r(k),weight:a(k),rotate:s(k),size:~~(i(k)+1e-14),padding:l(k),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:k})).sort((k,T)=>T.size-k.size);++w<_;){var M=$[w];M.x=e[0]*(d()+.5)>>1,M.y=e[1]*(d()+.5)>>1,xce(v,M,$,w),M.hasText&&y(b,M,S)&&(A.push(M),S?Ece(S,M):S=[{x:M.x+M.x0,y:M.y+M.y0},{x:M.x+M.x1,y:M.y+M.y1}],M.x-=e[0]>>1,M.y-=e[1]>>1)}return A};function p(v){v.width=v.height=1;var b=Math.sqrt(v.getContext("2d").getImageData(0,0,1,1).data.length>>2);v.width=(Ug<<5)/b,v.height=G1/b;var S=v.getContext("2d");return S.fillStyle=S.strokeStyle="red",S.textAlign="center",{context:S,ratio:b}}function y(v,b,S){for(var _=b.x,w=b.y,A=Math.hypot(e[0],e[1]),$=c(e),M=d()<.5?1:-1,k=-M,T,D,R;(T=$(k+=M))&&(D=~~T[0],R=~~T[1],!(Math.min(Math.abs(D),Math.abs(R))>=A));)if(b.x=_+D,b.y=w+R,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>e[0]||b.y+b.y1>e[1])&&(!S||!Sce(b,v,e[0]))&&(!S||_ce(b,S))){for(var B=b.sprite,U=b.width>>5,Q=e[0]>>5,Y=b.x-(U<<4),P=Y&127,z=32-P,N=b.y1-b.y0,j=(b.y+b.y0)*Q+(Y>>5),X,K=0;K<N;K++){X=0;for(var fe=0;fe<=U;fe++)v[j+fe]|=X<<z|(fe<U?(X=B[K*U+fe])>>>P:0);j+=Q}return b.sprite=null,!0}return!1}return g.words=function(v){return arguments.length?(f=v,g):f},g.size=function(v){return arguments.length?(e=[+v[0],+v[1]],g):e},g.font=function(v){return arguments.length?(n=uu(v),g):n},g.fontStyle=function(v){return arguments.length?(r=uu(v),g):r},g.fontWeight=function(v){return arguments.length?(a=uu(v),g):a},g.rotate=function(v){return arguments.length?(s=uu(v),g):s},g.text=function(v){return arguments.length?(t=uu(v),g):t},g.spiral=function(v){return arguments.length?(c=Cce[v]||v,g):c},g.fontSize=function(v){return arguments.length?(i=uu(v),g):i},g.padding=function(v){return arguments.length?(l=uu(v),g):l},g.random=function(v){return arguments.length?(d=v,g):d},g}function xce(e,t,n,i){if(!t.sprite){var r=e.context,a=e.ratio;r.clearRect(0,0,(Ug<<5)/a,G1/a);var s=0,l=0,c=0,f=n.length,d,g,p,y,v;for(--i;++i<f;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,d=r.measureText(t.text+"m").width*a,p=t.size<<1,t.rotate){var b=Math.sin(t.rotate*n_),S=Math.cos(t.rotate*n_),_=d*S,w=d*b,A=p*S,$=p*b;d=Math.max(Math.abs(_+$),Math.abs(_-$))+31>>5<<5,p=~~Math.max(Math.abs(w+A),Math.abs(w-A))}else d=d+31>>5<<5;if(p>c&&(c=p),s+d>=Ug<<5&&(s=0,l+=c,c=0),l+p>=G1)break;r.translate((s+(d>>1))/a,(l+(p>>1))/a),t.rotate&&r.rotate(t.rotate*n_),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=d,t.height=p,t.xoff=s,t.yoff=l,t.x1=d>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=d}for(var M=r.getImageData(0,0,(Ug<<5)/a,G1/a).data,k=[];--i>=0;)if(t=n[i],!!t.hasText){for(d=t.width,g=d>>5,p=t.y1-t.y0,y=0;y<p*g;y++)k[y]=0;if(s=t.xoff,s==null)return;l=t.yoff;var T=0,D=-1;for(v=0;v<p;v++){for(y=0;y<d;y++){var R=g*v+(y>>5),B=M[(l+v)*(Ug<<5)+(s+y)<<2]?1<<31-y%32:0;k[R]|=B,T|=B}T?D=v:(t.y0++,p--,v--,l++)}t.y1=t.y0+D,t.sprite=k.slice(0,(t.y1-t.y0)*g)}}}function Sce(e,t,n){n>>=5;for(var i=e.sprite,r=e.width>>5,a=e.x-(r<<4),s=a&127,l=32-s,c=e.y1-e.y0,f=(e.y+e.y0)*n+(a>>5),d,g=0;g<c;g++){d=0;for(var p=0;p<=r;p++)if((d<<l|(p<r?(d=i[g*r+p])>>>s:0))&t[f+p])return!0;f+=n}return!1}function Ece(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function _ce(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Sq(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function wce(e){var t=4,n=t*e[0]/e[1],i=0,r=0;return function(a){var s=a<0?-1:1;switch(Math.sqrt(1+4*s*a)-s&3){case 0:i+=n;break;case 1:r+=t;break;case 2:i-=n;break;default:r-=t;break}return[i,r]}}function Ace(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function uu(e){return typeof e=="function"?e:function(){return e}}var Cce={archimedean:Sq,rectangular:wce};const Eq=["x","y","font","fontSize","fontStyle","fontWeight","angle"],$ce=["text","font","rotate","fontSize","fontStyle","fontWeight"];function wT(e){te.call(this,bce(),e)}wT.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Eq}]};be(wT,te,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&ae("Wordcloud size dimensions must be non-zero.");function n(v){const b=e[v];return Ge(b)&&t.modified(b.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||$ce.some(n)))return;const r=t.materialize(t.SOURCE).source,a=this.value,s=e.as||Eq;let l=e.fontSize||14,c;if(Ge(l)?c=e.fontSizeRange:l=ri(l),c){const v=l,b=ft("sqrt")().domain(Xa(r,v)).range(c);l=S=>b(v(S))}r.forEach(v=>{v[s[0]]=NaN,v[s[1]]=NaN,v[s[3]]=0});const f=a.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(l).random(Ur).layout(),d=a.size(),g=d[0]>>1,p=d[1]>>1,y=f.length;for(let v=0,b,S;v<y;++v)b=f[v],S=b.datum,S[s[0]]=b.x+g,S[s[1]]=b.y+p,S[s[2]]=b.font,S[s[3]]=b.size,S[s[4]]=b.style,S[s[5]]=b.weight,S[s[6]]=b.rotate;return t.reflow(i).modifies(s)}});const Tce=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:wT},Symbol.toStringTag,{value:"Module"})),Mce=e=>new Uint8Array(e),kce=e=>new Uint16Array(e),Qg=e=>new Uint32Array(e);function Oce(){let e=8,t=[],n=Qg(0),i=d1(0,e),r=d1(0,e);return{data:()=>t,seen:()=>n=Nce(n,t.length),add(a){for(let s=0,l=t.length,c=a.length,f;s<c;++s)f=a[s],f._index=l++,t.push(f)},remove(a,s){const l=t.length,c=Array(l-a),f=t;let d,g,p;for(g=0;!s[g]&&g<l;++g)c[g]=t[g],f[g]=g;for(p=g;g<l;++g)d=t[g],s[g]?f[g]=-1:(f[g]=p,i[p]=i[g],r[p]=r[g],c[p]=d,d._index=p++),i[g]=0;return t=c,f},size:()=>t.length,curr:()=>i,prev:()=>r,reset:a=>r[a]=i[a],all:()=>e<257?255:e<65537?65535:4294967295,set(a,s){i[a]|=s},clear(a,s){i[a]&=~s},resize(a,s){const l=i.length;(a>l||s>e)&&(e=Math.max(s,e),i=d1(a,e,i),r=d1(a,e))}}}function Nce(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function d1(e,t,n){const i=(t<257?Mce:t<65537?kce:Qg)(e);return n&&i.set(n),i}function P4(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,a){const s=this,l=s.bisect(s.range,r.value),c=r.index,f=l[0],d=l[1],g=c.length;let p;for(p=0;p<f;++p)a[c[p]]|=i;for(p=d;p<g;++p)a[c[p]]|=i;return s}}}function H4(){let e=Qg(0),t=[],n=0;function i(l,c,f){if(!c.length)return[];const d=n,g=c.length,p=Qg(g);let y=Array(g),v,b,S;for(S=0;S<g;++S)y[S]=l(c[S]),p[S]=S;if(y=Dce(y,p),d)v=t,b=e,t=Array(d+g),e=Qg(d+g),Rce(f,v,b,d,y,p,g,t,e);else{if(f>0)for(S=0;S<g;++S)p[S]+=f;t=y,e=p}return n=d+g,{index:p,value:y}}function r(l,c){const f=n;let d,g,p;for(g=0;!c[e[g]]&&g<f;++g);for(p=g;g<f;++g)c[d=e[g]]||(e[p]=d,t[p]=t[g],++p);n=f-l}function a(l){for(let c=0,f=n;c<f;++c)e[c]=l[e[c]]}function s(l,c){let f;return c?f=c.length:(c=t,f=n),[BW(c,l[0],0,f),gl(c,l[1],0,f)]}return{insert:i,remove:r,bisect:s,reindex:a,index:()=>e,size:()=>n}}function Dce(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],a=e[i];return r<a?-1:r>a?1:0}),IW(e,t)}function Rce(e,t,n,i,r,a,s,l,c){let f=0,d=0,g;for(g=0;f<i&&d<s;++g)t[f]<r[d]?(l[g]=t[f],c[g]=n[f++]):(l[g]=r[d],c[g]=a[d++]+e);for(;f<i;++f,++g)l[g]=t[f],c[g]=n[f];for(;d<s;++d,++g)l[g]=r[d],c[g]=a[d]+e}function AT(e){te.call(this,Oce(),e),this._indices=null,this._dims=null}AT.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};be(AT,te,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},a=this._dims=[],s=i.length;let l=0,c,f;for(;l<s;++l)c=n[l].fname,f=r[c]||(r[c]=H4()),a.push(P4(f,l,i[l]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,a=this._indices,s=this._dims,l=this.value,c=l.curr(),f=l.prev(),d=l.all(),g=n.rem=n.add,p=n.mod,y=r.length,v={};let b,S,_,w,A,$,M,k,T;if(f.set(c),t.rem.length&&(A=this.remove(e,t,n)),t.add.length&&l.add(t.add),t.mod.length)for($={},w=t.mod,M=0,k=w.length;M<k;++M)$[w[M]._index]=1;for(M=0;M<y;++M)T=i[M],(!s[M]||e.modified("fields",M)||t.modified(T.fields))&&(_=T.fname,(b=v[_])||(a[_]=S=H4(),v[_]=b=S.insert(T,t.source,0)),s[M]=P4(S,M,r[M]).onAdd(b,c));for(M=0,k=l.data().length;M<k;++M)A[M]||(f[M]!==c[M]?g.push(M):$[M]&&c[M]!==d&&p.push(M));return l.mask=(1<<y)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,a=this._dims,s=this._indices,l=e.fields,c={},f=n.add,d=r.size()+i.length,g=a.length;let p=r.size(),y,v,b;r.resize(d,g),r.add(i);const S=r.curr(),_=r.prev(),w=r.all();for(y=0;y<g;++y)v=l[y].fname,b=c[v]||(c[v]=s[v].insert(l[y],i,p)),a[y].onAdd(b,S);for(;p<d;++p)_[p]=w,S[p]!==w&&f.push(p)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),a=i.all(),s=e.mod;let l,c,f;for(l=0,c=s.length;l<c;++l)f=s[l]._index,r[f]!==a&&n.push(f)},remove(e,t,n){const i=this._indices,r=this.value,a=r.curr(),s=r.prev(),l=r.all(),c={},f=n.rem,d=t.rem;let g,p,y,v;for(g=0,p=d.length;g<p;++g)y=d[g]._index,c[y]=1,s[y]=v=a[y],a[y]=l,v!==l&&f.push(y);for(y in i)i[y].remove(p,c);return this.reindex(t,p,c),c},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const a=r.remove(t,n);for(const s in i)i[s].reindex(a)})},update(e,t,n){const i=this._dims,r=e.query,a=t.stamp,s=i.length;let l=0,c,f;for(n.filters=0,f=0;f<s;++f)e.modified("query",f)&&(c=f,++l);if(l===1)l=i[c].one,this.incrementOne(i[c],r[c],n.add,n.rem);else for(f=0,l=0;f<s;++f)e.modified("query",f)&&(l|=i[f].one,this.incrementAll(i[f],r[f],a,n.add),n.rem=n.add);return l},incrementAll(e,t,n,i){const r=this.value,a=r.seen(),s=r.curr(),l=r.prev(),c=e.index(),f=e.bisect(e.range),d=e.bisect(t),g=d[0],p=d[1],y=f[0],v=f[1],b=e.one;let S,_,w;if(g<y)for(S=g,_=Math.min(y,p);S<_;++S)w=c[S],a[w]!==n&&(l[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;else if(g>y)for(S=y,_=Math.min(g,v);S<_;++S)w=c[S],a[w]!==n&&(l[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;if(p>v)for(S=Math.max(g,v),_=p;S<_;++S)w=c[S],a[w]!==n&&(l[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;else if(p<v)for(S=Math.max(y,p),_=v;S<_;++S)w=c[S],a[w]!==n&&(l[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;e.range=t.slice()},incrementOne(e,t,n,i){const r=this.value,a=r.curr(),s=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],g=l[0],p=l[1],y=e.one;let v,b,S;if(f<g)for(v=f,b=Math.min(g,d);v<b;++v)S=s[v],a[S]^=y,n.push(S);else if(f>g)for(v=g,b=Math.min(f,p);v<b;++v)S=s[v],a[S]^=y,i.push(S);if(d>p)for(v=Math.max(f,p),b=d;v<b;++v)S=s[v],a[S]^=y,n.push(S);else if(d<p)for(v=Math.max(g,d),b=p;v<b;++v)S=s[v],a[S]^=y,i.push(S);e.range=t.slice()}});function CT(e){te.call(this,null,e)}CT.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};be(CT,te,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if((r&n)===0)return t.StopPropagation;const a=t.fork(t.ALL),s=i.data(),l=i.curr(),c=i.prev(),f=d=>l[d]&n?null:s[d];return a.filter(a.MOD,f),r&r-1?(a.filter(a.ADD,d=>{const g=l[d]&n;return!g&&g^c[d]&n?s[d]:null}),a.filter(a.REM,d=>{const g=l[d]&n;return g&&!(g^(g^c[d]&n))?s[d]:null})):(a.filter(a.ADD,f),a.filter(a.REM,d=>(l[d]&n)===r?s[d]:null)),a.filter(a.SOURCE,d=>f(d._index))}});const zce=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:AT,resolvefilter:CT},Symbol.toStringTag,{value:"Module"})),Fce="RawCode",Qu="Literal",Lce="Property",Uce="Identifier",Bce="ArrayExpression",jce="BinaryExpression",_q="CallExpression",qce="ConditionalExpression",Ice="LogicalExpression",Pce="MemberExpression",Hce="ObjectExpression",Gce="UnaryExpression";function ya(e){this.type=e}ya.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=Yce(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function Yce(e){switch(e.type){case Bce:return e.elements;case jce:case Ice:return[e.left,e.right];case _q:return[e.callee].concat(e.arguments);case qce:return[e.test,e.consequent,e.alternate];case Pce:return[e.object,e.property];case Hce:return e.properties;case Lce:return[e.key,e.value];case Gce:return[e.argument];case Uce:case Qu:case Fce:default:return[]}}var os,$e,ie,ti,St,Nb=1,rm=2,Zu=3,Rl=4,Db=5,mc=6,Oi=7,am=8,Xce=9;os={};os[Nb]="Boolean";os[rm]="<end>";os[Zu]="Identifier";os[Rl]="Keyword";os[Db]="Null";os[mc]="Numeric";os[Oi]="Punctuator";os[am]="String";os[Xce]="RegularExpression";var Vce="ArrayExpression",Wce="BinaryExpression",Qce="CallExpression",Zce="ConditionalExpression",wq="Identifier",Kce="Literal",Jce="LogicalExpression",efe="MemberExpression",tfe="ObjectExpression",nfe="Property",ife="UnaryExpression",_n="Unexpected token %0",rfe="Unexpected number",afe="Unexpected string",sfe="Unexpected identifier",ofe="Unexpected reserved word",lfe="Unexpected end of input",vA="Invalid regular expression",i_="Invalid regular expression: missing /",Aq="Octal literals are not allowed in strict mode.",ufe="Duplicate data property in object literal not allowed in strict mode",jn="ILLEGAL",vp="Disabled.",cfe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),ffe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Rb(e,t){if(!e)throw new Error("ASSERT: "+t)}function Bs(e){return e>=48&&e<=57}function $T(e){return"0123456789abcdefABCDEF".includes(e)}function Zg(e){return"01234567".includes(e)}function dfe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function bp(e){return e===10||e===13||e===8232||e===8233}function sm(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&cfe.test(String.fromCharCode(e))}function uv(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&ffe.test(String.fromCharCode(e))}const hfe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Cq(){for(;ie<ti;){const e=$e.charCodeAt(ie);if(dfe(e)||bp(e))++ie;else break}}function bA(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)ie<ti&&$T($e[ie])?(i=$e[ie++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):lt({},_n,jn);return String.fromCharCode(r)}function gfe(){var e,t,n,i;for(e=$e[ie],t=0,e==="}"&&lt({},_n,jn);ie<ti&&(e=$e[ie++],!!$T(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&lt({},_n,jn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function $q(){var e,t;for(e=$e.charCodeAt(ie++),t=String.fromCharCode(e),e===92&&($e.charCodeAt(ie)!==117&&lt({},_n,jn),++ie,e=bA("u"),(!e||e==="\\"||!sm(e.charCodeAt(0)))&&lt({},_n,jn),t=e);ie<ti&&(e=$e.charCodeAt(ie),!!uv(e));)++ie,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),$e.charCodeAt(ie)!==117&&lt({},_n,jn),++ie,e=bA("u"),(!e||e==="\\"||!uv(e.charCodeAt(0)))&&lt({},_n,jn),t+=e);return t}function pfe(){var e,t;for(e=ie++;ie<ti;){if(t=$e.charCodeAt(ie),t===92)return ie=e,$q();if(uv(t))++ie;else break}return $e.slice(e,ie)}function mfe(){var e,t,n;return e=ie,t=$e.charCodeAt(ie)===92?$q():pfe(),t.length===1?n=Zu:hfe.hasOwnProperty(t)?n=Rl:t==="null"?n=Db:t==="true"||t==="false"?n=Nb:n=Zu,{type:n,value:t,start:e,end:ie}}function r_(){var e=ie,t=$e.charCodeAt(ie),n,i=$e[ie],r,a,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ie,{type:Oi,value:String.fromCharCode(t),start:e,end:ie};default:if(n=$e.charCodeAt(ie+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ie+=2,{type:Oi,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ie};case 33:case 61:return ie+=2,$e.charCodeAt(ie)===61&&++ie,{type:Oi,value:$e.slice(e,ie),start:e,end:ie}}}if(s=$e.substr(ie,4),s===">>>=")return ie+=4,{type:Oi,value:s,start:e,end:ie};if(a=s.substr(0,3),a===">>>"||a==="<<="||a===">>=")return ie+=3,{type:Oi,value:a,start:e,end:ie};if(r=a.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return ie+=2,{type:Oi,value:r,start:e,end:ie};if(r==="//"&&lt({},_n,jn),"<>=!+-*%&|^/".includes(i))return++ie,{type:Oi,value:i,start:e,end:ie};lt({},_n,jn)}function yfe(e){let t="";for(;ie<ti&&$T($e[ie]);)t+=$e[ie++];return t.length===0&&lt({},_n,jn),sm($e.charCodeAt(ie))&&lt({},_n,jn),{type:mc,value:parseInt("0x"+t,16),start:e,end:ie}}function vfe(e){let t="0"+$e[ie++];for(;ie<ti&&Zg($e[ie]);)t+=$e[ie++];return(sm($e.charCodeAt(ie))||Bs($e.charCodeAt(ie)))&&lt({},_n,jn),{type:mc,value:parseInt(t,8),octal:!0,start:e,end:ie}}function G4(){var e,t,n;if(n=$e[ie],Rb(Bs(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ie,e="",n!=="."){if(e=$e[ie++],n=$e[ie],e==="0"){if(n==="x"||n==="X")return++ie,yfe(t);if(Zg(n))return vfe(t);n&&Bs(n.charCodeAt(0))&&lt({},_n,jn)}for(;Bs($e.charCodeAt(ie));)e+=$e[ie++];n=$e[ie]}if(n==="."){for(e+=$e[ie++];Bs($e.charCodeAt(ie));)e+=$e[ie++];n=$e[ie]}if(n==="e"||n==="E")if(e+=$e[ie++],n=$e[ie],(n==="+"||n==="-")&&(e+=$e[ie++]),Bs($e.charCodeAt(ie)))for(;Bs($e.charCodeAt(ie));)e+=$e[ie++];else lt({},_n,jn);return sm($e.charCodeAt(ie))&&lt({},_n,jn),{type:mc,value:parseFloat(e),start:t,end:ie}}function bfe(){var e="",t,n,i,r,a=!1;for(t=$e[ie],Rb(t==="'"||t==='"',"String literal must starts with a quote"),n=ie,++ie;ie<ti;)if(i=$e[ie++],i===t){t="";break}else if(i==="\\")if(i=$e[ie++],!i||!bp(i.charCodeAt(0)))switch(i){case"u":case"x":$e[ie]==="{"?(++ie,e+=gfe()):e+=bA(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Zg(i)?(r="01234567".indexOf(i),r!==0&&(a=!0),ie<ti&&Zg($e[ie])&&(a=!0,r=r*8+"01234567".indexOf($e[ie++]),"0123".includes(i)&&ie<ti&&Zg($e[ie])&&(r=r*8+"01234567".indexOf($e[ie++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&$e[ie]===`
`&&++ie;else{if(bp(i.charCodeAt(0)))break;e+=i}return t!==""&&lt({},_n,jn),{type:am,value:e,octal:a,start:n,end:ie}}function xfe(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";lt({},vA)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{lt({},vA)}try{return new RegExp(e,t)}catch{return null}}function Sfe(){var e,t,n,i,r;for(e=$e[ie],Rb(e==="/","Regular expression literal must start with a slash"),t=$e[ie++],n=!1,i=!1;ie<ti;)if(e=$e[ie++],t+=e,e==="\\")e=$e[ie++],bp(e.charCodeAt(0))&&lt({},i_),t+=e;else if(bp(e.charCodeAt(0)))lt({},i_);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||lt({},i_),r=t.substr(1,t.length-2),{value:r,literal:t}}function Efe(){var e,t,n;for(t="",n="";ie<ti&&(e=$e[ie],!!uv(e.charCodeAt(0)));)++ie,e==="\\"&&ie<ti?lt({},_n,jn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&lt({},vA,n),{value:n,literal:t}}function _fe(){var e,t,n,i;return St=null,Cq(),e=ie,t=Sfe(),n=Efe(),i=xfe(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:ie}}function wfe(e){return e.type===Zu||e.type===Rl||e.type===Nb||e.type===Db}function Tq(){if(Cq(),ie>=ti)return{type:rm,start:ie,end:ie};const e=$e.charCodeAt(ie);return sm(e)?mfe():e===40||e===41||e===59?r_():e===39||e===34?bfe():e===46?Bs($e.charCodeAt(ie+1))?G4():r_():Bs(e)?G4():r_()}function Di(){const e=St;return ie=e.end,St=Tq(),ie=e.end,e}function Mq(){const e=ie;St=Tq(),ie=e}function Afe(e){const t=new ya(Vce);return t.elements=e,t}function Y4(e,t,n){const i=new ya(e==="||"||e==="&&"?Jce:Wce);return i.operator=e,i.left=t,i.right=n,i}function Cfe(e,t){const n=new ya(Qce);return n.callee=e,n.arguments=t,n}function $fe(e,t,n){const i=new ya(Zce);return i.test=e,i.consequent=t,i.alternate=n,i}function TT(e){const t=new ya(wq);return t.name=e,t}function Bg(e){const t=new ya(Kce);return t.value=e.value,t.raw=$e.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function X4(e,t,n){const i=new ya(efe);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function Tfe(e){const t=new ya(tfe);return t.properties=e,t}function V4(e,t,n){const i=new ya(nfe);return i.key=t,i.value=n,i.kind=e,i}function Mfe(e,t){const n=new ya(ife);return n.operator=e,n.argument=t,n.prefix=!0,n}function lt(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(a,s)=>(Rb(s<i.length,"Message reference must be in range"),i[s]));throw n=new Error(r),n.index=ie,n.description=r,n}function zb(e){e.type===rm&&lt(e,lfe),e.type===mc&&lt(e,rfe),e.type===am&&lt(e,afe),e.type===Zu&&lt(e,sfe),e.type===Rl&&lt(e,ofe),lt(e,_n,e.value)}function ni(e){const t=Di();(t.type!==Oi||t.value!==e)&&zb(t)}function Dt(e){return St.type===Oi&&St.value===e}function a_(e){return St.type===Rl&&St.value===e}function kfe(){const e=[];for(ie=St.start,ni("[");!Dt("]");)Dt(",")?(Di(),e.push(null)):(e.push(Ku()),Dt("]")||ni(","));return Di(),Afe(e)}function W4(){ie=St.start;const e=Di();return e.type===am||e.type===mc?(e.octal&&lt(e,Aq),Bg(e)):TT(e.value)}function Ofe(){var e,t,n,i;if(ie=St.start,e=St,e.type===Zu)return n=W4(),ni(":"),i=Ku(),V4("init",n,i);if(e.type===rm||e.type===Oi)zb(e);else return t=W4(),ni(":"),i=Ku(),V4("init",t,i)}function Nfe(){var e=[],t,n,i,r={},a=String;for(ie=St.start,ni("{");!Dt("}");)t=Ofe(),t.key.type===wq?n=t.key.name:n=a(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?lt({},ufe):r[i]=!0,e.push(t),Dt("}")||ni(",");return ni("}"),Tfe(e)}function Dfe(){ni("(");const e=MT();return ni(")"),e}const Rfe={if:1};function zfe(){var e,t,n;if(Dt("("))return Dfe();if(Dt("["))return kfe();if(Dt("{"))return Nfe();if(e=St.type,ie=St.start,e===Zu||Rfe[St.value])n=TT(Di().value);else if(e===am||e===mc)St.octal&&lt(St,Aq),n=Bg(Di());else{if(e===Rl)throw new Error(vp);e===Nb?(t=Di(),t.value=t.value==="true",n=Bg(t)):e===Db?(t=Di(),t.value=null,n=Bg(t)):Dt("/")||Dt("/=")?(n=Bg(_fe()),Mq()):zb(Di())}return n}function Ffe(){const e=[];if(ni("("),!Dt(")"))for(;ie<ti&&(e.push(Ku()),!Dt(")"));)ni(",");return ni(")"),e}function Lfe(){ie=St.start;const e=Di();return wfe(e)||zb(e),TT(e.value)}function Ufe(){return ni("."),Lfe()}function Bfe(){ni("[");const e=MT();return ni("]"),e}function jfe(){var e,t,n;for(e=zfe();;)if(Dt("."))n=Ufe(),e=X4(".",e,n);else if(Dt("("))t=Ffe(),e=Cfe(e,t);else if(Dt("["))n=Bfe(),e=X4("[",e,n);else break;return e}function Q4(){const e=jfe();if(St.type===Oi&&(Dt("++")||Dt("--")))throw new Error(vp);return e}function Y1(){var e,t;if(St.type!==Oi&&St.type!==Rl)t=Q4();else{if(Dt("++")||Dt("--"))throw new Error(vp);if(Dt("+")||Dt("-")||Dt("~")||Dt("!"))e=Di(),t=Y1(),t=Mfe(e.value,t);else{if(a_("delete")||a_("void")||a_("typeof"))throw new Error(vp);t=Q4()}}return t}function Z4(e){let t=0;if(e.type!==Oi&&e.type!==Rl)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function qfe(){var e,t,n,i,r,a,s,l,c,f;if(e=St,c=Y1(),i=St,r=Z4(i),r===0)return c;for(i.prec=r,Di(),t=[e,St],s=Y1(),a=[c,i,s];(r=Z4(St))>0;){for(;a.length>2&&r<=a[a.length-2].prec;)s=a.pop(),l=a.pop().value,c=a.pop(),t.pop(),n=Y4(l,c,s),a.push(n);i=Di(),i.prec=r,a.push(i),t.push(St),n=Y1(),a.push(n)}for(f=a.length-1,n=a[f],t.pop();f>1;)t.pop(),n=Y4(a[f-1].value,a[f-2],n),f-=2;return n}function Ku(){var e,t,n;return e=qfe(),Dt("?")&&(Di(),t=Ku(),ni(":"),n=Ku(),e=$fe(e,t,n)),e}function MT(){const e=Ku();if(Dt(","))throw new Error(vp);return e}function kT(e){$e=e,ie=0,ti=$e.length,St=null,Mq();const t=MT();if(St.type!==rm)throw new Error("Unexpect token after expression.");return t}var kq={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Oq(e){function t(s,l,c,f){let d=e(l[0]);return c&&(d=c+"("+d+")",c.lastIndexOf("new ",0)===0&&(d="("+d+")")),d+"."+s+(f<0?"":f===0?"()":"("+l.slice(1).map(e).join(",")+")")}function n(s,l,c){return f=>t(s,f,l,c)}const i="new Date",r="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&ae("Missing arguments to clamp function."),s.length>3&&ae("Too many arguments to clamp function.");const l=s.map(e);return"Math.max("+l[1]+", Math.min("+l[2]+","+l[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),btoa:"btoa",atob:"atob",regexp:a,test:n("test",a),if:function(s){s.length<3&&ae("Missing arguments to if function."),s.length>3&&ae("Too many arguments to if function.");const l=s.map(e);return"("+l[0]+"?"+l[1]+":"+l[2]+")"}}}function Ife(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function Nq(e){e=e||{};const t=e.allowed?ca(e.allowed):{},n=e.forbidden?ca(e.forbidden):{},i=e.constants||kq,r=(e.functions||Oq)(g),a=e.globalvar,s=e.fieldvar,l=Ge(a)?a:v=>`${a}["${v}"]`;[...Object.getOwnPropertyNames(Object.prototype).filter(v=>typeof Object.prototype[v]=="function")];let c={},f={},d=0;function g(v){if(Se(v))return v;const b=p[v.type];return b==null&&ae("Unsupported type: "+v.type),b(v)}const p={Literal:v=>v.raw,Identifier:v=>{const b=v.name;return d>0?b:we(n,b)?ae("Illegal identifier: "+b):we(i,b)?i[b]:we(t,b)?b:(c[b]=1,l(b))},MemberExpression:v=>{const b=!v.computed,S=g(v.object);b&&(d+=1);const _=g(v.property);return S===s&&(f[Ife(_)]=1),b&&(d-=1),S+(b?"."+_:"["+_+"]")},CallExpression:v=>{v.callee.type!=="Identifier"&&ae("Illegal callee type: "+v.callee.type);const b=v.callee.name,S=v.arguments,_=we(r,b)&&r[b];return _||ae("Unrecognized function: "+b),Ge(_)?_(S):_+"("+S.map(g).join(",")+")"},ArrayExpression:v=>"["+v.elements.map(g).join(",")+"]",BinaryExpression:v=>"("+g(v.left)+" "+v.operator+" "+g(v.right)+")",UnaryExpression:v=>"("+v.operator+g(v.argument)+")",ConditionalExpression:v=>"("+g(v.test)+"?"+g(v.consequent)+":"+g(v.alternate)+")",LogicalExpression:v=>"("+g(v.left)+v.operator+g(v.right)+")",ObjectExpression:v=>{for(const b of v.properties){const S=b.key.name;hC.has(S)&&ae("Illegal property: "+S)}return"{"+v.properties.map(g).join(",")+"}"},Property:v=>{d+=1;const b=g(v.key);return d-=1,b+":"+g(v.value)}};function y(v){const b={code:g(v),globals:Object.keys(c),fields:Object.keys(f)};return c={},f={},b}return y.functions=r,y.constants=i,y}const K4=Symbol("vega_selection_getter");function Dq(e){return(!e.getter||!e.getter[K4])&&(e.getter=zr(e.field),e.getter[K4]=!0),e.getter}const OT="intersect",J4="union",Pfe="vlMulti",Hfe="vlPoint",ez="or",Gfe="and",za="_vgsid_",xp=zr(za),Yfe="E",Xfe="R",Vfe="R-E",Wfe="R-LE",Qfe="R-RE",Zfe="E-LT",Kfe="E-LTE",Jfe="E-GT",ede="E-GTE",tde="E-VALID",nde="E-ONE",cv="index:unit";function tz(e,t){for(var n=t.fields,i=t.values,r=n.length,a=0,s,l;a<r;++a)if(l=n[a],s=Dq(l)(e),ll(s)&&(s=Zn(s)),ll(i[a])&&(i[a]=Zn(i[a])),se(i[a])&&ll(i[a][0])&&(i[a]=i[a].map(Zn)),l.type===Yfe){if(se(i[a])?!i[a].includes(s):s!==i[a])return!1}else if(l.type===Xfe){if(!Tf(s,i[a]))return!1}else if(l.type===Qfe){if(!Tf(s,i[a],!0,!1))return!1}else if(l.type===Vfe){if(!Tf(s,i[a],!1,!1))return!1}else if(l.type===Wfe){if(!Tf(s,i[a],!1,!0))return!1}else if(l.type===Zfe){if(s>=i[a])return!1}else if(l.type===Kfe){if(s>i[a])return!1}else if(l.type===Jfe){if(s<=i[a])return!1}else if(l.type===ede){if(s<i[a])return!1}else if(l.type===tde){if(s===null||isNaN(s))return!1}else if(l.type===nde&&i[a].indexOf(s)===-1)return!1;return!0}function ide(e,t,n){for(var i=this.context.data[e],r=i?i.values.value:[],a=i?i[cv]&&i[cv].value:void 0,s=n===OT,l=r.length,c=0,f,d,g,p,y;c<l;++c)if(f=r[c],a&&s){if(d=d||{},g=d[p=f.unit]||0,g===-1)continue;if(y=tz(t,f),d[p]=y?-1:++g,y&&a.size===1)return!0;if(!y&&g===a.get(p).count)return!1}else if(y=tz(t,f),s^y)return y;return l&&s}const Rq=Od(xp),rde=Rq.left,ade=Rq.right;function sde(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],a=i?i[cv]&&i[cv].value:void 0,s=n===OT,l=xp(t),c=rde(r,l);if(c===r.length||xp(r[c])!==l)return!1;if(a&&s){if(a.size===1)return!0;if(ade(r,l)-c<a.size)return!1}return!0}function ode(e,t){return e.map(n=>He(t.fields?{values:t.fields.map(i=>Dq(i)(n.datum))}:{[za]:xp(n.datum)},t))}function lde(e,t,n,i){for(var r=this.context.data[e],a=r?r.values.value:[],s={},l={},c={},f,d,g,p,y,v,b,S,_,w,A=a.length,$=0,M,k;$<A;++$)if(f=a[$],p=f.unit,d=f.fields,g=f.values,d&&g){for(M=0,k=d.length;M<k;++M)y=d[M],b=s[y.field]||(s[y.field]={}),S=b[p]||(b[p]=[]),c[y.field]=_=y.type.charAt(0),w=s_[`${_}_union`],b[p]=w(S,_e(g[M]));n&&(S=l[p]||(l[p]=[]),S.push(_e(g).reduce((T,D,R)=>(T[d[R].field]=D,T),{})))}else y=za,v=xp(f),b=s[y]||(s[y]={}),S=b[p]||(b[p]=[]),S.push(v),n&&(S=l[p]||(l[p]=[]),S.push({[za]:v}));if(t=t||J4,s[za]?s[za]=s_[`${za}_${t}`](...Object.values(s[za])):Object.keys(s).forEach(T=>{s[T]=Object.keys(s[T]).map(D=>s[T][D]).reduce((D,R)=>D===void 0?R:s_[`${c[T]}_${t}`](D,R))}),a=Object.keys(l),n&&a.length){const T=i?Hfe:Pfe;s[T]=t===J4?{[ez]:a.reduce((D,R)=>(D.push(...l[R]),D),[])}:{[Gfe]:a.map(D=>({[ez]:l[D]}))}}return s}var s_={[`${za}_union`]:ZW,[`${za}_intersect`]:WW,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=Zn(t[0]),i=Zn(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=Zn(t[0]),i=Zn(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const ude=":",cde="@";function NT(e,t,n,i){t[0].type!==Qu&&ae("First argument to selection functions must be a string literal.");const r=t[0].value,a=t.length>=2&&rt(t).value,s="unit",l=cde+s,c=ude+r;a===OT&&!we(i,l)&&(i[l]=n.getData(r).indataRef(n,s)),we(i,c)||(i[c]=n.getData(r).tuplesRef())}function zq(e){const t=this.context.data[e];return t?t.values.value:[]}function fde(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count}function dde(e,t){const n=this.context.dataflow,i=this.context.data[e],r=i.input;return n.pulse(r,n.changeset().remove(Fr).insert(t)),1}function hde(e,t,n){if(e){const i=this.context.dataflow,r=e.mark.source;i.pulse(r,i.changeset().encode(e,t))}return n!==void 0?n:e}const om=e=>function(t,n){const i=this.context.dataflow.locale();return t===null?"null":i[e](n)(t)},gde=om("format"),Fq=om("timeFormat"),pde=om("utcFormat"),mde=om("timeParse"),yde=om("utcParse"),h1=new Date(2e3,0,1);function Fb(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(h1.setYear(2e3),h1.setMonth(e),h1.setDate(t),Fq.call(this,h1,n))}function vde(e){return Fb.call(this,e,1,"%B")}function bde(e){return Fb.call(this,e,1,"%b")}function xde(e){return Fb.call(this,0,2+e,"%A")}function Sde(e){return Fb.call(this,0,2+e,"%a")}const Ede=":",_de="@",xA="%",Lq="$";function DT(e,t,n,i){t[0].type!==Qu&&ae("First argument to data functions must be a string literal.");const r=t[0].value,a=Ede+r;if(!we(a,i))try{i[a]=n.getData(r).tuplesRef()}catch{}}function wde(e,t,n,i){t[0].type!==Qu&&ae("First argument to indata must be a string literal."),t[1].type!==Qu&&ae("Second argument to indata must be a string literal.");const r=t[0].value,a=t[1].value,s=_de+a;we(s,i)||(i[s]=n.getData(r).indataRef(n,a))}function yi(e,t,n,i){if(t[0].type===Qu)nz(n,i,t[0].value);else for(e in n.scales)nz(n,i,e)}function nz(e,t,n){const i=xA+n;if(!we(t,i))try{t[i]=e.scaleRef(n)}catch{}}function ls(e,t){if(Se(e)){const n=t.scales[e];return n&&a6(n.value)?n.value:void 0}else if(Ge(e))return a6(e)?e:void 0}function Ade(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=yi,n._range=yi,n._scale=yi;const i=r=>"_["+(r.type===Qu?ye(xA+r.value):ye(xA)+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}function RT(e,t){return function(n,i,r){if(n){const a=ls(n,(r||this).context);return a&&a.path[e](i)}else return t(i)}}const Cde=RT("area",Hae),$de=RT("bounds",Vae),Tde=RT("centroid",ese);function Mde(e,t){const n=ls(e,(t||this).context);return n&&n.scale()}function kde(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function zT(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function Ode(){return zT(this.context.dataflow,"warn",arguments)}function Nde(){return zT(this.context.dataflow,"info",arguments)}function Dde(){return zT(this.context.dataflow,"debug",arguments)}function o_(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function SA(e){const t=vl(e),n=o_(t.r),i=o_(t.g),r=o_(t.b);return .2126*n+.7152*i+.0722*r}function Rde(e,t){const n=SA(e),i=SA(t),r=Math.max(n,i),a=Math.min(n,i);return(r+.05)/(a+.05)}function zde(){const e=[].slice.call(arguments);return e.unshift({}),He(...e)}function Uq(e,t){return e===t||e!==e&&t!==t?!0:se(e)?se(t)&&e.length===t.length?Fde(e,t):!1:Ee(e)&&Ee(t)?Bq(e,t):!1}function Fde(e,t){for(let n=0,i=e.length;n<i;++n)if(!Uq(e[n],t[n]))return!1;return!0}function Bq(e,t){for(const n in e)if(!Uq(e[n],t[n]))return!1;return!0}function iz(e){return t=>Bq(e,t)}function Lde(e,t,n,i,r,a){const s=this.context.dataflow,l=this.context.data[e],c=l.input,f=s.stamp();let d=l.changes,g,p;if(s._trigger===!1||!(c.value.length||t||i))return 0;if((!d||d.stamp<f)&&(l.changes=d=s.changeset(),d.stamp=f,s.runAfter(()=>{l.modified=!0,s.pulse(c,d).run()},!0,1)),n&&(g=n===!0?Fr:se(n)||Gv(n)?n:iz(n),d.remove(g)),t&&d.insert(t),i&&(g=iz(i),c.value.some(g)?d.remove(g):d.insert(i)),r)for(p in a)d.modify(r,p,a[p]);return 1}function Ude(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function Bde(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const rz={};function jde(e,t){const n=rz[t]||(rz[t]=zr(t));return se(e)?e.map(n):n(e)}function Lb(e){return se(e)||ArrayBuffer.isView(e)?e:null}function FT(e){return Lb(e)||(Se(e)?e:null)}function qde(e,...t){return Lb(e).join(...t)}function Ide(e,...t){return FT(e).indexOf(...t)}function Pde(e,...t){return FT(e).lastIndexOf(...t)}function Hde(e,...t){return FT(e).slice(...t)}function Gde(e,t,n){return Ge(n)&&ae("Function argument passed to replace."),!Se(t)&&!SC(t)&&ae("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function Yde(e){return Lb(e).slice().reverse()}function Xde(e){return Lb(e).slice().sort(Md)}function Vde(e,t,n){return W$(e||0,t||0,n||0)}function Wde(e,t){const n=ls(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Qde(e,t){const n=ls(e,(t||this).context);return n?n.copy():void 0}function Zde(e,t){const n=ls(e,(t||this).context);return n?n.domain():[]}function Kde(e,t,n){const i=ls(e,(n||this).context);return i?se(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function Jde(e,t){const n=ls(e,(t||this).context);return n&&n.range?n.range():[]}function ehe(e,t,n){const i=ls(e,(n||this).context);return i?i(t):void 0}function the(e,t,n,i,r){e=ls(e,(r||this).context);const a=kU(t,n);let s=e.domain(),l=s[0],c=rt(s),f=ii;return c-l?f=vU(e,l,c):e=(e.interpolator?ft("sequential")().interpolator(e.interpolator()):ft("linear")().interpolate(e.interpolate()).range(e.range())).domain([l=0,c=1]),e.ticks&&(s=e.ticks(+i||15),l!==s[0]&&s.unshift(l),c!==rt(s)&&s.push(c)),s.forEach(d=>a.stop(f(d),e(d))),a}function nhe(e,t,n){const i=ls(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}}function ihe(e){let t=null;return function(n){return n?cp(n,t=t||nd(e)):e}}const jq=e=>e.data;function qq(e,t){const n=zq.call(t,e);return n.root&&n.root.lookup||{}}function rhe(e,t,n){const i=qq(e,this),r=i[t],a=i[n];return r&&a?r.path(a).map(jq):void 0}function ahe(e,t){const n=qq(e,this)[t];return n?n.ancestors().map(jq):void 0}const Iq=()=>typeof window<"u"&&window||null;function she(){const e=Iq();return e?e.screen:{}}function ohe(){const e=Iq();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function lhe(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function Pq(e,t,n){if(!e)return[];const[i,r]=e,a=new un().set(i[0],i[1],r[0],r[1]),s=n||this.context.dataflow.scenegraph().root;return CB(s,a,uhe(t))}function uhe(e){let t=null;if(e){const n=_e(e.marktype),i=_e(e.markname);t=r=>(!n.length||n.some(a=>r.marktype===a))&&(!i.length||i.some(a=>r.name===a))}return t}function che(e,t,n,i=5){e=_e(e);const r=e[e.length-1];return r===void 0||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e}function fhe(e){return _e(e).reduce((t,[n,i],r)=>t+=r==0?`M ${n},${i} `:r===e.length-1?" Z":`L ${n},${i} `,"")}function dhe(e,t,n){const{x:i,y:r,mark:a}=n,s=new un().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[c,f]of t)c<s.x1&&(s.x1=c),c>s.x2&&(s.x2=c),f<s.y1&&(s.y1=f),f>s.y2&&(s.y2=f);return s.translate(i,r),Pq([[s.x1,s.y1],[s.x2,s.y2]],e,a).filter(c=>hhe(c.x,c.y,t))}function hhe(e,t,n){let i=0;for(let r=0,a=n.length-1;r<n.length;a=r++){const[s,l]=n[a],[c,f]=n[r];f>t!=l>t&&e<(s-c)*(t-f)/(l-f)+c&&i++}return i&1}const Sp={random(){return Ur()},cumulativeNormal:Qv,cumulativeLogNormal:WC,cumulativeUniform:JC,densityNormal:HC,densityLogNormal:VC,densityUniform:KC,quantileNormal:Zv,quantileLogNormal:QC,quantileUniform:e$,sampleNormal:Wv,sampleLogNormal:XC,sampleUniform:ZC,isArray:se,isBoolean:Ml,isDate:ll,isDefined(e){return e!==void 0},isNumber:ut,isObject:Ee,isRegExp:SC,isString:Se,isTuple:Gv,isValid(e){return e!=null&&e===e},toBoolean:_C,toDate(e){return wC(e)},toNumber:Zn,toString:AC,indexof:Ide,join:qde,lastindexof:Pde,replace:Gde,reverse:Yde,sort:Xde,slice:Hde,flush:Q8,lerp:K8,merge:zde,pad:t9,peek:rt,pluck:jde,span:Rp,inrange:Tf,truncate:n9,rgb:vl,lab:my,hcl:yy,hsl:gy,luminance:SA,contrast:Rde,sequence:rr,format:gde,utcFormat:pde,utcParse:yde,utcOffset:z9,utcSequence:U9,timeFormat:Fq,timeParse:mde,timeOffset:R9,timeSequence:L9,timeUnitSpecifier:_9,monthFormat:vde,monthAbbrevFormat:bde,dayFormat:xde,dayAbbrevFormat:Sde,quarter:Y8,utcquarter:X8,week:A9,utcweek:T9,dayofyear:w9,utcdayofyear:$9,warn:Ode,info:Nde,debug:Dde,extent(e){return Xa(e)},inScope:kde,intersect:Pq,clampRange:V8,pinchDistance:Ude,pinchAngle:Bde,screen:she,containerSize:lhe,windowSize:ohe,bandspace:Vde,setdata:dde,pathShape:ihe,panLinear:I8,panLog:P8,panPow:H8,panSymlog:G8,zoomLinear:mC,zoomLog:yC,zoomPow:ty,zoomSymlog:vC,encode:hde,modify:Lde,lassoAppend:che,lassoPath:fhe,intersectLasso:dhe},ghe=["view","item","group","xy","x","y"],phe="event.vega.",Hq="this.",LT={},Gq={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${ye(Lq+e)}]`,functions:mhe,constants:kq,visitors:LT},EA=Nq(Gq);function mhe(e){const t=Oq(e);ghe.forEach(n=>t[n]=phe+n);for(const n in Sp)t[n]=Hq+n;return He(t,Ade(e,Sp,LT)),t}function en(e,t,n){return arguments.length===1?Sp[e]:(Sp[e]=t,n&&(LT[e]=n),EA&&(EA.functions[e]=Hq+e),this)}en("bandwidth",Wde,yi);en("copy",Qde,yi);en("domain",Zde,yi);en("range",Jde,yi);en("invert",Kde,yi);en("scale",ehe,yi);en("gradient",the,yi);en("geoArea",Cde,yi);en("geoBounds",$de,yi);en("geoCentroid",Tde,yi);en("geoShape",nhe,yi);en("geoScale",Mde,yi);en("indata",fde,wde);en("data",zq,DT);en("treePath",rhe,DT);en("treeAncestors",ahe,DT);en("vlSelectionTest",ide,NT);en("vlSelectionIdTest",sde,NT);en("vlSelectionResolve",lde,NT);en("vlSelectionTuples",ode);function Ka(e,t){const n={};let i;try{e=Se(e)?e:ye(e)+"",i=kT(e)}catch{ae("Expression parse error: "+e)}i.visit(a=>{if(a.type!==_q)return;const s=a.callee.name,l=Gq.visitors[s];l&&l(s,a.arguments,t,n)});const r=EA(i);return r.globals.forEach(a=>{const s=Lq+a;!we(n,s)&&t.getSignal(a)&&(n[s]=t.signalRef(a))}),{$expr:He({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function yhe(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const vhe=ca(["rule"]),az=ca(["group","image","rect"]);function bhe(e,t){let n="";return vhe[t]||(e.x2&&(e.x?(az[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(az[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function UT(e){return(e+"").toLowerCase()}function xhe(e){return UT(e)==="operator"}function She(e){return UT(e)==="collect"}function lg(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function Ehe(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var _he={operator:(e,t)=>lg(e,["_"],t.code),parameter:(e,t)=>lg(e,["datum","_"],t.code),event:(e,t)=>lg(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return lg(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const a in i){const s="o["+ye(a)+"]";r+=`$=${i[a].code};if(${s}!==$)${s}=$,m=1;`}return r+=bhe(i,n),r+="return m;",lg(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(ye).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(a,s)=>{const l=t[s];let c,f;return a.path?(c=`a${a.path}`,f=`b${a.path}`):((n=n||{})["f"+s]=a,c=`this.f${s}(a)`,f=`this.f${s}(b)`),Ehe(c,f,-l,l)},r=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?r.bind(n):r}}};function whe(e){const t=this;xhe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Ahe(e){const t=this;if(e.params){const n=t.get(e.id);n||ae("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Che(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=se(r)?r.map(a=>sz(a,n,t)):sz(r,n,t)}return t}function sz(e,t,n){if(!e||!Ee(e))return e;for(let i=0,r=oz.length,a;i<r;++i)if(a=oz[i],we(e,a.key))return a.parse(e,t,n);return e}var oz=[{key:"$ref",parse:$he},{key:"$key",parse:Mhe},{key:"$expr",parse:The},{key:"$field",parse:khe},{key:"$encode",parse:Nhe},{key:"$compare",parse:Ohe},{key:"$context",parse:Dhe},{key:"$subflow",parse:Rhe},{key:"$tupleid",parse:zhe}];function $he(e,t){return t.get(e.$ref)||ae("Operator not defined: "+e.$ref)}function The(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=Ii(t.parameterExpression(e.$expr),e.$fields))}function Mhe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=EC(e.$key,e.$flat,t.expr.codegen))}function khe(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=zr(e.$field,e.$name,t.expr.codegen))}function Ohe(e,t){const n="c:"+e.$compare+"_"+e.$order,i=_e(e.$compare).map(r=>r&&r.$tupleid?Oe:r);return t.fn[n]||(t.fn[n]=bC(i,e.$order,t.expr.codegen))}function Nhe(e,t){const n=e.$encode,i={};for(const r in n){const a=n[r];i[r]=Ii(t.encodeExpression(a.$expr),a.$fields),i[r].output=a.$output}return i}function Dhe(e,t){return t}function Rhe(e,t){const n=e.$subflow;return function(i,r,a){const s=t.fork().parse(n),l=s.get(n.operators[0].id),c=s.signals.parent;return c&&c.set(a),l.detachSubflow=()=>t.detach(s),l}}function zhe(){return Oe}function Fhe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,r;e.source?i=t.events(e.source,e.type,n):e.merge&&(r=e.merge.map(a=>t.get(a)),i=r[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(a=>t.get(a)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&ae("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function Lhe(e){var t=this,n=Ee(n=e.source)?n.$ref:n,i=t.get(n),r=null,a=e.update,s=void 0;i||ae("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),a&&a.$expr&&(a.$params&&(s=t.parseParameters(a.$params)),a=t.handlerExpression(a.$expr)),t.update(e,i,r,a,s)}const Uhe={skip:!0};function Bhe(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(a=>{const s=t.signals[a];e.signals(a,s)&&(i[a]=s.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(a=>{const s=t.data[a];e.data(a,s)&&(r[a]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(a=>a.getState(e))),n}function jhe(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(a=>{n.update(t.signals[a],r[a],Uhe)}),Object.keys(i||{}).forEach(a=>{n.pulse(t.data[a].input,n.changeset().remove(Fr).insert(i[a]))}),(e.subcontext||[]).forEach((a,s)=>{const l=t.subcontext[s];l&&l.setState(a)})}function Yq(e,t,n,i){return new Xq(e,t,n,i)}function Xq(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||_he,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function lz(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}Xq.prototype=lz.prototype={fork(){const e=new lz(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),She(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let a=n.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(n.unresolved=n.unresolved||[]).push(()=>{a=n.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const a in e.data){const s=n.data[a]||(n.data[a]={});e.data[a].forEach(l=>s[l]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[UT(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:yhe,parseOperator:whe,parseOperatorParameters:Ahe,parseParameters:Che,parseStream:Fhe,parseUpdate:Lhe,getState:Bhe,setState:jhe};function qhe(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),Vq(t,e.description()))}function Vq(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Ihe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const l_="default";function Phe(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:l_,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const r=t.value,a=r?Se(r)?r:r.user:l_,s=i.item&&i.item.cursor||null;return r&&a===r.user&&s==r.item?r:{user:a,item:s}}),e.add(null,function(n){let i=n.cursor,r=this.value;return Se(i)||(r=i.item,i=i.user),_A(e,i&&i!==l_?i:r||i),r},{cursor:t})}function _A(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function fv(e,t){var n=e._runtime.data;return we(n,t)||ae("Unrecognized data set: "+t),n[t]}function Hhe(e,t){return arguments.length<2?fv(this,e).values.value:Ub.call(this,e,hc().remove(Fr).insert(t))}function Ub(e,t){f7(t)||ae("Second argument to changes must be a changeset.");const n=fv(this,e);return n.modified=!0,this.pulse(n.input,t)}function Ghe(e,t){return Ub.call(this,e,hc().insert(t))}function Yhe(e,t){return Ub.call(this,e,hc().remove(t))}function Wq(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Qq(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Bb(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Xhe(e){var t=Bb(e),n=Wq(e),i=Qq(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(a){e.error(a)}})}function Vhe(e,t,n){var i=e._renderer,r=i&&i.canvas(),a,s,l;return r&&(l=Bb(e),s=t.changedTouches?t.changedTouches[0]:t,a=wb(s,r),a[0]-=l[0],a[1]-=l[1]),t.dataflow=e,t.item=n,t.vega=Whe(e,n,a),t}function Whe(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function r(s){var l=i,c;if(s){for(c=t;c;c=c.mark.group)if(c.mark.name===s){l=c;break}}return l&&l.mark&&l.mark.interactive?l:{}}function a(s){if(!s)return n;Se(s)&&(s=r(s));const l=n.slice();for(;s;)l[0]-=s.x||0,l[1]-=s.y||0,s=s.mark&&s.mark.group;return l}return{view:ri(e),item:ri(t||{}),group:r,xy:a,x:s=>a(s)[0],y:s=>a(s)[1]}}const uz="view",Qhe="timer",Zhe="window",Khe={trap:!1};function Jhe(e){const t=He({defaults:{}},e),n=(i,r)=>{r.forEach(a=>{se(i[a])&&(i[a]=ca(i[a]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function Zq(e,t,n,i){e._eventListeners.push({type:n,sources:_e(t),handler:i})}function ege(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[t]:r?!r[t]:e.preventDefault()}function g1(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||Ee(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function tge(e,t,n){var i=this,r=new Vv(n),a=function(f,d){i.runAsync(null,()=>{e===uz&&ege(i,t)&&f.preventDefault(),r.receive(Vhe(i,f,d))})},s;if(e===Qhe)g1(i,"timer",t)&&i.timer(a,t);else if(e===uz)g1(i,"view",t)&&i.addEventListener(t,a,Khe);else if(e===Zhe?g1(i,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&g1(i,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)i.warn("Can not resolve event source: "+e);else{for(var l=0,c=s.length;l<c;++l)s[l].addEventListener(t,a);Zq(i,s,t,a)}return r}function cz(e){return e.item}function fz(e){return e.item.mark.source}function dz(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function nge(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",cz),fz,dz(e)),this.on(this.events("view","pointerout",cz),fz,dz(t)),this}function ige(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),i=this._eventListeners,r,a,s,l,c;for(r=t.length;--r>=0;)t[r].stop();for(r=i.length;--r>=0;)for(s=i[r],a=s.sources.length;--a>=0;)s.sources[a].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),r=n.length;--r>=0;)c=n[r].type,l=n[r].handler,this._handler.off(c,l);return this}function lr(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return n!=null&&(i.textContent=n),i}const rge="vega-bind",age="vega-bind-name",sge="vega-bind-radio";function oge(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,s)})}},i.debounce&&(r.update=xC(i.debounce,r.update))),(i.input==null&&i.element?lge:cge)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function lge(e,t,n,i){const r=n.event||"input",a=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,a),Zq(i,t,r,a),e.set=s=>{t.value=s,t.dispatchEvent(uge(r))}}function uge(e){return typeof Event<"u"?new Event(e):{type:e}}function cge(e,t,n,i){const r=i.signal(n.signal),a=lr("div",{class:rge}),s=n.input==="radio"?a:a.appendChild(lr("label"));s.appendChild(lr("span",{class:age},n.name||n.signal)),t.appendChild(a);let l=fge;switch(n.input){case"checkbox":l=dge;break;case"select":l=hge;break;case"radio":l=gge;break;case"range":l=pge;break}l(e,s,n,r)}function fge(e,t,n,i){const r=lr("input");for(const a in n)a!=="signal"&&a!=="element"&&r.setAttribute(a==="input"?"type":a,n[a]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=a=>r.value=a}function dge(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const a=lr("input",r);t.appendChild(a),a.addEventListener("change",()=>e.update(a.checked)),e.elements=[a],e.set=s=>a.checked=!!s||null}function hge(e,t,n,i){const r=lr("select",{name:n.signal}),a=n.labels||[];n.options.forEach((s,l)=>{const c={value:s};dv(s,i)&&(c.selected=!0),r.appendChild(lr("option",c,(a[l]||s)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=s=>{for(let l=0,c=n.options.length;l<c;++l)if(dv(n.options[l],s)){r.selectedIndex=l;return}}}function gge(e,t,n,i){const r=lr("span",{class:sge}),a=n.labels||[];t.appendChild(r),e.elements=n.options.map((s,l)=>{const c={type:"radio",name:n.signal,value:s};dv(s,i)&&(c.checked=!0);const f=lr("input",c);f.addEventListener("change",()=>e.update(s));const d=lr("label",{},(a[l]||s)+"");return d.prepend(f),r.appendChild(d),f}),e.set=s=>{const l=e.elements,c=l.length;for(let f=0;f<c;++f)dv(l[f].value,s)&&(l[f].checked=!0)}}function pge(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,a=n.min||Math.min(0,r,+i)||0,s=n.step||pl(a,r,100),l=lr("input",{type:"range",name:n.signal,min:a,max:r,step:s});l.value=i;const c=lr("span",{},+i);t.appendChild(l),t.appendChild(c);const f=()=>{c.textContent=l.value,e.update(+l.value)};l.addEventListener("input",f),l.addEventListener("change",f),e.elements=[l],e.set=d=>{l.value=d,c.textContent=d}}function dv(e,t){return e===t||e+""==t+""}function Kq(e,t,n,i,r,a){return t=t||new i(e.loader()),t.initialize(n,Wq(e),Qq(e),Bb(e),r,a).background(e.background())}function BT(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function mge(e,t,n,i){const r=new i(e.loader(),BT(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Bb(e),e);return t&&t.handlers().forEach(a=>{r.on(a.type,a.handler)}),r}function yge(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,a=Ab(i);e=n._el=e?u_(n,e,!0):null,qhe(n),a||n.error("Unrecognized renderer type: "+i);const s=a.handler||Jp,l=e?a.renderer:a.headless;return n._renderer=l?Kq(n,n._renderer,e,l):null,n._handler=mge(n,n._handler,e,s),n._redraw=!0,e&&r!=="none"&&(t=t?n._elBind=u_(n,t,!0):e.appendChild(lr("form",{class:"vega-bindings"})),n._bind.forEach(c=>{c.param.element&&r!=="container"&&(c.element=u_(n,c.param.element,!!c.param.input))}),n._bind.forEach(c=>{oge(n,c.element||t,c)})),n}function u_(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const ug=e=>+e||0,vge=e=>({top:e,bottom:e,left:e,right:e});function hz(e){return Ee(e)?{top:ug(e.top),bottom:ug(e.bottom),left:ug(e.left),right:ug(e.right)}:vge(ug(e))}async function jT(e,t,n,i){const r=Ab(t),a=r&&r.headless;return a||ae("Unrecognized renderer type: "+t),await e.runAsync(),Kq(e,null,null,a,n,i).renderAsync(e._scenegraph.root)}async function bge(e,t){e!==nl.Canvas&&e!==nl.SVG&&e!==nl.PNG&&ae("Unrecognized image type: "+e);const n=await jT(this,e,t);return e===nl.SVG?xge(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function xge(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Sge(e,t){return(await jT(this,nl.Canvas,e,t)).canvas()}async function Ege(e){return(await jT(this,nl.SVG,e)).svg()}function _ge(e,t,n){return Yq(e,Qf,Sp,n).parse(t)}function wge(e){var t=this._runtime.scales;return we(t,e)||ae("Unrecognized scale or projection: "+e),t[e].value}var Jq="width",eI="height",qT="padding",gz={skip:!0};function tI(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===qT?i.left+i.right:0)}function nI(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===qT?i.top+i.bottom:0)}function Age(e){var t=e._signals,n=t[Jq],i=t[eI],r=t[qT];function a(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,l=>{e._width=l.size,e._viewWidth=tI(e,l.size),a()},{size:n}),e._resizeHeight=e.add(null,l=>{e._height=l.size,e._viewHeight=nI(e,l.size),a()},{size:i});const s=e.add(null,a,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,s.rank=r.rank+1}function Cge(e,t,n,i,r,a){this.runAfter(s=>{let l=0;s._autosize=0,s.width()!==n&&(l=1,s.signal(Jq,n,gz),s._resizeWidth.skip(!0)),s.height()!==i&&(l=1,s.signal(eI,i,gz),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==r[0]||s._origin[1]!==r[1])&&(s._resize=1,s._origin=r),l&&s.run("enter"),a&&s.runAfter(c=>c.resize())},!1,1)}function $ge(e){return this._runtime.getState(e||{data:Tge,signals:Mge,recurse:!0})}function Tge(e,t){return t.modified&&se(t.input.value)&&!e.startsWith("_:vega:_")}function Mge(e,t){return!(e==="parent"||t instanceof Qf.proxy)}function kge(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Oge(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(tle(n,t))}function Nge(e,t,n,i){const r=e.element();r&&r.setAttribute("title",Dge(i))}function Dge(e){return e==null?"":se(e)?iI(e):Ee(e)&&!ll(e)?Rge(e):e+""}function Rge(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(se(n)?iI(n):rI(n))}).join(`
`)}function iI(e){return"["+e.map(rI).join(", ")+"]"}function rI(e){return se(e)?"[]":Ee(e)&&!ll(e)?"{}":e}function zge(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e?.();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function aI(e,t){const n=this;if(t=t||{},zf.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const a=He({},e.locale,t.locale);n.locale(t7(a.number,a.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||nl.Canvas,n._scenegraph=new JU;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Nge,n._redraw=!0,n._handler=new Jp().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Jhe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=_ge(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(a=>({state:null,param:He({},a)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=tI(n,n._width),n._viewHeight=nI(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Age(n),Ihe(n),Phe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function p1(e,t){return we(e._signals,t)?e._signals[t]:ae("Unrecognized signal name: "+ye(t))}function sI(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function pz(e,t,n,i){let r=sI(n,i);return r||(r=BT(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function mz(e,t,n){const i=sI(t,n);return i&&t._targets.remove(i),e}be(aI,zf,{async evaluate(e,t,n){if(await zf.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Xhe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&M1(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&Vq(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=p1(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",hz(e)):hz(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Ab(e)||ae("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(zf.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(p1(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Cge,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=BT(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,r,a;--i>=0;)if(a=n[i].type,r=n[i].handler,e===a&&(t===r||t===r.raw)){this._handler.off(a,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return pz(this,e,p1(this,e),t)},removeSignalListener(e,t){return mz(this,p1(this,e),t)},addDataListener(e,t){return pz(this,e,fv(this,e).values,t)},removeDataListener(e,t){return mz(this,fv(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=_A(this,null);this._globalCursor=!!e,t&&_A(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Oge,events:tge,finalize:ige,hover:nge,data:Hhe,change:Ub,insert:Ghe,remove:Yhe,scale:wge,initialize:yge,toImageURL:bge,toCanvas:Sge,toSVG:Ege,getState:$ge,setState:kge,_watchPixelRatio:zge});const Fge="view",hv="[",gv="]",oI="{",lI="}",Lge=":",uI=",",Uge="@",Bge=">",jge=/[[\]{}]/,qge={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let cI,fI;function zl(e,t,n){return cI=t||Fge,fI=n||qge,dI(e.trim()).map(wA)}function Ige(e){return fI[e]}function Kg(e,t,n,i,r){const a=e.length;let s=0,l;for(;t<a;++t){if(l=e[t],!s&&l===n)return t;r&&r.includes(l)?--s:i&&i.includes(l)&&++s}return t}function dI(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=Kg(e,r,uI,hv+oI,gv+lI),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function wA(e){return e[0]==="["?Pge(e):Hge(e)}function Pge(e){const t=e.length;let n=1,i;if(n=Kg(e,n,gv,hv,gv),n===t)throw"Empty between selector: "+e;if(i=dI(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Bge)throw"Expected '>' after between selector: "+e;i=i.map(wA);const r=wA(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function Hge(e){const t={source:cI},n=[];let i=[0,0],r=0,a=0,s=e.length,l=0,c,f;if(e[s-1]===lI){if(l=e.lastIndexOf(oI),l>=0){try{i=Gge(e.substring(l+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,l).trim(),s=e.length}else throw"Unmatched right brace: "+e;l=0}if(!s)throw e;if(e[0]===Uge&&(r=++l),c=Kg(e,l,Lge),c<s&&(n.push(e.substring(a,c).trim()),a=l=++c),l=Kg(e,l,hv),l===s)n.push(e.substring(a,s).trim());else if(n.push(e.substring(a,l).trim()),f=[],a=++l,a===s)throw"Unmatched left bracket: "+e;for(;l<s;){if(l=Kg(e,l,gv),l===s)throw"Unmatched left bracket: "+e;if(f.push(e.substring(a,l).trim()),l<s-1&&e[++l]!==hv)throw"Expected left bracket: "+e;a=++l}if(!(s=n.length)||jge.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],r?t.markname=n[0].slice(1):Ige(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),f!=null&&(t.filter=f),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function Gge(e){const t=e.split(uI);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function Yge(e){return Ee(e)?e:{type:e||"pad"}}const cg=e=>+e||0,Xge=e=>({top:e,bottom:e,left:e,right:e});function Vge(e){return Ee(e)?e.signal?e:{top:cg(e.top),bottom:cg(e.bottom),left:cg(e.left),right:cg(e.right)}:Xge(cg(e))}const wn=e=>Ee(e)&&!se(e)?He({},e):{value:e};function yz(e,t,n,i){return n!=null?(Ee(n)&&!se(n)||se(n)&&n.length&&Ee(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function In(e,t,n){for(const i in t)yz(e,i,t[i]);for(const i in n)yz(e,i,n[i],"update")}function qd(e,t,n){for(const i in t)n&&we(n,i)||(e[i]=He(e[i]||{},t[i]));return e}function Cf(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const IT="mark",PT="frame",HT="scope",Wge="axis",Qge="axis-domain",Zge="axis-grid",Kge="axis-label",Jge="axis-tick",epe="axis-title",tpe="legend",npe="legend-band",ipe="legend-entry",rpe="legend-gradient",hI="legend-label",ape="legend-symbol",spe="legend-title",ope="title",lpe="title-text",upe="title-subtitle";function cpe(e,t,n,i,r){const a={},s={};let l,c,f,d;c="lineBreak",t==="text"&&r[c]!=null&&!Cf(c,e)&&c_(a,c,r[c]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),d=n===PT?r.group:n===IT?He({},r.mark,r[t]):null;for(c in d)f=Cf(c,e)||(c==="fill"||c==="stroke")&&(Cf("fill",e)||Cf("stroke",e)),f||c_(a,c,d[c]);_e(i).forEach(g=>{const p=r.style&&r.style[g];for(const y in p)Cf(y,e)||c_(a,y,p[y])}),e=He({},e);for(c in a)d=a[c],d.signal?(l=l||{})[c]=d:s[c]=d;return e.enter=He(s,e.enter),l&&(e.update=He(l,e.update)),e}function c_(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const gI=e=>Se(e)?ye(e):e.signal?`(${e.signal})`:pI(e);function jb(e){if(e.gradient!=null)return dpe(e);let t=e.signal?`(${e.signal})`:e.color?fpe(e.color):e.field!=null?pI(e.field):e.value!==void 0?ye(e.value):void 0;return e.scale!=null&&(t=hpe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${X1(e.exponent)})`),e.mult!=null&&(t+=`*${X1(e.mult)}`),e.offset!=null&&(t+=`+${X1(e.offset)}`),e.round&&(t=`round(${t})`),t}const m1=(e,t,n,i)=>`(${e}(${[t,n,i].map(jb).join(",")})+'')`;function fpe(e){return e.c?m1("hcl",e.h,e.c,e.l):e.h||e.s?m1("hsl",e.h,e.s,e.l):e.l||e.a?m1("lab",e.l,e.a,e.b):e.r||e.g||e.b?m1("rgb",e.r,e.g,e.b):null}function dpe(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:ye(n));for(;t.length&&rt(t)==null;)t.pop();return t.unshift(gI(e.gradient)),`gradient(${t.join(",")})`}function X1(e){return Ee(e)?"("+jb(e)+")":e}function pI(e){return mI(Ee(e)?e:{datum:e})}function mI(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):ae("Invalid field reference: "+ye(e));return e.signal||(i=Se(i)?ns(i).map(ye).join("]["):mI(i)),t+"["+i+"]"}function hpe(e,t){const n=gI(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+X1(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function gpe(e){let t="";return e.forEach(n=>{const i=jb(n);t+=n.test?`(${n.test})?${i}:`:i}),rt(t)===":"&&(t+="null"),t}function yI(e,t,n,i,r,a){const s={};a=a||{},a.encoders={$encode:s},e=cpe(e,t,n,i,r.config);for(const l in e)s[l]=ppe(e[l],t,a,r);return a}function ppe(e,t,n,i){const r={},a={};for(const s in e)e[s]!=null&&(r[s]=ype(mpe(e[s]),i,n,a));return{$expr:{marktype:t,channels:r},$fields:Object.keys(a),$output:Object.keys(e)}}function mpe(e){return se(e)?gpe(e):jb(e)}function ype(e,t,n,i){const r=Ka(e,t);return r.$fields.forEach(a=>i[a]=1),He(n,r.$params),r.$expr}const vpe="outer",bpe=["value","update","init","react","bind"];function vz(e,t){ae(e+' for "outer" push: '+ye(t))}function vI(e,t){const n=e.name;if(e.push===vpe)t.signals[n]||vz("No prior signal definition",n),bpe.forEach(i=>{e[i]!==void 0&&vz("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function AA(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function qb(e,t,n,i){return new AA(e,t,n,i)}function pv(e,t){return qb("operator",e,t)}function ke(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Ep(e,t){return t?{$field:e,$name:t}:{$field:e}}const CA=Ep("key");function bz(e,t){return{$compare:e,$order:t}}function xpe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Spe="ascending",Epe="descending";function _pe(e){return Ee(e)?(e.order===Epe?"-":"+")+Ib(e.op,e.field):""}function Ib(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const GT="scope",$A="view";function pn(e){return e&&e.signal}function wpe(e){return e&&e.expr}function V1(e){if(pn(e))return!0;if(Ee(e)){for(const t in e)if(V1(e[t]))return!0}return!1}function Jr(e,t){return e??t}function Fu(e){return e&&e.signal||e}const xz="timer";function _p(e,t){return(e.merge?Cpe:e.stream?$pe:e.type?Tpe:ae("Invalid stream specification: "+ye(e)))(e,t)}function Ape(e){return e===GT?$A:e||$A}function Cpe(e,t){const n=e.merge.map(r=>_p(r,t)),i=YT({merge:n},e,t);return t.addStream(i).id}function $pe(e,t){const n=_p(e.stream,t),i=YT({stream:n},e,t);return t.addStream(i).id}function Tpe(e,t){let n;e.type===xz?(n=t.event(xz,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Ape(e.source),e.type);const i=YT({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function YT(e,t,n){let i=t.between;return i&&(i.length!==2&&ae('Stream "between" parameter must have 2 entries: '+ye(t)),e.between=[_p(i[0],n),_p(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(Mpe(t.marktype,t.markname,t.markrole)),t.source===GT&&i.push("inScope(event.item)"),i.length&&(e.filter=Ka("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function Mpe(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const kpe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Ope(e,t,n){const i=e.encode,r={target:n};let a=e.events,s=e.update,l=[];a||ae("Signal update missing events specification."),Se(a)&&(a=zl(a,t.isSubscope()?GT:$A)),a=_e(a).filter(c=>c.signal||c.scale?(l.push(c),0):1),l.length>1&&(l=[Dpe(l)]),a.length&&l.push(a.length>1?{merge:a}:a[0]),i!=null&&(s&&ae("Signal encode and update are mutually exclusive."),s="encode(item(),"+ye(i)+")"),r.update=Se(s)?Ka(s,t):s.expr!=null?Ka(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:kpe,$params:{$value:t.signalRef(s.signal)}}:ae("Invalid signal update specification."),e.force&&(r.options={force:!0}),l.forEach(c=>t.addUpdate(He(Npe(c,t),r)))}function Npe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):_p(e,t)}}function Dpe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Rpe(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?ae("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=Ka(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>Ope(r,t,n.id))}const Ct=e=>(t,n,i)=>qb(e,n,t||void 0,i),bI=Ct("aggregate"),zpe=Ct("axisticks"),xI=Ct("bound"),va=Ct("collect"),Sz=Ct("compare"),Fpe=Ct("datajoin"),SI=Ct("encode"),Lpe=Ct("expression"),Upe=Ct("facet"),Bpe=Ct("field"),jpe=Ct("key"),qpe=Ct("legendentries"),Ipe=Ct("load"),Ppe=Ct("mark"),Hpe=Ct("multiextent"),Gpe=Ct("multivalues"),Ype=Ct("overlap"),Xpe=Ct("params"),EI=Ct("prefacet"),Vpe=Ct("projection"),Wpe=Ct("proxy"),Qpe=Ct("relay"),_I=Ct("render"),Zpe=Ct("scale"),yc=Ct("sieve"),Kpe=Ct("sortitems"),wI=Ct("viewlayout"),Jpe=Ct("values");let eme=0;const AI={min:"min",max:"max",count:"sum"};function tme(e,t){const n=e.type||"linear";dU(n)||ae("Unrecognized scale type: "+ye(n)),t.addScale(e.name,{type:n,domain:void 0})}function nme(e,t){const n=t.getScale(e.name).params;let i;n.domain=CI(e.domain,e,t),e.range!=null&&(n.range=TI(e,t,n)),e.interpolate!=null&&dme(e.interpolate,n),e.nice!=null&&(n.nice=fme(e.nice,t)),e.bins!=null&&(n.bins=cme(e.bins,t));for(i in e)we(n,i)||i==="name"||(n[i]=Or(e[i],t))}function Or(e,t){return Ee(e)?e.signal?t.signalRef(e.signal):ae("Unsupported object: "+ye(e)):e}function W1(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Or(n,t))}function Pb(e){ae("Can not find data set: "+ye(e))}function CI(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&ae("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(se(e)?ime:e.fields?ame:rme)(e,t,n)}function ime(e,t,n){return e.map(i=>Or(i,n))}function rme(e,t,n){const i=n.getData(e.data);return i||Pb(e.data),td(t.type)?i.valuesRef(n,e.field,$I(e.sort,!1)):pU(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function ame(e,t,n){const i=e.data,r=e.fields.reduce((a,s)=>(s=Se(s)?{data:i,field:s}:se(s)||s.signal?sme(s,n):s,a.push(s),a),[]);return(td(t.type)?ome:pU(t.type)?lme:ume)(e,n,r)}function sme(e,t){const n="_:vega:_"+eme++,i=va({});if(se(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+ye(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,yc({})]),{data:n,field:"data"}}function ome(e,t,n){const i=$I(e.sort,!0);let r,a;const s=n.map(f=>{const d=t.getData(f.data);return d||Pb(f.data),d.countsRef(t,f.field,i)}),l={groupby:CA,pulse:s};i&&(r=i.op||"count",a=i.field?Ib(r,i.field):"count",l.ops=[AI[r]],l.fields=[t.fieldRef(a)],l.as=[a]),r=t.add(bI(l));const c=t.add(va({pulse:ke(r)}));return a=t.add(Jpe({field:CA,sort:t.sortRef(i),pulse:ke(c)})),ke(a)}function $I(e,t){return e&&(!e.field&&!e.op?Ee(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?ae("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!AI[e.op]&&ae("Multiple domain scales can not be sorted using "+e.op)),e}function lme(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||Pb(r.data),a.domainRef(t,r.field)});return ke(t.add(Gpe({values:i})))}function ume(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||Pb(r.data),a.extentRef(t,r.field)});return ke(t.add(Hpe({extents:i})))}function cme(e,t){return e.signal||se(e)?W1(e,t):t.objectProperty(e)}function fme(e,t){return e.signal?t.signalRef(e.signal):Ee(e)?{interval:Or(e.interval),step:Or(e.step)}:Or(e)}function dme(e,t){t.interpolate=Or(e.type||e),e.gamma!=null&&(t.interpolateGamma=Or(e.gamma))}function TI(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(Se(r)){if(i&&we(i,r))return e=He({},e,{range:i[r]}),TI(e,t,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=td(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:ae("Unrecognized scale range value: "+ye(r))}else if(r.scheme){n.scheme=se(r.scheme)?W1(r.scheme,t):Or(r.scheme,t),r.extent&&(n.schemeExtent=W1(r.extent,t)),r.count&&(n.schemeCount=Or(r.count,t));return}else if(r.step){n.rangeStep=Or(r.step,t);return}else{if(td(e.type)&&!se(r))return CI(r,e,t);se(r)||ae("Unsupported range type: "+ye(r))}return r.map(a=>(se(a)?W1:Or)(a,t))}function hme(e,t){const n=t.config.projection||{},i={};for(const r in e)r!=="name"&&(i[r]=TA(e[r],r,t));for(const r in n)i[r]==null&&(i[r]=TA(n[r],r,t));t.addProjection(e.name,i)}function TA(e,t,n){return se(e)?e.map(i=>TA(i,t,n)):Ee(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:ae("Unsupported parameter object: "+ye(e)):e}const ba="top",Id="left",Pd="right",_l="bottom",MI="center",gme="vertical",pme="start",mme="middle",yme="end",MA="index",XT="label",vme="offset",cd="perc",bme="perc2",Dr="value",lm="guide-label",VT="guide-title",xme="group-title",Sme="group-subtitle",Ez="symbol",Q1="gradient",kA="discrete",OA="size",Eme="shape",_me="fill",wme="stroke",Ame="strokeWidth",Cme="strokeDash",$me="opacity",WT=[OA,Eme,_me,wme,Ame,Cme,$me],um={name:1,style:1,interactive:1},at={value:0},Rr={value:1},Hb="group",kI="rect",QT="rule",Tme="symbol",vc="text";function wp(e){return e.type=Hb,e.interactive=e.interactive||!1,e}function Pi(e,t){const n=(i,r)=>Jr(e[i],Jr(t[i],r));return n.isVertical=i=>gme===Jr(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Jr(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Jr(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Jr(e.columns,Jr(t.columns,+n.isVertical(!0))),n}function OI(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Mme(e,t,n){const i=t.config.style[n];return i&&i[e]}function Gb(e,t,n){return`item.anchor === '${pme}' ? ${e} : item.anchor === '${yme}' ? ${t} : ${n}`}const ZT=Gb(ye(Id),ye(Pd),ye(MI));function kme(e){const t=e("tickBand");let n=e("tickOffset"),i,r;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},Ee(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}function NI(e,t){return t?e?Ee(e)?Object.assign({},e,{offset:NI(e.offset,t)}):{value:e,offset:t}:t:e}function gr(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=qd(e.encode,t,um)):e.interactive=!1,e}function Ome(e,t,n,i){const r=Pi(e,n),a=r.isVertical(),s=r.gradientThickness(),l=r.gradientLength();let c,f,d,g,p;a?(f=[0,1],d=[0,0],g=s,p=l):(f=[0,0],d=[1,0],g=l,p=s);const y={enter:c={opacity:at,x:at,y:at,width:wn(g),height:wn(p)},update:He({},c,{opacity:Rr,fill:{gradient:t,start:f,stop:d}}),exit:{opacity:at}};return In(y,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),gr({type:kI,role:rpe,encode:y},i)}function Nme(e,t,n,i,r){const a=Pi(e,n),s=a.isVertical(),l=a.gradientThickness(),c=a.gradientLength();let f,d,g,p,y="";s?(f="y",g="y2",d="x",p="width",y="1-"):(f="x",g="x2",d="y",p="height");const v={opacity:at,fill:{scale:t,field:Dr}};v[f]={signal:y+"datum."+cd,mult:c},v[d]=at,v[g]={signal:y+"datum."+bme,mult:c},v[p]=wn(l);const b={enter:v,update:He({},v,{opacity:Rr}),exit:{opacity:at}};return In(b,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),gr({type:kI,role:npe,key:Dr,from:r,encode:b},i)}const Dme=`datum.${cd}<=0?"${Id}":datum.${cd}>=1?"${Pd}":"${MI}"`,Rme=`datum.${cd}<=0?"${_l}":datum.${cd}>=1?"${ba}":"${mme}"`;function _z(e,t,n,i){const r=Pi(e,t),a=r.isVertical(),s=wn(r.gradientThickness()),l=r.gradientLength();let c=r("labelOverlap"),f,d,g,p,y="";const v={enter:f={opacity:at},update:d={opacity:Rr,text:{field:XT}},exit:{opacity:at}};return In(v,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:Jr(e.labelLimit,t.gradientLabelLimit)}),a?(f.align={value:"left"},f.baseline=d.baseline={signal:Rme},g="y",p="x",y="1-"):(f.align=d.align={signal:Dme},f.baseline={value:"top"},g="x",p="y"),f[g]=d[g]={signal:y+"datum."+cd,mult:l},f[p]=d[p]=s,s.offset=Jr(e.labelOffset,t.gradientLabelOffset)||0,c=c?{separation:r("labelSeparation"),method:c,order:"datum."+MA}:void 0,gr({type:vc,role:hI,style:lm,key:Dr,from:i,encode:v,overlap:c},n)}function zme(e,t,n,i,r){const a=Pi(e,t),s=n.entries,l=!!(s&&s.interactive),c=s?s.name:void 0,f=a("clipHeight"),d=a("symbolOffset"),g={data:"value"},p=`(${r}) ? datum.${vme} : datum.${OA}`,y=f?wn(f):{field:OA},v=`datum.${MA}`,b=`max(1, ${r})`;let S,_,w,A,$;y.mult=.5,S={enter:_={opacity:at,x:{signal:p,mult:.5,offset:d},y},update:w={opacity:Rr,x:_.x,y:_.y},exit:{opacity:at}};let M=null,k=null;e.fill||(M=t.symbolBaseFillColor,k=t.symbolBaseStrokeColor),In(S,{fill:a("symbolFillColor",M),shape:a("symbolType"),size:a("symbolSize"),stroke:a("symbolStrokeColor",k),strokeDash:a("symbolDash"),strokeDashOffset:a("symbolDashOffset"),strokeWidth:a("symbolStrokeWidth")},{opacity:a("symbolOpacity")}),WT.forEach(B=>{e[B]&&(w[B]=_[B]={scale:e[B],field:Dr})});const T=gr({type:Tme,role:ape,key:Dr,from:g,clip:f?!0:void 0,encode:S},n.symbols),D=wn(d);D.offset=a("labelOffset"),S={enter:_={opacity:at,x:{signal:p,offset:D},y},update:w={opacity:Rr,text:{field:XT},x:_.x,y:_.y},exit:{opacity:at}},In(S,{align:a("labelAlign"),baseline:a("labelBaseline"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:a("labelLimit")});const R=gr({type:vc,role:hI,style:lm,key:Dr,from:g,encode:S},n.labels);return S={enter:{noBound:{value:!f},width:at,height:f?wn(f):at,opacity:at},exit:{opacity:at},update:w={opacity:Rr,row:{signal:null},column:{signal:null}}},a.isVertical(!0)?(A=`ceil(item.mark.items.length / ${b})`,w.row.signal=`${v}%${A}`,w.column.signal=`floor(${v} / ${A})`,$={field:["row",v]}):(w.row.signal=`floor(${v} / ${b})`,w.column.signal=`${v} % ${b}`,$={field:v}),w.column.signal=`(${r})?${w.column.signal}:${v}`,i={facet:{data:i,name:"value",groupby:MA}},wp({role:HT,from:i,encode:qd(S,s,um),marks:[T,R],name:c,interactive:l,sort:$})}function Fme(e,t){const n=Pi(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const KT='item.orient === "left"',JT='item.orient === "right"',Yb=`(${KT} || ${JT})`,Lme=`datum.vgrad && ${Yb}`,Ume=Gb('"top"','"bottom"','"middle"'),Bme=Gb('"right"','"left"','"center"'),jme=`datum.vgrad && ${JT} ? (${Bme}) : (${Yb} && !(datum.vgrad && ${KT})) ? "left" : ${ZT}`,qme=`item._anchor || (${Yb} ? "middle" : "start")`,Ime=`${Lme} ? (${KT} ? -90 : 90) : 0`,Pme=`${Yb} ? (datum.vgrad ? (${JT} ? "bottom" : "top") : ${Ume}) : "top"`;function Hme(e,t,n,i){const r=Pi(e,t),a={enter:{opacity:at},update:{opacity:Rr,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:at}};return In(a,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:qme},angle:{signal:Ime},align:{signal:jme},baseline:{signal:Pme},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),gr({type:vc,role:spe,style:VT,from:i,encode:a},n)}function Gme(e,t){let n;return Ee(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+wz(e.path)+")":e.sphere&&(n="geoShape("+wz(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function wz(e){return Ee(e)&&e.signal?e.signal:ye(e)}function DI(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===Hb?HT:t||IT}function Yme(e){return{marktype:e.type,name:e.name||void 0,role:e.role||DI(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Xme(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function eM(e,t){const n=g7(e.type);n||ae("Unrecognized transform type: "+ye(e.type));const i=qb(n.type.toLowerCase(),null,RI(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function RI(e,t,n){const i={},r=e.params.length;for(let a=0;a<r;++a){const s=e.params[a];i[s.name]=Vme(s,t,n)}return i}function Vme(e,t,n){const i=e.type,r=t[e.name];if(i==="index")return Wme(e,t,n);if(r===void 0){e.required&&ae("Missing required "+ye(t.type)+" parameter: "+ye(e.name));return}else{if(i==="param")return Qme(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!pn(r)?r.map(a=>Az(e,a,n)):Az(e,r,n)}function Az(e,t,n){const i=e.type;if(pn(t))return $z(i)?ae("Expression references can not be signals."):f_(i)?n.fieldRef(t):Tz(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||f_(i);return r&&Zme(t)?n.exprRef(t.expr,t.as):r&&Kme(t)?Ep(t.field,t.as):$z(i)?Ka(t,n):Jme(i)?ke(n.getData(t).values):f_(i)?Ep(t):Tz(i)?n.compareRef(t):t}}function Wme(e,t,n){return Se(t.from)||ae('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function Qme(e,t,n){const i=t[e.name];return e.array?(se(i)||ae("Expected an array of sub-parameters. Instead: "+ye(i)),i.map(r=>Cz(e,r,n))):Cz(e,i,n)}function Cz(e,t,n){const i=e.params.length;let r;for(let s=0;s<i;++s){r=e.params[s];for(const l in r.key)if(r.key[l]!==t[l]){r=null;break}if(r)break}r||ae("Unsupported parameter: "+ye(t));const a=He(RI(r,t,n),r.key);return ke(n.add(Xpe(a)))}const Zme=e=>e&&e.expr,Kme=e=>e&&e.field,Jme=e=>e==="data",$z=e=>e==="expr",f_=e=>e==="field",Tz=e=>e==="compare";function e0e(e,t,n){let i,r,a,s,l;return e?(i=e.facet)&&(t||ae("Only group marks can be faceted."),i.field!=null?s=l=Z1(i,n):(e.data?l=ke(n.getData(e.data).aggregate):(a=eM(He({type:"aggregate",groupby:_e(i.groupby)},i.aggregate),n),a.params.key=n.keyRef(i.groupby),a.params.pulse=Z1(i,n),s=l=ke(n.add(a))),r=n.keyRef(i.groupby,!0))):s=ke(n.add(va(null,[{}]))),s||(s=Z1(e,n)),{key:r,pulse:s,parent:l}}function Z1(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:ke(t.getData(e.data).output)}function Ju(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}Ju.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let a=t[0],s=null,l=1;for(a&&a.type==="load"&&(a=t[1]),e.add(t[0]);l<n;++l)t[l].params.pulse=ke(t[l-1]),e.add(t[l]),t[l].type==="aggregate"&&(s=t[l]);return new Ju(e,a,r,i,s)};function zI(e){return Se(e)?e:null}function Mz(e,t,n){const i=Ib(n.op,n.field);let r;if(t.ops){for(let a=0,s=t.as.length;a<s;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function fg(e,t,n,i,r,a,s){const l=t[n]||(t[n]={}),c=_pe(a);let f=zI(r),d,g;if(f!=null&&(e=t.scope,f=f+(c?"|"+c:""),d=l[f]),!d){const p=a?{field:CA,pulse:t.countsRef(e,r,a)}:{field:e.fieldRef(r),pulse:ke(t.output)};c&&(p.sort=e.sortRef(a)),g=e.add(qb(i,void 0,p)),s&&(t.index[r]=g),d=ke(g),f!=null&&(l[f]=d)}return d}Ju.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),a=zI(t);let s,l,c;return a!=null&&(e=i.scope,s=r[a]),s?n&&n.field&&Mz(e,s.agg.params,n):(c={groupby:e.fieldRef(t,"key"),pulse:ke(i.output)},n&&n.field&&Mz(e,c,n),l=e.add(bI(c)),s=e.add(va({pulse:ke(l)})),s={agg:l,ref:ke(s)},a!=null&&(r[a]=s)),s.ref},tuplesRef(){return ke(this.values)},extentRef(e,t){return fg(e,this,"extent","extent",t,!1)},domainRef(e,t){return fg(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return fg(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return fg(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return fg(e,this,"indata","tupleindex",t,!0,!0)}};function t0e(e,t,n){const i=e.from.facet,r=i.name,a=Z1(i,t);let s;i.name||ae("Facet must have a name: "+ye(i)),i.data||ae("Facet must reference a data set: "+ye(i)),i.field?s=t.add(EI({field:t.fieldRef(i.field),pulse:a})):i.groupby?s=t.add(Upe({key:t.keyRef(i.groupby),group:ke(t.proxy(n.parent)),pulse:a})):ae("Facet must specify groupby or field: "+ye(i));const l=t.fork(),c=l.add(va()),f=l.add(yc({pulse:ke(c)}));l.addData(r,new Ju(l,c,c,f)),l.addSignal("parent",null),s.params.subflow={$subflow:l.parse(e).toRuntime()}}function n0e(e,t,n){const i=t.add(EI({pulse:n.pulse})),r=t.fork();r.add(yc()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}function FI(e,t,n){const i=e.remove,r=e.insert,a=e.toggle,s=e.modify,l=e.values,c=t.add(pv()),f="if("+e.trigger+',modify("'+n+'",'+[r,i,a,s,l].map(g=>g??"null").join(",")+"),0)",d=Ka(f,t);c.update=d.$expr,c.params=d.$params}function Xb(e,t){const n=DI(e),i=e.type===Hb,r=e.from&&e.from.facet,a=e.overlap;let s=e.layout||n===HT||n===PT,l,c,f,d,g,p,y;const v=n===IT||s||r,b=e0e(e.from,i,t);c=t.add(Fpe({key:b.key||(e.key?Ep(e.key):void 0),pulse:b.pulse,clean:!i}));const S=ke(c);c=f=t.add(va({pulse:S})),c=t.add(Ppe({markdef:Yme(e),interactive:Xme(e.interactive,t),clip:Gme(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:ke(c)}));const _=ke(c);c=d=t.add(SI(yI(e.encode,e.type,n,e.style,t,{mod:!1,pulse:_}))),c.params.parent=t.encode(),e.transform&&e.transform.forEach(k=>{const T=eM(k,t),D=T.metadata;(D.generates||D.changes)&&ae("Mark transforms should not generate new data."),D.nomod||(d.params.mod=!0),T.params.pulse=ke(c),t.add(c=T)}),e.sort&&(c=t.add(Kpe({sort:t.compareRef(e.sort),pulse:ke(c)})));const w=ke(c);(r||s)&&(s=t.add(wI({layout:t.objectProperty(e.layout),legends:t.legends,mark:_,pulse:w})),p=ke(s));const A=t.add(xI({mark:_,pulse:p||w}));y=ke(A),i&&(v&&(l=t.operators,l.pop(),s&&l.pop()),t.pushState(w,p||y,S),r?t0e(e,t,b):v?n0e(e,t,b):t.parse(e),t.popState(),v&&(s&&l.push(s),l.push(A))),a&&(y=i0e(a,y,t));const $=t.add(_I({pulse:y})),M=t.add(yc({pulse:ke($)},void 0,t.parent()));e.name!=null&&(g=e.name,t.addData(g,new Ju(t,f,$,M)),e.on&&e.on.forEach(k=>{(k.insert||k.remove||k.toggle)&&ae("Marks only support modify triggers."),FI(k,t,g)}))}function i0e(e,t,n){const i=e.method,r=e.bound,a=e.separation,s={separation:pn(a)?n.signalRef(a.signal):a,method:pn(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),r){const l=r.tolerance;s.boundTolerance=pn(l)?n.signalRef(l.signal):+l,s.boundScale=n.scaleRef(r.scale),s.boundOrient=r.orient}return ke(n.add(Ype(s)))}function r0e(e,t){const n=t.config.legend,i=e.encode||{},r=Pi(e,n),a=i.legend||{},s=a.name||void 0,l=a.interactive,c=a.style,f={};let d=0,g,p,y;WT.forEach(A=>e[A]?(f[A]=e[A],d=d||e[A]):0),d||ae("Missing valid scale for legend.");const v=a0e(e,t.scaleType(d)),b={title:e.title!=null,scales:f,type:v,vgrad:v!=="symbol"&&r.isVertical()},S=ke(t.add(va(null,[b]))),_={enter:{x:{value:0},y:{value:0}}},w=ke(t.add(qpe(p={type:v,scale:t.scaleRef(d),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return v===Q1?(y=[Ome(e,d,n,i.gradient),_z(e,n,i.labels,w)],p.count=p.count||t.signalRef(`max(2,2*floor((${Fu(r.gradientLength())})/100))`)):v===kA?y=[Nme(e,d,n,i.gradient,w),_z(e,n,i.labels,w)]:(g=Fme(e,n),y=[zme(e,n,i,w,Fu(g.columns))],p.size=l0e(e,t,y[0].marks)),y=[wp({role:ipe,from:S,encode:_,marks:y,layout:g,interactive:l})],b.title&&y.push(Hme(e,n,i.title,S)),Xb(wp({role:tpe,from:S,encode:qd(o0e(r,e,n),a,um),marks:y,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:s,interactive:l,style:c}),t)}function a0e(e,t){let n=e.type||Ez;return!e.type&&s0e(e)===1&&(e.fill||e.stroke)&&(n=e3(t)?Q1:Ew(t)?kA:Ez),n!==Q1?n:Ew(t)?kA:Q1}function s0e(e){return WT.reduce((t,n)=>t+(e[n]?1:0),0)}function o0e(e,t,n){const i={enter:{},update:{}};return In(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function l0e(e,t,n){const i=Fu(kz("size",e,n)),r=Fu(kz("strokeWidth",e,n)),a=Fu(u0e(n[1].encode,t,lm));return Ka(`max(ceil(sqrt(${i})+${r}),${a})`,t)}function kz(e,t,n){return t[e]?`scale("${t[e]}",datum)`:OI(e,n[0].encode)}function u0e(e,t,n){return OI("fontSize",e)||Mme("fontSize",t,n)}const c0e=`item.orient==="${Id}"?-90:item.orient==="${Pd}"?90:0`;function f0e(e,t){e=Se(e)?{text:e}:e;const n=Pi(e,t.config.title),i=e.encode||{},r=i.group||{},a=r.name||void 0,s=r.interactive,l=r.style,c=[],f={},d=ke(t.add(va(null,[f])));return c.push(g0e(e,n,d0e(e),d)),e.subtitle&&c.push(p0e(e,n,i.subtitle,d)),Xb(wp({role:ope,from:d,encode:h0e(n,r),marks:c,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:a,interactive:s,style:l}),t)}function d0e(e){const t=e.encode;return t&&t.title||He({name:e.name,interactive:e.interactive,style:e.style},t)}function h0e(e,t){const n={enter:{},update:{}};return In(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:ZT},angle:{signal:c0e},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),qd(n,t,um)}function g0e(e,t,n,i){const r={value:0},a=e.text,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return In(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),gr({type:vc,role:lpe,style:xme,from:i,encode:s},n)}function p0e(e,t,n,i){const r={value:0},a=e.subtitle,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return In(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),gr({type:vc,role:upe,style:Sme,from:i,encode:s},n)}function m0e(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(eM(i,t))}),e.on&&e.on.forEach(i=>{FI(i,t,e.name)}),t.addDataPipeline(e.name,y0e(e,t,n))}function y0e(e,t,n){const i=[];let r=null,a=!1,s=!1,l,c,f,d,g;for(e.values?pn(e.values)||V1(e.format)?(i.push(Oz(t,e)),i.push(r=cu())):i.push(r=cu({$ingest:e.values,$format:e.format})):e.url?V1(e.url)||V1(e.format)?(i.push(Oz(t,e)),i.push(r=cu())):i.push(r=cu({$request:e.url,$format:e.format})):e.source&&(r=l=_e(e.source).map(p=>ke(t.getData(p).output)),i.push(null)),c=0,f=n.length;c<f;++c)d=n[c],g=d.metadata,!r&&!g.source&&i.push(r=cu()),i.push(d),g.generates&&(s=!0),g.modifies&&!s&&(a=!0),g.source?r=d:g.changes&&(r=null);return l&&(f=l.length-1,i[0]=Qpe({derive:a,pulse:f?l:l[0]}),(a||f)&&i.splice(1,0,cu())),r||i.push(cu()),i.push(yc({})),i}function cu(e){const t=va({},e);return t.metadata={source:!0},t}function Oz(e,t){return Ipe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const LI=e=>e===_l||e===ba,Vb=(e,t,n)=>pn(e)?S0e(e.signal,t,n):e===Id||e===ba?t:n,An=(e,t,n)=>pn(e)?b0e(e.signal,t,n):LI(e)?t:n,la=(e,t,n)=>pn(e)?x0e(e.signal,t,n):LI(e)?n:t,UI=(e,t,n)=>pn(e)?E0e(e.signal,t,n):e===ba?{value:t}:{value:n},v0e=(e,t,n)=>pn(e)?_0e(e.signal,t,n):e===Pd?{value:t}:{value:n},b0e=(e,t,n)=>BI(`${e} === '${ba}' || ${e} === '${_l}'`,t,n),x0e=(e,t,n)=>BI(`${e} !== '${ba}' && ${e} !== '${_l}'`,t,n),S0e=(e,t,n)=>tM(`${e} === '${Id}' || ${e} === '${ba}'`,t,n),E0e=(e,t,n)=>tM(`${e} === '${ba}'`,t,n),_0e=(e,t,n)=>tM(`${e} === '${Pd}'`,t,n),BI=(e,t,n)=>(t=t!=null?wn(t):t,n=n!=null?wn(n):n,Nz(t)&&Nz(n)?(t=t?t.signal||ye(t.value):null,n=n?n.signal||ye(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[He({test:e},t)].concat(n||[])),Nz=e=>e==null||Object.keys(e).length===1,tM=(e,t,n)=>({signal:`${e} ? (${Df(t)}) : (${Df(n)})`}),w0e=(e,t,n,i,r)=>({signal:(i!=null?`${e} === '${Id}' ? (${Df(i)}) : `:"")+(n!=null?`${e} === '${_l}' ? (${Df(n)}) : `:"")+(r!=null?`${e} === '${Pd}' ? (${Df(r)}) : `:"")+(t!=null?`${e} === '${ba}' ? (${Df(t)}) : `:"")+"(null)"}),Df=e=>pn(e)?e.signal:e==null?null:ye(e),A0e=(e,t)=>t===0?0:pn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Bf=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Sf(e,t,n,i){let r;if(t&&we(t,e))return t[e];if(we(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[VT][r]}else if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[lm][r]}return null}function Dz(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function C0e(e,t){var n=t.config,i=n.style,r=n.axis,a=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,l,c,f;if(pn(s)){const g=Dz([n.axisX,n.axisY]),p=Dz([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);l={};for(f of g)l[f]=An(s,Sf(f,n.axisX,r,i),Sf(f,n.axisY,r,i));c={};for(f of p)c[f]=w0e(s.signal,Sf(f,n.axisTop,r,i),Sf(f,n.axisBottom,r,i),Sf(f,n.axisLeft,r,i),Sf(f,n.axisRight,r,i))}else l=s===ba||s===_l?n.axisX:n.axisY,c=n["axis"+s[0].toUpperCase()+s.slice(1)];return l||c||a?He({},r,l,c,a):r}function $0e(e,t,n,i){const r=Pi(e,t),a=e.orient;let s,l;const c={enter:s={opacity:at},update:l={opacity:Rr},exit:{opacity:at}};In(c,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const f=Rz(e,0),d=Rz(e,1);return s.x=l.x=An(a,f,at),s.x2=l.x2=An(a,d),s.y=l.y=la(a,f,at),s.y2=l.y2=la(a,d),gr({type:QT,role:Qge,from:i,encode:c},n)}function Rz(e,t){return{scale:e.scale,range:t}}function T0e(e,t,n,i,r){const a=Pi(e,t),s=e.orient,l=e.gridScale,c=Vb(s,1,-1),f=M0e(e.offset,c);let d,g,p;const y={enter:d={opacity:at},update:p={opacity:Rr},exit:g={opacity:at}};In(y,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const v={scale:e.scale,field:Dr,band:r.band,extra:r.extra,offset:r.offset,round:a("tickRound")},b=An(s,{signal:"height"},{signal:"width"}),S=l?{scale:l,range:0,mult:c,offset:f}:{value:0,offset:f},_=l?{scale:l,range:1,mult:c,offset:f}:He(b,{mult:c,offset:f});return d.x=p.x=An(s,v,S),d.y=p.y=la(s,v,S),d.x2=p.x2=la(s,_),d.y2=p.y2=An(s,_),g.x=An(s,v),g.y=la(s,v),gr({type:QT,role:Zge,key:Dr,from:i,encode:y},n)}function M0e(e,t){if(t!==1)if(!Ee(e))e=pn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=He({},e);for(;n.mult!=null;)if(Ee(n.mult))n=n.mult=He({},n.mult);else return n.mult=pn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function k0e(e,t,n,i,r,a){const s=Pi(e,t),l=e.orient,c=Vb(l,-1,1);let f,d,g;const p={enter:f={opacity:at},update:g={opacity:Rr},exit:d={opacity:at}};In(p,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const y=wn(r);y.mult=c;const v={scale:e.scale,field:Dr,band:a.band,extra:a.extra,offset:a.offset,round:s("tickRound")};return g.y=f.y=An(l,at,v),g.y2=f.y2=An(l,y),d.x=An(l,v),g.x=f.x=la(l,at,v),g.x2=f.x2=la(l,y),d.y=la(l,v),gr({type:QT,role:Jge,key:Dr,from:i,encode:p},n)}function d_(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function O0e(e,t,n,i,r,a){const s=Pi(e,t),l=e.orient,c=e.scale,f=Vb(l,-1,1),d=Fu(s("labelFlush")),g=Fu(s("labelFlushOffset")),p=s("labelAlign"),y=s("labelBaseline");let v=d===0||!!d,b;const S=wn(r);S.mult=f,S.offset=wn(s("labelPadding")||0),S.offset.mult=f;const _={scale:c,field:Dr,band:.5,offset:NI(a.offset,s("labelOffset"))},w=An(l,v?d_(c,d,'"left"','"right"','"center"'):{value:"center"},v0e(l,"left","right")),A=An(l,UI(l,"bottom","top"),v?d_(c,d,'"top"','"bottom"','"middle"'):{value:"middle"}),$=d_(c,d,`-(${g})`,g,0);v=v&&g;const M={opacity:at,x:An(l,_,S),y:la(l,_,S)},k={enter:M,update:b={opacity:Rr,text:{field:XT},x:M.x,y:M.y,align:w,baseline:A},exit:{opacity:at,x:M.x,y:M.y}};In(k,{dx:!p&&v?An(l,$):null,dy:!y&&v?la(l,$):null}),In(k,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:p,baseline:y});const T=s("labelBound");let D=s("labelOverlap");return D=D||T?{separation:s("labelSeparation"),method:D,order:"datum.index",bound:T?{scale:c,orient:l,tolerance:T}:null}:void 0,b.align!==w&&(b.align=Bf(b.align,w)),b.baseline!==A&&(b.baseline=Bf(b.baseline,A)),gr({type:vc,role:Kge,style:lm,key:Dr,from:i,encode:k,overlap:D},n)}function N0e(e,t,n,i){const r=Pi(e,t),a=e.orient,s=Vb(a,-1,1);let l,c;const f={enter:l={opacity:at,anchor:wn(r("titleAnchor",null)),align:{signal:ZT}},update:c=He({},l,{opacity:Rr,text:wn(e.title)}),exit:{opacity:at}},d={signal:`lerp(range("${e.scale}"), ${Gb(0,1,.5)})`};return c.x=An(a,d),c.y=la(a,d),l.angle=An(a,at,A0e(s,90)),l.baseline=An(a,UI(a,_l,ba),{value:_l}),c.angle=l.angle,c.baseline=l.baseline,In(f,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),D0e(r,a,f,n),f.update.align=Bf(f.update.align,l.align),f.update.angle=Bf(f.update.angle,l.angle),f.update.baseline=Bf(f.update.baseline,l.baseline),gr({type:vc,role:epe,style:VT,from:i,encode:f},n)}function D0e(e,t,n,i){const r=(l,c)=>l!=null?(n.update[c]=Bf(wn(l),n.update[c]),!1):!Cf(c,i),a=r(e("titleX"),"x"),s=r(e("titleY"),"y");n.enter.auto=s===a?wn(s):An(t,wn(s),wn(a))}function R0e(e,t){const n=C0e(e,t),i=e.encode||{},r=i.axis||{},a=r.name||void 0,s=r.interactive,l=r.style,c=Pi(e,n),f=kme(c),d={scale:e.scale,ticks:!!c("ticks"),labels:!!c("labels"),grid:!!c("grid"),domain:!!c("domain"),title:e.title!=null},g=ke(t.add(va({},[d]))),p=ke(t.add(zpe({scale:t.scaleRef(e.scale),extra:t.property(f.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),y=[];let v;return d.grid&&y.push(T0e(e,n,i.grid,p,f)),d.ticks&&(v=c("tickSize"),y.push(k0e(e,n,i.ticks,p,v,f))),d.labels&&(v=d.ticks?v:0,y.push(O0e(e,n,i.labels,p,v,f))),d.domain&&y.push($0e(e,n,i.domain,g)),d.title&&y.push(N0e(e,n,i.title,g)),Xb(wp({role:Wge,from:g,encode:qd(z0e(c,e),r,um),marks:y,aria:c("aria"),description:c("description"),zindex:c("zindex"),name:a,interactive:s,style:l}),t)}function z0e(e,t){const n={enter:{},update:{}};return In(n,{orient:e("orient"),offset:e("offset")||0,position:Jr(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function jI(e,t,n){const i=_e(e.signals),r=_e(e.scales);return n||i.forEach(a=>vI(a,t)),_e(e.projections).forEach(a=>hme(a,t)),r.forEach(a=>tme(a,t)),_e(e.data).forEach(a=>m0e(a,t)),r.forEach(a=>nme(a,t)),(n||i).forEach(a=>Rpe(a,t)),_e(e.axes).forEach(a=>R0e(a,t)),_e(e.marks).forEach(a=>Xb(a,t)),_e(e.legends).forEach(a=>r0e(a,t)),e.title&&f0e(e.title,t),t.parseLambdas(),t}const F0e=e=>qd({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function L0e(e,t){const n=t.config,i=ke(t.root=t.add(pv())),r=U0e(e,n);r.forEach(f=>vI(f,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const a=t.add(va()),s=t.add(SI(yI(F0e(e.encode),Hb,PT,e.style,t,{pulse:ke(a)}))),l=t.add(wI({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:ke(s)}));t.operators.pop(),t.pushState(ke(s),ke(l),null),jI(e,t,r),t.operators.push(l);let c=t.add(xI({mark:i,pulse:ke(l)}));return c=t.add(_I({pulse:ke(c)})),c=t.add(yc({pulse:ke(c)})),t.addData("root",new Ju(t,a,a,c)),t}function dg(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function U0e(e,t){const n=s=>Jr(e[s],t[s]),i=[dg("background",n("background")),dg("autosize",Yge(n("autosize"))),dg("padding",Vge(n("padding"))),dg("width",n("width")||0),dg("height",n("height")||0)],r=i.reduce((s,l)=>(s[l.name]=l,s),{}),a={};return _e(e.signals).forEach(s=>{we(r,s.name)?s=He(r[s.name],s):i.push(s),a[s.name]=s}),_e(t.signals).forEach(s=>{!we(a,s.name)&&!we(r,s.name)&&i.push(s)}),i}function qI(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function zz(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}qI.prototype=zz.prototype={parse(e){return jI(e,this)},fork(){return new zz(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof AA?ke(e):e;return this.add(Wpe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,a){let s,l;i&&(s=i.data||(i.data={}),l=s[r]||(s[r]=[]),l.push(a))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(ke(this.add(yc({pulse:e})))),this._parent.push(t),this._lookup.push(n?ke(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return rt(this._parent)},encode(){return rt(this._encode)},lookup(){return rt(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Se(e))return Ep(e,t);e.signal||ae("Unsupported field reference: "+ye(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=ke(this.add(Bpe(r)))}return i},compareRef(e){let t=!1;const n=a=>pn(a)?(t=!0,this.signalRef(a.signal)):wpe(a)?(t=!0,this.exprRef(a.expr)):a,i=_e(e.field).map(n),r=_e(e.order).map(n);return t?ke(this.add(Sz({fields:i,orders:r}))):bz(i,r)},keyRef(e,t){let n=!1;const i=a=>pn(a)?(n=!0,ke(r[a.signal])):a,r=this.signals;return e=_e(e).map(i),n?ke(this.add(jpe({fields:e,flat:t}))):xpe(e,t)},sortRef(e){if(!e)return e;const t=Ib(e.op,e.field),n=e.order||Spe;return n.signal?ke(this.add(Sz({fields:t,orders:this.signalRef(n.signal)}))):bz(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return we(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&ae("Duplicate signal name: "+ye(e));const n=t instanceof AA?t:this.add(pv(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||ae("Unrecognized signal name: "+ye(e)),this.signals[e]},signalRef(e){return this.signals[e]?ke(this.signals[e]):(we(this.lambdas,e)||(this.lambdas[e]=this.add(pv(null))),ke(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=Ka(i,this),a=this.lambdas[i];a.params=r.$params,a.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Ee(e)?e:this.signalRef(e.signal||nM(e))},exprRef(e,t){const n={expr:Ka(e,this)};return t&&(n.expr.$name=t),ke(this.add(Lpe(n)))},addBinding(e,t){this.bindings||ae("Nested signals do not support binding: "+ye(e)),this.bindings.push(He({signal:e},t))},addScaleProj(e,t){we(this.scales,e)&&ae("Duplicate scale or projection name: "+ye(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Zpe(t))},addProjection(e,t){this.addScaleProj(e,Vpe(t))},getScale(e){return this.scales[e]||ae("Unrecognized scale name: "+ye(e)),this.scales[e]},scaleRef(e){return ke(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return we(this.data,e)&&ae("Duplicate data set name: "+ye(e)),this.data[e]=t},getData(e){return this.data[e]||ae("Undefined data set name: "+ye(e)),this.data[e]},addDataPipeline(e,t){return we(this.data,e)&&ae("Duplicate data set name: "+ye(e)),this.addData(e,Ju.fromEntries(this,t))}};function nM(e){return(se(e)?B0e:j0e)(e)}function B0e(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(Ee(r)?r.signal||nM(r):ye(r))}return n+"]"}function j0e(e){let t="{",n=0,i,r;for(i in e)r=e[i],t+=(++n>1?",":"")+ye(i)+":"+(Ee(r)?r.signal||nM(r):ye(r));return t+"}"}function q0e(){const e="sans-serif",i="#4c78a8",r="#000",a="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:a,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:a,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:a,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function I0e(e,t,n){return Ee(e)||ae("Input Vega specification must be an object."),t=$d(q0e(),t,e.config),L0e(e,new qI(t,n)).toRuntime()}var P0e="6.2.0";He(Qf,OJ,lae,jae,Aoe,ble,Yue,Aue,Vue,vce,Tce,zce);const H0e=P0e,G0e=Object.freeze(Object.defineProperty({__proto__:null,Bounds:un,CanvasHandler:Jp,CanvasRenderer:My,DATE:Li,DAY:Qn,DAYOFYEAR:Qa,Dataflow:zf,Debug:L8,DisallowedObjectProperties:hC,Error:gC,EventStream:Vv,Gradient:kU,GroupItem:yb,HOURS:fr,Handler:A3,HybridHandler:xB,HybridRenderer:Dw,Info:F8,Item:mb,MILLISECONDS:fa,MINUTES:dr,MONTH:ei,Marks:hr,MultiPulse:BC,None:z8,Operator:Tt,Parameters:Xv,Pulse:cl,QUARTER:Fi,RenderType:nl,Renderer:Kp,ResourceLoader:FU,SECONDS:Lr,SVGHandler:oB,SVGRenderer:O3,SVGStringRenderer:bB,Scenegraph:JU,TIME_UNITS:MC,Transform:te,View:aI,WEEK:hn,Warn:pC,YEAR:qn,accessor:Ii,accessorFields:Jn,accessorName:Vt,array:_e,ascending:Md,bandwidthNRD:PC,bin:y7,bootstrapCI:v7,boundClip:kB,boundContext:Vp,boundItem:Tw,boundMark:WU,boundStroke:lo,changeset:hc,clampRange:V8,codegenExpression:Nq,compare:bC,constant:ri,cumulativeLogNormal:WC,cumulativeNormal:Qv,cumulativeUniform:JC,dayofyear:w9,debounce:xC,defaultLocale:RC,definition:g7,densityLogNormal:VC,densityNormal:HC,densityUniform:KC,domChild:dn,domClear:$r,domCreate:el,domFind:w3,dotbin:b7,error:ae,expressionFunction:en,extend:He,extent:Xa,extentIndex:W8,falsy:Ho,fastmap:kd,field:zr,flush:Q8,font:Eb,fontFamily:Zp,fontSize:as,format:T1,formatLocale:oy,formats:LC,hasOwnProperty:we,id:Dp,identity:ii,inferType:i7,inferTypes:r7,ingest:gt,inherits:be,inrange:Tf,interpolate:t3,interpolateColors:gb,interpolateRange:mU,intersect:CB,intersectBoxLine:Mf,intersectPath:u3,intersectPoint:c3,intersectRule:UU,isArray:se,isBoolean:Ml,isDate:ll,isFunction:Ge,isIterable:Z8,isNumber:ut,isObject:Ee,isRegExp:SC,isString:Se,isTuple:Gv,key:EC,lerp:K8,lineHeight:xl,loader:Pv,locale:t7,logger:Rv,lruCache:J8,markup:k3,merge:e9,mergeConfig:$d,multiLineOffset:S3,one:Cd,pad:t9,panLinear:I8,panLog:P8,panPow:H8,panSymlog:G8,parse:I0e,parseExpression:kT,parseSelector:zl,path:tb,pathCurves:s3,pathEqual:OB,pathParse:nd,pathRectangle:DU,pathRender:cp,pathSymbols:NU,pathTrail:RU,peek:rt,point:wb,projection:Q3,quantileLogNormal:QC,quantileNormal:Zv,quantileUniform:e$,quantiles:qC,quantizeInterpolator:yU,quarter:Y8,quartiles:IC,get random(){return Ur},randomInteger:zK,randomKDE:YC,randomLCG:RK,randomLogNormal:S7,randomMixture:E7,randomNormal:GC,randomUniform:_7,read:o7,regressionConstant:t$,regressionExp:A7,regressionLinear:n$,regressionLoess:T7,regressionLog:w7,regressionPoly:$7,regressionPow:C7,regressionQuad:i$,renderModule:Ab,repeat:bg,resetDefaultLocale:NZ,resetSVGDefIds:Cre,responseType:s7,runtimeContext:Yq,sampleCurve:Jv,sampleLogNormal:XC,sampleNormal:Wv,sampleUniform:ZC,scale:ft,sceneEqual:N3,sceneFromJSON:ZU,scenePickVisit:Sy,sceneToJSON:QU,sceneVisit:da,sceneZOrder:f3,scheme:n3,serializeXML:pB,setHybridRendererOptions:Ere,setRandom:NK,span:Rp,splitAccessPath:ns,stringValue:ye,textMetrics:or,timeBin:q9,timeFloor:O9,timeFormatLocale:rp,timeInterval:Rd,timeOffset:R9,timeSequence:L9,timeUnitSpecifier:_9,timeUnits:kC,toBoolean:_C,toDate:wC,toNumber:Zn,toSet:ca,toString:AC,transform:p7,transforms:Qf,truncate:n9,truthy:Fr,tupleid:Oe,typeParsers:cw,utcFloor:N9,utcInterval:zd,utcOffset:z9,utcSequence:U9,utcdayofyear:$9,utcquarter:X8,utcweek:T9,version:H0e,visitArray:Xo,week:A9,writeConfig:Td,zero:Ko,zoomLinear:mC,zoomLog:yC,zoomPow:ty,zoomSymlog:vC},Symbol.toStringTag,{value:"Module"}));function Y0e(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var X0e={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},V0e={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},W0e={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const Q0e=Array.prototype.slice,fu=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,Q0e.call(t,1))},Z0e=(e,t=0,n=1,i=0,r=0,a=0,s=0)=>Se(e)?new Date(e):new Date(e,t,n,i,r,a,s);var K0e={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:Z0e,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return fu("join",arguments)},indexof:function(){return fu("indexOf",arguments)},lastindexof:function(){return fu("lastIndexOf",arguments)},slice:function(){return fu("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(Md),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return fu("substring",arguments,String)},split:function(){return fu("split",arguments,String)},replace:function(){return fu("replace",arguments,String)},trim:e=>String(e).trim(),btoa:e=>btoa(e),atob:e=>atob(e),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const J0e=["view","item","group","xy","x","y"],NA=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&NA.add(setImmediate);const e1e={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:X0e[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),NA.has(i[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return}return i[r]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||K0e[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>V0e[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>W0e[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);e.memberDepth-=1;const a=e(i.value);return hC.has(r)?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):NA.has(a)?console.error(`Prevented interpretation of method "${r}" which could lead to insecure code execution`):n[r]=a,n},{})};function hg(e,t,n,i,r,a){const s=l=>e1e[l.type](s,l);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=i,s.event=r,s.item=a,J0e.forEach(l=>s.fn[l]=(...c)=>r.vega[l](...c)),s(e)}var t1e={operator(e,t){const n=t.ast,i=e.functions;return r=>hg(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,a)=>hg(n,i,a,r)},event(e,t){const n=t.ast,i=e.functions;return r=>hg(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,a)=>{const s=a.item&&a.item.datum;return hg(n,i,r,s,a)}},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,a=n==="group"||n==="image"||n==="rect";return(s,l)=>{const c=s.datum;let f=0,d;for(const g in i)d=hg(i[g].ast,r,l,c,void 0,s),s[g]!==d&&(s[g]=d,f=1);return n!=="rule"&&Y0e(s,i,a),f}}},n1e="6.4.1",i1e={version:n1e};function iM(e){return he(e,"or")}function rM(e){return he(e,"and")}function aM(e){return he(e,"not")}function K1(e,t){if(aM(e))K1(e.not,t);else if(rM(e))for(const n of e.and)K1(n,t);else if(iM(e))for(const n of e.or)K1(n,t);else t(e)}function jf(e,t){return aM(e)?{not:jf(e.not,t)}:rM(e)?{and:e.and.map(n=>jf(n,t))}:iM(e)?{or:e.or.map(n=>jf(n,t))}:t(e)}const Be=structuredClone;function II(e){throw new Error(e)}function fd(e,t){const n={};for(const i of t)we(e,i)&&(n[i]=e[i]);return n}function ur(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>yt(e)).join(",")})`};function tt(e){if(ut(e))return e;const t=Se(e)?e:yt(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function DA(e){return e===!1||e===null}function We(e,t){return e.includes(t)}function dd(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function sM(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function PI(e,...t){for(const n of t)r1e(e,n??{});return e}function r1e(e,t){for(const n of de(t))Td(e,n,t[n],!0)}function Ba(e,t){const n=[],i={};let r;for(const a of e)r=t(a),!(r in i)&&(i[r]=1,n.push(a));return n}function a1e(e,t){const n=de(e),i=de(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function HI(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function oM(e,t){for(const n of e)if(t.has(n))return!0;return!1}function RA(e){const t=new Set;for(const n of e){const r=ns(n).map((s,l)=>l===0?s:`[${s}]`),a=r.map((s,l)=>r.slice(0,l+1).join(""));for(const s of a)t.add(s)}return t}function lM(e,t){return e===void 0||t===void 0?!0:oM(RA(e),RA(t))}function Mt(e){return de(e).length===0}const de=Object.keys,ln=Object.values,wl=Object.entries;function Ap(e){return e===!0||e===!1}function Lt(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Jg(e,t){return aM(e)?`!(${Jg(e.not,t)})`:rM(e)?`(${e.and.map(n=>Jg(n,t)).join(") && (")})`:iM(e)?`(${e.or.map(n=>Jg(n,t)).join(") || (")})`:t(e)}function mv(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&mv(e[n],t)&&delete e[n],Mt(e)}function cm(e){return e.charAt(0).toUpperCase()+e.substr(1)}function uM(e,t="datum"){const n=ns(e),i=[];for(let r=1;r<=n.length;r++){const a=`[${n.slice(0,r).map(ye).join("][")}]`;i.push(`${t}${a}`)}return i.join(" && ")}function GI(e,t="datum"){return`${t}[${ye(ns(e).join("."))}]`}function xt(e){return`datum['${e.replaceAll("'","\\'")}']`}function YI(e){return e.replaceAll("\\'","'").replaceAll("\\.",".")}function s1e(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function jr(e){return`${ns(e).map(s1e).join("\\.")}`}function ec(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Hd(e){return`${ns(e).join(".")}`}function hd(e){return e?ns(e).length:0}function Kt(...e){return e.find(t=>t!==void 0)}let XI=42;function VI(e){const t=++XI;return e?String(e)+t:t}function o1e(){XI=42}function WI(e){return QI(e)?e:`__${e}`}function QI(e){return e.startsWith("__")}function Cp(e){if(e!==void 0)return(e%360+360)%360}function Wb(e){return ut(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Fz=Object.getPrototypeOf(structuredClone({}));function ar(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!ar(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;for(const a of e.entries())if(!ar(a[1],t.get(a[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Fz.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Fz.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!ar(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function yt(e){const t=[];return(function n(i){if(i?.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?`${i}`:"null";if(typeof i!="object")return JSON.stringify(i);let r,a;if(Array.isArray(i)){for(a="[",r=0;r<i.length;r++)r&&(a+=","),a+=n(i[r])||"null";return`${a}]`}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const s=t.push(i)-1,l=Object.keys(i).sort();for(a="",r=0;r<l.length;r++){const c=l[r],f=n(i[c]);f&&(a&&(a+=","),a+=`${JSON.stringify(c)}:${f}`)}return t.splice(s,1),`{${a}}`})(e)}function he(e,t){return Ee(e)&&we(e,t)&&e[t]!==void 0}const Zs="row",Ks="column",Qb="facet",Ut="x",Mn="y",xa="x2",us="y2",Fl="xOffset",Gd="yOffset",Sa="radius",co="radius2",Pr="theta",fo="theta2",Ea="latitude",_a="longitude",wa="latitude2",qr="longitude2",Ll="time",Bi="color",cs="fill",fs="stroke",ji="shape",ho="size",bc="angle",go="opacity",Ul="fillOpacity",Bl="strokeOpacity",jl="strokeWidth",ql="strokeDash",fm="text",gd="order",dm="detail",Zb="key",tc="tooltip",Kb="href",Jb="url",ex="description",l1e={x:1,y:1,x2:1,y2:1},ZI={theta:1,theta2:1,radius:1,radius2:1};function KI(e){return we(ZI,e)}const cM={longitude:1,longitude2:1,latitude:1,latitude2:1};function JI(e){switch(e){case Ea:return"y";case wa:return"y2";case _a:return"x";case qr:return"x2"}}function eP(e){return we(cM,e)}const u1e=de(cM),fM={...l1e,...ZI,...cM,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function qf(e){return e===Bi||e===cs||e===fs}const tP={row:1,column:1,facet:1},Nr=de(tP),dM={...fM,...tP},c1e=de(dM),{order:MAe,detail:kAe,tooltip:OAe,...f1e}=dM,{row:NAe,column:DAe,facet:RAe,...d1e}=f1e;function h1e(e){return we(d1e,e)}function nP(e){return we(dM,e)}const g1e=[xa,us,wa,qr,fo,co];function iP(e){return xc(e)!==e}function xc(e){switch(e){case xa:return Ut;case us:return Mn;case wa:return Ea;case qr:return _a;case fo:return Pr;case co:return Sa}return e}function Al(e){if(KI(e))switch(e){case Pr:return"startAngle";case fo:return"endAngle";case Sa:return"outerRadius";case co:return"innerRadius"}return e}function ds(e){switch(e){case Ut:return xa;case Mn:return us;case Ea:return wa;case _a:return qr;case Pr:return fo;case Sa:return co}}function qi(e){switch(e){case Ut:case xa:return"width";case Mn:case us:return"height"}}function rP(e){switch(e){case Ut:return"xOffset";case Mn:return"yOffset";case xa:return"x2Offset";case us:return"y2Offset";case Pr:return"thetaOffset";case Sa:return"radiusOffset";case fo:return"theta2Offset";case co:return"radius2Offset"}}function hM(e){switch(e){case Ut:return"xOffset";case Mn:return"yOffset"}}function p1e(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const m1e=de(fM),{x:zAe,y:FAe,x2:LAe,y2:UAe,xOffset:BAe,yOffset:jAe,latitude:qAe,longitude:IAe,latitude2:PAe,longitude2:HAe,theta:GAe,theta2:YAe,radius:XAe,radius2:VAe,...gM}=fM,y1e=de(gM),pM={x:1,y:1},po=de(pM);function Jt(e){return we(pM,e)}const mM={theta:1,radius:1},v1e=de(mM);function tx(e){return e==="width"?Ut:Mn}const aP={xOffset:1,yOffset:1};function hm(e){return we(aP,e)}const b1e={time:1};function h_(e){return e in b1e}const{text:WAe,tooltip:QAe,href:ZAe,url:KAe,description:JAe,detail:eCe,key:tCe,order:nCe,...sP}=gM,x1e=de(sP);function S1e(e){return we(gM,e)}function E1e(e){switch(e){case Bi:case cs:case fs:case ho:case ji:case go:case jl:case ql:return!0;case Ul:case Bl:case bc:case Ll:return!1}}const oP={...pM,...mM,...aP,...sP},yM=de(oP);function hs(e){return we(oP,e)}function _1e(e,t){return A1e(e)[t]}const lP={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:iCe,...w1e}=lP;function A1e(e){switch(e){case Bi:case cs:case fs:case ex:case dm:case Zb:case tc:case Kb:case gd:case go:case Ul:case Bl:case jl:case Qb:case Zs:case Ks:return lP;case Ut:case Mn:case Fl:case Gd:case Ea:case _a:case Ll:return w1e;case xa:case us:case wa:case qr:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case ho:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case ql:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case ji:return{point:"always",geoshape:"always"};case fm:return{text:"always"};case bc:return{point:"always",square:"always",text:"always"};case Jb:return{image:"always"};case Pr:return{text:"always",arc:"always"};case Sa:return{text:"always",arc:"always"};case fo:case co:return{arc:"always"}}}function g_(e){switch(e){case Ut:case Mn:case Pr:case Sa:case Fl:case Gd:case ho:case bc:case jl:case go:case Ul:case Bl:case Ll:case xa:case us:case fo:case co:return;case Qb:case Zs:case Ks:case ji:case ql:case fm:case tc:case Kb:case Jb:case ex:return"discrete";case Bi:case cs:case fs:return"flexible";case Ea:case _a:case wa:case qr:case dm:case Zb:case gd:return}}const C1e={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},$1e={count:1,min:1,max:1};function ao(e){return he(e,"argmin")}function Il(e){return he(e,"argmax")}function vM(e){return Se(e)&&we(C1e,e)}const T1e=new Set(["count","valid","missing","distinct"]);function nx(e){return Se(e)&&T1e.has(e)}function M1e(e){return Se(e)&&We(["min","max"],e)}const k1e=new Set(["count","sum","distinct","valid","missing"]),O1e=new Set(["mean","average","median","q1","q3","min","max"]);function uP(e){return Ml(e)&&(e=gx(e,void 0)),`bin${de(e).map(t=>ix(e[t])?Lt(`_${t}_${wl(e[t])}`):Lt(`_${t}_${e[t]}`)).join("")}`}function kt(e){return e===!0||Sc(e)&&!e.binned}function zn(e){return e==="binned"||Sc(e)&&e.binned===!0}function Sc(e){return Ee(e)}function ix(e){return he(e,"param")}function Lz(e){switch(e){case Zs:case Ks:case ho:case Bi:case cs:case fs:case jl:case go:case Ul:case Bl:case ji:return 6;case ql:return 4;default:return 10}}function gm(e){return he(e,"expr")}function Fn(e,{level:t}={level:0}){const n=de(e||{}),i={};for(const r of n)i[r]=t===0?ir(e[r]):Fn(e[r],{level:t-1});return i}function cP(e){const{anchor:t,frame:n,offset:i,orient:r,angle:a,limit:s,color:l,subtitleColor:c,subtitleFont:f,subtitleFontSize:d,subtitleFontStyle:g,subtitleFontWeight:p,subtitleLineHeight:y,subtitlePadding:v,...b}=e,S={...b,...l?{fill:l}:{}},_={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...a!==void 0?{angle:a}:{},...s!==void 0?{limit:s}:{}},w={...c?{subtitleColor:c}:{},...f?{subtitleFont:f}:{},...d?{subtitleFontSize:d}:{},...g?{subtitleFontStyle:g}:{},...p?{subtitleFontWeight:p}:{},...y?{subtitleLineHeight:y}:{},...v?{subtitlePadding:v}:{}},A=fd(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:S,subtitleMarkConfig:A,nonMarkTitleProperties:_,subtitle:w}}function Zo(e){return Se(e)||se(e)&&Se(e[0])}function Me(e){return he(e,"signal")}function Ec(e){return he(e,"step")}function N1e(e){return se(e)?!1:he(e,"fields")&&!he(e,"data")}function D1e(e){return se(e)?!1:he(e,"fields")&&he(e,"data")}function Xs(e){return se(e)?!1:he(e,"field")&&he(e,"data")}const R1e={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},z1e=de(R1e),F1e={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},zA=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"],L1e="  ";function fP(e){const t=se(e.condition)?e.condition.map(Uz):Uz(e.condition);return{...ir(e),condition:t}}function ir(e){if(gm(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Uz(e){if(gm(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Rt(e){if(gm(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Me(e)?e:e!==void 0?{value:e}:void 0}function U1e(e){return Me(e)?e.signal:ye(e)}function Bz(e){return Me(e)?e.signal:ye(e.value)}function sa(e){return Me(e)?e.signal:e==null?null:ye(e)}function B1e(e,t,n){for(const i of n){const r=Ja(i,t.markDef,t.config);r!==void 0&&(e[i]=Rt(r))}return e}function dP(e){return[].concat(e.type,e.style??[])}function mt(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:a}=i;return r&&he(t,r)?t[r]:t[e]!==void 0?t[e]:a&&(!r||r===e)?void 0:Ja(e,t,n,i)}function Ja(e,t,n,{vgChannel:i}={}){const r=FA(e,t,n.style);return Kt(i?r:void 0,r,i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function FA(e,t,n){return hP(e,dP(t),n)}function hP(e,t,n){t=_e(t);let i;for(const r of t){const a=n[r];he(a,e)&&(i=a[e])}return i}function gP(e,t){return _e(e).reduce((n,i)=>(n.field.push(xe(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function pP(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(ar(r,i))return;n.push(i)}),n}function mP(e,t){return ar(e,t)||!t?e:e?[..._e(e),..._e(t)].join(", "):t}function yP(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((Zo(n)||Me(n))&&(Zo(i)||Me(i)))return{explicit:e.explicit,value:mP(n,i)};if(Zo(n)||Me(n))return{explicit:e.explicit,value:n};if(Zo(i)||Me(i))return{explicit:e.explicit,value:i};if(!Zo(n)&&!Me(n)&&!Zo(i)&&!Me(i))return{explicit:e.explicit,value:pP(n,i)};throw new Error("It should never reach here")}function bM(e){return`Invalid specification ${yt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const j1e='Autosize "fit" only works for single views and layered views.';function jz(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function qz(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Iz(e){return e?`Dropping "fit-${e}" because spec has discrete ${qi(e)}.`:'Dropping "fit" because spec has discrete size.'}function xM(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Pz(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function q1e(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function I1e(e){return`The "nearest" transform is not supported for ${e} marks.`}function vP(e){return`Selection not supported for ${e} yet.`}function P1e(e){return`Cannot find a selection named "${e}".`}const H1e="Scale bindings are currently only supported for scales with unbinned, continuous domains.",G1e="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",Y1e="Legend bindings are only supported for selections over an individual field or encoding channel.";function X1e(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function V1e(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const W1e="The same selection must be used to override scale domains in a layered view.",Q1e='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Z1e(e){return`Unknown repeated value "${e}".`}function Hz(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const K1e="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",SM="Animation involving facet, layer, or concat is currently unsupported.";function J1e(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ye(e)}.`}function eye(e,t,n,i){return`${e.length?"Multiple ":"No "}matching ${ye(t)} encoding found for selection ${ye(n.param)}. Using "field": ${ye(i)}.`}const tye="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function nye(e){return`Unrecognized parse "${e}".`}function Gz(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const iye="Attempt to add the same child twice.";function rye(e){return`Ignoring an invalid transform: ${yt(e)}.`}const aye='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Yz(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function sye(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${yt(t)} is overridden by a child projection ${yt(n)}.`}const oye="Arc marks uses theta channel rather than angle, replacing angle with theta.";function lye(e){return`${e}Offset dropped because ${e} is continuous`}function uye(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${yt(n)}}.`}function bP(e){return`Invalid field type "${e}".`}function cye(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function fye(e){return`Invalid aggregation operator "${e}".`}function xP(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function dye(e){return`Position range does not support relative band size for ${e}.`}function LA(e,t){return`Dropping ${yt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const hye="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function rx(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function gye(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function pye(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function mye(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function yye(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function p_(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function vye(e){return`The ${e} for range marks cannot be an expression`}function bye(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function xye(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Sye(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Eye(e){return`Cannot use the relative band size with ${e} scale.`}function _ye(e){return`Using unaggregated domain with raw field has no effect (${yt(e)}).`}function wye(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Aye(e){return`Unaggregated domain is currently unsupported for log scale (${yt(e)}).`}function Cye(e){return`Cannot apply size to non-oriented mark "${e}".`}function $ye(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function Tye(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function SP(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function EP(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function Mye(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${yt(n)} and ${yt(i)}). Using ${yt(n)}.`}function kye(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${yt(n)} and ${yt(i)}). Using the union of the two domains.`}function Oye(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function Nye(e){return`Dropping sort property ${yt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Xz="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",Dye="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Rye="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",zye="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function Fye(e){return`Cannot stack "${e}" if there is already "${e}2".`}function Lye(e){return`Stack is applied to a non-linear scale (${e}).`}function Uye(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function yv(e,t){return`Invalid ${e}: ${yt(t)}.`}function Bye(e){return`Dropping day from datetime ${yt(e)} as day cannot be combined with other units.`}function jye(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function qye(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function Iye(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Vz(e){return`1D error band does not support ${e}.`}function _P(e){return`Channel ${e} is required for "binned" bin.`}function Pye(e){return`Channel ${e} should not be used with "binned" bin.`}function Hye(e){return`Domain for ${e} is required for threshold scale.`}const wP=Rv(pC);let nc=wP;function Gye(e){return nc=e,nc}function Yye(){return nc=wP,nc}function EM(...e){nc.error(...e)}function me(...e){nc.warn(...e)}function Xye(...e){nc.debug(...e)}function _c(e){if(e&&Ee(e)){for(const t of wM)if(he(e,t))return!0}return!1}const AP=["january","february","march","april","may","june","july","august","september","october","november","december"],Vye=AP.map(e=>e.substr(0,3)),CP=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Wye=CP.map(e=>e.substr(0,3));function Qye(e){if(Wb(e)&&(e=+e),ut(e))return e>4&&me(yv("quarter",e)),e-1;throw new Error(yv("quarter",e))}function Zye(e){if(Wb(e)&&(e=+e),ut(e))return e-1;{const t=e.toLowerCase(),n=AP.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=Vye.indexOf(i);if(r!==-1)return r;throw new Error(yv("month",e))}}function Kye(e){if(Wb(e)&&(e=+e),ut(e))return e%7;{const t=e.toLowerCase(),n=CP.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=Wye.indexOf(i);if(r!==-1)return r;throw new Error(yv("day",e))}}function _M(e,t){const n=[];if(t&&e.day!==void 0&&de(e).length>1&&(me(Bye(e)),e=Be(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?Zye(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?Qye(e.quarter):e.quarter;n.push(ut(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?Kye(e.day):e.day;n.push(ut(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function ic(e){const n=_M(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Jye(e){const n=_M(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function eve(e){const t=_M(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const $P={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},wM=de($P);function tve(e){return we($P,e)}function wc(e){return Ee(e)?e.binned:TP(e)}function TP(e){return e?.startsWith("binned")}function AM(e){return e.startsWith("utc")}function nve(e){return e.substring(3)}const ive={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function ax(e){return wM.filter(t=>kP(e,t))}function MP(e){const t=ax(e);return t[t.length-1]}function kP(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function rve(e,t,{end:n}={end:!1}){const i=uM(t),r=AM(e)?"utc":"";function a(c){return c==="quarter"?`(${r}quarter(${i})-1)`:`${r}${c}(${i})`}let s;const l={};for(const c of wM)kP(e,c)&&(l[c]=a(c),s=c);return n&&(l[s]+="+1"),Jye(l)}function OP(e){if(!e)return;const t=ax(e);return`timeUnitSpecifier(${yt(t)}, ${yt(ive)})`}function ave(e,t,n){if(!e)return;const i=OP(e);return`${n||AM(e)?"utc":"time"}Format(${t}, ${i})`}function Cn(e){if(!e)return;let t;return Se(e)?TP(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Ee(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),AM(t.unit)&&(t.utc=!0,t.unit=nve(t.unit)),t}function sve(e){const{utc:t,...n}=Cn(e);return n.unit?(t?"utc":"")+de(n).map(i=>Lt(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):`${t?"utc":""}timeunit${de(n).map(i=>Lt(`_${i}_${n[i]}`)).join("")}`}function NP(e,t=n=>n){const n=Cn(e),i=MP(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:a,part:s}=DP(i,n.step),l={...r,[s]:+r[s]+a};return`${t(ic(l))} - ${t(ic(r))}`}}const ove={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function lve(e){return we(ove,e)}function DP(e,t=1){if(lve(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function uve(e){return he(e,"param")}function CM(e){return!!e?.field&&e.equal!==void 0}function $M(e){return!!e?.field&&e.lt!==void 0}function TM(e){return!!e?.field&&e.lte!==void 0}function MM(e){return!!e?.field&&e.gt!==void 0}function kM(e){return!!e?.field&&e.gte!==void 0}function OM(e){if(e?.field){if(se(e.range)&&e.range.length===2)return!0;if(Me(e.range))return!0}return!1}function NM(e){return!!e?.field&&(se(e.oneOf)||se(e.in))}function cve(e){return!!e?.field&&e.valid!==void 0}function RP(e){return NM(e)||CM(e)||OM(e)||$M(e)||MM(e)||TM(e)||kM(e)}function Oa(e,t){return px(e,{timeUnit:t,wrapTime:!0})}function fve(e,t){return e.map(n=>Oa(n,t))}function zP(e,t=!0){const{field:n}=e,i=Cn(e.timeUnit),{unit:r,binned:a}=i||{},s=xe(e,{expr:"datum"}),l=r?`time(${a?s:rve(r,n)})`:s;if(CM(e))return`${l}===${Oa(e.equal,r)}`;if($M(e)){const c=e.lt;return`${l}<${Oa(c,r)}`}else if(MM(e)){const c=e.gt;return`${l}>${Oa(c,r)}`}else if(TM(e)){const c=e.lte;return`${l}<=${Oa(c,r)}`}else if(kM(e)){const c=e.gte;return`${l}>=${Oa(c,r)}`}else{if(NM(e))return`indexof([${fve(e.oneOf,r).join(",")}], ${l}) !== -1`;if(cve(e))return sx(l,e.valid);if(OM(e)){const{range:c}=Fn(e),f=Me(c)?{signal:`${c.signal}[0]`}:c[0],d=Me(c)?{signal:`${c.signal}[1]`}:c[1];if(f!==null&&d!==null&&t)return`inrange(${l}, [${Oa(f,r)}, ${Oa(d,r)}])`;const g=[];return f!==null&&g.push(`${l} >= ${Oa(f,r)}`),d!==null&&g.push(`${l} <= ${Oa(d,r)}`),g.length>0?g.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${yt(e)}`)}function sx(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function dve(e){return RP(e)&&e.timeUnit?{...e,timeUnit:Cn(e.timeUnit)}:e}const pm={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function hve(e){return e==="quantitative"||e==="temporal"}function DM(e){return e==="ordinal"||e==="nominal"}const rc=pm.quantitative,RM=pm.ordinal,pd=pm.temporal,zM=pm.nominal,Yd=pm.geojson;function gve(e){if(e)switch(e=e.toLowerCase(),e){case"q":case rc:return"quantitative";case"t":case pd:return"temporal";case"o":case RM:return"ordinal";case"n":case zM:return"nominal";case Yd:return"geojson"}}const Ln={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},UA={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function pve(e,t){const n=UA[e],i=UA[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const mve={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Wz(e){return mve[e]}const FP=new Set(["linear","log","pow","sqrt","symlog"]),LP=new Set([...FP,"time","utc"]);function UP(e){return FP.has(e)}const BP=new Set(["quantile","quantize","threshold"]),yve=new Set([...LP,...BP,"sequential","identity"]),vve=new Set(["ordinal","bin-ordinal","point","band"]);function $n(e){return vve.has(e)}function ha(e){return yve.has(e)}function ja(e){return LP.has(e)}function md(e){return BP.has(e)}const bve={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function xve(e){return!Se(e)&&he(e,"name")}function jP(e){return he(e,"param")}function Sve(e){return he(e,"unionWith")}function Eve(e){return Ee(e)&&"field"in e}const _ve={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:rCe,domain:aCe,range:sCe,rangeMax:oCe,rangeMin:lCe,scheme:uCe,...wve}=_ve,Ave=de(wve);function BA(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return ja(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return ja(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return ja(e);case"nice":return ja(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return ha(e)&&!We(["log","time","utc","threshold","quantile"],e)}}function qP(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return qf(e)?void 0:Sye(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function Cve(e,t){return We([RM,zM],t)?e===void 0||$n(e):t===pd?We([Ln.TIME,Ln.UTC,void 0],e):t===rc?UP(e)||md(e)||e===void 0:!0}function $ve(e,t,n=!1){if(!hs(e))return!1;switch(e){case Ut:case Mn:case Fl:case Gd:case Pr:case Sa:return ja(t)||t==="band"?!0:t==="point"?!n:!1;case Ll:return We(["linear","band"],t);case ho:case jl:case go:case Ul:case Bl:case bc:return ja(t)||md(t)||We(["band","point","ordinal"],t);case Bi:case cs:case fs:return t!=="band";case ql:case ji:return t==="ordinal"||md(t)}}function Tve(e){return Ee(e)&&"value"in e}const Ei={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},IP=Ei.arc,ox=Ei.area,lx=Ei.bar,Mve=Ei.image,ux=Ei.line,cx=Ei.point,kve=Ei.rect,vv=Ei.rule,PP=Ei.text,FM=Ei.tick,Ove=Ei.trail,LM=Ei.circle,UM=Ei.square,HP=Ei.geoshape;function Pl(e){return["line","area","trail"].includes(e)}function $p(e){return["rect","bar","image","arc","tick"].includes(e)}const Nve=new Set(de(Ei));function es(e){return he(e,"type")}const Dve=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Rve=["fill","fillOpacity"],zve=[...Dve,...Rve],Fve={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Qz=de(Fve),m_=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],Lve={area:["line","point"],bar:m_,rect:m_,line:["point"],tick:["bandSize","thickness",...m_]},Uve={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},Bve={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},GP=de(Bve);function ac(e){return he(e,"band")}const jve={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},qve=5,BM={binSpacing:0,continuousBandSize:qve,minBandSize:.25,timeUnitBandPosition:.5},Ive={...BM,binSpacing:1},Pve={...BM,thickness:1};function Hve(e){return es(e)?e.type:e}function YP(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function jM({markDef:e,config:t,scaleChannel:n,scaleType:i,isCountAggregate:r}){if(!i||!ha(i)||r)return"always-valid";const a=YP(mt("invalid",e,t),{isPath:Pl(e.type)});return t.scale?.invalid?.[n]!==void 0?"show":a}function Gve(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function XP({scaleName:e,scale:t,mode:n}){const i=`domain('${e}')`;if(!t||!e)return;const r=`${i}[0]`,a=`peek(${i})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${i}) ? 0 : ${n==="zeroOrMin"?r:a})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?r:a})`}}function VP({scaleChannel:e,channelDef:t,scale:n,scaleName:i,markDef:r,config:a}){const s=n?.get("type"),l=pa(t),c=nx(l?.aggregate),f=jM({scaleChannel:e,markDef:r,config:a,scaleType:s,isCountAggregate:c});if(l&&f==="show"){const d=a.scale.invalid?.[e]??"zero-or-min";return{test:sx(xe(l,{expr:"datum"}),!1),...Yve(d,n,i)}}}function Yve(e,t,n){if(Tve(e)){const{value:i}=e;return Me(i)?{signal:i.signal}:{value:i}}return XP({scale:t,scaleName:n,mode:"zeroOrMin"})}function qM(e){const{channel:t,channelDef:n,markDef:i,scale:r,scaleName:a,config:s}=e,l=xc(t),c=IM(e),f=VP({scaleChannel:l,channelDef:n,scale:r,scaleName:a,markDef:i,config:s});return f!==void 0?[f,c]:c}function Xve(e){const{datum:t}=e;return _c(t)?ic(t):`${yt(t)}`}function Lu(e,t,n,i){const r={};if(t&&(r.scale=t),gs(e)){const{datum:a}=e;_c(a)?r.signal=ic(a):Me(a)?r.signal=a.signal:gm(a)?r.signal=a.expr:r.value=a}else r.field=xe(e,n);if(i){const{offset:a,band:s}=i;a&&(r.offset=a),s&&(r.band=s)}return r}function bv({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:a="end",bandPosition:s=.5}){const l=!Me(s)&&0<s&&s<1?"datum":void 0,c=xe(t,{expr:l,suffix:r}),f=n!==void 0?xe(n,{expr:l}):xe(t,{suffix:a,expr:l}),d={};if(s===0||s===1){d.scale=e;const g=s===0?c:f;d.field=g}else{const g=Me(s)?`(1-${s.signal}) * ${c} + ${s.signal} * ${f}`:`${1-s} * ${c} + ${s} * ${f}`;d.signal=`scale("${e}", ${g})`}return i&&(d.offset=i),d}function Vve({scaleName:e,fieldDef:t}){const n=xe(t,{expr:"datum"}),i=xe(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`}function IM({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:l,offset:c,defaultRef:f,bandPosition:d}){if(t){if(qe(t)){const g=s?.get("type");if(xi(t)){d??=Cl({fieldDef:t,fieldDef2:n,markDef:i,config:r});const{bin:p,timeUnit:y,type:v}=t;if(kt(p)||d&&y&&v===pd)return l?.impute?Lu(t,a,{binSuffix:"mid"},{offset:c}):d&&!$n(g)?bv({scaleName:a,fieldOrDatumDef:t,bandPosition:d,offset:c}):Lu(t,a,xm(t,e)?{binSuffix:"range"}:{},{offset:c});if(zn(p)){if(pe(n))return bv({scaleName:a,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:d,offset:c});me(_P(e===Ut?xa:us))}}return Lu(t,a,$n(g)?{binSuffix:"range"}:{},{offset:c,band:g==="band"?d??t.bandPosition??.5:void 0})}else if(ga(t)){const g=t.value,p=c?{offset:c}:{};return{...ep(e,g),...p}}}return Ge(f)&&(f=f()),f&&{...f,...c?{offset:c}:{}}}function ep(e,t){return We(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:We(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Rt(t)}function sc(e){return e&&e!=="number"&&e!=="time"}function WP(e,t,n){return`${e}(${t}${n?`, ${yt(n)}`:""})`}function PM({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a}){if(sc(n))return oa({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:a});const s=QP(e,i,r),l=yd(e);if(t===void 0&&n===void 0&&a.customFormatTypes){if(l==="quantitative"){if(r&&a.normalizedNumberFormatType)return oa({fieldOrDatumDef:e,format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,expr:i,config:a});if(a.numberFormatType)return oa({fieldOrDatumDef:e,format:a.numberFormat,formatType:a.numberFormatType,expr:i,config:a})}if(l==="temporal"&&a.timeFormatType&&pe(e)&&e.timeUnit===void 0)return oa({fieldOrDatumDef:e,format:a.timeFormat,formatType:a.timeFormatType,expr:i,config:a})}function c(f){return pe(f)?Cn(f.timeUnit)||{}:{unit:void 0,utc:void 0}}if(bd(e)){const{unit:f,utc:d}=c(e),g=Qve({field:s,timeUnit:f,format:t,formatType:a.timeFormatType,rawTimeFormat:a.timeFormat,isUTCScale:d||Ac(e)&&e.scale?.type===Ln.UTC});return g?{signal:g}:void 0}if(t=jA({type:l,specifiedFormat:t,config:a,normalizeStack:r}),pe(e)&&kt(e.bin)){const f=xe(e,{expr:i,binSuffix:"end"});return{signal:mm(s,f,t,n,a)}}else return t||yd(e)==="quantitative"?{signal:`${JP(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function QP(e,t,n){return pe(e)?n?`${xe(e,{expr:t,suffix:"end"})}-${xe(e,{expr:t,suffix:"start"})}`:xe(e,{expr:t}):Xve(e)}function oa({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a,field:s}){if(s??=QP(e,i,r),s!=="datum.value"&&pe(e)&&kt(e.bin)){const l=xe(e,{expr:i,binSuffix:"end"});return{signal:mm(s,l,t,n,a)}}return{signal:WP(n,s,t)}}function ZP(e,t,n,i,r,a){if(!(Se(i)&&sc(i))&&!(n===void 0&&i===void 0&&r.customFormatTypes&&yd(e)==="quantitative"&&(r.normalizedNumberFormatType&&vd(e)&&e.stack==="normalize"||r.numberFormatType))){if(vd(e)&&e.stack==="normalize"&&r.normalizedNumberFormat)return jA({type:"quantitative",config:r,normalizeStack:!0});if(bd(e)){const s=pe(e)?Cn(e.timeUnit)?.unit:void 0;return s===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:Wve({specifiedFormat:n,timeUnit:s,config:r,omitTimeFormatConfig:a})}return jA({type:t,specifiedFormat:n,config:r})}}function KP(e,t,n){if(e&&(Me(e)||e==="number"||e==="time"))return e;if(bd(t)&&n!=="time"&&n!=="utc")return pe(t)&&Cn(t?.timeUnit)?.utc?"utc":"time"}function jA({type:e,specifiedFormat:t,config:n,normalizeStack:i}){if(Se(t))return t;if(e===rc)return i?n.normalizedNumberFormat:n.numberFormat}function Wve({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:OP(t)}:i?void 0:n.timeFormat)}function JP(e,t){return`format(${e}, "${t||""}")`}function Zz(e,t,n,i){return sc(n)?WP(n,e,t):JP(e,(Se(t)?t:void 0)??i.numberFormat)}function mm(e,t,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return mm(e,t,r.numberFormat,r.numberFormatType,r);const a=Zz(e,n,i,r),s=Zz(t,n,i,r);return`${sx(e,!1)} ? "null" : ${a} + "${L1e}" + ${s}`}function Qve({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:a}){return!t||n?!t&&i?`${i}(${e}, ${yt(n)})`:(n=Se(n)?n:r,`${a?"utc":"time"}Format(${e}, ${yt(n)})`):ave(t,e,a)}const fx="min",Zve={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Kz(e){return we(Zve,e)}function Kve(e){return he(e,"encoding")}function Js(e){return e&&(e.op==="count"||he(e,"field"))}function eH(e){return e&&se(e)}function ym(e){return he(e,"row")||he(e,"column")}function HM(e){return he(e,"header")}function dx(e){return he(e,"facet")}function Jve(e){return he(e,"param")}function ebe(e){return!Se(e)&&he(e,"repeat")}function Jz(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t}}function GM(e){return he(e,"sort")}function Cl({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(qe(e)&&e.bandPosition!==void 0)return e.bandPosition;if(pe(e)){const{timeUnit:r,bin:a}=e;if(r&&!t)return Ja("timeUnitBandPosition",n,i);if(kt(a))return .5}}function tH({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:a,useVlSizeChannel:s}){const l=qi(e),c=mt(s?"size":l,i,r,{vgChannel:l});if(c!==void 0)return c;if(pe(t)){const{timeUnit:f,bin:d}=t;if(f&&!n)return{band:Ja("timeUnitBandSize",i,r)};if(kt(d)&&!$n(a))return{band:1}}if($p(i.type))return a?$n(a)?r[i.type]?.discreteBandSize||{band:1}:r[i.type]?.continuousBandSize:r[i.type]?.discreteBandSize}function nH(e,t,n,i){return kt(e.bin)||e.timeUnit&&xi(e)&&e.type==="temporal"?Cl({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function iH(e){return he(e,"sort")&&!he(e,"field")}function vm(e){return he(e,"condition")}function hx(e){const t=e?.condition;return!!t&&!se(t)&&pe(t)}function bm(e){const t=e?.condition;return!!t&&!se(t)&&qe(t)}function tbe(e){const t=e?.condition;return!!t&&(se(t)||ga(t))}function pe(e){return he(e,"field")||e?.aggregate==="count"}function yd(e){return e?.type}function gs(e){return he(e,"datum")}function ol(e){return xi(e)&&!Sv(e)||xv(e)}function eF(e){return xi(e)&&e.type==="quantitative"&&!e.bin||xv(e)}function xv(e){return gs(e)&&ut(e.datum)}function qe(e){return pe(e)||gs(e)}function xi(e){return e&&(he(e,"field")||e.aggregate==="count")&&he(e,"type")}function ga(e){return he(e,"value")}function Ac(e){return he(e,"scale")||he(e,"sort")}function vd(e){return he(e,"axis")||he(e,"stack")||he(e,"impute")}function rH(e){return he(e,"legend")}function aH(e){return he(e,"format")||he(e,"formatType")}function nbe(e){return ur(e,["legend","axis","header","scale"])}function ibe(e){return he(e,"op")}function xe(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,a="";if(abe(e))n=WI("count");else{let s;if(!t.nofn)if(ibe(e))s=e.op;else{const{bin:l,aggregate:c,timeUnit:f}=e;kt(l)?(s=uP(l),r=(t.binSuffix??"")+(t.suffix??"")):c?Il(c)?(a=`["${n}"]`,n=`argmax_${c.argmax}`):ao(c)?(a=`["${n}"]`,n=`argmin_${c.argmin}`):s=String(c):f&&!wc(f)&&(s=sve(f),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?Hd(n):t.expr?GI(n,t.expr)+a:jr(n)+a}function Sv(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return pe(e)&&!!e.bin;case"temporal":return!1}throw new Error(bP(e.type))}function rbe(e){return Ac(e)&&md(e.scale?.type)}function abe(e){return e.aggregate==="count"}function sbe(e,t){const{field:n,bin:i,timeUnit:r,aggregate:a}=e;if(a==="count")return t.countTitle;if(kt(i))return`${n} (binned)`;if(r&&!wc(r)){const s=Cn(r)?.unit;if(s)return`${n} (${ax(s).join("-")})`}else if(a)return Il(a)?`${n} for max ${a.argmax}`:ao(a)?`${n} for min ${a.argmin}`:`${cm(a)} of ${n}`;return n}function obe(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(Il(t))return`${r} for argmax(${t.argmax})`;if(ao(t))return`${r} for argmin(${t.argmin})`;const a=i&&!wc(i)?Cn(i):void 0,s=t||a?.unit||a?.maxbins&&"timeunit"||kt(n)&&"bin";return s?`${s.toUpperCase()}(${r})`:r}const sH=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return obe(e);default:return sbe(e,t)}};let oH=sH;function lH(e){oH=e}function lbe(){lH(sH)}function If(e,t,{allowDisabling:n,includeDefault:i=!0}){const r=YM(e)?.title;if(!pe(e))return r??e.title;const a=e,s=i?XM(a,t):void 0;return n?Kt(r,a.title,s):r??a.title??s}function YM(e){if(vd(e)&&e.axis)return e.axis;if(rH(e)&&e.legend)return e.legend;if(HM(e)&&e.header)return e.header}function XM(e,t){return oH(e,t)}function Ev(e){if(aH(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=YM(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function ube(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(GM(e)&&se(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!Il(n)&&!ao(n))return"quantitative";if(Ac(e)&&e.scale?.type)switch(UA[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function pa(e){if(pe(e))return e;if(hx(e))return e.condition}function gn(e){if(qe(e))return e;if(bm(e))return e.condition}function uH(e,t,n,i={}){if(Se(e)||ut(e)||Ml(e)){const r=Se(e)?"string":ut(e)?"number":"boolean";return me(uye(t,r,e)),{value:e}}return qe(e)?_v(e,t,n,i):bm(e)?{...e,condition:_v(e.condition,t,n,i)}:e}function _v(e,t,n,i){if(aH(e)){const{format:r,formatType:a,...s}=e;if(sc(a)&&!n.customFormatTypes)return me(Yz(t)),_v(s,t,n,i)}else{const r=vd(e)?"axis":rH(e)?"legend":HM(e)?"header":null;if(r&&e[r]){const{format:a,formatType:s,...l}=e[r];if(sc(s)&&!n.customFormatTypes)return me(Yz(t)),_v({...e,[r]:l},t,n,i)}}return pe(e)?VM(e,t,i):cbe(e)}function cbe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=ut(n)?"quantitative":Se(n)?"nominal":_c(n)?"temporal":void 0,{...e,type:t}}function VM(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:a,field:s}=e,l={...e};if(!n&&i&&!vM(i)&&!Il(i)&&!ao(i)&&(me(fye(i)),delete l.aggregate),r&&(l.timeUnit=Cn(r)),s&&(l.field=`${s}`),kt(a)&&(l.bin=gx(a,t)),zn(a)&&!Jt(t)&&me(Pye(t)),xi(l)){const{type:c}=l,f=gve(c);c!==f&&(l.type=f),c!=="quantitative"&&nx(i)&&(me(cye(c,i)),l.type="quantitative")}else if(!iP(t)){const c=ube(l,t);l.type=c}if(xi(l)){const{compatible:c,warning:f}=fbe(l,t)||{};c===!1&&me(f)}if(GM(l)&&Se(l.sort)){const{sort:c}=l;if(Kz(c))return{...l,sort:{encoding:c}};const f=c.substring(1);if(c.charAt(0)==="-"&&Kz(f))return{...l,sort:{encoding:f,order:"descending"}}}if(HM(l)){const{header:c}=l;if(c){const{orient:f,...d}=c;if(f)return{...l,header:{...d,labelOrient:c.labelOrient||f,titleOrient:c.titleOrient||f}}}}return l}function gx(e,t){return Ml(e)?{maxbins:Lz(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Lz(t)}:e}const Ef={compatible:!0};function fbe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Zs:case Ks:case Qb:return Sv(e)?Ef:{compatible:!1,warning:pye(t)};case Ut:case Mn:case Fl:case Gd:case Bi:case cs:case fs:case fm:case dm:case Zb:case tc:case Kb:case Jb:case bc:case Pr:case Sa:case ex:return Ef;case _a:case qr:case Ea:case wa:return n!==rc?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Ef;case go:case Ul:case Bl:case jl:case ho:case fo:case co:case xa:case us:case Ll:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Ef;case ji:case ql:return!Sv(e)&&!rbe(e)?{compatible:!1,warning:mye(t)}:Ef;case gd:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Ef}}function bd(e){const{formatType:t}=Ev(e);return t==="time"||!t&&dbe(e)}function dbe(e){return e&&(e.type==="temporal"||pe(e)&&!!e.timeUnit)}function px(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){const a=t&&Cn(t)?.unit;let s=a||n==="temporal",l;return gm(e)?l=e.expr:Me(e)?l=e.signal:_c(e)?(s=!0,l=ic(e)):(Se(e)||ut(e))&&s&&(l=`datetime(${yt(e)})`,tve(a)&&(ut(e)&&e<1e4||Se(e)&&isNaN(Date.parse(e)))&&(l=ic({[a]:e}))),l?i&&s?`time(${l})`:l:r?void 0:yt(e)}function cH(e,t){const{type:n}=e;return t.map(i=>{const r=pe(e)&&!wc(e.timeUnit)?e.timeUnit:void 0,a=px(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return a!==void 0?{signal:a}:i})}function xm(e,t){return kt(e.bin)?hs(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const tF={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Sm(e){return e?.condition}const fH=["domain","grid","labels","ticks","title"],hbe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},dH={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},gbe={...dH,style:1,labelExpr:1,encoding:1};function nF(e){return we(gbe,e)}const pbe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},hH=de(pbe);function mo(e){return he(e,"mark")}class mx{name;run;constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return mo(t)?Hve(t.mark)===this.name:!1}}function Uu(e,t){const n=e?.[t];return n?se(n)?dd(n,i=>!!i.field):pe(n)||hx(n):!1}function gH(e,t){const n=e?.[t];return n?se(n)?dd(n,i=>!!i.field):pe(n)||gs(n)||bm(n):!1}function pH(e,t){if(Jt(t)){const n=e[t];if((pe(n)||gs(n))&&(DM(n.type)||pe(n)&&n.timeUnit)){const i=hM(t);return gH(e,i)}}return!1}function mH(e){return dd(c1e,t=>{if(Uu(e,t)){const n=e[t];if(se(n))return dd(n,i=>!!i.aggregate);{const i=pa(n);return i&&!!i.aggregate}}return!1})}function yH(e,t){const n=[],i=[],r=[],a=[],s={};return WM(e,(l,c)=>{if(pe(l)){const{field:f,aggregate:d,bin:g,timeUnit:p,...y}=l;if(d||p||g){const b=YM(l)?.title;let S=xe(l,{forAs:!0});const _={...b?[]:{title:If(l,t,{allowDisabling:!0})},...y,field:S};if(d){let w;if(Il(d)?(w="argmax",S=xe({op:"argmax",field:d.argmax},{forAs:!0}),_.field=`${S}.${f}`):ao(d)?(w="argmin",S=xe({op:"argmin",field:d.argmin},{forAs:!0}),_.field=`${S}.${f}`):d!=="boxplot"&&d!=="errorbar"&&d!=="errorband"&&(w=d),w){const A={op:w,as:S};f&&(A.field=f),a.push(A)}}else if(n.push(S),xi(l)&&kt(g)){if(i.push({bin:g,field:f,as:S}),n.push(xe(l,{binSuffix:"end"})),xm(l,c)&&n.push(xe(l,{binSuffix:"range"})),Jt(c)){const w={field:`${S}_end`};s[`${c}2`]=w}_.bin="binned",iP(c)||(_.type=rc)}else if(p&&!wc(p)){r.push({timeUnit:p,field:f,as:S});const w=xi(l)&&l.type!==pd&&"time";w&&(c===fm||c===tc?_.formatType=w:S1e(c)?_.legend={formatType:w,..._.legend}:Jt(c)&&(_.axis={formatType:w,..._.axis}))}s[c]=_}else n.push(f),s[c]=e[c]}else s[c]=e[c]}),{bins:i,timeUnits:r,aggregate:a,groupby:n,encoding:s}}function mbe(e,t,n){const i=_1e(t,n);if(i){if(i==="binned"){const r=e[t===xa?Ut:Mn];return!!(pe(r)&&pe(e[t])&&zn(r.bin))}}else return!1;return!0}function ybe(e,t,n,i){const r={};for(const a of de(e))nP(a)||me(gye(a));for(let a of m1e){if(!e[a])continue;const s=e[a];if(hm(a)){const l=p1e(a),c=r[l];if(pe(c)&&hve(c.type)&&pe(s)&&!c.timeUnit){me(lye(l));continue}}if(a==="angle"&&t==="arc"&&!e.theta&&(me(oye),a=Pr),!mbe(e,a,t)){me(rx(a,t));continue}if(a===ho&&t==="line"&&pa(e[a])?.aggregate){me(hye);continue}if(a===Bi&&(n?"fill"in e:"stroke"in e)){me(xP("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(a===dm||a===gd&&!se(s)&&!ga(s)||a===tc&&se(s)){if(s){if(a===gd){const l=e[a];if(iH(l)){r[a]=l;continue}}r[a]=_e(s).reduce((l,c)=>(pe(c)?l.push(VM(c,a)):me(LA(c,a)),l),[])}}else{if(a===tc&&s===null)r[a]=null;else if(!pe(s)&&!gs(s)&&!ga(s)&&!vm(s)&&!Me(s)){me(LA(s,a));continue}r[a]=uH(s,a,i)}}return r}function yx(e,t){const n={};for(const i of de(e)){const r=uH(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function vbe(e){const t=[];for(const n of de(e))if(Uu(e,n)){const i=e[n],r=_e(i);for(const a of r)pe(a)?t.push(a):hx(a)&&t.push(a.condition)}return t}function WM(e,t,n){if(e)for(const i of de(e)){const r=e[i];if(se(r))for(const a of r)t.call(n,a,i);else t.call(n,r,i)}}function bbe(e,t,n,i){return e?de(e).reduce((r,a)=>{const s=e[a];return se(s)?s.reduce((l,c)=>t.call(i,l,c,a),r):t.call(i,r,s,a)},n):n}function vH(e,t){return de(t).reduce((n,i)=>{switch(i){case Ut:case Mn:case Kb:case ex:case Jb:case xa:case us:case Fl:case Gd:case Pr:case fo:case Sa:case co:case Ll:case Ea:case _a:case wa:case qr:case fm:case ji:case bc:case tc:return n;case gd:if(e==="line"||e==="trail")return n;case dm:case Zb:{const r=t[i];if(se(r)||pe(r))for(const a of _e(r))a.aggregate||n.push(xe(a,{}));return n}case ho:if(e==="trail")return n;case Bi:case cs:case fs:case go:case Ul:case Bl:case ql:case jl:{const r=pa(t[i]);return r&&!r.aggregate&&n.push(xe(r,{})),n}}},[])}function xbe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(se(t)){for(const a of t)a.aggregate?(i||(i=[]),i.push(a)):(r||(r=[]),r.push(a));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return se(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function qA(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:s,titlePrefix:l})=>{const c=i?` of ${QM(t)}`:"";return{field:s+t.field,type:t.type,title:Me(l)?{signal:`${l}"${escape(c)}"`}:l+c}}),a=vbe(n).map(nbe);return{tooltip:[...r,...Ba(a,tt)]}}function QM(e){const{title:t,field:n}=e;return Kt(t,n)}function ZM(e,t,n,i,r){const{scale:a,axis:s}=n;return({partName:l,mark:c,positionPrefix:f,endPositionPrefix:d=void 0,extraEncoding:g={}})=>{const p=QM(n);return bH(e,l,r,{mark:c,encoding:{[t]:{field:`${f}_${n.field}`,type:n.type,...p!==void 0?{title:p}:{},...a!==void 0?{scale:a}:{},...s!==void 0?{axis:s}:{}},...Se(d)?{[`${t}2`]:{field:`${d}_${n.field}`}}:{},...i,...g}})}}function bH(e,t,n,i){const{clip:r,color:a,opacity:s}=e,l=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...a?{color:a}:{},...s?{opacity:s}:{},...es(i.mark)?i.mark:{type:i.mark},style:`${l}-${String(t)}`,...Ml(e[t])?{}:e[t]}}]:[]}function xH(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",a=i[r],s=i[`${r}2`],l=i[`${r}Error`],c=i[`${r}Error2`];return{continuousAxisChannelDef:y1(a,n),continuousAxisChannelDef2:y1(s,n),continuousAxisChannelDefError:y1(l,n),continuousAxisChannelDefError2:y1(c,n),continuousAxis:r}}function y1(e,t){if(e?.aggregate){const{aggregate:n,...i}=e;return n!==t&&me(Iye(n,t)),i}else return e}function SH(e,t){const{mark:n,encoding:i}=e,{x:r,y:a}=i;if(es(n)&&n.orient)return n.orient;if(ol(r)){if(ol(a)){const s=pe(r)&&r.aggregate,l=pe(a)&&a.aggregate;if(!s&&l===t)return"vertical";if(!l&&s===t)return"horizontal";if(s===t&&l===t)throw new Error("Both x and y cannot have aggregate");return bd(a)&&!bd(r)?"horizontal":"vertical"}return"horizontal"}else{if(ol(a))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const wv="boxplot",Sbe=["box","median","outliers","rule","ticks"],Ebe=new mx(wv,_H);function EH(e){return ut(e)?"tukey":e}function _H(e,{config:t}){e={...e,encoding:yx(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:a,...s}=e,l=es(n)?n:{type:n};r&&me(vP("boxplot"));const c=l.extent??t.boxplot.extent,f=mt("size",l,t),d=l.invalid,g=EH(c),{bins:p,timeUnits:y,transform:v,continuousAxisChannelDef:b,continuousAxis:S,groupby:_,aggregate:w,encodingWithoutContinuousAxis:A,ticksOrient:$,boxOrient:M,customTooltipWithoutAggregatedField:k}=_be(e,c,t),T=Hd(b.field),{color:D,size:R,...B}=A,U=Gr=>ZM(l,S,b,Gr,t.boxplot),Q=U(B),Y=U(A),P=(Ee(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",z=U({...B,...R?{size:R}:{},color:{condition:{test:`${xt(`lower_box_${b.field}`)} >= ${xt(`upper_box_${b.field}`)}`,...D||{value:P}}}}),N=qA([{fieldPrefix:g==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:g==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],b,A),j={type:"tick",color:"black",opacity:1,orient:$,invalid:d,aria:!1},X=g==="min-max"?N:qA([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],b,A),K=[...Q({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:X}),...Q({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:X}),...Q({partName:"ticks",mark:j,positionPrefix:"lower_whisker",extraEncoding:X}),...Q({partName:"ticks",mark:j,positionPrefix:"upper_whisker",extraEncoding:X})],fe=[...g!=="tukey"?K:[],...Y({partName:"box",mark:{type:"bar",...f?{size:f}:{},orient:M,invalid:d,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:N}),...z({partName:"median",mark:{type:"tick",invalid:d,...Ee(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...f?{size:f}:{},orient:$,aria:!1},positionPrefix:"mid_box",extraEncoding:N})];if(g==="min-max")return{...s,transform:(s.transform??[]).concat(v),layer:fe};const F=xt(`lower_box_${b.field}`),G=xt(`upper_box_${b.field}`),le=`(${G} - ${F})`,I=`${F} - ${c} * ${le}`,J=`${G} + ${c} * ${le}`,ve=xt(b.field),Ae={joinaggregate:wH(b.field),groupby:_},ze={transform:[{filter:`(${I} <= ${ve}) && (${ve} <= ${J})`},{aggregate:[{op:"min",field:b.field,as:`lower_whisker_${T}`},{op:"max",field:b.field,as:`upper_whisker_${T}`},{op:"min",field:`lower_box_${b.field}`,as:`lower_box_${T}`},{op:"max",field:`upper_box_${b.field}`,as:`upper_box_${T}`},...w],groupby:_}],layer:K},{tooltip:ce,...Le}=B,{scale:je,axis:ge}=b,tn=QM(b),Qe=bH(l,"outliers",t.boxplot,{transform:[{filter:`(${ve} < ${I}) || (${ve} > ${J})`}],mark:"point",encoding:{[S]:{field:b.field,type:b.type,...tn!==void 0?{title:tn}:{},...je!==void 0?{scale:je}:{},...ge!==void 0?{axis:ge}:{}},...Le,...D?{color:D}:{},...k?{tooltip:k}:{}}})[0];let It;const nn=[...p,...y,Ae];return Qe?It={transform:nn,layer:[Qe,ze]}:(It=ze,It.transform.unshift(...nn)),{...s,layer:[It,{transform:v,layer:fe}]}}function wH(e){const t=Hd(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function _be(e,t,n){const i=SH(e,wv),{continuousAxisChannelDef:r,continuousAxis:a}=xH(e,i,wv),s=r.field,l=Hd(s),c=EH(t),f=[...wH(s),{op:"median",field:s,as:`mid_box_${l}`},{op:"min",field:s,as:(c==="min-max"?"lower_whisker_":"min_")+l},{op:"max",field:s,as:(c==="min-max"?"upper_whisker_":"max_")+l}],d=c==="min-max"||c==="tukey"?[]:[{calculate:`${xt(`upper_box_${l}`)} - ${xt(`lower_box_${l}`)}`,as:`iqr_${l}`},{calculate:`min(${xt(`upper_box_${l}`)} + ${xt(`iqr_${l}`)} * ${t}, ${xt(`max_${l}`)})`,as:`upper_whisker_${l}`},{calculate:`max(${xt(`lower_box_${l}`)} - ${xt(`iqr_${l}`)} * ${t}, ${xt(`min_${l}`)})`,as:`lower_whisker_${l}`}],{[a]:g,...p}=e.encoding,{customTooltipWithoutAggregatedField:y,filteredEncoding:v}=xbe(p),{bins:b,timeUnits:S,aggregate:_,groupby:w,encoding:A}=yH(v,n),$=i==="vertical"?"horizontal":"vertical",M=i,k=[...b,...S,{aggregate:[..._,...f],groupby:w},...d];return{bins:b,timeUnits:S,transform:k,groupby:w,aggregate:_,continuousAxisChannelDef:r,continuousAxis:a,encodingWithoutContinuousAxis:A,ticksOrient:$,boxOrient:M,customTooltipWithoutAggregatedField:y}}const KM="errorbar",wbe=["ticks","rule"],Abe=new mx(KM,AH);function AH(e,{config:t}){e={...e,encoding:yx(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,ticksOrient:s,markDef:l,outerSpec:c,tooltipEncoding:f}=CH(e,KM,t);delete a.size;const d=ZM(l,r,i,a,t.errorbar),g=l.thickness,p=l.size,y={type:"tick",orient:s,aria:!1,...g!==void 0?{thickness:g}:{},...p!==void 0?{size:p}:{}},v=[...d({partName:"ticks",mark:y,positionPrefix:"lower",extraEncoding:f}),...d({partName:"ticks",mark:y,positionPrefix:"upper",extraEncoding:f}),...d({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...g!==void 0?{size:g}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})];return{...c,transform:n,...v.length>1?{layer:v}:{...v[0]}}}function Cbe(e,t){const{encoding:n}=e;if($be(n))return{orient:SH(e,t),inputType:"raw"};const i=Tbe(n),r=Mbe(n),a=n.x,s=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const l=n.x2,c=n.y2;if(qe(l)&&qe(c))throw new Error(`${t} cannot have both x2 and y2`);if(qe(l)){if(ol(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(qe(c)){if(ol(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const l=n.xError,c=n.xError2,f=n.yError,d=n.yError2;if(qe(c)&&!qe(l))throw new Error(`${t} cannot have xError2 without xError`);if(qe(d)&&!qe(f))throw new Error(`${t} cannot have yError2 without yError`);if(qe(l)&&qe(f))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(qe(l)){if(ol(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(qe(f)){if(ol(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function $be(e){return(qe(e.x)||qe(e.y))&&!qe(e.x2)&&!qe(e.y2)&&!qe(e.xError)&&!qe(e.xError2)&&!qe(e.yError)&&!qe(e.yError2)}function Tbe(e){return qe(e.x2)||qe(e.y2)}function Mbe(e){return qe(e.xError)||qe(e.xError2)||qe(e.yError)||qe(e.yError2)}function CH(e,t,n){const{mark:i,encoding:r,params:a,projection:s,...l}=e,c=es(i)?i:{type:i};a&&me(vP(t));const{orient:f,inputType:d}=Cbe(e,t),{continuousAxisChannelDef:g,continuousAxisChannelDef2:p,continuousAxisChannelDefError:y,continuousAxisChannelDefError2:v,continuousAxis:b}=xH(e,f,t),{errorBarSpecificAggregate:S,postAggregateCalculates:_,tooltipSummary:w,tooltipTitleWithFieldName:A}=kbe(c,g,p,y,v,d,t,n),{[b]:$,[b==="x"?"x2":"y2"]:M,[b==="x"?"xError":"yError"]:k,[b==="x"?"xError2":"yError2"]:T,...D}=r,{bins:R,timeUnits:B,aggregate:U,groupby:Q,encoding:Y}=yH(D,n),P=[...U,...S],z=d!=="raw"?[]:Q,N=qA(w,g,Y,A);return{transform:[...l.transform??[],...R,...B,...P.length===0?[]:[{aggregate:P,groupby:z}],..._],groupby:z,continuousAxisChannelDef:g,continuousAxis:b,encodingWithoutContinuousAxis:Y,ticksOrient:f==="vertical"?"horizontal":"vertical",markDef:c,outerSpec:l,tooltipEncoding:N}}function kbe(e,t,n,i,r,a,s,l){let c=[],f=[];const d=t.field;let g,p=!1;if(a==="raw"){const y=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":l.errorbar.center,v=e.extent?e.extent:y==="mean"?"stderr":"iqr";if(y==="median"!=(v==="iqr")&&me(qye(y,v,s)),v==="stderr"||v==="stdev")c=[{op:v,field:d,as:`extent_${d}`},{op:y,field:d,as:`center_${d}`}],f=[{calculate:`${xt(`center_${d}`)} + ${xt(`extent_${d}`)}`,as:`upper_${d}`},{calculate:`${xt(`center_${d}`)} - ${xt(`extent_${d}`)}`,as:`lower_${d}`}],g=[{fieldPrefix:"center_",titlePrefix:cm(y)},{fieldPrefix:"upper_",titlePrefix:iF(y,v,"+")},{fieldPrefix:"lower_",titlePrefix:iF(y,v,"-")}],p=!0;else{let b,S,_;v==="ci"?(b="mean",S="ci0",_="ci1"):(b="median",S="q1",_="q3"),c=[{op:S,field:d,as:`lower_${d}`},{op:_,field:d,as:`upper_${d}`},{op:b,field:d,as:`center_${d}`}],g=[{fieldPrefix:"upper_",titlePrefix:If({field:d,aggregate:_,type:"quantitative"},l,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:If({field:d,aggregate:S,type:"quantitative"},l,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:If({field:d,aggregate:b,type:"quantitative"},l,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&me(jye(e.center,e.extent)),a==="aggregated-upper-lower"?(g=[],f=[{calculate:xt(n.field),as:`upper_${d}`},{calculate:xt(d),as:`lower_${d}`}]):a==="aggregated-error"&&(g=[{fieldPrefix:"",titlePrefix:d}],f=[{calculate:`${xt(d)} + ${xt(i.field)}`,as:`upper_${d}`}],r?f.push({calculate:`${xt(d)} + ${xt(r.field)}`,as:`lower_${d}`}):f.push({calculate:`${xt(d)} - ${xt(i.field)}`,as:`lower_${d}`}));for(const y of f)g.push({fieldPrefix:y.as.substring(0,6),titlePrefix:ec(ec(y.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:f,errorBarSpecificAggregate:c,tooltipSummary:g,tooltipTitleWithFieldName:p}}function iF(e,t,n){return`${cm(e)} ${n} ${t}`}const JM="errorband",Obe=["band","borders"],Nbe=new mx(JM,$H);function $H(e,{config:t}){e={...e,encoding:yx(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,markDef:s,outerSpec:l,tooltipEncoding:c}=CH(e,JM,t),f=s,d=ZM(f,r,i,a,t.errorband),g=e.encoding.x!==void 0&&e.encoding.y!==void 0;let p={type:g?"area":"rect"},y={type:g?"line":"rule"};const v={...f.interpolate?{interpolate:f.interpolate}:{},...f.tension&&f.interpolate?{tension:f.tension}:{}};return g?(p={...p,...v,ariaRoleDescription:"errorband"},y={...y,...v,aria:!1}):f.interpolate?me(Vz("interpolate")):f.tension&&me(Vz("tension")),{...l,transform:n,layer:[...d({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c}),...d({partName:"borders",mark:y,positionPrefix:"lower",extraEncoding:c}),...d({partName:"borders",mark:y,positionPrefix:"upper",extraEncoding:c})]}}const TH={};function ek(e,t,n){const i=new mx(e,t);TH[e]={normalizer:i,parts:n}}function Dbe(){return de(TH)}ek(wv,_H,Sbe);ek(KM,AH,wbe);ek(JM,$H,Obe);const Rbe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],MH={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},kH={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},zbe=de(MH),Fbe=de(kH),Lbe={header:1,headerRow:1,headerColumn:1,headerFacet:1},OH=de(Lbe),NH=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Ube={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},Bbe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},ma="_vgsid_",jbe={point:{on:"click",fields:[ma],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function tk(e){return e==="legend"||!!e?.legend}function y_(e){return tk(e)&&Ee(e)}function nk(e){return!!e?.select}function DH(e){const t=[];for(const n of e||[]){if(nk(n))continue;const{expr:i,bind:r,...a}=n;if(r&&i){const s={...a,bind:r,init:i};t.push(s)}else{const s={...a,...i?{update:i}:{},...r?{bind:r}:{}};t.push(s)}}return t}function qbe(e){return vx(e)||rk(e)||ik(e)}function ik(e){return he(e,"concat")}function vx(e){return he(e,"vconcat")}function rk(e){return he(e,"hconcat")}function RH({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function ts(e){return he(e,"step")}function rF(e){return he(e,"view")||he(e,"width")||he(e,"height")}const aF=20,Ibe={align:1,bounds:1,center:1,columns:1,spacing:1},Pbe=de(Ibe);function Hbe(e,t,n){const i=n[t],r={},{spacing:a,columns:s}=i;a!==void 0&&(r.spacing=a),s!==void 0&&(dx(e)&&!ym(e.facet)||ik(e))&&(r.columns=s),vx(e)&&(r.columns=1);for(const l of Pbe)if(e[l]!==void 0)if(l==="spacing"){const c=e[l];r[l]=ut(c)?c:{row:c.row??a,column:c.column??a}}else r[l]=e[l];return r}function IA(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function PA(e,t){const n=Av(e,t);return ts(n)?n.step:zH}function Av(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Kt(n,{step:e.step})}const zH=20,Gbe={continuousWidth:300,continuousHeight:300,step:zH},Ybe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Gbe,mark:Uve,arc:{},area:{},bar:Ive,circle:{},geoshape:{},image:{},line:{},point:{},rect:BM,rule:{color:"black"},square:{},text:{color:"black"},tick:Pve,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:bve,projection:{},legend:Ube,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:jbe,style:{},title:{},facet:{spacing:aF},concat:{spacing:aF},normalizedNumberFormat:".0%"},Fs=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],sF={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},oF={blue:Fs[0],orange:Fs[1],red:Fs[2],teal:Fs[3],green:Fs[4],yellow:Fs[5],purple:Fs[6],pink:Fs[7],brown:Fs[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Xbe(e={}){return{signals:[{name:"color",value:Ee(e)?{...oF,...e}:oF}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Vbe(e){return{signals:[{name:"fontSize",value:Ee(e)?{...sF,...e}:sF}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Wbe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function FH(e){const t=de(e||{}),n={};for(const i of t){const r=e[i];n[i]=Sm(r)?fP(r):ir(r)}return n}function Qbe(e){const t=de(e),n={};for(const i of t)n[i]=FH(e[i]);return n}const Zbe=[...GP,...hH,...OH,"background","padding","legend","lineBreak","scale","style","title","view"];function LH(e={}){const{color:t,font:n,fontSize:i,selection:r,...a}=e,s=$d({},Be(Ybe),n?Wbe(n):{},t?Xbe(t):{},i?Vbe(i):{},a||{});r&&Td(s,"selection",r,!0);const l=ur(s,Zbe);for(const c of["background","lineBreak","padding"])s[c]&&(l[c]=ir(s[c]));for(const c of GP)s[c]&&(l[c]=Fn(s[c]));for(const c of hH)s[c]&&(l[c]=FH(s[c]));for(const c of OH)s[c]&&(l[c]=Fn(s[c]));if(s.legend&&(l.legend=Fn(s.legend)),s.scale){const{invalid:c,...f}=s.scale,d=Fn(c,{level:1});l.scale={...Fn(f),...de(d).length>0?{invalid:d}:{}}}return s.style&&(l.style=Qbe(s.style)),s.title&&(l.title=Fn(s.title)),s.view&&(l.view=Fn(s.view)),l}const Kbe=new Set(["view",...Nve]),Jbe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],exe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...Lve};function txe(e){e=Be(e);for(const t of Jbe)delete e[t];if(e.axis)for(const t in e.axis)Sm(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Rbe)delete e.legend[t];if(e.mark){for(const t of Qz)delete e.mark[t];e.mark.tooltip&&Ee(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(DH(e.params)),delete e.params);for(const t of Kbe){for(const i of Qz)delete e[t][i];const n=exe[t];if(n)for(const i of n)delete e[t][i];ixe(e,t)}for(const t of Dbe())delete e[t];nxe(e);for(const t in e)Ee(e[t])&&Mt(e[t])&&delete e[t];return Mt(e)?void 0:e}function nxe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=cP(e.title);Mt(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Mt(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Mt(i)?delete e.title:e.title=i}function ixe(e,t,n,i){const r=e[t];t==="view"&&(n="cell");const a={...r,...e.style[n??t]};Mt(a)||(e.style[n??t]=a),delete e[t]}function bx(e){return he(e,"layer")}function rxe(e){return he(e,"repeat")}function axe(e){return!se(e.repeat)&&he(e.repeat,"layer")}class ak{map(t,n){return dx(t)?this.mapFacet(t,n):rxe(t)?this.mapRepeat(t,n):rk(t)?this.mapHConcat(t,n):vx(t)?this.mapVConcat(t,n):ik(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(bx(t))return this.mapLayer(t,n);if(mo(t))return this.mapUnit(t,n);throw new Error(bM(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(a=>this.map(a,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const sxe={zero:1,center:1,normalize:1};function oxe(e){return we(sxe,e)}const lxe=new Set([IP,lx,ox,vv,cx,LM,UM,ux,PP,FM]),uxe=new Set([lx,ox,IP]);function _f(e){return pe(e)&&yd(e)==="quantitative"&&!e.bin}function lF(e,t,{orient:n,type:i}){const r=t==="x"?"y":"radius",a=t==="x"&&["bar","area"].includes(i),s=e[t],l=e[r];if(pe(s)&&pe(l))if(_f(s)&&_f(l)){if(s.stack)return t;if(l.stack)return r;const c=pe(s)&&!!s.aggregate,f=pe(l)&&!!l.aggregate;if(c!==f)return c?t:r;if(a){if(n==="vertical")return r;if(n==="horizontal")return t}}else{if(_f(s))return t;if(_f(l))return r}else{if(_f(s))return a&&n==="vertical"?void 0:t;if(_f(l))return a&&n==="horizontal"?void 0:r}}function cxe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function UH(e,t){const n=es(e)?e:{type:e},i=n.type;if(!lxe.has(i))return null;const r=lF(t,"x",n)||lF(t,"theta",n);if(!r)return null;const a=t[r],s=pe(a)?xe(a,{}):void 0,l=cxe(r),c=[],f=new Set;if(t[l]){const b=t[l],S=pe(b)?xe(b,{}):void 0;S&&S!==s&&(c.push(l),f.add(S))}const d=l==="x"?"xOffset":"yOffset",g=t[d],p=pe(g)?xe(g,{}):void 0;p&&p!==s&&(c.push(d),f.add(p));const y=y1e.reduce((b,S)=>{if(S!=="tooltip"&&Uu(t,S)){const _=t[S];for(const w of _e(_)){const A=pa(w);if(A.aggregate)continue;const $=xe(A,{});(!$||!f.has($))&&b.push({channel:S,fieldDef:A})}}return b},[]);let v;return a.stack!==void 0?Ml(a.stack)?v=a.stack?"zero":null:v=a.stack:uxe.has(i)&&(v="zero"),!v||!oxe(v)||mH(t)&&y.length===0?null:(a?.scale?.type&&a?.scale?.type!==Ln.LINEAR&&a?.stack&&me(Lye(a.scale.type)),qe(t[ds(r)])?(a.stack!==void 0&&me(Fye(r)),null):(pe(a)&&a.aggregate&&!k1e.has(a.aggregate)&&me(Uye(a.aggregate)),{groupbyChannels:c,groupbyFields:f,fieldChannel:r,impute:a.impute===null?!1:Pl(i),stackBy:y,offset:v}))}function BH(e,t,n){const i=Fn(e),r=mt("orient",i,n);if(i.orient=gxe(i.type,t,r),r!==void 0&&r!==i.orient&&me(xye(i.orient,r)),i.type==="bar"&&i.orient){const c=mt("cornerRadiusEnd",i,n);if(c!==void 0){const f=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:jve[i.orient];for(const d of f)i[d]=c;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}const a=mt("opacity",i,n),s=mt("fillOpacity",i,n);return a===void 0&&s===void 0&&(i.opacity=dxe(i.type,t)),mt("cursor",i,n)===void 0&&(i.cursor=fxe(i,t,n)),i}function fxe(e,t,n){return t.href||e.href||mt("href",e,n)?"pointer":e.cursor}const jH=.7;function dxe(e,t){if(We([cx,FM,LM,UM],e)&&!mH(t))return jH}function hxe(e,t,{graticule:n}){if(n)return!1;const i=Ja("filled",e,t),r=e.type;return Kt(i,r!==cx&&r!==ux&&r!==vv)}function gxe(e,t,n){switch(e){case cx:case LM:case UM:case kve:case Mve:return}const{x:i,y:r,x2:a,y2:s}=t;switch(e){case PP:case lx:if(pe(i)&&(zn(i.bin)||pe(r)&&r.aggregate&&!i.aggregate))return"vertical";if(pe(r)&&(zn(r.bin)||pe(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(s||a){if(n)return n;if(!a)return(pe(i)&&i.type===rc&&!kt(i.bin)||xv(i))&&pe(r)&&zn(r.bin)?"horizontal":"vertical";if(!s)return(pe(r)&&r.type===rc&&!kt(r.bin)||xv(r))&&pe(i)&&zn(i.bin)?"vertical":"horizontal"}case vv:if(a&&!(pe(i)&&zn(i.bin))&&s&&!(pe(r)&&zn(r.bin)))return;case ox:if(s)return pe(r)&&zn(r.bin)?"horizontal":"vertical";if(a)return pe(i)&&zn(i.bin)?"vertical":"horizontal";if(e===vv){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case ux:case FM:{const l=eF(i),c=eF(r);if(n)return n;if(l&&!c)return e!=="tick"?"horizontal":"vertical";if(!l&&c)return e!=="tick"?"vertical":"horizontal";if(l&&c)return"vertical";{const f=xi(i)&&i.type===pd,d=xi(r)&&r.type===pd;if(f&&!d)return"vertical";if(!f&&d)return"horizontal"}return}}return"vertical"}function pxe(e){const{point:t,line:n,...i}=e;return de(i).length>1?i:i.type}function mxe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ur(e[t],["point","line"])});return e}function v_(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Ee(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Ee(t.point)?t.point:{}:void 0}function uF(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class yxe{name="path-overlay";hasMatchingType(t,n){if(mo(t)){const{mark:i,encoding:r}=t,a=es(i)?i:{type:i};switch(a.type){case"line":case"rule":case"trail":return!!v_(a,n[a.type],r);case"area":return!!v_(a,n[a.type],r)||!!uF(a,n[a.type])}}return!1}run(t,n,i){const{config:r}=n,{params:a,projection:s,mark:l,name:c,encoding:f,...d}=t,g=yx(f,r),p=es(l)?l:{type:l},y=v_(p,r[p.type],g),v=p.type==="area"&&uF(p,r[p.type]),b=[{name:c,...a?{params:a}:{},mark:pxe({...p.type==="area"&&mt("opacity",p,r)==null&&mt("fillOpacity",p,r)==null?{opacity:jH}:{},...p}),encoding:ur(g,["shape"])}],S=UH(BH(p,g,r),g);let _=g;if(S){const{fieldChannel:w,offset:A}=S;_={...g,[w]:{...g[w],...A?{stack:A}:{}}}}return _=ur(_,["y2","x2"]),v&&b.push({...s?{projection:s}:{},mark:{type:"line",...fd(p,["clip","interpolate","tension","tooltip"]),...v},encoding:_}),y&&b.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...fd(p,["clip","tooltip"]),...y},encoding:_}),i({...d,layer:b},{...n,config:mxe(r)})}}function vxe(e,t){return t?ym(e)?IH(e,t):qH(e,t):e}function b_(e,t){return t?IH(e,t):e}function HA(e,t,n){const i=t[e];if(ebe(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};me(Z1e(i.repeat));return}return t}function qH(e,t){if(e=HA("field",e,t),e!==void 0){if(e===null)return null;if(GM(e)&&Js(e.sort)){const n=HA("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function cF(e,t){if(pe(e))return qH(e,t);{const n=HA("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function fF(e,t){if(qe(e)){const n=cF(e,t);if(n)return n;if(vm(e))return{condition:e.condition}}else{if(bm(e)){const n=cF(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r}}return e}}function IH(e,t){const n={};for(const i in e)if(he(e,i)){const r=e[i];if(se(r))n[i]=r.map(a=>fF(a,t)).filter(a=>a);else{const a=fF(r,t);a!==void 0&&(n[i]=a)}}return n}class bxe{name="RuleForRangedLine";hasMatchingType(t){if(mo(t)){const{encoding:n,mark:i}=t;if(i==="line"||es(i)&&i.type==="line")for(const r of g1e){const a=xc(r),s=n[a];if(n[r]&&(pe(s)&&!zn(s.bin)||gs(s)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:a}=t;return me(bye(!!r.x2,!!r.y2)),i({...t,mark:Ee(a)?{...a,type:"rule"}:"rule"},n)}}class xxe extends ak{nonFacetUnitNormalizers=[Ebe,Abe,Nbe,new yxe,new bxe];map(t,n){if(mo(t)){const i=Uu(t.encoding,Zs),r=Uu(t.encoding,Ks),a=Uu(t.encoding,Qb);if(i||r||a)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,a=b_(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(c=>c).join("_")}:{},...a?{encoding:a}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(s,n);const l=this.mapLayerOrUnit.bind(this);for(const c of this.nonFacetUnitNormalizers)if(c.hasMatchingType(s,n.config))return c.run(s,n,l);return s}mapRepeat(t,n){return axe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r,...a}=t,{row:s,column:l,layer:c}=i,{repeater:f={},repeaterPrefix:d=""}=n;return s||l?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...l?{column:l}:{}},spec:{repeat:{layer:c},spec:r}},n):{...a,layer:c.map(g=>{const p={...f,layer:g},y=`${(r.name?`${r.name}_`:"")+d}child__layer_${Lt(g)}`,v=this.mapLayerOrUnit(r,{...n,repeater:p,repeaterPrefix:y});return v.name=y,v})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:r,data:a,...s}=t;!se(i)&&t.columns&&(t=ur(t,["columns"]),me(Hz("repeat")));const l=[],{repeater:c={},repeaterPrefix:f=""}=n,d=!se(i)&&i.row||[c?c.row:null],g=!se(i)&&i.column||[c?c.column:null],p=se(i)&&i||[c?c.repeat:null];for(const v of p)for(const b of d)for(const S of g){const _={repeat:v,row:b,column:S,layer:c.layer},w=`${(r.name?`${r.name}_`:"")+f}child__${se(i)?`${Lt(v)}`:(i.row?`row_${Lt(b)}`:"")+(i.column?`column_${Lt(S)}`:"")}`,A=this.map(r,{...n,repeater:_,repeaterPrefix:w});A.name=w,l.push(ur(A,["data"]))}const y=se(i)?t.columns:i.column?i.column.length:1;return{data:r.data??a,align:"all",...s,columns:y,concat:l}}mapFacet(t,n){const{facet:i}=t;return ym(i)&&t.columns&&(t=ur(t,["columns"]),me(Hz("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:a,parentProjection:s,config:l}=n,c=hF({parentProjection:s,projection:r}),f=dF({parentEncoding:a,encoding:b_(i,n.repeater)});return this.mapUnit({...t,...c?{projection:c}:{},...f?{encoding:f}:{}},{config:l})}mapFacetedUnit(t,n){const{row:i,column:r,facet:a,...s}=t.encoding,{mark:l,width:c,projection:f,height:d,view:g,params:p,encoding:y,...v}=t,{facetMapping:b,layout:S}=this.getFacetMappingAndLayout({row:i,column:r,facet:a},n),_=b_(s,n.repeater);return this.mapFacet({...v,...S,facet:b,spec:{...c?{width:c}:{},...d?{height:d}:{},...g?{view:g}:{},...f?{projection:f}:{},mark:l,encoding:_,...p?{params:p}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:r,facet:a}=t;if(i||r){a&&me(yye([...i?[Zs]:[],...r?[Ks]:[]]));const s={},l={};for(const c of[Zs,Ks]){const f=t[c];if(f){const{align:d,center:g,spacing:p,columns:y,...v}=f;s[c]=v;for(const b of["align","center","spacing"])f[b]!==void 0&&(l[b]??={},l[b][c]=f[b])}}return{facetMapping:s,layout:l}}else{const{align:s,center:l,spacing:c,columns:f,...d}=a;return{facetMapping:vxe(d,n.repeater),layout:{...s?{align:s}:{},...l?{center:l}:{},...c?{spacing:c}:{},...f?{columns:f}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...r}){const{encoding:a,projection:s,...l}=t,c={...r,parentEncoding:dF({parentEncoding:n,encoding:a,layer:!0}),parentProjection:hF({parentProjection:i,projection:s})};return super.mapLayer({...l,...t.name?{name:[c.repeaterPrefix,t.name].filter(f=>f).join("_")}:{}},c)}}function dF({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...de(e),...de(t)]);for(const a of r){const s=t[a],l=e[a];if(qe(s)){const c={...l,...s};i[a]=c}else bm(s)?i[a]={...s,condition:{...l,...s.condition}}:s||s===null?i[a]=s:(n||ga(l)||Me(l)||qe(l)||se(l))&&(i[a]=l)}}else i=t;return!i||Mt(i)?void 0:i}function hF(e){const{parentProjection:t,projection:n}=e;return t&&n&&me(sye({parentProjection:t,projection:n})),n??t}function sk(e){return he(e,"filter")}function Sxe(e){return he(e,"stop")}function PH(e){return he(e,"lookup")}function Exe(e){return he(e,"data")}function _xe(e){return he(e,"param")}function wxe(e){return he(e,"pivot")}function Axe(e){return he(e,"density")}function Cxe(e){return he(e,"quantile")}function $xe(e){return he(e,"regression")}function Txe(e){return he(e,"loess")}function Mxe(e){return he(e,"sample")}function kxe(e){return he(e,"window")}function Oxe(e){return he(e,"joinaggregate")}function Nxe(e){return he(e,"flatten")}function Dxe(e){return he(e,"calculate")}function HH(e){return he(e,"bin")}function Rxe(e){return he(e,"impute")}function zxe(e){return he(e,"timeUnit")}function Fxe(e){return he(e,"aggregate")}function Lxe(e){return he(e,"stack")}function Uxe(e){return he(e,"fold")}function Bxe(e){return he(e,"extent")&&!he(e,"density")&&!he(e,"regression")}function jxe(e){return e.map(t=>sk(t)?{filter:jf(t.filter,dve)}:t)}class qxe extends ak{map(t,n){return n.emptySelections??={},n.selectionPredicates??={},t=gF(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=gF(t,n),t.encoding){const i={};for(const[r,a]of wl(t.encoding))i[r]=GH(a,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:wl(i).map(([a,s])=>{const{init:l,bind:c,empty:f,...d}=s;d.type==="single"?(d.type="point",d.toggle=!1):d.type==="multi"&&(d.type="point"),n.emptySelections[a]=f!=="none";for(const g of ln(n.selectionPredicates[a]??{}))g.empty=f!=="none";return{name:a,value:l,select:d,bind:c}})}:t}}function gF(e,t){const{transform:n,...i}=e;if(n){const r=n.map(a=>{if(sk(a))return{filter:GA(a,t)};if(HH(a)&&Sc(a.bin))return{...a,bin:YH(a.bin)};if(PH(a)){const{selection:s,...l}=a.from;return s?{...a,from:{param:s,...l}}:a}return a});return{...i,transform:r}}return e}function GH(e,t){const n=Be(e);if(pe(n)&&Sc(n.bin)&&(n.bin=YH(n.bin)),Ac(n)&&n.scale?.domain?.selection){const{selection:i,...r}=n.scale.domain;n.scale.domain={...r,...i?{param:i}:{}}}if(vm(n))if(se(n.condition))n.condition=n.condition.map(i=>{const{selection:r,param:a,test:s,...l}=i;return a?i:{...l,test:GA(i,t)}});else{const{selection:i,param:r,test:a,...s}=GH(n.condition,t);n.condition=r?n.condition:{...s,test:GA(n.condition,t)}}return n}function YH(e){const t=e.extent;if(t?.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function GA(e,t){const n=i=>jf(i,r=>{const a=t.emptySelections[r]??!0,s={param:r,empty:a};return t.selectionPredicates[r]??=[],t.selectionPredicates[r].push(s),s});return e.selection?n(e.selection):jf(e.test||e.filter,i=>i.selection?n(i.selection):i)}class YA extends ak{map(t,n){const i=n.selections??[];if(t.params&&!mo(t)){const r=[];for(const a of t.params)nk(a)?i.push(a):r.push(a);t.params=r}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),a=[];for(const s of i)if(!s.views||!s.views.length)a.push(s);else for(const l of s.views)(Se(l)&&(l===t.name||r.includes(l))||se(l)&&l.map(c=>r.indexOf(c)).every((c,f,d)=>c!==-1&&(f===0||c>d[f-1])))&&a.push(s);return a.length&&(t.params=a),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=YA.prototype[e];YA.prototype[e]=function(n,i){return t.call(this,n,Ixe(n,i))}}function Ixe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function XH(e,t){t===void 0&&(t=LH(e.config));const n=Yxe(e,t),{width:i,height:r}=e,a=Xxe(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...a?{autosize:a}:{}}}const Pxe=new xxe,Hxe=new qxe,Gxe=new YA;function Yxe(e,t={}){const n={config:t};return Gxe.map(Pxe.map(Hxe.map(e,n),n),n)}function pF(e){return Se(e)?{type:e}:e??{}}function Xxe(e,t,n){let{width:i,height:r}=t;const a=mo(e)||bx(e),s={};a?i=="container"&&r=="container"?(s.type="fit",s.contains="padding"):i=="container"?(s.type="fit-x",s.contains="padding"):r=="container"&&(s.type="fit-y",s.contains="padding"):(i=="container"&&(me(jz("width")),i=void 0),r=="container"&&(me(jz("height")),r=void 0));const l={type:"pad",...s,...n?pF(n.autosize):{},...pF(e.autosize)};if(l.type==="fit"&&!a&&(me(j1e),l.type="pad"),i=="container"&&!(l.type=="fit"||l.type=="fit-x")&&me(qz("width")),r=="container"&&!(l.type=="fit"||l.type=="fit-y")&&me(qz("height")),!ar(l,{type:"pad"}))return l}function Vxe(e){return["fit","fit-x","fit-y"].includes(e)}function Wxe(e){return e?`fit-${tx(e)}`:"fit"}const Qxe=["background","padding"];function mF(e,t){const n={};for(const i of Qxe)e&&e[i]!==void 0&&(n[i]=ir(e[i]));return t&&(n.params=e.params),n}class yo{explicit;implicit;constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new yo(Be(this.explicit),Be(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Kt(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of de(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function Ra(e){return{explicit:!0,value:e}}function er(e){return{explicit:!1,value:e}}function VH(e){return(t,n,i,r)=>{const a=e(t.value,n.value);return a>0?t:a<0?n:xx(t,n,i,r)}}function xx(e,t,n,i){return e.explicit&&t.explicit&&me(Mye(n,i,e.value,t.value)),e}function $l(e,t,n,i,r=xx){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:ar(e.value,t.value)?e:r(e,t,n,i)}class Zxe extends yo{explicit;implicit;parseNothing;constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function xd(e){return he(e,"url")}function Tp(e){return he(e,"values")}function WH(e){return he(e,"name")&&!xd(e)&&!Tp(e)&&!hl(e)}function hl(e){return e&&(QH(e)||ZH(e)||ok(e))}function QH(e){return he(e,"sequence")}function ZH(e){return he(e,"sphere")}function ok(e){return he(e,"graticule")}var qt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(qt||(qt={}));function KH({invalid:e,isPath:t}){switch(YP(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function Kxe(e){const{marks:t,scales:n}=KH(e);return t===n?qt.Main:n==="include-invalid-values"?qt.PreFilterInvalid:qt.PostFilterInvalid}class Et{debugName;_children=[];_parent=null;_hash;constructor(t,n){this.debugName=n,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){me(iye);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class zi extends Et{type;refCounts;_source;_name;clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${VI()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function x_(e){return e.as!==void 0}function yF(e){return`${e}_end`}class Ha extends Et{timeUnits;clone(){return new Ha(null,Be(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{const{field:l,timeUnit:c}=a;if(c){let f;if(wc(c)){if(jt(n)){const{mark:d,markDef:g,config:p}=n,y=Cl({fieldDef:a,markDef:g,config:p});($p(d)||y)&&(f={timeUnit:Cn(c),field:l})}}else f={as:xe(a,{forAs:!0}),field:l,timeUnit:c};if(jt(n)){const{mark:d,markDef:g,config:p}=n,y=Cl({fieldDef:a,markDef:g,config:p});$p(d)&&Jt(s)&&y!==.5&&(f.rectBandPosition=y)}f&&(r[tt(f)]=f)}return r},{});return Mt(i)?null:new Ha(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...r}={...n},a=Cn(i),s={...r,timeUnit:a};return new Ha(t,{[tt(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of wl(this.timeUnits)){const a=x_(r)?r.as:`${r.field}_end`;t.has(a)||(n[i]=r)}this.timeUnits=n}producedFields(){return new Set(ln(this.timeUnits).map(t=>x_(t)?t.as:yF(t.field)))}dependentFields(){return new Set(ln(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${tt(this.timeUnits)}`}assemble(){const t=[];for(const n of ln(this.timeUnits)){const{rectBandPosition:i}=n,r=Cn(n.timeUnit);if(x_(n)){const{field:a,as:s}=n,{unit:l,utc:c,...f}=r,d=[s,`${s}_end`];t.push({field:jr(a),type:"timeunit",...l?{units:ax(l)}:{},...c?{timezone:"utc"}:{},...f,as:d}),t.push(...vF(d,i,r))}else if(n){const{field:a}=n,s=YI(a),l=JH({timeUnit:r,field:s}),c=yF(s);t.push({type:"formula",expr:l,as:c}),t.push(...vF([s,c],i,r))}}return t}}const Sx="offsetted_rect_start",Ex="offsetted_rect_end";function JH({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,a=MP(i),{part:s,step:l}=DP(a,e.step);return`${r?"utcOffset":"timeOffset"}('${s}', ${xt(t)}, ${n?-l:l})`}function vF([e,t],n,i){if(n!==void 0&&n!==.5){const r=xt(e),a=xt(t);return[{type:"formula",expr:bF([JH({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${Sx}`},{type:"formula",expr:bF([r,a],n+.5),as:`${e}_${Ex}`}]}return[]}function bF([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const Em="_tuple_fields";class Jxe{hasChannel;hasField;hasSelectionId;timeUnit;items;constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const e2e={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??=new Jxe,a={},s={},l=new Set,c=(v,b)=>{const S=b==="visual"?v.channel:v.field;let _=Lt(`${i}_${S}`);for(let w=1;l.has(_);w++)_=Lt(`${i}_${S}_${w}`);return l.add(_),{[b]:_}},f=t.type,d=e.config.selection[f],g=n.value!==void 0?_e(n.value):null;let{fields:p,encodings:y}=Ee(n.select)?n.select:{};if(!p&&!y&&g){for(const v of g)if(Ee(v))for(const b of de(v))h1e(b)?(y||(y=[])).push(b):f==="interval"?(me(Q1e),y=d.encodings):(p??=[]).push(b)}!p&&!y&&(y=d.encodings,"fields"in d&&(p=d.fields));for(const v of y??[]){const b=e.fieldDef(v);if(b){let S=b.field;if(b.aggregate){me(q1e(v,b.aggregate));continue}else if(!S){me(Pz(v));continue}if(b.timeUnit&&!wc(b.timeUnit)){S=e.vgField(v);const _={timeUnit:b.timeUnit,as:S,field:b.field};s[tt(_)]=_}if(!a[S]){const _=f==="interval"&&hs(v)&&ha(e.getScaleComponent(v).get("type"))?"R":b.bin?"R-RE":"E",w={field:S,channel:v,type:_,index:r.items.length};w.signals={...c(w,"data"),...c(w,"visual")},r.items.push(a[S]=w),r.hasField[S]=a[S],r.hasSelectionId=r.hasSelectionId||S===ma,eP(v)?(w.geoChannel=v,w.channel=JI(v),r.hasChannel[w.channel]=a[S]):r.hasChannel[v]=a[S]}}else me(Pz(v))}for(const v of p??[]){if(r.hasField[v])continue;const b={type:"E",field:v,index:r.items.length};b.signals={...c(b,"data")},r.items.push(b),r.hasField[v]=b,r.hasSelectionId=r.hasSelectionId||v===ma}g&&(t.init=g.map(v=>r.items.map(b=>Ee(v)?v[b.geoChannel||b.channel]!==void 0?v[b.geoChannel||b.channel]:v[b.field]:v))),Mt(s)||(r.timeUnit=new Ha(null,s))},signals:(e,t,n)=>{const i=t.name+Em;return n.filter(a=>a.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(iG)})}},eG="_curr",J1="anim_value",$f="anim_clock",XA="eased_anim_clock",tG="min_extent",nG="max_range_extent",S_="last_tick_at",E_="is_playing",t2e=1/60*1e3,n2e=(e,t)=>[{name:XA,update:$f},{name:`${e}_domain`,init:`domain('${t}')`},{name:tG,init:`extent(${e}_domain)[0]`},{name:nG,init:`extent(range('${t}'))[1]`},{name:J1,update:`invert('${t}', ${XA})`}],i2e={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Ga(t)&&(n=n.concat([{name:$f,init:"0",on:[{events:{type:"timer",throttle:t2e},update:`${E_} ? (${$f} + (now() - ${S_}) > ${nG} ? 0 : ${$f} + (now() - ${S_})) : ${$f}`}]},{name:S_,init:"now()",on:[{events:[{signal:$f},{signal:E_}],update:"now()"}]},{name:E_,init:"true"}])),n),signals:(e,t,n)=>{const i=t.name,r=i+Em,a=t.project,s="(item().isVoronoi ? datum.datum : datum)",l=ln(e.component.selection??{}).reduce((d,g)=>g.type==="interval"?d.concat(g.name+Pf):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),c=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${l?` && ${l}`:""}`;let f=`unit: ${Bu(e)}, `;if(t.project.hasSelectionId)f+=`${ma}: ${s}[${ye(ma)}]`;else if(Ga(t))f+=`fields: ${r}, values: [${J1} ? ${J1} : ${tG}]`;else{const d=a.items.map(g=>e.fieldDef(g.channel)?.bin?`[${s}[${ye(e.vgField(g.channel,{}))}], ${s}[${ye(e.vgField(g.channel,{binSuffix:"end"}))}]]`:`${s}[${ye(g.field)}]`).join(", ");f+=`fields: ${r}, values: [${d}]`}if(Ga(t))return n.concat(n2e(t.name,e.scaleName(Ll)),[{name:i+oo,on:[{events:[{signal:XA},{signal:J1}],update:`{${f}}`,force:!0}]}]);{const d=t.events;return n.concat([{name:i+oo,on:d?[{events:d,update:`${c} ? {${f}} : null`,force:!0}]:[]}])}}};function iG(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=jr(r.field),r}function oc(e,t=!0,n=ii){if(se(e)){const i=e.map(r=>oc(r,t,n));return t?`[${i.join(", ")}]`:i}else if(_c(e))return n(t?ic(e):eve(e));return t?n(yt(e)):e}function r2e(e,t){for(const n of ln(e.component.selection??{})){const i=n.name;let r=`${i}${oo}, ${n.resolve==="global"?"true":`{unit: ${Bu(e)}}`}`;for(const a of _x)a.defined(n)&&(a.signals&&(t=a.signals(e,n,t)),a.modifyExpr&&(r=a.modifyExpr(e,n,r)));t.push({name:i+O2e,on:[{events:{signal:n.name+oo},update:`modify(${ye(n.name+lc)}, ${r})`}]})}return lk(t)}function a2e(e,t){if(e.component.selection&&de(e.component.selection).length){const n=ye(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:zl("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return lk(t)}function s2e(e,t){let n=!1;for(const i of ln(e.component.selection??{})){const r=i.name,a=ye(r+lc);if(t.filter(l=>l.name===r).length===0){const l=i.resolve==="global"?"union":i.resolve,c=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${SG}(${a}, ${ye(l)}${c}`})}n=!0;for(const l of _x)l.defined(i)&&l.topLevelSignals&&(t=l.topLevelSignals(e,i,t))}return n&&t.filter(r=>r.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),lk(t)}function o2e(e,t){const n=[],i=[],r=Bu(e,{escape:!1});for(const a of ln(e.component.selection??{})){const s={name:a.name+lc};if(a.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:ma}}]),a.init){const c=a.project.items.map(iG);s.values=a.project.hasSelectionId?a.init.map(f=>({unit:r,[ma]:oc(f,!1)[0]})):a.init.map(f=>({unit:r,fields:c,values:oc(f,!1)}))}if([...n,...t].filter(c=>c.name===a.name+lc).length||n.push(s),Ga(a)&&t.length){const c=e.lookupDataSource(e.getDataName(qt.Main)),f=t.find(g=>g.name===c),d=f.transform.find(g=>g.type==="filter"&&g.expr.includes("vlSelectionTest"));if(d){f.transform=f.transform.filter(p=>p!==d);const g={name:f.name+eG,source:f.name,transform:[d]};i.push(g)}}}return n.concat(t,i)}function rG(e,t){for(const n of ln(e.component.selection??{}))for(const i of _x)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function l2e(e,t){for(const n of e.children)jt(n)&&(t=rG(n,t));return t}function u2e(e,t,n,i){const r=CG(e,t.param,t);return{signal:ha(n.get("type"))&&se(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function lk(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const eo={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!hs(r))continue;const a=e.getScaleComponent(r),s=a?a.get("type"):void 0;if(s=="sequential"&&me(G1e),!a||!ha(s)){me(H1e);continue}a.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(s=>n.filter(l=>l.name===s.signals.data).length===0);if(!e.parent||WA(e)||i.length===0)return n;const r=n.find(s=>s.name===t.name);let a=r.update;if(a.includes(SG))r.update=`{${i.map(s=>`${ye(jr(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of i){const l=`${ye(jr(s.field))}: ${s.signals.data}`;a.includes(l)||(a=`${a.substring(0,a.length-1)}, ${l}}`)}r.update=a}return n.concat(i.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!WA(e))for(const i of t.scales){const r=n.find(a=>a.name===i.signals.data);r.push="outer",delete r.value,delete r.update}return n}};function VA(e,t){return`domain(${ye(e.scaleName(t))})`}function WA(e){return e.parent&&Zd(e.parent)&&(!e.parent.parent||WA(e.parent.parent))}const Pf="_brush",aG="_scale_trigger",gg="geo_interval_init_tick",sG="_init",c2e="_center",f2e={defined:e=>e.type==="interval",parse:(e,t,n)=>{if(e.hasProjection){const i={...Ee(n.select)?n.select:{}};i.fields=[ma],i.encodings||(i.encodings=n.value?de(n.value):[_a,Ea]),n.select={type:"interval",...i}}if(t.translate&&!eo.defined(t)){const i=`!event.item || event.item.mark.name !== ${ye(t.name+Pf)}`;for(const r of t.events){if(!r.between){me(`${r} is not an ordered event stream for interval selections.`);continue}const a=_e(r.between[0].filter??=[]);a.includes(i)||a.push(i)}}},signals:(e,t,n)=>{const i=t.name,r=i+oo,a=ln(t.project.hasChannel).filter(l=>l.channel===Ut||l.channel===Mn),s=t.init?t.init[0]:null;if(n.push(...a.reduce((l,c)=>l.concat(d2e(e,t,c,s?.[c.index])),[])),e.hasProjection){const l=ye(e.projectionName()),c=e.projectionName()+c2e,{x:f,y:d}=t.project.hasChannel,g=f?.signals.visual,p=d?.signals.visual,y=f?s?.[f.index]:`${c}[0]`,v=d?s?.[d.index]:`${c}[1]`,b=M=>e.getSizeSignalRef(M).signal,S=`[[${g?`${g}[0]`:"0"}, ${p?`${p}[0]`:"0"}],[${g?`${g}[1]`:b("width")}, ${p?`${p}[1]`:b("height")}]]`;s&&(n.unshift({name:i+sG,init:`[scale(${l}, [${f?y[0]:y}, ${d?v[0]:v}]), scale(${l}, [${f?y[1]:y}, ${d?v[1]:v}])]`}),(!f||!d)&&(n.find(k=>k.name===c)||n.unshift({name:c,update:`invert(${l}, [${b("width")}/2, ${b("height")}/2])`})));const _=`intersect(${S}, {markname: ${ye(e.getName("marks"))}}, unit.mark)`,w=`{unit: ${Bu(e)}}`,A=`vlSelectionTuples(${_}, ${w})`,$=a.map(M=>M.signals.visual);return n.concat({name:r,on:[{events:[...$.length?[{signal:$.join(" || ")}]:[],...s?[{signal:gg}]:[]],update:A}]})}else{if(!eo.defined(t)){const f=i+aG,d=a.map(g=>{const p=g.channel,{data:y,visual:v}=g.signals,b=ye(e.scaleName(p)),S=e.getScaleComponent(p).get("type"),_=ha(S)?"+":"";return`(!isArray(${y}) || (${_}invert(${b}, ${v})[0] === ${_}${y}[0] && ${_}invert(${b}, ${v})[1] === ${_}${y}[1]))`});d.length&&n.push({name:f,value:{},on:[{events:a.map(g=>({scale:e.scaleName(g.channel)})),update:`${d.join(" && ")} ? ${f} : {}`}]})}const l=a.map(f=>f.signals.data),c=`unit: ${Bu(e)}, fields: ${i+Em}, values`;return n.concat({name:r,...s?{init:`{${c}: ${oc(s)}}`}:{},...l.length?{on:[{events:[{signal:l.join(" || ")}],update:`${l.join(" && ")} ? {${c}: [${l}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(jt(e)&&e.hasProjection&&t.init&&(n.filter(r=>r.name===gg).length||n.unshift({name:gg,value:null,on:[{events:"timer{1}",update:`${gg} === null ? {} : ${gg}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:r,y:a}=t.project.hasChannel,s=r?.signals.visual,l=a?.signals.visual,c=`data(${ye(t.name+lc)})`;if(eo.defined(t)||!r&&!a)return n;const f={x:r!==void 0?{signal:`${s}[0]`}:{value:0},y:a!==void 0?{signal:`${l}[0]`}:{value:0},x2:r!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:a!==void 0?{signal:`${l}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const S of de(f))f[S]=[{test:`${c}.length && ${c}[0].unit === ${Bu(e)}`,...f[S]},{value:0}];const{fill:d,fillOpacity:g,cursor:p,...y}=t.mark,v=de(y).reduce((S,_)=>(S[_]=[{test:[r!==void 0&&`${s}[0] !== ${s}[1]`,a!==void 0&&`${l}[0] !== ${l}[1]`].filter(w=>w).join(" && "),value:y[_]},{value:null}],S),{}),b=p??(t.translate?"move":null);return[{name:`${i+Pf}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:g}},update:f}},...n,{name:i+Pf,type:"rect",clip:!0,encode:{enter:{...b?{cursor:{value:b}}:{},fill:{value:"transparent"}},update:{...f,...v}}}]}};function d2e(e,t,n,i){const r=!e.hasProjection,a=n.channel,s=n.signals.visual,l=ye(r?e.scaleName(a):e.projectionName()),c=p=>`scale(${l}, ${p})`,f=e.getSizeSignalRef(a===Ut?"width":"height").signal,d=`${a}(unit)`,g=t.events.reduce((p,y)=>[...p,{events:y.between[0],update:`[${d}, ${d}]`},{events:y,update:`[${s}[0], clamp(${d}, 0, ${f})]`}],[]);if(r){const p=n.signals.data,y=eo.defined(t),v=e.getScaleComponent(a),b=v?v.get("type"):void 0,S=i?{init:oc(i,!0,c)}:{value:[]};return g.push({events:{signal:t.name+aG},update:ha(b)?`[${c(`${p}[0]`)}, ${c(`${p}[1]`)}]`:"[0, 0]"}),y?[{name:p,on:[]}]:[{name:s,...S,on:g},{name:p,...i?{init:oc(i)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${l}, ${s})`}]}]}else{const p=a===Ut?0:1,y=t.name+sG,v=i?{init:`[${y}[0][${p}], ${y}[1][${p}]]`}:{value:[]};return[{name:s,...v,on:g}]}}function Xd({model:e,channelDef:t,vgChannel:n,invalidValueRef:i,mainRefFn:r}){const a=vm(t)&&t.condition;let s=[];a&&(s=_e(a).map(f=>{const d=r(f);if(Jve(f)){const{param:g,empty:p}=f;return{test:AG(e,{param:g,empty:p}),...d}}else return{test:Tv(e,f.test),...d}})),i!==void 0&&s.push(i);const l=r(t);return l!==void 0&&s.push(l),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function uk(e,t="text"){const n=e.encoding[t];return Xd({model:e,channelDef:n,vgChannel:t,mainRefFn:i=>ck(i,e.config),invalidValueRef:void 0})}function ck(e,t,n="datum"){if(e){if(ga(e))return Rt(e.value);if(qe(e)){const{format:i,formatType:r}=Ev(e);return PM({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function oG(e,t={}){const{encoding:n,markDef:i,config:r,stack:a}=e,s=n.tooltip;if(se(s))return{tooltip:xF({tooltip:s},a,r,t)};{const l=t.reactiveGeom?"datum.datum":"datum";return Xd({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:f=>{const d=uG(f,r,l);if(d)return d;if(f===null)return;let g=mt("tooltip",i,r);if(g===!0&&(g={content:"encoding"}),Se(g))return{value:g};if(Ee(g))return Me(g)?g:g.content==="encoding"?xF(n,a,r,t):{signal:l}},invalidValueRef:void 0})}}function lG(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},a=new Set,s=i?"datum.datum":"datum",l=[];function c(d,g){const p=xc(g),y=xi(d)?d:{...d,type:e[p].type},v=y.title||XM(y,r),b=_e(v).join(", ").replaceAll(/"/g,'\\"');let S;if(Jt(g)){const _=g==="x"?"x2":"y2",w=pa(e[_]);if(zn(y.bin)&&w){const A=xe(y,{expr:s}),$=xe(w,{expr:s}),{format:M,formatType:k}=Ev(y);S=mm(A,$,M,k,r),a.add(_)}}if((Jt(g)||g===Pr||g===Sa)&&t&&t.fieldChannel===g&&t.offset==="normalize"){const{format:_,formatType:w}=Ev(y);S=PM({fieldOrDatumDef:y,format:_,formatType:w,expr:s,config:r,normalizeStack:!0}).signal}S??=uG(y,r,s).signal,l.push({channel:g,key:b,value:S})}WM(e,(d,g)=>{pe(d)?c(d,g):hx(d)&&c(d.condition,g)});const f={};for(const{channel:d,key:g,value:p}of l)!a.has(d)&&!f[g]&&(f[g]=p);return f}function xF(e,t,n,{reactiveGeom:i}={}){const r=lG(e,t,n,{reactiveGeom:i}),a=wl(r).map(([s,l])=>`"${s}": ${l}`);return a.length>0?{signal:`{${a.join(", ")}}`}:void 0}function uG(e,t,n="datum"){if(pe(e)&&DM(e.type)&&!he(e,"format")){const i=`datum["${e.field}"]`;return{signal:`isValid(${i}) ? isArray(${i}) ? join(${i}, '\\n') : ${i} : ""+${i}`}}return ck(e,t,n)}function h2e(e){const{markDef:t,config:n}=e,i=mt("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...g2e(e),...p2e(e)}}function g2e(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=mt("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:we(F1e,t)?{}:{ariaRoleDescription:{value:t}}}function p2e(e){const{encoding:t,markDef:n,config:i,stack:r}=e,a=t.description;if(a)return Xd({model:e,channelDef:a,vgChannel:"description",mainRefFn:c=>ck(c,e.config),invalidValueRef:void 0});const s=mt("description",n,i);if(s!=null)return{description:Rt(s)};if(i.aria===!1)return{};const l=lG(t,r,i);if(!Mt(l))return{description:{signal:wl(l).filter(([c])=>!c.startsWith("_")).map(([c,f])=>[c,f.replaceAll("\\n"," ")]).map(([c,f],d)=>`"${d>0?"; ":""}${c}: " + (${f})`).join(" + ")}}}function Un(e,t,n={}){const{markDef:i,encoding:r,config:a}=t,{vgChannel:s}=n;let{defaultRef:l,defaultValue:c}=n;const f=r[e];l===void 0&&(c??=mt(e,i,a,{vgChannel:s,ignoreVgConfig:!vm(f)}),c!==void 0&&(l=Rt(c)));const d={markDef:i,config:a,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},g=VP({...d,scaleChannel:e,channelDef:f});return Xd({model:t,channelDef:f,vgChannel:s??e,invalidValueRef:g,mainRefFn:y=>IM({...d,channel:e,channelDef:y,stack:null,defaultRef:l})})}function cG(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:a}=n,s=t.filled??mt("filled",n,r),l=We(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,c=mt(s===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[s===!0&&"color"]??l,f=mt(s===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[s===!1&&"color"],d=s?"fill":"stroke",g={...c?{fill:Rt(c)}:{},...f?{stroke:Rt(f)}:{}};return n.color&&(s?n.fill:n.stroke)&&me(xP("property",{fill:"fill"in n,stroke:"stroke"in n})),{...g,...Un("color",e,{vgChannel:d,defaultValue:s?c:f}),...Un("fill",e,{defaultValue:i.fill?c:void 0}),...Un("stroke",e,{defaultValue:i.stroke?f:void 0})}}function m2e(e){const{encoding:t,mark:n}=e,i=t.order;return!Pl(n)&&ga(i)?Xd({model:e,channelDef:i,vgChannel:"zindex",mainRefFn:r=>Rt(r.value),invalidValueRef:void 0}):{}}function Sd({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const a=`${e}Offset`,s=t[a],l=n[a];if((a==="xOffset"||a==="yOffset")&&l)return{offsetType:"encoding",offset:IM({channel:a,channelDef:l,markDef:t,config:i?.config,scaleName:i.scaleName(a),scale:i.getScaleComponent(a),stack:null,defaultRef:Rt(s),bandPosition:r})};const c=t[a];return c?{offsetType:"visual",offset:c}:{}}function pi(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:a,config:s,stack:l}=t,c=r[e],f=r[ds(e)],d=t.scaleName(e),g=t.getScaleComponent(e),{offset:p,offsetType:y}=Sd({channel:e,markDef:a,encoding:r,model:t,bandPosition:.5}),v=fk({model:t,defaultPos:n,channel:e,scaleName:d,scale:g}),b=!c&&Jt(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:y2e({channel:e,channelDef:c,channel2Def:f,markDef:a,config:s,scaleName:d,scale:g,stack:l,offset:p,defaultRef:v,bandPosition:y==="encoding"?0:void 0});return b?{[i||e]:b}:void 0}function y2e(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:a,markDef:s}=e;if(qe(n)&&r&&t===r.fieldChannel){if(pe(n)){let l=n.bandPosition;if(l===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(l=.5),l!==void 0)return bv({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:l,offset:a})}return Lu(n,i,{suffix:"end"},{offset:a})}return qM(e)}function fk({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:a,config:s}=e;return()=>{const l=xc(n),c=Al(n),f=mt(n,a,s,{vgChannel:c});if(f!==void 0)return ep(n,f);switch(t){case"zeroOrMin":return SF({scaleName:i,scale:r,mode:"zeroOrMin",mainChannel:l,config:s});case"zeroOrMax":return SF({scaleName:i,scale:r,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:l,config:s});case"mid":return{...e[qi(n)],mult:.5}}}}function SF({mainChannel:e,config:t,...n}){const i=XP(n),{mode:r}=n;if(i)return i;switch(e){case"radius":{if(r==="zeroOrMin")return{value:0};const{widthSignal:a,heightSignal:s}=r.zeroOrMax;return{signal:`min(${a},${s})/2`}}case"theta":return r==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return r==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return r==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const v2e={left:"x",center:"xc",right:"x2"},b2e={top:"y",middle:"yc",bottom:"y2"};function fG(e,t,n,i="middle"){if(e==="radius"||e==="theta")return Al(e);const r=e==="x"?"align":"baseline",a=mt(r,t,n);let s;return Me(a)?(me(vye(r)),s=void 0):s=a,e==="x"?v2e[s||(i==="top"?"left":"center")]:b2e[s||i]}function Cv(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?dG(e,t,{defaultPos:n,defaultPos2:i}):pi(e,t,{defaultPos:n})}function dG(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:a}=t,s=ds(e),l=qi(e),c=x2e(t,i,s),f=c[l]?fG(e,r,a):Al(e);return{...pi(e,t,{defaultPos:n,vgChannel:f}),...c}}function x2e(e,t,n){const{encoding:i,mark:r,markDef:a,stack:s,config:l}=e,c=xc(n),f=qi(n),d=Al(n),g=i[c],p=e.scaleName(c),y=e.getScaleComponent(c),{offset:v}=n in i||n in a?Sd({channel:n,markDef:a,encoding:i,model:e}):Sd({channel:c,markDef:a,encoding:i,model:e});if(!g&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const S=qi(n),_=e.markDef[S];return _!=null?{[S]:{value:_}}:{[d]:{field:e.getName(n)}}}const b=S2e({channel:n,channelDef:g,channel2Def:i[n],markDef:a,config:l,scaleName:p,scale:y,stack:s,offset:v,defaultRef:void 0});return b!==void 0?{[d]:b}:v1(n,a)||v1(n,{[n]:FA(n,a,l.style),[f]:FA(f,a,l.style)})||v1(n,l[r])||v1(n,l.mark)||{[d]:fk({model:e,defaultPos:t,channel:n,scaleName:p,scale:y})()}}function S2e({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:l,offset:c,defaultRef:f}){return qe(t)&&l&&e.charAt(0)===l.fieldChannel.charAt(0)?Lu(t,a,{suffix:"start"},{offset:c}):qM({channel:e,channelDef:n,scaleName:a,scale:s,stack:l,markDef:i,config:r,offset:c,defaultRef:f})}function v1(e,t){const n=qi(e),i=Al(e);if(t[i]!==void 0)return{[i]:ep(e,t[i])};if(t[e]!==void 0)return{[i]:ep(e,t[e])};if(t[n]){const r=t[n];if(ac(r))me(dye(n));else return{[n]:ep(e,r)}}}function so(e,t){const{config:n,encoding:i,markDef:r}=e,a=r.type,s=ds(t),l=qi(t),c=i[t],f=i[s],d=e.getScaleComponent(t),g=d?d.get("type"):void 0,p=r.orient,y=i[l]??i.size??mt("size",r,n,{vgChannel:l}),v=rP(t),b=a==="bar"&&(t==="x"?p==="vertical":p==="horizontal")||a==="tick"&&(t==="y"?p==="vertical":p==="horizontal");return pe(c)&&(kt(c.bin)||zn(c.bin)||c.timeUnit&&!f)&&!(y&&!ac(y))&&!i[v]&&!$n(g)?w2e({fieldDef:c,fieldDef2:f,channel:t,model:e}):(qe(c)&&$n(g)||b)&&!f?_2e(c,t,e):dG(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function E2e(e,t,n,i,r,a,s){if(ac(r))if(n){const c=n.get("type");if(c==="band"){let f=`bandwidth('${t}')`;r.band!==1&&(f=`${r.band} * ${f}`);const d=Ja("minBandSize",{type:s},i);return{signal:d?`max(${sa(d)}, ${f})`:f}}else r.band!==1&&(me(Eye(c)),r=void 0)}else return{mult:r.band,field:{group:e}};else{if(Me(r))return r;if(r)return{value:r}}if(n){const c=n.get("range");if(Ec(c)&&ut(c.step))return{value:c.step-2}}if(!a){const{bandPaddingInner:c,barBandPaddingInner:f,rectBandPaddingInner:d,tickBandPaddingInner:g}=i.scale,p=Kt(c,s==="tick"?g:s==="bar"?f:d);if(Me(p))return{signal:`(1 - (${p.signal})) * ${e}`};if(ut(p))return{signal:`${1-p} * ${e}`}}return{value:PA(i.view,e)-2}}function _2e(e,t,n){const{markDef:i,encoding:r,config:a,stack:s}=n,l=i.orient,c=n.scaleName(t),f=n.getScaleComponent(t),d=qi(t),g=ds(t),p=rP(t),y=n.scaleName(p),v=n.getScaleComponent(hM(t)),b=i.type==="tick"||l==="horizontal"&&t==="y"||l==="vertical"&&t==="x";let S;(r.size||i.size)&&(b?S=Un("size",n,{vgChannel:d,defaultRef:Rt(i.size)}):me(Cye(i.type)));const _=!!S,w=tH({channel:t,fieldDef:e,markDef:i,config:a,scaleType:(f||v)?.get("type"),useVlSizeChannel:b});S=S||{[d]:E2e(d,y||c,v||f,a,w,!!e,i.type)};const A=(f||v)?.get("type")==="band"&&ac(w)&&!_?"top":"middle",$=fG(t,i,a,A),M=$==="xc"||$==="yc",{offset:k,offsetType:T}=Sd({channel:t,markDef:i,encoding:r,model:n,bandPosition:M?.5:0}),D=qM({channel:t,channelDef:e,markDef:i,config:a,scaleName:c,scale:f,stack:s,offset:k,defaultRef:fk({model:n,defaultPos:"mid",channel:t,scaleName:c,scale:f}),bandPosition:M?T==="encoding"?0:.5:Me(w)?{signal:`(1-${w})/2`}:ac(w)?(1-w.band)/2:0});if(d)return{[$]:D,...S};{const R=Al(g),B=S[d],U=k?{...B,offset:k}:B;return{[$]:D,[R]:se(D)?[D[0],{...D[1],offset:U}]:{...D,offset:U}}}}function EF(e,t,n,i,r,a,s){if(KI(e))return 0;const l=e==="x"||e==="y2",c=l?-t/2:t/2;if(Me(n)||Me(r)||Me(i)||a){const f=sa(n),d=sa(r),g=sa(i),p=sa(a),v=a?`(${s} < ${p} ? ${l?"":"-"}0.5 * (${p} - (${s})) : ${c})`:c,b=g?`${g} + `:"",S=f?`(${f} ? -1 : 1) * `:"",_=d?`(${d} + ${v})`:v;return{signal:b+S+_}}else return r=r||0,i+(n?-r-c:+r+c)}function w2e({fieldDef:e,fieldDef2:t,channel:n,model:i}){const{config:r,markDef:a,encoding:s}=i,l=i.getScaleComponent(n),c=i.scaleName(n),f=l?l.get("type"):void 0,d=l.get("reverse"),g=tH({channel:n,fieldDef:e,markDef:a,config:r,scaleType:f}),y=i.component.axes[n]?.[0]?.get("translate")??.5,v=Jt(n)?mt("binSpacing",a,r)??0:0,b=ds(n),S=Al(n),_=Al(b),w=Ja("minBandSize",a,r),{offset:A}=Sd({channel:n,markDef:a,encoding:s,model:i,bandPosition:0}),{offset:$}=Sd({channel:b,markDef:a,encoding:s,model:i,bandPosition:0}),M=Vve({fieldDef:e,scaleName:c}),k=EF(n,v,d,y,A,w,M),T=EF(b,v,d,y,$??A,w,M),D=Me(g)?{signal:`(1-${g.signal})/2`}:ac(g)?(1-g.band)/2:.5,R=Cl({fieldDef:e,fieldDef2:t,markDef:a,config:r});if(kt(e.bin)||e.timeUnit){const B=e.timeUnit&&R!==.5;return{[_]:_F({fieldDef:e,scaleName:c,bandPosition:D,offset:T,useRectOffsetField:B}),[S]:_F({fieldDef:e,scaleName:c,bandPosition:Me(D)?{signal:`1-${D.signal}`}:1-D,offset:k,useRectOffsetField:B})}}else if(zn(e.bin)){const B=Lu(e,c,{},{offset:T});if(pe(t))return{[_]:B,[S]:Lu(t,c,{},{offset:k})};if(Sc(e.bin)&&e.bin.step)return{[_]:B,[S]:{signal:`scale("${c}", ${xe(e,{expr:"datum"})} + ${e.bin.step})`,offset:k}}}me(_P(b))}function _F({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return bv({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:Sx,endSuffix:Ex}:{}})}const A2e=new Set(["aria","width","height"]);function Hr(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?cG(e):{};return{...C2e(e.markDef,t),...wF("fill",n),...wF("stroke",i),...Un("opacity",e),...Un("fillOpacity",e),...Un("strokeOpacity",e),...Un("strokeWidth",e),...Un("strokeDash",e),...m2e(e),...oG(e),...uk(e,"href"),...h2e(e)}}function wF(e,t){return t?{[e]:t}:{}}function C2e(e,t){return z1e.reduce((n,i)=>(!A2e.has(i)&&he(e,i)&&t[i]!=="ignore"&&(n[i]=Rt(e[i])),n),{})}function dk(e){const{config:t,markDef:n}=e,i=new Set;if(e.forEachFieldDef((r,a)=>{let s;if(!hs(a)||!(s=e.getScaleType(a)))return;const l=nx(r.aggregate),c=jM({scaleChannel:a,markDef:n,config:t,scaleType:s,isCountAggregate:l});if(Gve(c)){const f=e.vgField(a,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});f&&i.add(f)}}),i.size>0)return{defined:{signal:[...i].map(a=>sx(a,!0)).join(" && ")}}}function AF(e,t){if(t!==void 0)return{[e]:Rt(t)}}const __="voronoi",hG={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(__)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,a=e.mark;if(Pl(a))return me(I1e(a)),n;const s={name:e.getName(__),type:"path",interactive:!0,aria:!1,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...oG(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let l=0,c=!1;return n.forEach((f,d)=>{const g=f.name??"";g===e.component.mark[0].name?l=d:g.includes(__)&&(c=!0)}),c||n.splice(l+1,0,s),n}},gG={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!tk(e.bind),parse:(e,t,n)=>EG(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,a=t.bind,s=t.init?.[0],l=hG.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((c,f)=>{const d=Lt(`${i}_${c.field}`);n.filter(p=>p.name===d).length||n.unshift({name:d,...s?{init:oc(s[f])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${l}[${ye(c.field)}] : null`}]:[],bind:a[c.field]??a[c.channel]??a})}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(f=>f.name===i+oo),s=i+Em,l=r.items.map(f=>Lt(`${i}_${f.field}`)),c=l.map(f=>`${f} !== null`).join(" && ");return l.length&&(a.update=`${c} ? {fields: ${s}, values: [${l.join(", ")}]} : null`),delete a.value,delete a.on,n}},$v="_toggle",pG={defined:e=>e.type==="point"&&!Ga(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+$v,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+oo,i=t.name+$v;return`${i} ? null : ${n}, ${t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${Bu(e)}}, `}${i} ? ${n} : null`}},$2e={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Ga(e),parse:(e,t)=>{t.clear&&(t.clear=Se(t.clear)?zl(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(gG.defined(t))for(const i of t.project.items){const r=n.findIndex(a=>a.name===Lt(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,a){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:a})}if(t.type==="interval")for(const r of t.project.items){const a=n.findIndex(s=>s.name===r.signals.visual);if(i(a,"[0, 0]"),a===-1){const s=n.findIndex(l=>l.name===r.signals.data);i(s,"null")}}else{let r=n.findIndex(a=>a.name===t.name+oo);i(r,"null"),pG.defined(t)&&(r=n.findIndex(a=>a.name===t.name+$v),i(r,"false"))}return n}},mG={defined:e=>{const t=e.resolve==="global"&&e.bind&&tk(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==ma;return t&&!n&&me(Y1e),t&&n},parse:(e,t,n)=>{const i=Be(n);if(i.select=Se(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},EG(t,i),Ee(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const l of t.events)l.filter=_e(l.filter??[]),l.filter.includes(s)||l.filter.push(s)}const r=y_(t.bind)?t.bind.legend:"click",a=Se(r)?zl(r,"view"):_e(r);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=y_(t.bind)&&t.bind.legend,a=s=>l=>{const c=Be(l);return c.markname=s,c};for(const s of t.project.items){if(!s.hasLegend)continue;const l=`${Lt(s.field)}_legend`,c=`${i}_${l}`;if(n.filter(d=>d.name===c).length===0){const d=r.merge.map(a(`${l}_symbols`)).concat(r.merge.map(a(`${l}_labels`))).concat(r.merge.map(a(`${l}_entries`)));n.unshift({name:c,...t.init?{}:{value:null},on:[{events:d,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${c}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(p=>p.name===i+oo),s=i+Em,l=r.items.filter(p=>p.hasLegend).map(p=>Lt(`${i}_${Lt(p.field)}_legend`)),f=`${l.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${s}, values: [${l.join(", ")}]} : null`;t.events&&l.length>0?a.on.push({events:l.map(p=>({signal:p})),update:f}):l.length>0&&(a.update=f,delete a.value,delete a.on);const d=n.find(p=>p.name===i+$v),g=y_(t.bind)&&t.bind.legend;return d&&(t.events?d.on.push({...d.on[0],events:g}):d.on[0].events=g),n}};function T2e(e,t,n){const i=e.fieldDef(t)?.field;for(const r of ln(e.component.selection??{})){const a=r.project.hasField[i]??r.project.hasChannel[t];if(a&&mG.defined(r)){const s=n.get("selections")??[];s.push(r.name),n.set("selections",s,!1),a.hasLegend=!0}}}const yG="_translate_anchor",vG="_translate_delta",M2e={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=eo.defined(t),a=i+yG,{x:s,y:l}=t.project.hasChannel;let c=zl(t.translate,"scope");return r||(c=c.map(f=>(f.between[0].markname=i+Pf,f))),n.push({name:a,value:{},on:[{events:c.map(f=>f.between[0]),update:`{x: x(unit), y: y(unit)${s!==void 0?`, extent_x: ${r?VA(e,Ut):`slice(${s.signals.visual})`}`:""}${l!==void 0?`, extent_y: ${r?VA(e,Mn):`slice(${l.signals.visual})`}`:""}}`}]},{name:i+vG,value:{},on:[{events:c,update:`{x: ${a}.x - x(unit), y: ${a}.y - y(unit)}`}]}),s!==void 0&&CF(e,t,s,"width",n),l!==void 0&&CF(e,t,l,"height",n),n}};function CF(e,t,n,i,r){const a=t.name,s=a+yG,l=a+vG,c=n.channel,f=eo.defined(t),d=r.find(M=>M.name===n.signals[f?"data":"visual"]),g=e.getSizeSignalRef(i).signal,p=e.getScaleComponent(c),y=p?.get("type"),v=p?.get("reverse"),b=f?c===Ut?v?"":"-":v?"-":"":"",S=`${s}.extent_${c}`,_=`${b}${l}.${c} / ${f?`${g}`:`span(${S})`}`,w=!f||!p?"panLinear":y==="log"?"panLog":y==="symlog"?"panSymlog":y==="pow"?"panPow":"panLinear",A=f?y==="pow"?`, ${p.get("exponent")??1}`:y==="symlog"?`, ${p.get("constant")??1}`:"":"",$=`${w}(${S}, ${_}${A})`;d.on.push({events:{signal:l},update:f?$:`clampRange(${$}, 0, ${g})`})}const bG="_zoom_anchor",xG="_zoom_delta",k2e={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=eo.defined(t),a=i+xG,{x:s,y:l}=t.project.hasChannel,c=ye(e.scaleName(Ut)),f=ye(e.scaleName(Mn));let d=zl(t.zoom,"scope");return r||(d=d.map(g=>(g.markname=i+Pf,g))),n.push({name:i+bG,on:[{events:d,update:r?`{${[c?`x: invert(${c}, x(unit))`:"",f?`y: invert(${f}, y(unit))`:""].filter(g=>g).join(", ")}}`:"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:d,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&$F(e,t,s,"width",n),l!==void 0&&$F(e,t,l,"height",n),n}};function $F(e,t,n,i,r){const a=t.name,s=n.channel,l=eo.defined(t),c=r.find(w=>w.name===n.signals[l?"data":"visual"]),f=e.getSizeSignalRef(i).signal,d=e.getScaleComponent(s),g=d?.get("type"),p=l?VA(e,s):c.name,y=a+xG,v=`${a}${bG}.${s}`,b=!l||!d?"zoomLinear":g==="log"?"zoomLog":g==="symlog"?"zoomSymlog":g==="pow"?"zoomPow":"zoomLinear",S=l?g==="pow"?`, ${d.get("exponent")??1}`:g==="symlog"?`, ${d.get("constant")??1}`:"":"",_=`${b}(${p}, ${v}, ${y}${S})`;c.on.push({events:{signal:y},update:l?_:`clampRange(${_}, 0, ${f})`})}const lc="_store",oo="_tuple",O2e="_modify",SG="vlSelectionResolve",_x=[i2e,f2e,e2e,pG,gG,eo,mG,$2e,M2e,k2e,hG];function N2e(e){let t=e.parent;for(;t&&!cr(t);)t=t.parent;return t}function Bu(e,{escape:t}={escape:!0}){let n=t?ye(e.name):e.name;const i=N2e(e);if(i){const{facet:r}=i;for(const a of Nr)r[a]&&(n+=` + '__facet_${a}_' + (facet[${ye(i.vgField(a))}])`)}return n}function hk(e){return ln(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function EG(e,t){(Se(t.select)||!t.select.on)&&delete e.events,(Se(t.select)||!t.select.clear)&&delete e.clear,(Se(t.select)||!t.select.toggle)&&delete e.toggle}function Ga(e){return e.events?.find(t=>"type"in t&&t.type==="timer")}function QA(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...QA(e.object)),t.push(...QA(e.property))),t)}function _G(e){return e.object.type==="MemberExpression"?_G(e.object):e.object.name==="datum"}function wG(e){const t=kT(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&_G(i)&&n.add(QA(i).slice(1).join("."))}),n}class Vd extends Et{model;filter;expr;_dependentFields;clone(){return new Vd(null,this.model,Be(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=Tv(this.model,this.filter,this),this._dependentFields=wG(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function D2e(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;let r=0;for(const a of t){const s=Lt(a.name),l=a.select,c=Se(l)?l:l.type,f=Ee(l)?Be(l):{type:c},d=i[c];for(const y in d)y==="fields"||y==="encodings"||(y==="mark"&&(f.mark={...d.mark,...f.mark}),(f[y]===void 0||f[y]===!0)&&(f[y]=Be(d[y]??f[y])));const g=n[s]={...f,name:s,type:c,init:a.value,bind:a.bind,events:Se(f.on)?zl(f.on,"scope"):_e(Be(f.on))};if(Ga(g)&&(r++,r>1)){delete n[s];continue}const p=Be(a);for(const y of _x)y.defined(g)&&y.parse&&y.parse(e,g,p)}return r>1&&me(K1e),n}function AG(e,t,n,i="datum"){const r=Se(t)?t:t.param,a=Lt(r),s=ye(a+lc);let l;try{l=e.getSelectionComponent(a,r)}catch{return`!!${a}`}if(l.project.timeUnit){const p=n??e.component.data.raw,y=l.project.timeUnit.clone();p.parent?y.insertAsParentOf(p):p.parent=y}const c=l.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",f=l.resolve==="global"?")":`, ${ye(l.resolve)})`,d=`${c}${s}, ${i}${f}`,g=`length(data(${s}))`;return t.empty===!1?`${g} && ${d}`:`!${g} || ${d}`}function CG(e,t,n){const i=Lt(t),r=n.encoding;let a=n.field,s;try{s=e.getSelectionComponent(i,t)}catch{return i}if(!r&&!a)a=s.project.items[0].field,s.project.items.length>1&&me(J1e(a));else if(r&&!a){const l=s.project.items.filter(c=>c.channel===r);!l.length||l.length>1?(a=s.project.items[0].field,me(eye(l,r,n,a))):a=l[0].field}return`${s.name}[${ye(jr(a))}]`}function R2e(e,t){for(const[n,i]of wl(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new zi(new Vd(t,e,{param:n}),r,qt.Lookup,e.component.data.outputNodeRefCounts)}}function Tv(e,t,n){return Jg(t,i=>Se(i)?i:uve(i)?AG(e,i,n):zP(i))}function z2e(e,t){if(e)return se(e)&&!Zo(e)?e.map(n=>XM(n,t)).join(", "):e}function w_(e,t,n,i){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=i}function jg(e,t,n,i={header:!1}){const{disable:r,orient:a,scale:s,labelExpr:l,title:c,zindex:f,...d}=e.combine();if(!r){for(const g in d){const p=g,y=hbe[p],v=d[p];if(y&&y!==t&&y!=="both")delete d[p];else if(Sm(v)){const{condition:b,...S}=v,_=_e(b),w=tF[p];if(w){const{vgProp:A,part:$}=w,M=[..._.map(k=>{const{test:T,...D}=k;return{test:Tv(null,T),...D}}),S];w_(d,$,A,M),delete d[p]}else if(w===null){const A={signal:_.map($=>{const{test:M,...k}=$;return`${Tv(null,M)} ? ${Bz(k)} : `}).join("")+Bz(S)};d[p]=A}}else if(Me(v)){const b=tF[p];if(b){const{vgProp:S,part:_}=b;w_(d,_,S,v),delete d[p]}}We(["labelAlign","labelBaseline"],p)&&d[p]===null&&delete d[p]}if(t==="grid"){if(!d.grid)return;if(d.encode){const{grid:g}=d.encode;d.encode={...g?{grid:g}:{}},Mt(d.encode)&&delete d.encode}return{scale:s,orient:a,...d,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Kt(f,0)}}else{if(!i.header&&e.mainExtracted)return;if(l!==void 0){let p=l;d.encode?.labels?.update&&Me(d.encode.labels.update.text)&&(p=ec(l,"datum.label",d.encode.labels.update.text.signal)),w_(d,"labels","text",{signal:p})}if(d.labelAlign===null&&delete d.labelAlign,d.encode){for(const p of fH)e.hasAxisPart(p)||delete d.encode[p];Mt(d.encode)&&delete d.encode}const g=z2e(c,n);return{scale:s,orient:a,grid:!1,...g?{title:g}:{},...d,...n.aria===!1?{aria:!1}:{},zindex:Kt(f,0)}}}}function $G(e){const{axes:t}=e.component,n=[];for(const i of po)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const a=i==="x"?"height":"width",s=e.getSizeSignalRef(a).signal;a!==s&&n.push({name:a,update:s})}}return n}function F2e(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>jg(r,"grid",t)),...i.map(r=>jg(r,"grid",t)),...n.map(r=>jg(r,"main",t)),...i.map(r=>jg(r,"main",t))].filter(r=>r)}function TF(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const a=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},l=t[n==="x"?"axisTop":"axisRight"]||{},c=new Set([...de(s),...de(l)]),f={};for(const d of c.values())f[d]={signal:`${i.signal} === "${a}" ? ${sa(s[d])} : ${sa(l[d])}`};return f}return t[r]})])}function L2e(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:UP(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],a=e==="x"?"axisX":"axisY",s=Me(n)?"axisOrient":`axis${cm(n)}`,l=[...r,...r.map(f=>a+f.substr(4))],c=["axis",s,a];return{vlOnlyAxisConfig:TF(l,i,e,n),vgAxisConfig:TF(c,i,e,n),axisConfigStyle:U2e([...c,...l],i)}}function U2e(e,t){const n=[{}];for(const i of e){let r=t[i]?.style;if(r){r=_e(r);for(const a of r)n.push(t.style[a])}}return Object.assign.apply(null,n)}function ZA(e,t,n,i={}){const r=hP(e,n,t);if(r!==void 0)return{configFrom:"style",configValue:r};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(i[a]?.[e]!==void 0)return{configFrom:a,configValue:i[a][e]};return{}}const MF={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??B2e(n,e),gridScale:({model:e,channel:t})=>j2e(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||MG(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||TG(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??I2e(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??P2e(t.type,n,pe(t)&&!!t.timeUnit,pe(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const a=e==="x"?"width":e==="y"?"height":void 0,s=a?t.getSizeSignalRef(a):void 0;return n.tickCount??G2e({fieldOrDatumDef:i,scaleType:r,size:s,values:n.values})},tickMinStep:({axis:e,format:t,fieldOrDatumDef:n})=>e.tickMinStep??Y2e({format:t,fieldOrDatumDef:n}),title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=kG(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),a=n==="x"?"x2":"y2",s=t.fieldDef(a);return pP(r?[Jz(r)]:[],pe(s)?[Jz(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>X2e(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??V2e(n,t)};function B2e(e,t){return!$n(e)&&pe(t)&&!kt(t?.bin)&&!zn(t?.bin)}function j2e(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function q2e(e,t,n,i,r){const a=t?.labelAngle;if(a!==void 0)return Me(a)?a:Cp(a);{const{configValue:s}=ZA("labelAngle",i,t?.style,r);return s!==void 0?Cp(s):n===Ut&&We([zM,RM],e.type)&&!(pe(e)&&e.timeUnit)?270:void 0}}function KA(e){return`(((${e.signal} % 360) + 360) % 360)`}function TG(e,t,n,i){if(e!==void 0)if(n==="x"){if(Me(e)){const r=KA(e),a=Me(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${a} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Me(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Me(e)){const r=KA(e),a=Me(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${a} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(Me(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function MG(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,a=i?"bottom":"left";if(Me(e)){const s=KA(e),l=Me(t)?`(${t.signal} === "${a}")`:t===a;return{signal:`(${r?`(${s} + 90)`:s} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${s} && ${s} < ${180+r}) === ${l} ? "left" : "right"`}}if((e+r)%180===0)return i?null:"center";if(Me(t)){const s=r<e&&e<180+r?"===":"!==";return{signal:`${`${t.signal} ${s} "${a}"`} ? "left" : "right"`}}return(r<e&&e<180+r)==(t===a)?"left":"right"}function I2e(e,t){if(t==="x"&&We(["quantitative","temporal"],e))return!0}function P2e(e,t,n,i){if(n&&!Ee(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function H2e(e){return e==="x"?"bottom":"left"}function G2e({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){if(!i&&!$n(t)&&t!=="log"){if(pe(e)){if(kt(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&We(["month","hours","day","quarter"],Cn(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Y2e({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(pe(t)){const{timeUnit:n}=t;if(n){const i=NP(n);if(i)return{signal:i}}}}function kG(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),a=i?i.title:void 0,s=r?r.title:void 0;if(a&&s)return mP(a,s);if(a)return a;if(s)return s;if(a!==void 0)return a;if(s!==void 0)return s}function X2e(e,t){const n=e.values;if(se(n))return cH(t,n);if(Me(n))return n}function V2e(e,t){return e==="rect"&&Sv(t)?1:0}class Ed extends Et{transform;_dependentFields;clone(){return new Ed(null,Be(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=wG(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(Ac(i)&&eH(i.sort)){const{field:a,timeUnit:s}=i,l=i.sort,c=l.map((f,d)=>`${zP({field:a,timeUnit:s,equal:f})} ? ${d} : `).join("")+l.length;t=new Ed(t,{calculate:c,as:_d(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${tt(this.transform)}`}}function _d(e,t,n){return xe(e,{prefix:t,suffix:"sort_index",...n})}function wx(e,t){return We(["top","bottom"],t)?"column":We(["left","right"],t)||e==="row"?"row":"column"}function wd(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return Kt((t||{})[e],r[e],n.header[e])}function Ax(e,t,n,i){const r={};for(const a of e){const s=wd(a,t||{},n,i);s!==void 0&&(r[a]=s)}return r}const gk=["row","column"],pk=["header","footer"];function W2e(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:a,titleAngle:s,titleOrient:l}=Ax(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),c=wx(t,l),f=Cp(s);return{name:`${t}-title`,type:"group",role:`${c}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...NG(f,c),...OG(c,f,a),...DG(i,r,t,zbe,MH)}}}function OG(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=MG(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function NG(e,t){const n=TG(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Q2e(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of pk)if(n[r])for(const a of n[r]){const s=K2e(e,t,r,n,a);s!=null&&i.push(s)}return i}function Z2e(e,t){const{sort:n}=e;return Js(n)?{field:xe(n,{expr:"datum"}),order:n.order??"ascending"}:se(n)?{field:_d(e,t,{expr:"datum"}),order:"ascending"}:{field:xe(e,{expr:"datum"}),order:n??"ascending"}}function JA(e,t,n){const{format:i,formatType:r,labelAngle:a,labelAnchor:s,labelOrient:l,labelExpr:c}=Ax(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),f=PM({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,d=wx(t,l);return{text:{signal:c?ec(ec(c,"datum.label",f),"datum.value",xe(e,{expr:"parent"})):f},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...NG(a,d),...OG(d,a,s),...DG(n,e,t,Fbe,kH)}}function K2e(e,t,n,i,r){if(r){let a=null;const{facetFieldDef:s}=i,l=e.config?e.config:void 0;if(s&&r.labels){const{labelOrient:g}=Ax(["labelOrient"],s.header,l,t);(t==="row"&&!We(["top","bottom"],g)||t==="column"&&!We(["left","right"],g))&&(a=JA(s,t,l))}const c=cr(e)&&!ym(e.facet),f=r.axes,d=f?.length>0;if(a||d){const g=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Z2e(s,t)}:{},...d&&c?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...a?{title:a}:{},...r.sizeSignal?{encode:{update:{[g]:r.sizeSignal}}}:{},...d?{axes:f}:{}}}}return null}const J2e={column:{start:0,end:1},row:{start:1,end:0}};function eSe(e,t){return J2e[t][e]}function tSe(e,t){const n={};for(const i of Nr){const r=e[i];if(r?.facetFieldDef){const{titleAnchor:a,titleOrient:s}=Ax(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),l=wx(i,s),c=eSe(a,l);c!==void 0&&(n[l]=c)}}return Mt(n)?void 0:n}function DG(e,t,n,i,r){const a={};for(const s of i){if(!r[s])continue;const l=wd(s,t?.header,e,n);l!==void 0&&(a[r[s]]=l)}return a}function mk(e){return[...b1(e,"width"),...b1(e,"height"),...b1(e,"childWidth"),...b1(e,"childHeight")]}function b1(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(i==null||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const a=e.getScaleComponent(n);if(a){const s=a.get("type"),l=a.get("range");if($n(s)&&Ec(l)){const c=e.scaleName(n);return cr(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[kF(c,l)]:[kF(c,l),{name:r,update:RG(c,a,`domain('${c}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const a=r.endsWith("width"),s=a?"containerSize()[0]":"containerSize()[1]",l=IA(e.config.view,a?"width":"height"),c=`isFinite(${s}) ? ${s} : ${l}`;return[{name:r,init:c,on:[{update:c,events:"window:resize"}]}]}else return[{name:r,value:i}]}function kF(e,t){const n=`${e}_step`;return Me(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function RG(e,t,n){const i=t.get("type"),r=t.get("padding"),a=Kt(t.get("paddingOuter"),r);let s=t.get("paddingInner");return s=i==="band"?s!==void 0?s:r:1,`bandspace(${n}, ${sa(s)}, ${sa(a)}) * ${e}_step`}function zG(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function FG(e,t){return de(e).reduce((n,i)=>({...n,...Xd({model:t,channelDef:e[i],vgChannel:i,mainRefFn:r=>Rt(r.value),invalidValueRef:void 0})}),{})}function LG(e,t){if(cr(t))return e==="theta"?"independent":"shared";if(Zd(t))return"shared";if(_k(t))return Jt(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function yk(e,t){const n=e.scale[t],i=Jt(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&me(Oye(t)),"independent"):e[i][t]||"shared"}const nSe={...Bbe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},UG=de(nSe);class iSe extends yo{}const OF={symbols:rSe,gradient:aSe,labels:sSe,entries:oSe};function rSe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:a}){if(a!=="symbol")return;const{markDef:s,encoding:l,config:c,mark:f}=n,d=s.filled&&f!=="trail";let g={...B1e({},n,zve),...cG(n,{filled:d})};const p=r.get("symbolOpacity")??c.legend.symbolOpacity,y=r.get("symbolFillColor")??c.legend.symbolFillColor,v=r.get("symbolStrokeColor")??c.legend.symbolStrokeColor,b=p===void 0?BG(l.opacity)??s.opacity:void 0;if(g.fill){if(i==="fill"||d&&i===Bi)delete g.fill;else if(he(g.fill,"field"))y?delete g.fill:(g.fill=Rt(c.legend.symbolBaseFillColor??"black"),g.fillOpacity=Rt(b??1));else if(se(g.fill)){const S=eC(l.fill??l.color)??s.fill??(d&&s.color);S&&(g.fill=Rt(S))}}if(g.stroke){if(i==="stroke"||!d&&i===Bi)delete g.stroke;else if(he(g.stroke,"field")||v)delete g.stroke;else if(se(g.stroke)){const S=Kt(eC(l.stroke||l.color),s.stroke,d?s.color:void 0);S&&(g.stroke={value:S})}}if(i!==go){const S=pe(t)&&qG(n,r,t);S?g.opacity=[{test:S,...Rt(b??1)},Rt(c.legend.unselectedOpacity)]:b&&(g.opacity=Rt(b))}return g={...g,...e},Mt(g)?void 0:g}function aSe(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:a,encoding:s}=t;let l={};const f=(i.get("gradientOpacity")??r.legend.gradientOpacity)===void 0?BG(s.opacity)||a.opacity:void 0;return f&&(l.opacity=Rt(f)),l={...l,...e},Mt(l)?void 0:l}function sSe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const a=n.legend(i)||{},s=n.config,l=pe(t)?qG(n,r,t):void 0,c=l?[{test:l,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:f,formatType:d}=a;let g;sc(d)?g=oa({fieldOrDatumDef:t,field:"datum.value",format:f,formatType:d,config:s}):f===void 0&&d===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?g=oa({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&pe(t)&&t.timeUnit===void 0&&(g=oa({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const p={...c?{opacity:c}:{},...g?{text:g}:{},...e};return Mt(p)?void 0:p}function oSe(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}function BG(e){return jG(e,(t,n)=>Math.max(t,n.value))}function eC(e){return jG(e,(t,n)=>Kt(t,n.value))}function jG(e,t){if(tbe(e))return _e(e.condition).reduce(t,e.value);if(ga(e))return e.value}function qG(e,t,n){const i=t.get("selections");if(!i?.length)return;const r=ye(n.field);return i.map(a=>`(!length(data(${ye(Lt(a)+lc)})) || (${a}[${r}] && indexof(${a}[${r}], datum.value) >= 0))`).join(" || ")}const NF={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return ZP(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return KP(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??gSe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??pSe(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??uSe(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>If(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(qf(n)&&ja(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>lSe(t,e)};function lSe(e,t){const n=e.values;if(se(n))return cH(t,n);if(Me(n))return n}function uSe(e,t,n,i){if(t!=="shape"){const r=eC(n)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function cSe(e){const{legend:t}=e;return Kt(t.type,fSe(e))}function fSe({channel:e,timeUnit:t,scaleType:n}){if(qf(e)){if(We(["quarter","month","day"],t))return"symbol";if(ja(n))return"gradient"}return"symbol"}function dSe({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??hSe(n,t)}function hSe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function gSe({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:a,gradientHorizontalMinLength:s,gradientVerticalMaxLength:l,gradientVerticalMinLength:c}=e;if(ja(r))return n==="horizontal"?i==="top"||i==="bottom"?DF(t,"width",s,a):s:DF(t,"height",c,l)}function DF(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function pSe(e){if(We(["quantile","threshold","log","symlog"],e))return"greedy"}function IG(e){const t=jt(e)?mSe(e):xSe(e);return e.component.legends=t,t}function mSe(e){const{encoding:t}=e,n={};for(const i of[Bi,...NH]){const r=gn(t[i]);!r||!e.getScaleComponent(i)||i===ji&&pe(r)&&r.type===Yd||(n[i]=bSe(e,i))}return n}function ySe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function vSe(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===i?.title)return!0}return e===(n||{})[t]}function bSe(e,t){let n=e.legend(t);const{markDef:i,encoding:r,config:a}=e,s=a.legend,l=new iSe({},ySe(e,t));T2e(e,t,l);const c=n!==void 0?!n:s.disable;if(l.set("disable",c,n!==void 0),c)return l;n=n||{};const f=e.getScaleComponent(t).get("type"),d=gn(r[t]),g=pe(d)?Cn(d.timeUnit)?.unit:void 0,p=n.orient||a.legend.orient||"right",y=cSe({legend:n,channel:t,timeUnit:g,scaleType:f}),v=dSe({legend:n,legendType:y,orient:p,legendConfig:s}),b={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:d,legendConfig:s,config:a,scaleType:f,orient:p,legendType:y,direction:v};for(const $ of UG){if(y==="gradient"&&$.startsWith("symbol")||y==="symbol"&&$.startsWith("gradient"))continue;const M=$ in NF?NF[$](b):n[$];if(M!==void 0){const k=vSe(M,$,n,e.fieldDef(t));(k||a.legend[$]===void 0)&&l.set($,M,k)}}const S=n?.encoding??{},_=l.get("selections"),w={},A={fieldOrDatumDef:d,model:e,channel:t,legendCmpt:l,legendType:y};for(const $ of["labels","legend","title","symbols","gradient","entries"]){const M=FG(S[$]??{},e),k=$ in OF?OF[$](M,A):M;k!==void 0&&!Mt(k)&&(w[$]={..._?.length&&pe(d)?{name:`${Lt(d.field)}_legend_${$}`}:{},..._?.length?{interactive:!0}:{},update:_?.length?{...k,cursor:{value:"pointer"}}:k})}return Mt(w)||l.set("encode",w,!!n?.encoding),l}function xSe(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){IG(i);for(const r of de(i.component.legends))n.legend[r]=yk(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=PG(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of de(t))for(const r of e.children)r.component.legends[i]&&n.legend[i]==="shared"&&delete r.component.legends[i];return t}function PG(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const a of UG){const s=$l(e.getWithExplicit(a),t.getWithExplicit(a),a,"legend",(l,c)=>{switch(a){case"symbolType":return SSe(l,c);case"title":return yP(l,c);case"type":return r=!0,er("symbol")}return xx(l,c,a,"legend")});e.setWithExplicit(a,s)}return r&&(e.implicit?.encode?.gradient&&mv(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&mv(e.explicit,["encode","gradient"])),e}function SSe(e,t){return t.value==="circle"?t:e}function ESe(e,t,n,i){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=i}function HG(e){const t=e.component.legends,n={};for(const r of de(t)){const a=e.getScaleComponent(r),s=yt(a.get("domains"));if(n[s])for(const l of n[s])PG(l,t[r])||n[s].push(t[r]);else n[s]=[t[r].clone()]}return ln(n).flat().map(r=>_Se(r,e.config)).filter(r=>r!==void 0)}function _Se(e,t){const{disable:n,labelExpr:i,selections:r,...a}=e.combine();if(!n){if(t.aria===!1&&a.aria==null&&(a.aria=!1),a.encode?.symbols){const s=a.encode.symbols.update;s.fill&&s.fill.value!=="transparent"&&!s.stroke&&!a.stroke&&(s.stroke={value:"transparent"});for(const l of NH)a[l]&&delete s[l]}if(a.title||delete a.title,i!==void 0){let s=i;a.encode?.labels?.update&&Me(a.encode.labels.update.text)&&(s=ec(i,"datum.label",a.encode.labels.update.text.signal)),ESe(a,"labels","text",{signal:s})}return a}}function wSe(e){return Zd(e)||_k(e)?ASe(e):GG(e)}function ASe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),GG(e))}function GG(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},a=t.data.reduce((s,l)=>{const c=Me(l)?l.signal:`data('${e.lookupDataSource(l)}')`;return We(s,c)||s.push(c),s},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:a.length>1?`[${a.join(", ")}]`:a[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const CSe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class YG extends yo{specifiedProjection;size;data;merged=!1;constructor(t,n,i,r){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=r}get isFit(){return!!this.data}}function XG(e){e.component.projection=jt(e)?$Se(e):kSe(e)}function $Se(e){if(e.hasProjection){const t=Fn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?TSe(e):void 0,a=new YG(e.projectionName(!0),{...Fn(e.config.projection),...t},i,r);return a.get("type")||a.set("type","equalEarth",!1),a}}function TSe(e){const t=[],{encoding:n}=e;for(const i of[[_a,Ea],[qr,wa]])(gn(n[i[0]])||gn(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(ji)&&e.typedFieldDef(ji).type===Yd&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(qt.Main)),t}function MSe(e,t){const n=sM(CSe,r=>!!(!we(e.explicit,r)&&!we(t.explicit,r)||we(e.explicit,r)&&we(t.explicit,r)&&ar(e.get(r),t.get(r))));if(ar(e.size,t.size)){if(n)return e;if(ar(e.explicit,{}))return t;if(ar(t.explicit,{}))return e}return null}function kSe(e){if(e.children.length===0)return;let t;for(const i of e.children)XG(i);const n=sM(e.children,i=>{const r=i.component.projection;if(r)if(t){const a=MSe(t,r);return a&&(t=a),!!a}else return t=r,!0;else return!0});if(t&&n){const i=e.projectionName(!0),r=new YG(i,t.specifiedProjection,t.size,Be(t.data));for(const a of e.children){const s=a.component.projection;s&&(s.isFit&&r.data.push(...a.component.projection.data),a.renameProjection(s.get("name"),i),s.merged=!0)}return r}}function OSe(e,t,n,i){if(xm(t,n)){const r=jt(e)?e.axis(n)??e.legend(n)??{}:{},a=xe(t,{expr:"datum"}),s=xe(t,{expr:"datum",binSuffix:"end"});return{formulaAs:xe(t,{binSuffix:"range",forAs:!0}),formula:mm(a,s,r.format,r.formatType,i)}}return{}}function VG(e,t){return`${uP(e)}_${t}`}function NSe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function vk(e,t,n){const i=gx(n,void 0)??{},r=VG(i,t);return e.getName(`${r}_bins`)}function DSe(e){return"as"in e}function RF(e,t,n){let i,r;DSe(e)?i=Se(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[xe(e,{forAs:!0}),xe(e,{binSuffix:"end",forAs:!0})];const a={...gx(t,void 0)},s=VG(a,e.field),{signal:l,extentSignal:c}=NSe(n,s);if(ix(a.extent)){const d=a.extent;r=CG(n,d.param,d),delete a.extent}const f={bin:a,field:e.field,as:[i],...l?{signal:l}:{},...c?{extentSignal:c}:{},...r?{span:r}:{}};return{key:s,binComponent:f}}class Ya extends Et{bins;clone(){return new Ya(null,Be(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{if(xi(a)&&kt(a.bin)){const{key:l,binComponent:c}=RF(a,a.bin,n);r[l]={...c,...r[l],...OSe(n,a,s,n.config)}}return r},{});return Mt(i)?null:new Ya(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:a}=RF(n,n.bin,i);return new Ya(t,{[r]:a})}merge(t,n){for(const i of de(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=Ba([...this.bins[i].as,...t.bins[i].as],tt)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(ln(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(ln(this.bins).map(t=>t.field))}hash(){return`Bin ${tt(this.bins)}`}assemble(){return ln(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,{extent:a,...s}=t.bin,l={type:"bin",field:jr(t.field),as:i,signal:t.signal,...ix(a)?{extent:null}:{extent:a},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!a&&t.extentSignal&&(n.push({type:"extent",field:jr(t.field),signal:t.extentSignal}),l.extent={signal:t.extentSignal}),n.push(l);for(const c of r)for(let f=0;f<2;f++)n.push({type:"formula",expr:xe({field:i[f]},{expr:"datum"}),as:c[f]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function RSe(e,t,n,i){const r=jt(i)?i.encoding[ds(t)]:void 0;if(xi(n)&&jt(i)&&nH(n,r,i.markDef,i.config)){e.add(xe(n,{})),e.add(xe(n,{suffix:"end"}));const{mark:a,markDef:s,config:l}=i,c=Cl({fieldDef:n,markDef:s,config:l});$p(a)&&c!==.5&&Jt(t)&&(e.add(xe(n,{suffix:Sx})),e.add(xe(n,{suffix:Ex}))),n.bin&&xm(n,t)&&e.add(xe(n,{binSuffix:"range"}))}else if(eP(t)){const a=JI(t);e.add(i.getName(a))}else e.add(xe(n));return Ac(n)&&Eve(n.scale?.range)&&e.add(n.scale.range.field),e}function zSe(e,t){for(const n of de(t)){const i=t[n];for(const r of de(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]}}}class ua extends Et{dimensions;measures;clone(){return new ua(null,new Set(this.dimensions),Be(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(s=>{s.aggregate&&(i=!0)});const r={},a=new Set;return!i||(n.forEachFieldDef((s,l)=>{const{aggregate:c,field:f}=s;if(c)if(c==="count")r["*"]??={},r["*"].count=new Set([xe(s,{forAs:!0})]);else{if(ao(c)||Il(c)){const d=ao(c)?"argmin":"argmax",g=c[d];r[g]??={},r[g][d]=new Set([xe({op:d,field:g},{forAs:!0})])}else r[f]??={},r[f][c]=new Set([xe(s,{forAs:!0})]);hs(l)&&n.scaleDomain(l)==="unaggregated"&&(r[f]??={},r[f].min=new Set([xe({field:f,aggregate:"min"},{forAs:!0})]),r[f].max=new Set([xe({field:f,aggregate:"max"},{forAs:!0})]))}else RSe(a,l,s,n)}),a.size+de(r).length===0)?null:new ua(t,a,r)}static makeFromTransform(t,n){const i=new Set,r={};for(const a of n.aggregate){const{op:s,field:l,as:c}=a;s&&(s==="count"?(r["*"]??={},r["*"].count=new Set([c||xe(a,{forAs:!0})])):(r[l]??={},r[l][s]??=new Set,r[l][s].add(c||xe(a,{forAs:!0}))))}for(const a of n.groupby??[])i.add(a);return i.size+de(r).length===0?null:new ua(t,i,r)}merge(t){return HI(this.dimensions,t.dimensions)?(zSe(this.measures,t.measures),!0):(Xye("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...de(this.measures)])}producedFields(){const t=new Set;for(const n of de(this.measures))for(const i of de(this.measures[n])){const r=this.measures[n][i];r.size===0?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${tt({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const a of de(this.measures))for(const s of de(this.measures[a]))for(const l of this.measures[a][s])i.push(l),t.push(s),n.push(a==="*"?null:jr(a));return{type:"aggregate",groupby:[...this.dimensions].map(jr),ops:t,fields:n,as:i}}}class Wd extends Et{model;name;data;column;row;facet;childModel;constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const a of Nr){const s=n.facet[a];if(s){const{bin:l,sort:c}=s;this[a]={name:n.getName(`${a}_domain`),fields:[xe(s),...kt(l)?[xe(s,{binSuffix:"end"})]:[]],...Js(c)?{sortField:c}:se(c)?{sortIndexField:_d(s,a)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Nr)this[n]&&(t+=` ${n.charAt(0)}:${tt(this[n])}`);return t}get fields(){const t=[];for(const n of Nr)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Nr)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of po){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),a=i.get("range");if($n(r)&&Ec(a)){const s=Cx(this.childModel,n),l=Ek(s);l?t[n]=l:me(xM(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],a=[],s=[],l=[];r&&i&&i[r]&&(n?(a.push(`distinct_${i[r]}`),s.push("max")):(a.push(i[r]),s.push("distinct")),l.push(`distinct_${i[r]}`));const{sortField:c,sortIndexField:f}=this[t];if(c){const{op:d=fx,field:g}=c;a.push(g),s.push(d),l.push(xe(c,{forAs:!0}))}else f&&(a.push(f),s.push("max"),l.push(f));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...a.length?{fields:a,ops:s,as:l}:{}}]}}assembleFacetHeaderData(t){const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],a={};for(const c of gk){for(const f of pk){const d=i[c]?.[f]??[];for(const g of d)if(g.axes?.length>0){a[c]=!0;break}}if(a[c]){const f=`length(data("${this.facet.name}"))`,d=c==="row"?n?{signal:`ceil(${f} / ${n})`}:1:n?{signal:`min(${f}, ${n})`}:{signal:f};r.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:s,column:l}=a;return(s||l)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:a,facet:s}=this;if(r&&a&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const l=[].concat(i.x??[],i.y??[]),c=l.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:l,ops:c}]})}for(const l of[Ks,Zs])this[l]&&t.push(this.assembleRowColumnHeaderData(l,n,i));if(s){const l=this.assembleFacetHeaderData(i);l&&t.push(...l)}return t}}function zF(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function FSe(e,t){const n=uM(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=zF(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=zF(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return me(nye(t)),null}function LSe(e){const t={};return K1(e.filter,n=>{if(RP(n)){let i=null;CM(n)?i=ir(n.equal):TM(n)?i=ir(n.lte):$M(n)?i=ir(n.lt):MM(n)?i=ir(n.gt):kM(n)?i=ir(n.gte):OM(n)?i=n.range[0]:NM(n)&&(i=(n.oneOf??n.in)[0]),i&&(_c(i)?t[n.field]="date":ut(i)?t[n.field]="number":Se(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function USe(e){const t={};function n(i){bd(i)?t[i.field]="date":i.type==="quantitative"&&M1e(i.aggregate)?t[i.field]="number":hd(i.field)>1?i.field in t||(t[i.field]="flatten"):Ac(i)&&Js(i.sort)&&hd(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((jt(e)||cr(e))&&e.forEachFieldDef((i,r)=>{if(xi(i))n(i);else{const a=xc(r),s=e.fieldDef(a);n({...i,type:s.type})}}),jt(e)){const{mark:i,markDef:r,encoding:a}=e;if(Pl(i)&&!e.encoding.order){const s=r.orient==="horizontal"?"y":"x",l=a[s];pe(l)&&l.type==="quantitative"&&!(l.field in t)&&(t[l.field]="number")}}return t}function BSe(e){const t={};if(jt(e)&&e.component.selection)for(const n of de(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&hd(r.field)>1&&(t[r.field]="flatten")}return t}class Kn extends Et{_parse;clone(){return new Kn(null,Be(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${tt(this._parse)}`}static makeExplicit(t,n,i){let r={};const a=n.data;return!hl(a)&&a?.format?.parse&&(r=a.format.parse),this.makeWithAncestors(t,r,{},i)}static makeWithAncestors(t,n,i,r){for(const l of de(i)){const c=r.getWithExplicit(l);c.value!==void 0&&(c.explicit||c.value===i[l]||c.value==="derived"||i[l]==="flatten"?delete i[l]:me(Gz(l,i[l],c.value)))}for(const l of de(n)){const c=r.get(l);c!==void 0&&(c===n[l]?delete n[l]:me(Gz(l,n[l],c)))}const a=new yo(n,i);r.copyAll(a);const s={};for(const l of de(a.combine())){const c=a.get(l);c!==null&&(s[l]=c)}return de(s).length===0||r.parseNothing?null:new Kn(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of de(this._parse)){const i=this._parse[n];hd(n)===1&&(t[n]=i)}return t}producedFields(){return new Set(de(this._parse))}dependentFields(){return new Set(de(this._parse))}assembleTransforms(t=!1){return de(this._parse).filter(n=>t?hd(n)>1:!0).map(n=>{const i=FSe(n,this._parse[n]);return i?{type:"formula",expr:i,as:Hd(n)}:null}).filter(n=>n!==null)}}class Tl extends Et{clone(){return new Tl(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ma])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ma}}}class _m extends Et{params;clone(){return new _m(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${tt(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class wm extends Et{params;clone(){return new wm(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${tt(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class uc extends Et{_data;_name;_generator;constructor(t){super(null),t??={name:"source"};let n;if(hl(t)||(n=t.format?{...ur(t.format,["parse"])}:{}),Tp(t))this._data={values:t.values};else if(xd(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];We(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else ZH(t)?this._data={values:[{type:"Sphere"}]}:(WH(t)||hl(t))&&(this._data={});this._generator=hl(t),t.name&&(this._name=t.name),n&&!Mt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}function bk(e){return e instanceof uc||e instanceof _m||e instanceof wm}class xk{#e;constructor(){this.#e=!1}setModified(){this.#e=!0}get modifiedFlag(){return this.#e}}class Cc extends xk{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,a)=>a[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class Sk extends xk{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class jSe extends Sk{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of de(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class qSe extends Sk{requiresSelectionId;constructor(t){super(),this.requiresSelectionId=t&&hk(t)}run(t){t instanceof Tl&&(this.requiresSelectionId&&(bk(t.parent)||t.parent instanceof ua||t.parent instanceof Kn)||(this.setModified(),t.remove()))}}class ISe extends xk{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof Ha&&(i=t.producedFields(),oM(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class PSe extends Sk{constructor(){super()}run(t){t instanceof zi&&!t.isRequired()&&(this.setModified(),t.remove())}}class HSe extends Cc{run(t){if(!bk(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Kn)if(t instanceof Kn)this.setModified(),t.merge(n);else{if(lM(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class GSe extends Cc{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof Kn);if(t.numChildren()>1&&i.length>=1){const r={},a=new Set;for(const s of i){const l=s.parse;for(const c of de(l))c in r?r[c]!==l[c]&&a.add(c):r[c]=l[c]}for(const s of a)delete r[s];if(!Mt(r)){this.setModified();const s=new Kn(t,r);for(const l of n){if(l instanceof Kn)for(const c of de(r))delete l.parse[c];t.removeChild(l),l.parent=s,l instanceof Kn&&de(l.parse).length===0&&l.remove()}}}}}class YSe extends Cc{run(t){t instanceof zi||t.numChildren()>0||t instanceof Wd||t instanceof uc||(this.setModified(),t.remove())}}class XSe extends Cc{run(t){const n=t.children.filter(r=>r instanceof Ha),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class VSe extends Cc{run(t){const n=t.children.filter(r=>r instanceof ua),i={};for(const r of n){const a=tt(r.groupBy);a in i||(i[a]=[]),i[a].push(r)}for(const r of de(i)){const a=i[r];if(a.length>1){const s=a.pop();for(const l of a)s.merge(l)&&(t.removeChild(l),l.parent=s,l.remove(),this.setModified())}}}}class WSe extends Cc{model;constructor(t){super(),this.model=t}run(t){const n=!(bk(t)||t instanceof Vd||t instanceof Kn||t instanceof Tl),i=[],r=[];for(const a of t.children)a instanceof Ya&&(n&&!lM(t.producedFields(),a.dependentFields())?i.push(a):r.push(a));if(i.length>0){const a=i.pop();for(const s of i)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Ya?t.merge(a,this.model.renameSignal.bind(this.model)):a.swapWithParent()}if(r.length>1){const a=r.pop();for(const s of r)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class QSe extends Cc{run(t){const n=[...t.children];if(!dd(n,s=>s instanceof zi)||t.numChildren()<=1)return;const r=[];let a;for(const s of n)if(s instanceof zi){let l=s;for(;l.numChildren()===1;){const[c]=l.children;if(c instanceof zi)l=c;else break}r.push(...l.children),a?(t.removeChild(s),s.parent=a.parent,a.parent.removeChild(a),a.parent=l,this.setModified()):a=l}else r.push(s);if(r.length){this.setModified();for(const s of r)s.parent.removeChild(s),s.parent=a}}}class $c extends Et{transform;clone(){return new $c(null,Be(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ba(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??xe(t)}hash(){return`JoinAggregateTransform ${tt(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const a of this.transform.joinaggregate)n.push(a.op),i.push(this.getDefaultName(a)),t.push(a.field===void 0?null:a.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...r!==void 0?{groupby:r}:{}}}}class Ad extends Et{filter;clone(){return new Ad(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,i){const{config:r,markDef:a}=n,{marks:s,scales:l}=i;if(s==="include-invalid-values"&&l==="include-invalid-values")return null;const c=n.reduceFieldDef((f,d,g)=>{const p=hs(g)&&n.getScaleComponent(g);if(p){const y=p.get("type"),{aggregate:v}=d,b=jM({scaleChannel:g,markDef:a,config:r,scaleType:y,isCountAggregate:nx(v)});b!=="show"&&b!=="always-valid"&&(f[d.field]=d)}return f},{});return de(c).length?new Ad(t,c):null}dependentFields(){return new Set(de(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${tt(this.filter)}`}assemble(){const t=de(this.filter).reduce((n,i)=>{const r=this.filter[i],a=xe(r,{expr:"datum"});return r!==null&&(r.type==="temporal"?n.push(`(isDate(${a}) || (${tC(a)}))`):r.type==="quantitative"&&n.push(tC(a))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function tC(e){return`isValid(${e}) && isFinite(+${e})`}function ZSe(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=xe(i);return r&&t.push(r),t},[])}function KSe(e){return se(e)&&e.every(t=>Se(t))&&e.length>1}class to extends Et{_stack;clone(){return new to(null,Be(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:r,as:a,offset:s="zero"}=n,l=[],c=[];if(n.sort!==void 0)for(const g of n.sort)l.push(g.field),c.push(Kt(g.order,"ascending"));const f={field:l,order:c};let d;return KSe(a)?d=a:Se(a)?d=[a,`${a}_end`]:d=[`${n.stack}_start`,`${n.stack}_end`],new to(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:s,sort:f,facetby:[],as:d})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:a,fieldChannel:s,offset:l,impute:c}=i,f=a.map(y=>{const v=r[y];return pa(v)}).filter(y=>!!y),d=ZSe(n),g=n.encoding.order;let p;if(se(g)||pe(g))p=gP(g);else{const y=iH(g)?g.sort:s==="y"?"descending":"ascending";p=d.reduce((v,b)=>(v.field.includes(b)||(v.field.push(b),v.order.push(y)),v),{field:[],order:[]})}return new to(t,{dimensionFieldDefs:f,stackField:n.vgField(s),facetby:[],stackby:d,sort:p,offset:l,impute:c,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${tt(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[xe(r,{binSuffix:"mid"})]:[xe(r,{}),xe(r,{binSuffix:"end"})]:[xe(r)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:a,sort:s,offset:l,impute:c,as:f}=this._stack;if(c)for(const d of i){const{bandPosition:g=.5,bin:p}=d;if(p){const y=xe(d,{expr:"datum"}),v=xe(d,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${tC(y)} ? ${g}*${y}+${1-g}*${v} : ${y}`,as:xe(d,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:r,groupby:[...a,...n],key:xe(d,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:s,as:f,offset:l}),t}}class Qd extends Et{transform;clone(){return new Qd(null,Be(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ba(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??xe(t)}hash(){return`WindowTransform ${tt(this.transform)}`}assemble(){const t=[],n=[],i=[],r=[];for(const g of this.transform.window)n.push(g.op),i.push(this.getDefaultName(g)),r.push(g.param===void 0?null:g.param),t.push(g.field===void 0?null:g.field);const a=this.transform.frame,s=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&n.every(g=>vM(g)))return{type:"joinaggregate",as:i,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const l=[],c=[];if(this.transform.sort!==void 0)for(const g of this.transform.sort)l.push(g.field),c.push(g.order??"ascending");const f={field:l,order:c},d=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:t,sort:f,...d!==void 0?{ignorePeers:d}:{},...s!==void 0?{groupby:s}:{},...a!==void 0?{frame:a}:{}}}}function JSe(e){function t(n){if(!(n instanceof Wd)){const i=n.clone();if(i instanceof zi){const r=iC+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof ua||i instanceof to||i instanceof Qd||i instanceof $c)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}return t}function nC(e){if(e instanceof Wd)if(e.numChildren()===1&&!(e.children[0]instanceof zi)){const t=e.children[0];(t instanceof ua||t instanceof to||t instanceof Qd||t instanceof $c)&&t.addDimensions(e.fields),t.swapWithParent(),nC(e)}else{const t=e.model.component.data.main;WG(t);const n=JSe(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else e.children.map(nC)}function WG(e){if(e instanceof zi&&e.type===qt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Wd||(t.swapWithParent(),WG(e))}}const iC="scale_",x1=5;function rC(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!rC(t.children))return!1}return!0}function Wr(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function FF(e,t,n){let i=e.sources,r=!1;return r=Wr(new PSe,i)||r,r=Wr(new qSe(t),i)||r,i=i.filter(a=>a.numChildren()>0),r=Wr(new YSe,i)||r,i=i.filter(a=>a.numChildren()>0),n||(r=Wr(new HSe,i)||r,r=Wr(new WSe(t),i)||r,r=Wr(new ISe,i)||r,r=Wr(new GSe,i)||r,r=Wr(new VSe,i)||r,r=Wr(new XSe,i)||r,r=Wr(new jSe,i)||r,r=Wr(new QSe,i)||r),e.sources=i,r}function eEe(e,t){rC(e.sources);let n=0,i=0;for(let r=0;r<x1&&FF(e,t,!0);r++)n++;e.sources.map(nC);for(let r=0;r<x1&&FF(e,t,!1);r++)i++;rC(e.sources),Math.max(n,i)===x1&&me(`Maximum optimization runs(${x1}) reached.`)}class xn{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}signal;static fromName(t,n){return new xn(()=>t(n))}}function QG(e){jt(e)?tEe(e):nEe(e)}function tEe(e){const t=e.component.scales;for(const n of de(t)){const i=rEe(e,n);if(t[n].setWithExplicit("domains",i),sEe(e,n),e.component.data.isFaceted){let a=e;for(;!cr(a)&&a.parent;)a=a.parent;if(a.component.resolve.scale[n]==="shared")for(const l of i.value)Xs(l)&&(l.data=iC+l.data.replace(iC,""))}}}function nEe(e){for(const n of e.children)QG(n);const t=e.component.scales;for(const n of de(t)){let i,r=null;for(const a of e.children){const s=a.component.scales[n];if(s){i===void 0?i=s.getWithExplicit("domains"):i=$l(i,s.getWithExplicit("domains"),"domains","scale",aC);const l=s.get("selectionExtent");r&&l&&r.param!==l.param&&me(W1e),r=l}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}function iEe(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:a}=LF(t,n);if(!r){me(a);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=LF(t,n);if(r)return"unaggregated"}return e}function rEe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=iEe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),t==="x"&&gn(i.x2)?gn(i.x)?$l(Yo(n,r,e,"x"),Yo(n,r,e,"x2"),"domain","scale",aC):Yo(n,r,e,"x2"):t==="y"&&gn(i.y2)?gn(i.y)?$l(Yo(n,r,e,"y"),Yo(n,r,e,"y2"),"domain","scale",aC):Yo(n,r,e,"y2"):Yo(n,r,e,t)}function aEe(e,t,n){return e.map(i=>({signal:`{data: ${px(i,{timeUnit:n,type:t})}}`}))}function A_(e,t,n){const i=Cn(n)?.unit;return t==="temporal"||i?aEe(e,t,i):[e]}function Yo(e,t,n,i){const{encoding:r,markDef:a,mark:s,config:l,stack:c}=n,f=gn(r[i]),{type:d}=f,g=f.timeUnit,p=Kxe({invalid:Ja("invalid",a,l),isPath:Pl(s)});if(Sve(t)){const b=Yo(e,void 0,n,i),S=A_(t.unionWith,d,g);return Ra([...S,...b.value])}else{if(Me(t))return Ra([t]);if(t&&t!=="unaggregated"&&!jP(t))return Ra(A_(t,d,g))}if(c&&i===c.fieldChannel){if(c.offset==="normalize")return er([[0,1]]);const b=n.requestDataName(p);return er([{data:b,field:n.vgField(i,{suffix:"start"})},{data:b,field:n.vgField(i,{suffix:"end"})}])}const y=hs(i)&&pe(f)?oEe(n,i,e):void 0;if(gs(f)){const b=A_([f.datum],d,g);return er(b)}const v=f;if(t==="unaggregated"){const{field:b}=f;return er([{data:n.requestDataName(p),field:xe({field:b,aggregate:"min"})},{data:n.requestDataName(p),field:xe({field:b,aggregate:"max"})}])}else if(kt(v.bin)){if($n(e))return er(e==="bin-ordinal"?[]:[{data:Ap(y)?n.requestDataName(p):n.requestDataName(qt.Raw),field:n.vgField(i,xm(v,i)?{binSuffix:"range"}:{}),sort:y===!0||!Ee(y)?{field:n.vgField(i,{}),op:"min"}:y}]);{const{bin:b}=v;if(kt(b)){const S=vk(n,v.field,b);return er([new xn(()=>{const _=n.getSignalName(S);return`[${_}.start, ${_}.stop]`})])}else return er([{data:n.requestDataName(p),field:n.vgField(i,{})}])}}else if(v.timeUnit&&We(["time","utc"],e)){const b=r[ds(i)];if(nH(v,b,a,l)){const S=n.requestDataName(p),_=Cl({fieldDef:v,fieldDef2:b,markDef:a,config:l}),w=$p(s)&&_!==.5&&Jt(i);return er([{data:S,field:n.vgField(i,w?{suffix:Sx}:{})},{data:S,field:n.vgField(i,{suffix:w?Ex:"end"})}])}}return er(y?[{data:Ap(y)?n.requestDataName(p):n.requestDataName(qt.Raw),field:n.vgField(i),sort:y}]:[{data:n.requestDataName(p),field:n.vgField(i)}])}function C_(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":fx),...i?{field:jr(i)}:{},...r?{order:r}:{}}}function sEe(e,t){const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=e.fieldDef(t)?.bin,a=jP(i)?i:void 0,s=Sc(r)&&ix(r.extent)?r.extent:void 0;(a||s)&&n.set("selectionExtent",a??s,!0)}function oEe(e,t,n){if(!$n(n))return;const i=e.fieldDef(t),r=i.sort;if(eH(r))return{op:"min",field:_d(i,t),order:"ascending"};const{stack:a}=e,s=a?new Set([...a.groupbyFields,...a.stackBy.map(l=>l.fieldDef.field)]):void 0;if(Js(r)){const l=a&&!s.has(r.field);return C_(r,l)}else if(Kve(r)){const{encoding:l,order:c}=r,f=e.fieldDef(l),{aggregate:d,field:g}=f,p=a&&!s.has(g);if(ao(d)||Il(d))return C_({field:xe(f),order:c},p);if(vM(d)||!d)return C_({op:d,field:g,order:c},p)}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(We(["ascending",void 0],r))return!0}}function LF(e,t){const{aggregate:n,type:i}=e;return n?Se(n)&&!O1e.has(n)?{valid:!1,reason:wye(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:Aye(e)}:{valid:!0}:{valid:!1,reason:_ye(e)}}function aC(e,t,n,i){return e.explicit&&t.explicit&&me(kye(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function lEe(e){const t=Ba(e.map(s=>{if(Xs(s)){const{sort:l,...c}=s;return c}return s}),tt),n=Ba(e.map(s=>{if(Xs(s)){const l=s.sort;return l!==void 0&&!Ap(l)&&("op"in l&&l.op==="count"&&delete l.field,l.order==="ascending"&&delete l.order),l}}).filter(s=>s!==void 0),tt);if(t.length===0)return;if(t.length===1){const s=e[0];if(Xs(s)&&n.length>0){let l=n[0];if(n.length>1){me(Xz);const c=n.filter(f=>Ee(f)&&"op"in f&&f.op!=="min");n.every(f=>Ee(f)&&"op"in f)&&c.length===1?l=c[0]:l=!0}else if(Ee(l)&&"field"in l){const c=l.field;s.field===c&&(l=l.order?{order:l.order}:!0)}return{...s,sort:l}}return s}const i=Ba(n.map(s=>Ap(s)||!("op"in s)||Se(s.op)&&we($1e,s.op)?s:(me(Nye(s)),!0)),tt);let r;i.length===1?r=i[0]:i.length>1&&(me(Xz),r=!0);const a=Ba(e.map(s=>Xs(s)?s.data:null),s=>s);return a.length===1&&a[0]!==null?{data:a[0],fields:t.map(l=>l.field),...r?{sort:r}:{}}:{fields:t,...r?{sort:r}:{}}}function Ek(e){if(Xs(e)&&Se(e.field))return e.field;if(N1e(e)){let t;for(const n of e.fields)if(Xs(n)&&Se(n.field)){if(!t)t=n.field;else if(t!==n.field)return me(Dye),t}return me(Rye),t}else if(D1e(e)){me(zye);const t=e.fields[0];return Se(t)?t:void 0}}function Cx(e,t){const i=e.component.scales[t].get("domains").map(r=>(Xs(r)&&(r.data=e.lookupDataSource(r.data)),r));return lEe(i)}function ZG(e){return Zd(e)||_k(e)?e.children.reduce((t,n)=>t.concat(ZG(n)),UF(e)):UF(e)}function UF(e){return de(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:a,type:s,selectionExtent:l,domains:c,range:f,reverse:d,...g}=r,p=uEe(r.range,a,n,e),y=Cx(e,n),v=l?u2e(e,l,i,y):null;return t.push({name:a,type:s,...y?{domain:y}:{},...v?{domainRaw:v}:{},range:p,...d!==void 0?{reverse:d}:{},...g}),t},[])}function uEe(e,t,n,i){if(Jt(n)){if(Ec(e))return{step:{signal:`${t}_step`}}}else if(Ee(e)&&Xs(e))return{...e,data:i.lookupDataSource(e.data)};return e}class KG extends yo{merged=!1;constructor(t,n){super({},{name:t}),this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(We([Ln.LOG,Ln.TIME,Ln.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&We([Ln.LINEAR,Ln.SQRT,Ln.POW],t))return"definitely";const i=this.get("domains");if(i.length>0){let r=!1,a=!1,s=!1;for(const l of i){if(se(l)){const c=l[0],f=l[l.length-1];if(ut(c)&&ut(f))if(c<=0&&f>=0){r=!0;continue}else{a=!0;continue}}s=!0}if(r)return"definitely";if(a&&!s)return"definitely-not"}return"maybe"}}const cEe=["range","scheme"];function fEe(e){const t=e.component.scales;for(const n of yM){const i=t[n];if(!i)continue;const r=dEe(n,e);i.setWithExplicit("range",r)}}function BF(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:i,field:r}=n,a=qi(t),s=e.getName(a);if(Ee(i)&&i.binned&&i.step!==void 0)return new xn(()=>{const l=e.scaleName(t),c=`(domain("${l}")[1] - domain("${l}")[0]) / ${i.step}`;return`${e.getSignalName(s)} / (${c})`});if(kt(i)){const l=vk(e,r,i);return new xn(()=>{const c=e.getSignalName(l),f=`(${c}.stop - ${c}.start) / ${c}.step`;return`${e.getSignalName(s)} / (${f})`})}}}function dEe(e,t){const n=t.specifiedScales[e],{size:i}=t,a=t.getScaleComponent(e).get("type");for(const g of cEe)if(n[g]!==void 0){const p=BA(a,g),y=qP(e,g);if(!p)me(SP(a,g,e));else if(y)me(y);else switch(g){case"range":{const v=n.range;if(se(v)){if(Jt(e))return Ra(v.map(b=>{if(b==="width"||b==="height"){const S=t.getName(b),_=t.getSignalName.bind(t);return xn.fromName(_,S)}return b}))}else if(Ee(v))return Ra({data:t.requestDataName(qt.Main),field:v.field,sort:{op:"min",field:t.vgField(e)}});return Ra(v)}case"scheme":return Ra(hEe(n[g]))}}const s=e===Ut||e==="xOffset"?"width":"height",l=i[s];if(ts(l)){if(Jt(e))if($n(a)){const g=eY(l,t,e);if(g)return Ra({step:g})}else me(EP(s));else if(hm(e)){const g=e===Fl?"x":"y";if(t.getScaleComponent(g).get("type")==="band"){const v=tY(l,a);if(v)return Ra(v)}}}const{rangeMin:c,rangeMax:f}=n,d=gEe(e,t);return(c!==void 0||f!==void 0)&&BA(a,"rangeMin")&&se(d)&&d.length===2?Ra([c??d[0],f??d[1]]):er(d)}function hEe(e){return xve(e)?{scheme:e.name,...ur(e,["name"])}:{scheme:e}}function JG(e,t,n,{center:i}={}){const r=qi(e),a=t.getName(r),s=t.getSignalName.bind(t);return e===Mn&&ha(n)?i?[xn.fromName(l=>`${s(l)}/2`,a),xn.fromName(l=>`-${s(l)}/2`,a)]:[xn.fromName(s,a),0]:i?[xn.fromName(l=>`-${s(l)}/2`,a),xn.fromName(l=>`${s(l)}/2`,a)]:[0,xn.fromName(s,a)]}function gEe(e,t){const{size:n,config:i,mark:r,encoding:a}=t,{type:s}=gn(a[e]),c=t.getScaleComponent(e).get("type"),{domain:f,domainMid:d}=t.specifiedScales[e];switch(e){case Ut:case Mn:{if(We(["point","band"],c)){const g=nY(e,n,i.view);if(ts(g))return{step:eY(g,t,e)}}return JG(e,t,c)}case Fl:case Gd:return pEe(e,t,c);case ho:{const g=vEe(r,i),p=bEe(r,n,t,i);return md(c)?yEe(g,p,mEe(c,i,f,e)):[g,p]}case Pr:return[0,Math.PI*2];case bc:return[0,360];case Sa:return[0,new xn(()=>{const g=t.getSignalName(cr(t.parent)?"child_width":"width"),p=t.getSignalName(cr(t.parent)?"child_height":"height");return`min(${g},${p})/2`})];case Ll:return{step:1e3/i.scale.framesPerSecond};case jl:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case ql:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case ji:return"symbol";case Bi:case cs:case fs:return c==="ordinal"?s==="nominal"?"category":"ordinal":d!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case go:case Ul:case Bl:return[i.scale.minOpacity,i.scale.maxOpacity]}}function eY(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),a=hM(n),s=i[a];if(RH({step:e,offsetIsDiscrete:qe(s)&&DM(s.type)})==="offset"&&gH(i,a)){const c=t.getScaleComponent(a);let d=`domain('${t.scaleName(a)}').length`;if(c.get("type")==="band"){const p=c.get("paddingInner")??c.get("padding")??0,y=c.get("paddingOuter")??c.get("padding")??0;d=`bandspace(${d}, ${p}, ${y})`}const g=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${d} / (1-${U1e(g)})`}}else return e.step}function tY(e,t){if(RH({step:e,offsetIsDiscrete:$n(t)})==="offset")return{step:e.step}}function pEe(e,t,n){const i=e===Fl?"x":"y",r=t.getScaleComponent(i);if(!r)return JG(i,t,n,{center:!0});const a=r.get("type"),s=t.scaleName(i),{markDef:l,config:c}=t;if(a==="band"){const f=nY(i,t.size,t.config.view);if(ts(f)){const d=tY(f,n);if(d)return d}return[0,{signal:`bandwidth('${s}')`}]}else{const f=t.encoding[i];if(pe(f)&&f.timeUnit){const d=NP(f.timeUnit,v=>`scale('${s}', ${v})`),g=t.config.scale.bandWithNestedOffsetPaddingInner,p=Cl({fieldDef:f,markDef:l,config:c})-.5,y=p!==0?` + ${p}`:"";if(g){const v=Me(g)?`${g.signal}/2${y}`:`${g/2+p}`,b=Me(g)?`(1 - ${g.signal}/2)${y}`:`${1-g/2+p}`;return[{signal:`${v} * (${d})`},{signal:`${b} * (${d})`}]}return[0,{signal:d}]}return II(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function nY(e,t,n){const i=e===Ut?"width":"height",r=t[i];return r!==void 0?r:Av(n,i)}function mEe(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&se(n)?n.length+1:(me(Hye(i)),3)}}function yEe(e,t,n){const i=()=>{const r=sa(t),a=sa(e),s=`(${r} - ${a}) / (${n} - 1)`;return`sequence(${a}, ${r} + ${s}, ${s})`};return Me(t)?new xn(i):{signal:i()}}function vEe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(rx("size",e))}const jF=.95;function bEe(e,t,n,i){const r={x:BF(n,"x"),y:BF(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const a=qF(t,r,i.view);return ut(a)?a-1:new xn(()=>`${a.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const a=qF(t,r,i.view);return ut(a)?Math.pow(jF*a,2):new xn(()=>`pow(${jF} * ${a.signal}, 2)`)}}throw new Error(rx("size",e))}function qF(e,t,n){const i=ts(e.width)?e.width.step:PA(n,"width"),r=ts(e.height)?e.height.step:PA(n,"height");return t.x||t.y?new xn(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function iY(e,t){jt(e)?xEe(e,t):aY(e,t)}function xEe(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:a,specifiedScales:s}=e;for(const l of de(n)){const c=s[l],f=n[l],d=e.getScaleComponent(l),g=gn(r[l]),p=c[t],y=d.get("type"),v=d.get("padding"),b=d.get("paddingInner"),S=BA(y,t),_=qP(l,t);if(p!==void 0&&(S?_&&me(_):me(SP(y,t,l))),S&&_===void 0)if(p!==void 0){const w=g.timeUnit,A=g.type;switch(t){case"domainMax":case"domainMin":_c(c[t])||A==="temporal"||w?f.set(t,{signal:px(c[t],{type:A,timeUnit:w})},!0):f.set(t,c[t],!0);break;default:f.copyKeyFromObject(t,c)}}else{const w=he(IF,t)?IF[t]({model:e,channel:l,fieldOrDatumDef:g,scaleType:y,scalePadding:v,scalePaddingInner:b,domain:c.domain,domainMin:c.domainMin,domainMax:c.domainMax,markDef:a,config:i,hasNestedOffsetScale:pH(r,l),hasSecondaryRangeChannel:!!r[ds(l)]}):i.scale[t];w!==void 0&&f.set(t,w,!1)}}}const IF={bins:({model:e,fieldOrDatumDef:t})=>pe(t)?SEe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>EEe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:a})=>_Ee(e,t,n,i,r,a),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>wEe(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:a})=>AEe(e,t,n.type,i,r.scale,a),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:a})=>CEe(e,t,n,i,r.scale,a),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=pe(e)?e.sort:void 0;return $Ee(t,r,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:a,hasSecondaryRangeChannel:s})=>TEe(e,t,n,i,r,a.scale,s)};function rY(e){jt(e)?fEe(e):aY(e,"range")}function aY(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?rY(i):iY(i,t);for(const i of de(n)){let r;for(const a of e.children){const s=a.component.scales[i];if(s){const l=s.getWithExplicit(t);r=$l(r,l,t,"scale",VH((c,f)=>{switch(t){case"range":return c.step&&f.step?c.step-f.step:0}return 0}))}}n[i].setWithExplicit(t,r)}}function SEe(e,t){const n=t.bin;if(kt(n)){const i=vk(e,t.field,n);return new xn(()=>e.getSignalName(i))}else if(zn(n)&&Sc(n)&&n.step!==void 0)return{step:n.step}}function EEe(e,t){if(We([Bi,cs,fs],e)&&t!=="nominal")return"hcl"}function _Ee(e,t,n,i,r,a){if(!(pa(a)?.bin||se(n)||r!=null||i!=null||We([Ln.TIME,Ln.UTC],e)))return Jt(t)?!0:void 0}function wEe(e,t,n,i,r,a){if(Jt(e)){if(ja(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:l}=r;if(s==="bar"&&!(pe(i)&&(i.bin||i.timeUnit))&&(l==="vertical"&&e==="x"||l==="horizontal"&&e==="y"))return a.continuousBandSize}if(t===Ln.POINT)return n.pointPadding}}function AEe(e,t,n,i,r,a=!1){if(e===void 0){if(Jt(t)){const{bandPaddingInner:s,barBandPaddingInner:l,rectBandPaddingInner:c,tickBandPaddingInner:f,bandWithNestedOffsetPaddingInner:d}=r;return a?d:Kt(s,n==="bar"?l:n==="tick"?f:c)}else if(hm(t)&&i===Ln.BAND)return r.offsetBandPaddingInner}}function CEe(e,t,n,i,r,a=!1){if(e===void 0){if(Jt(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:l}=r;if(a)return l;if(n===Ln.BAND)return Kt(s,Me(i)?{signal:`${i.signal}/2`}:i/2)}else if(hm(t)){if(n===Ln.POINT)return .5;if(n===Ln.BAND)return r.offsetBandPaddingOuter}}}function $Ee(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return ha(e)&&t==="descending"?Me(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(ha(e)&&t==="descending")return!0}function TEe(e,t,n,i,r,a,s){if(!!n&&n!=="unaggregated"&&ha(r)){if(se(n)){const c=n[0],f=n[n.length-1];if(ut(c)&&c<=0&&ut(f)&&f>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!md(r))return!0;if(!(pe(t)&&t.bin)&&We([...po,...v1e],e)){const{orient:c,type:f}=i;return We(["bar","area","line","trail"],f)&&(c==="horizontal"&&e==="y"||c==="vertical"&&e==="x")?!1:We(["bar","area"],f)&&!s?!0:a?.zero}return!1}function MEe(e,t,n,i,r=!1){const a=kEe(t,n,i,r),{type:s}=e;return hs(t)?s!==void 0?$ve(t,s)?pe(n)&&!Cve(s,n.type)?(me(Tye(s,a)),a):s:(me($ye(t,s,a)),a):a:null}function kEe(e,t,n,i){switch(t.type){case"nominal":case"ordinal":{if(qf(e)||g_(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&me(p_(e,"ordinal")),"ordinal";if(h_(e))return"band";if(Jt(e)||hm(e)){if(We(["rect","bar","image","rule","tick"],n.type)||i)return"band"}else if(n.type==="arc"&&e in mM)return"band";const r=n[qi(e)];return ac(r)||vd(t)&&t.axis?.tickBand?"band":"point"}case"temporal":return qf(e)?"time":g_(e)==="discrete"?(me(p_(e,"temporal")),"ordinal"):pe(t)&&t.timeUnit&&Cn(t.timeUnit).utc?"utc":h_(e)?"band":"time";case"quantitative":return qf(e)?pe(t)&&kt(t.bin)?"bin-ordinal":"linear":g_(e)==="discrete"?(me(p_(e,"quantitative")),"ordinal"):h_(e)?"band":"linear";case"geojson":return}throw new Error(bP(t.type))}function OEe(e,{ignoreRange:t}={}){sY(e),QG(e);for(const n of Ave)iY(e,n);t||rY(e)}function sY(e){jt(e)?e.component.scales=NEe(e):e.component.scales=REe(e)}function NEe(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const a of yM){const s=gn(t[a]);if(s&&n===HP&&a===ji&&s.type===Yd)continue;let l=s&&s.scale;if(s&&l!==null&&l!==!1){l??={};const c=pH(t,a),f=MEe(l,a,s,i,c);r[a]=new KG(e.scaleName(`${a}`,!0),{value:f,explicit:l.type===f})}}return r}const DEe=VH((e,t)=>Wz(e)-Wz(t));function REe(e){const t=e.component.scales={},n={},i=e.component.resolve;for(const r of e.children){sY(r);for(const a of de(r.component.scales))if(i.scale[a]??=LG(a,e),i.scale[a]==="shared"){const s=n[a],l=r.component.scales[a].getWithExplicit("type");s?pve(s.value,l.value)?n[a]=$l(s,l,"type","scale",DEe):(i.scale[a]="independent",delete n[a]):n[a]=l}}for(const r of de(n)){const a=e.scaleName(r,!0),s=n[r];t[r]=new KG(a,s);for(const l of e.children){const c=l.component.scales[r];c&&(l.renameScale(c.get("name"),a),c.merged=!0)}}return t}class $_{nameMap;constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function jt(e){return e?.type==="unit"}function cr(e){return e?.type==="facet"}function _k(e){return e?.type==="concat"}function Zd(e){return e?.type==="layer"}class wk{type;parent;config;name;size;title;description;data;transforms;layout;scaleNameMap;projectionNameMap;signalNameMap;component;view;constructor(t,n,i,r,a,s,l){this.type=n,this.parent=i,this.config=a,this.parent=i,this.config=a,this.view=Fn(l),this.name=t.name??r,this.title=Zo(t.title)?{text:t.title}:t.title?Fn(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new $_,this.projectionNameMap=i?i.projectionNameMap:new $_,this.signalNameMap=i?i.signalNameMap:new $_,this.data=t.data,this.description=t.description,this.transforms=jxe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:Hbe(t,n,a),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:dx(t)||i?.component.data.isFaceted&&t.data===void 0},layoutSize:new yo,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?Be(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){OEe(this)}parseProjection(){XG(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){IG(this)}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const a of de(i)){const s=i[a];s!==void 0&&(r[a]=Rt(s))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Rt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Mt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,a=tSe(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...a?{titleBand:a}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of Nr)t[i].title&&n.push(W2e(this,i));for(const i of gk)n=n.concat(Q2e(this,i));return n}assembleAxes(){return F2e(this.component.axes,this.config)}assembleLegends(){return HG(this)}assembleProjections(){return wSe(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...cP(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return We(["unit","layer"],this.type)?We(["middle",void 0],i.anchor)&&(i.frame??="group"):i.anchor??="start",Mt(i)?void 0:i}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||cr(this.parent)?ZG(this):[];r.length>0&&(n.scales=r);const a=this.assembleAxes();a.length>0&&(n.axes=a);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return Lt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(qt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(cr(this.parent)){const n=zG(t),i=tx(n),r=this.component.scales[i];if(r&&!r.merged){const a=r.get("type"),s=r.get("range");if($n(a)&&Ec(s)){const l=r.get("name"),c=Cx(this,i),f=Ek(c);if(f){const d=xe({aggregate:"distinct",field:f},{expr:"datum"});return{signal:RG(l,r,d)}}else return me(xM(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(nP(t)&&hs(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(P1e(n));return i}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}}class oY extends wk{vgField(t,n={}){const i=this.fieldDef(t);if(i)return xe(i,n)}reduceFieldDef(t,n){return bbe(this.getMapping(),(i,r,a)=>{const s=pa(r);return s?t(i,s,a):i},n)}forEachFieldDef(t,n){WM(this.getMapping(),(i,r)=>{const a=pa(i);a&&t(a,r)},n)}}class $x extends Et{transform;clone(){return new $x(null,Be(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Be(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];const r=this.transform.resolve??"shared";this.transform.resolve=r}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${tt(this.transform)}`}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return i.resolve=this.transform.resolve,i}}class Tx extends Et{transform;clone(){return new Tx(null,Be(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Be(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${tt(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class Mx extends Et{transform;clone(){return new Mx(this.parent,Be(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Be(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((a,s)=>r[s]??a)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${tt(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class kx extends Et{transform;clone(){return new kx(null,Be(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Be(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${tt(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Hf extends Et{fields;geojson;signal;clone(){return new Hf(null,Be(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[_a,Ea],[qr,wa]]){const a=r.map(s=>{const l=gn(n.encoding[s]);return pe(l)?l.field:gs(l)?{expr:`${l.datum}`}:ga(l)?{expr:`${l.value}`}:void 0});(a[0]||a[1])&&(t=new Hf(t,a,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(ji)){const r=n.typedFieldDef(ji);r.type===Yd&&(t=new Hf(t,null,r.field,n.getName(`geojson_${i++}`)))}return t}constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}dependentFields(){const t=(this.fields??[]).filter(Se);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${tt(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Mp extends Et{projection;fields;as;clone(){return new Mp(null,this.projection,Be(this.fields),Be(this.as))}constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[_a,Ea],[qr,wa]]){const r=i.map(s=>{const l=gn(n.encoding[s]);return pe(l)?l.field:gs(l)?{expr:`${l.datum}`}:ga(l)?{expr:`${l.value}`}:void 0}),a=i[0]===qr?"2":"";(r[0]||r[1])&&(t=new Mp(t,n.projectionName(),r,[n.getName(`x${a}`),n.getName(`y${a}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Se))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${tt(this.fields)} ${tt(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class ju extends Et{transform;clone(){return new ju(null,Be(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new ju(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,a=i.y;if(pe(r)&&pe(a)){const s=r.impute?r:a.impute?a:void 0;if(s===void 0)return;const l=r.impute?a:a.impute?r:void 0,{method:c,value:f,frame:d,keyvals:g}=s.impute,p=vH(n.mark,i);return new ju(t,{impute:s.field,key:l.field,...c?{method:c}:{},...f!==void 0?{value:f}:{},...d?{frame:d}:{},...g!==void 0?{keyvals:g}:{},...p.length?{groupby:p}:{}})}return null}hash(){return`Impute ${tt(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:a,value:s,frame:l=[null,null]}=this.transform,c={type:"impute",field:t,key:n,...i?{keyvals:Sxe(i)?this.processSequence(i):i}:{},method:"value",...a?{groupby:a}:{},value:!r||r==="value"?s:null};if(r&&r!=="value"){const f={type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:l,ignorePeers:!1,...a?{groupby:a}:{}},d={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[c,f,d]}else return[c]}}class Ox extends Et{transform;clone(){return new Ox(null,Be(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Be(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${tt(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class kp extends Et{transform;secondary;clone(){return new kp(null,Be(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,r){const a=n.component.data.sources,{from:s}=i;let l=null;if(Exe(s)){let c=cY(s.data,a);c||(c=new uc(s.data),a.push(c));const f=n.getName(`lookup_${r}`);l=new zi(c,f,qt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[f]=l}else if(_xe(s)){const c=s.param;i={as:c,...i};let f;try{f=n.getSelectionComponent(Lt(c),c)}catch{throw new Error(X1e(c))}if(l=f.materialized,!l)throw new Error(V1e(c))}return new kp(t,i,l.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?_e(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${tt({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:_e(this.transform.as)}:{}};else{let n=this.transform.as;Se(n)||(me(aye),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class Nx extends Et{transform;clone(){return new Nx(null,Be(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Be(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${tt(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class Dx extends Et{transform;clone(){return new Dx(null,Be(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Be(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${tt(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class Rx extends Et{transform;clone(){return new Rx(null,Be(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ba((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${tt(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:a}=this.transform;return{type:"pivot",field:t,value:n,...r!==void 0?{limit:r}:{},...a!==void 0?{op:a}:{},...i!==void 0?{groupby:i}:{}}}}class zx extends Et{transform;clone(){return new zx(null,Be(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${tt(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function lY(e){let t=0;function n(i,r){if(i instanceof uc&&!i.isGenerator&&!xd(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof Kn&&(i.parent instanceof uc&&!r.source?(r.format={...r.format,parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof Wd){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return}switch((i instanceof _m||i instanceof wm||i instanceof Ad||i instanceof Vd||i instanceof Ed||i instanceof Mp||i instanceof ua||i instanceof kp||i instanceof Qd||i instanceof $c||i instanceof kx||i instanceof Mx||i instanceof $x||i instanceof Ox||i instanceof Nx||i instanceof Dx||i instanceof Tl||i instanceof zx||i instanceof Rx||i instanceof Tx)&&r.transform.push(i.assemble()),(i instanceof Ya||i instanceof Ha||i instanceof ju||i instanceof to||i instanceof Hf)&&r.transform.push(...i.assemble()),i instanceof zi&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof zi?i.setSource(r.name):(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof zi&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let a=r.name;!r.source||r.transform.length>0?e.push(r):a=r.source;for(const s of i.children)n(s,{name:null,source:a,transform:[]});break}}}return n}function zEe(e){const t=[],n=lY(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function FEe(e,t){const n=[],i=lY(n);let r=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${r++}`);const l=s.assemble();i(s,l)}for(const s of n)s.transform.length===0&&delete s.transform;let a=0;for(const[s,l]of n.entries())(l.transform??[]).length===0&&!l.source&&n.splice(a++,0,n.splice(s,1)[0]);for(const s of n)for(const l of s.transform??[])l.type==="lookup"&&(l.from=e.outputNodes[l.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function LEe(e){return e==="top"||e==="left"||Me(e)?"header":"footer"}function UEe(e){for(const t of Nr)BEe(e,t);PF(e,"x"),PF(e,"y")}function BEe(e,t){const{facet:n,config:i,child:r,component:a}=e;if(e.channelHasField(t)){const s=n[t],l=wd("title",null,i,t);let c=If(s,i,{allowDisabling:!0,includeDefault:l===void 0||!!l});r.component.layoutHeaders[t].title&&(c=se(c)?c.join(", "):c,c+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const f=wd("labelOrient",s.header,i,t),d=s.header!==null?Kt(s.header?.labels,i.header.labels,!0):!1,g=We(["bottom","right"],f)?"footer":"header";a.layoutHeaders[t]={title:s.header!==null?c:null,facetFieldDef:s,[g]:t==="facet"?[]:[uY(e,t,d)]}}}function uY(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function PF(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=yk(r,t),r.axis[t]==="shared"){const a=t==="x"?"column":"row",s=i[a];for(const l of n.component.axes[t]){const c=LEe(l.get("orient"));s[c]??=[uY(e,a,!1)];const f=jg(l,"main",e.config,{header:!0});f&&s[c][0].axes.push(f),l.mainExtracted=!0}}}}function jEe(e){Ak(e),Mv(e,"width"),Mv(e,"height")}function qEe(e){Ak(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";Mv(e,t),Mv(e,n)}function Ak(e){for(const t of e.children)t.parseLayoutSize()}function Mv(e,t){const n=zG(t),i=tx(n),r=e.component.resolve,a=e.component.layoutSize;let s;for(const l of e.children){const c=l.component.layoutSize.getWithExplicit(n),f=r.scale[i]??LG(i,e);if(f==="independent"&&c.value==="step"){s=void 0;break}if(s){if(f==="independent"&&s.value!==c.value){s=void 0;break}s=$l(s,c,n,"")}else s=c}if(s){for(const l of e.children)e.renameSignal(l.getName(n),e.getName(t)),l.component.layoutSize.set(n,"merged",!1);a.setWithExplicit(t,s)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function IEe(e){const{size:t,component:n}=e;for(const i of po){const r=qi(i);if(t[r]!=null&&t[r]!=null){const a=t[r];n.layoutSize.set(r,ts(a)?"step":a,!0)}else{const a=PEe(e,r);n.layoutSize.set(r,a,!1)}}}function PEe(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const a=r.get("type"),s=r.get("range");if($n(a)){const l=Av(i.view,t);return Ec(s)||ts(l)?"step":l}else return IA(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return IA(i.view,t);{const a=Av(i.view,t);return ts(a)?a.step:a}}}function sC(e,t,n){return xe(t,{suffix:`by_${xe(e)}`,...n})}class tp extends oY{facet;child;children;constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=kk(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!ym(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=de(t),i={};for(const r of n){if(![Zs,Ks].includes(r)){me(rx(r,"facet"));break}const a=t[r];if(a.field===void 0){me(LA(a,r));break}i[r]=this.initFacetFieldDef(a,r)}return i}initFacetFieldDef(t,n){const i=VM(t,n);return i.header?i.header=Fn(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return he(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=Fx(this),this.child.parseData()}parseLayoutSize(){Ak(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,ln(this.component.selection).some(t=>Ga(t))&&EM(SM)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),UEe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Nr)for(const i of pk){const r=this.component.layoutHeaders[n],a=r[i],{facetFieldDef:s}=r;if(s){const l=wd("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(l)){const c=wx(n,l);t.titleAnchor??={},t.titleAnchor[c]="end"}}if(a?.[0]){const l=n==="row"?"height":"width",c=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(l)&&(t[c]??={},t[c][n]=.5),r.title&&(t.offset??={},t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof tp))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof tp?{...this.channelHasField("column")?{encode:{update:{columns:{field:xe(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof tp){if(this.child.channelHasField("column")){const r=xe(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of po){const a=this.child.component.scales[r];if(a&&!a.merged){const s=a.get("type"),l=a.get("range");if($n(s)&&Ec(l)){const c=Cx(this.child,r),f=Ek(c);f?(t.push(f),n.push("distinct"),i.push(`distinct_${f}`)):me(xM(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:a,ops:s,as:l}=this.getCardinalityAggregateForChild(),c=[];for(const d of Nr){const g=this.facet[d];if(g){c.push(xe(g));const{bin:p,sort:y}=g;if(kt(p)&&c.push(xe(g,{binSuffix:"end"})),Js(y)){const{field:v,op:b=fx}=y,S=sC(g,y);i&&r?(a.push(S),s.push("max"),l.push(S)):(a.push(v),s.push(b),l.push(S))}else if(se(y)){const v=_d(g,d);a.push(v),s.push("max"),l.push(v)}}}const f=!!i&&!!r;return{name:t,data:n,groupby:c,...f||a.length>0?{aggregate:{...f?{cross:f}:{},...a.length?{fields:a,ops:s,as:l}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?Js(i.sort)?[sC(i,i.sort,{expr:"datum"})]:se(i.sort)?[_d(i,t,{expr:"datum"})]:[xe(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(Js(r)?r.order:!se(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return JA(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const r of gk)if(t[r]){const a=wd("labelOrient",t[r]?.header,n,r);if(i[r].includes(a))return JA(t[r],r,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=zEe(n),r=t.assembleGroupEncodeEntry(!1),a=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...a?{title:a}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:Nr.map(c=>this.facetSortFields(c)).flat(),order:Nr.map(c=>this.facetSortOrder(c)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup(a2e(this,[]))}]}getMapping(){return this.facet}}function HEe(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const a of[n,i])if(Js(a.sort)){const{field:s,op:l=fx}=a.sort;e=r=new $c(e,{joinaggregate:[{op:l,field:s,as:sC(a,a.sort,{forAs:!0})}],groupby:[xe(a)]})}return r}return null}function cY(e,t){for(const n of t){const i=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,a=i.format?.feature;if(r&&a)continue;const s=e.format?.feature;if((s||a)&&s!==a)continue;const l=i.format?.mesh;if(!((r||l)&&r!==l)){if(Tp(e)&&Tp(i)){if(ar(e.values,i.values))return n}else if(xd(e)&&xd(i)){if(e.url===i.url)return n}else if(WH(e)&&e.name===n.dataName)return n}}return null}function GEe(e,t){if(e.data||!e.parent){if(e.data===null){const i=new uc({values:[]});return t.push(i),i}const n=cY(e.data,t);if(n)return hl(e.data)||(n.data.format=PI({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new uc(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function YEe(e,t,n){let i=0;for(const r of t.transforms){let a,s;if(Dxe(r))s=e=new Ed(e,r),a="derived";else if(sk(r)){const l=LSe(r);s=e=Kn.makeWithAncestors(e,{},l,n)??e,e=new Vd(e,t,r.filter)}else if(HH(r))s=e=Ya.makeFromTransform(e,r,t),a="number";else if(zxe(r))a="date",n.getWithExplicit(r.field).value===void 0&&(e=new Kn(e,{[r.field]:a}),n.set(r.field,a,!1)),s=e=Ha.makeFromTransform(e,r);else if(Fxe(r))s=e=ua.makeFromTransform(e,r),a="number",hk(t)&&(e=new Tl(e));else if(PH(r))s=e=kp.make(e,t,r,i++),a="derived";else if(kxe(r))s=e=new Qd(e,r),a="number";else if(Oxe(r))s=e=new $c(e,r),a="number";else if(Lxe(r))s=e=to.makeFromTransform(e,r),a="derived";else if(Uxe(r))s=e=new kx(e,r),a="derived";else if(Bxe(r))s=e=new Tx(e,r),a="derived";else if(Nxe(r))s=e=new Mx(e,r),a="derived";else if(wxe(r))s=e=new Rx(e,r),a="derived";else if(Mxe(r))e=new zx(e,r);else if(Rxe(r))s=e=ju.makeFromTransform(e,r),a="derived";else if(Axe(r))s=e=new $x(e,r),a="derived";else if(Cxe(r))s=e=new Nx(e,r),a="derived";else if($xe(r))s=e=new Dx(e,r),a="derived";else if(Txe(r))s=e=new Ox(e,r),a="derived";else{me(rye(r));continue}if(s&&a!==void 0)for(const l of s.producedFields()??[])n.set(l,a,!1)}return e}function Fx(e){let t=GEe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,s=!(r&&(hl(r)||xd(r)||Tp(r)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Zxe;hl(r)?(QH(r)?t=new wm(t,r.sequence):ok(r)&&(t=new _m(t,r.graticule)),s.parseNothing=!0):r?.format?.parse===null&&(s.parseNothing=!0),t=Kn.makeExplicit(t,e,s)??t,t=new Tl(t);const l=e.parent&&Zd(e.parent);(jt(e)||cr(e))&&l&&(t=Ya.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=YEe(t,e,s));const c=BSe(e),f=USe(e);t=Kn.makeWithAncestors(t,{},{...c,...f},s)??t,jt(e)&&(t=Hf.parseAll(t,e),t=Mp.parseAll(t,e)),(jt(e)||cr(e))&&(l||(t=Ya.makeFromEncoding(t,e)??t),t=Ha.makeFromEncoding(t,e)??t,t=Ed.parseAllForSortIndex(t,e));const d=t=S1(qt.Raw,e,t);if(jt(e)){const S=ua.makeFromEncoding(t,e);S&&(t=S,hk(e)&&(t=new Tl(t))),t=ju.makeFromEncoding(t,e)??t,t=to.makeFromEncoding(t,e)??t}let g,p;if(jt(e)){const{markDef:S,mark:_,config:w}=e,A=mt("invalid",S,w),{marks:$,scales:M}=p=KH({invalid:A,isPath:Pl(_)});$!==M&&M==="include-invalid-values"&&(g=t=S1(qt.PreFilterInvalid,e,t)),$==="exclude-invalid-values"&&(t=Ad.make(t,e,p)??t)}const y=t=S1(qt.Main,e,t);let v;if(jt(e)&&p){const{marks:S,scales:_}=p;S==="include-invalid-values"&&_==="exclude-invalid-values"&&(t=Ad.make(t,e,p)??t,v=t=S1(qt.PostFilterInvalid,e,t))}jt(e)&&R2e(e,y);let b=null;if(cr(e)){const S=e.getName("facet");t=HEe(t,e.facet)??t,b=new Wd(t,e,S,y.getSource()),n[S]=b}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:d,main:y,facetRoot:b,ancestorParse:s,preFilterInvalid:g,postFilterInvalid:v}}function S1(e,t,n){const{outputNodes:i,outputNodeRefCounts:r}=t.component.data,a=t.getDataName(e),s=new zi(n,a,e,r);return i[a]=s,s}class XEe extends wk{children;constructor(t,n,i,r){super(t,"concat",n,i,r,t.resolve),(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&me(tye),this.children=this.getChildren(t).map((a,s)=>kk(a,this,this.getName(`concat_${s}`),void 0,r))}parseData(){this.component.data=Fx(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of de(t.component.selection))this.component.selection[n]=t.component.selection[n]}ln(this.component.selection).some(t=>Ga(t))&&EM(SM)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return vx(t)?t.vconcat:rk(t)?t.hconcat:t.concat}parseLayoutSize(){qEe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=mk(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function VEe(e){return e===!1||e===null}const WEe={disable:1,gridScale:1,scale:1,...dH,labelExpr:1,encode:1},fY=de(WEe);class Ck extends yo{explicit;implicit;mainExtracted;constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new Ck(Be(this.explicit),Be(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!VEe(this.get(t))}hasOrientSignalRef(){return Me(this.explicit.orient)}}function QEe(e,t,n){const{encoding:i,config:r}=e,a=gn(i[t])??gn(i[ds(t)]),s=e.axis(t)||{},{format:l,formatType:c}=s;if(sc(c))return{text:oa({fieldOrDatumDef:a,field:"datum.value",format:l,formatType:c,config:r}),...n};if(l===void 0&&c===void 0&&r.customFormatTypes){if(yd(a)==="quantitative"){if(vd(a)&&a.stack==="normalize"&&r.normalizedNumberFormatType)return{text:oa({fieldOrDatumDef:a,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:oa({fieldOrDatumDef:a,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if(yd(a)==="temporal"&&r.timeFormatType&&pe(a)&&!a.timeUnit)return{text:oa({fieldOrDatumDef:a,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}function ZEe(e){return po.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[r_e(n,e)]),t),{})}const KEe={bottom:"top",top:"bottom",left:"right",right:"left"};function JEe(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const a of de(r.component.axes))n.axis[a]=yk(e.component.resolve,a),n.axis[a]==="shared"&&(t[a]=e_e(t[a],r.component.axes[a]),t[a]||(n.axis[a]="independent",delete t[a]))}for(const r of po){for(const a of e.children)if(a.component.axes[r]){if(n.axis[r]==="independent"){t[r]=(t[r]??[]).concat(a.component.axes[r]);for(const s of a.component.axes[r]){const{value:l,explicit:c}=s.getWithExplicit("orient");if(!Me(l)){if(i[l]>0&&!c){const f=KEe[l];i[l]>i[f]&&s.set("orient",f,!1)}i[l]++}}}delete a.component.axes[r]}if(n.axis[r]==="independent"&&t[r]&&t[r].length>1)for(const[a,s]of(t[r]||[]).entries())a>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function e_e(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],a=t[i];if(!!r!=!!a)return;if(r&&a){const s=r.getWithExplicit("orient"),l=a.getWithExplicit("orient");if(s.explicit&&l.explicit&&s.value!==l.value)return;e[i]=t_e(r,a)}}}else return t.map(n=>n.clone());return e}function t_e(e,t){for(const n of fY){const i=$l(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,a)=>{switch(n){case"title":return yP(r,a);case"gridScale":return{explicit:r.explicit,value:Kt(r.value,a.value)}}return xx(r,a,n,"axis")});e.setWithExplicit(n,i)}return e}function n_e(e,t,n,i,r){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Me(n.labelAngle)?n.labelAngle:Cp(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===kG(i,r))return!0}return e===n[t]}const i_e=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function r_e(e,t){let n=t.axis(e);const i=new Ck,r=gn(t.encoding[e]),{mark:a,config:s}=t,l=n?.orient||s[e==="x"?"axisX":"axisY"]?.orient||s.axis?.orient||H2e(e),c=t.getScaleComponent(e).get("type"),f=L2e(e,c,l,t.config),d=n!==void 0?!n:ZA("disable",s.style,n?.style,f).configValue;if(i.set("disable",d,n!==void 0),d)return i;n=n||{};const g=q2e(r,n,e,s.style,f),p=KP(n.formatType,r,c),y=ZP(r,r.type,n.format,n.formatType,s,!0),v={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:c,orient:l,labelAngle:g,format:y,formatType:p,mark:a,config:s};for(const _ of fY){const w=_ in MF?MF[_](v):nF(_)?n[_]:void 0,A=w!==void 0,$=n_e(w,_,n,t,e);if(A&&$)i.set(_,w,$);else{const{configValue:M=void 0,configFrom:k=void 0}=nF(_)&&_!=="values"?ZA(_,s.style,n.style,f):{},T=M!==void 0;A&&!T?i.set(_,w,$):(k!=="vgAxisConfig"||i_e.has(_)&&T||Sm(M)||Me(M))&&i.set(_,M,!1)}}const b=n.encoding??{},S=fH.reduce((_,w)=>{if(!i.hasAxisPart(w))return _;const A=FG(b[w]??{},t),$=w==="labels"?QEe(t,e,A):A;return $!==void 0&&!Mt($)&&(_[w]={update:$}),_},{});return Mt(S)||i.set("encode",S,!!n.encoding||n.labelAngle!==void 0),i}function a_e({encoding:e,size:t}){for(const n of po){const i=qi(n);ts(t[i])&&ol(e[n])&&(delete t[i],me(EP(i)))}return t}const s_e={vgMark:"arc",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...pi("x",e,{defaultPos:"mid"}),...pi("y",e,{defaultPos:"mid"}),...so(e,"radius"),...so(e,"theta")})},o_e={vgMark:"area",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...Cv("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...Cv("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...dk(e)})},l_e={vgMark:"rect",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...so(e,"x"),...so(e,"y")})},u_e={vgMark:"shape",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&pe(n)&&n.type===Yd?{field:xe(n,{expr:"datum"})}:{}}]}},c_e={vgMark:"image",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...so(e,"x"),...so(e,"y"),...uk(e,"url")})},f_e={vgMark:"line",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...pi("x",e,{defaultPos:"mid"}),...pi("y",e,{defaultPos:"mid"}),...Un("size",e,{vgChannel:"strokeWidth"}),...dk(e)})},d_e={vgMark:"trail",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...pi("x",e,{defaultPos:"mid"}),...pi("y",e,{defaultPos:"mid"}),...Un("size",e),...dk(e)})};function $k(e,t){const{config:n}=e;return{...Hr(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...pi("x",e,{defaultPos:"mid"}),...pi("y",e,{defaultPos:"mid"}),...Un("size",e),...Un("angle",e),...h_e(e,n,t)}}function h_e(e,t,n){return n?{shape:{value:n}}:Un("shape",e)}const g_e={vgMark:"symbol",encodeEntry:e=>$k(e)},p_e={vgMark:"symbol",encodeEntry:e=>$k(e,"circle")},m_e={vgMark:"symbol",encodeEntry:e=>$k(e,"square")},y_e={vgMark:"rect",encodeEntry:e=>({...Hr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...so(e,"x"),...so(e,"y")})},v_e={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Hr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Cv("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...Cv("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Un("size",e,{vgChannel:"strokeWidth"})}}},b_e={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Hr(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...pi("x",e,{defaultPos:"mid"}),...pi("y",e,{defaultPos:"mid"}),...uk(e),...Un("size",e,{vgChannel:"fontSize"}),...Un("angle",e),...AF("align",x_e(e.markDef,n,t)),...AF("baseline",S_e(e.markDef,n,t)),...pi("radius",e,{defaultPos:null}),...pi("theta",e,{defaultPos:null})}}};function x_e(e,t,n){if(mt("align",e,n)===void 0)return"center"}function S_e(e,t,n){if(mt("baseline",e,n)===void 0)return"middle"}const E_e={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"x":"y",a=i==="horizontal"?"y":"x",s=i==="horizontal"?"height":"width";return{...Hr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...so(e,r),...pi(a,e,{defaultPos:"mid",vgChannel:a==="y"?"yc":"xc"}),[s]:Rt(mt("thickness",n,t))}}},E1={arc:s_e,area:o_e,bar:l_e,circle:p_e,geoshape:u_e,image:c_e,line:f_e,point:g_e,rect:y_e,rule:v_e,square:m_e,text:b_e,tick:E_e,trail:d_e};function __e(e){if(We([ux,ox,Ove],e.mark)){const t=vH(e.mark,e.encoding);if(t.length>0)return w_e(e,t)}else if(e.mark===lx){const t=zA.some(n=>mt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return A_e(e)}return Tk(e)}const HF="faceted_path_";function w_e(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:HF+e.requestDataName(qt.Main),data:e.requestDataName(qt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Tk(e,{fromPrefix:HF})}]}const GF="stack_group_";function A_e(e){const[t]=Tk(e,{fromPrefix:GF}),n=e.scaleName(e.stack.fieldChannel),i=(f={})=>e.vgField(e.stack.fieldChannel,f),r=(f,d)=>{const g=[i({prefix:"min",suffix:"start",expr:d}),i({prefix:"max",suffix:"start",expr:d}),i({prefix:"min",suffix:"end",expr:d}),i({prefix:"max",suffix:"end",expr:d})];return`${f}(${g.map(p=>`scale('${n}',${p})`).join(",")})`};let a,s;e.stack.fieldChannel==="x"?(a={...fd(t.encode.update,["y","yc","y2","height",...zA]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ur(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(a={...fd(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ur(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const f of zA){const d=Ja(f,e.markDef,e.config);t.encode.update[f]?(a[f]=t.encode.update[f],delete t.encode.update[f]):d&&(a[f]=Rt(d)),d&&(t.encode.update[f]={value:0})}const l=[];if(e.stack.groupbyChannels?.length>0)for(const f of e.stack.groupbyChannels){const d=e.fieldDef(f),g=xe(d);g&&l.push(g),(d?.bin||d?.timeUnit)&&l.push(xe(d,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((f,d)=>{if(t.encode.update[d])return{...f,[d]:t.encode.update[d]};{const g=Ja(d,e.markDef,e.config);return g!==void 0?{...f,[d]:Rt(g)}:f}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(qt.Main),name:GF+e.requestDataName(qt.Main),groupby:l,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function C_e(e){const{encoding:t,stack:n,mark:i,markDef:r,config:a}=e,s=t.order;if(!(!se(s)&&ga(s)&&DA(s.value)||!s&&DA(mt("order",r,a)))){if((se(s)||pe(s))&&!n)return gP(s,{expr:"datum"});if(Pl(i)){const l=r.orient==="horizontal"?"y":"x",c=t[l];if(pe(c))return{field:l}}}}function Tk(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:a}=e,s=Kt(i.clip,$_e(e),T_e(e)),l=dP(i),c=r.key,f=C_e(e),d=M_e(e);d&&Object.values(e.component.selection).some(y=>y.type==="point"&&!y.bind&&y.on!=="pointerover")&&(e.markDef.cursor??="pointer");const g=mt("aria",i,a),p=E1[n].postEncodingTransform?E1[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:E1[n].vgMark,...s?{clip:s}:{},...l?{style:l}:{},...c?{key:c.field}:{},...f?{sort:f}:{},...d||{},...g===!1?{aria:g}:{},from:{data:t.fromPrefix+e.requestDataName(qt.Main)},encode:{update:E1[n].encodeEntry(e)},...p?{transform:p}:{}}]}function $_e(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0}function T_e(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function M_e(e){if(!e.component.selection)return null;const t=de(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=de(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class dY extends oY{markDef;encoding;specifiedScales={};stack;specifiedAxes={};specifiedLegends={};specifiedProjection={};selection=[];children=[];constructor(t,n,i,r={},a){super(t,"unit",n,i,a,void 0,rF(t)?t.view:void 0);const s=es(t.mark)?{...t.mark}:{type:t.mark},l=s.type;s.filled===void 0&&(s.filled=hxe(s,a,{graticule:t.data&&ok(t.data)}));const c=this.encoding=ybe(t.encoding||{},l,s.filled,a);this.markDef=BH(s,c,a),this.size=a_e({encoding:c,size:rF(t)?{...r,...t.width!==void 0?{width:t.width}:{},...t.height!==void 0?{height:t.height}:{}}:r}),this.stack=UH(this.markDef,c),this.specifiedScales=this.initScales(l,c),this.specifiedAxes=this.initAxes(c),this.specifiedLegends=this.initLegends(c),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(f=>nk(f)),this.alignStackOrderWithColorDomain()}get hasProjection(){const{encoding:t}=this,n=this.mark===HP,i=t&&u1e.some(r=>qe(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return yM.reduce((i,r)=>{const a=gn(n[r]);return a&&(i[r]=this.initScale(a.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=Fn(t);return se(n)&&(r.domain=n.map(ir)),se(i)&&(r.range=i.map(ir)),r}initAxes(t){return po.reduce((n,i)=>{const r=t[i];if(qe(r)||i===Ut&&qe(t.x2)||i===Mn&&qe(t.y2)){const a=qe(r)?r.axis:void 0;n[i]=a&&this.initAxis({...a})}return n},{})}initAxis(t){const n=de(t),i={};for(const r of n){const a=t[r];i[r]=Sm(a)?fP(a):ir(a)}return i}initLegends(t){return x1e.reduce((n,i)=>{const r=gn(t[i]);if(r&&E1e(i)){const a=r.legend;n[i]=a&&Fn(a)}return n},{})}alignStackOrderWithColorDomain(){const{color:t,fill:n,order:i,xOffset:r,yOffset:a}=this.encoding,s=n||t,l=pe(s)?s:void 0,c=l?.field,f=l?.scale,d=l?.type,g=f?.domain,p=r||a,y=pe(p)?p:void 0,v=`_${c}_sort_index`;if(!i&&Array.isArray(g)&&typeof c=="string"&&d==="nominal")if(y&&!y.sort)y.sort=g;else{if(!this.stack)return;const b=`indexof(${ye(g)}, datum['${c}'])`,S=this.markDef?.orient==="horizontal"?"ascending":"descending";this.transforms.push({calculate:b,as:v}),this.encoding.order={field:v,type:"quantitative",sort:S}}}parseData(){this.component.data=Fx(this)}parseLayoutSize(){IEe(this)}parseSelections(){this.component.selection=D2e(this,this.selection)}parseMarkGroup(){this.component.mark=__e(this)}parseAxesAndHeaders(){this.component.axes=ZEe(this)}assembleSelectionTopLevelSignals(t){return s2e(this,t)}assembleSignals(){return[...$G(this),...r2e(this,[])]}assembleSelectionData(t){return o2e(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return mk(this)}correctDataNames=t=>(t.from?.data&&(t.from.data=this.lookupDataSource(t.from.data),"time"in this.encoding&&(t.from.data=t.from.data+eG)),t.from?.facet?.data&&(t.from.facet.data=this.lookupDataSource(t.from.facet.data)),t);assembleMarks(){let t=this.component.mark??[];return(!this.parent||!Zd(this.parent))&&(t=rG(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Uu(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return pa(n)}typedFieldDef(t){const n=this.fieldDef(t);return xi(n)?n:null}}class Mk extends wk{children;constructor(t,n,i,r,a){super(t,"layer",n,i,a,t.resolve,t.view);const s={...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((l,c)=>{if(bx(l))return new Mk(l,this,this.getName(`layer_${c}`),s,a);if(mo(l))return new dY(l,this,this.getName(`layer_${c}`),s,a);throw new Error(bM(l))})}parseData(){this.component.data=Fx(this);for(const t of this.children)t.parseData()}parseLayoutSize(){jEe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of de(t.component.selection))this.component.selection[n]=t.component.selection[n]}ln(this.component.selection).some(t=>Ga(t))&&EM(SM)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){JEe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),$G(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),mk(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of _e(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return l2e(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),HG(this))}}function kk(e,t,n,i,r){if(dx(e))return new tp(e,t,n,r);if(bx(e))return new Mk(e,t,n,i,r);if(mo(e))return new dY(e,t,n,i,r);if(qbe(e))return new XEe(e,t,n,r);throw new Error(bM(e))}function k_e(e,t={}){t.logger&&Gye(t.logger),t.fieldTitle&&lH(t.fieldTitle);try{const n=LH($d(t.config,e.config)),i=XH(e,n),r=kk(i,null,"",void 0,n);return r.parse(),eEe(r.component.data,r),{spec:N_e(r,O_e(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&Yye(),t.fieldTitle&&lbe()}}function O_e(e,t,n,i){const r=i.component.layoutSize.get("width"),a=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):Se(t)&&(t={type:t}),r&&a&&Vxe(t.type)){if(r==="step"&&a==="step")me(Iz()),t.type="pad";else if(r==="step"||a==="step"){const s=r==="step"?"width":"height";me(Iz(tx(s)));const l=s==="width"?"height":"width";t.type=Wxe(l)}}return{...de(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...mF(n,!1),...mF(e,!0)}}function N_e(e,t,n={},i){const r=e.config?txe(e.config):void 0,a=FEe(e.component.data,n),s=e.assembleSelectionData(a),l=e.assembleProjections(),c=e.assembleTitle(),f=e.assembleGroupStyle(),d=e.assembleGroupEncodeEntry(!0);let g=e.assembleLayoutSignals();g=g.filter(v=>(v.name==="width"||v.name==="height")&&v.value!==void 0?(t[v.name]=+v.value,!1):!0);const{params:p,...y}=t;return{$schema:"https://vega.github.io/schema/vega/v6.json",...e.description?{description:e.description}:{},...y,...c?{title:c}:{},...f?{style:f}:{},...d?{encode:{update:d}}:{},data:s,...l.length>0?{projections:l}:{},...e.assembleGroup([...g,...e.assembleSelectionTopLevelSignals([]),...DH(p)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const D_e=i1e.version,R_e=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:hd,accessPathWithDatum:uM,accessWithDatumToUnescapedPath:xt,compile:k_e,contains:We,deepEqual:ar,deleteNestedProperty:mv,duplicate:Be,entries:wl,every:sM,fieldIntersection:lM,flatAccessWithDatum:GI,getFirstDefined:Kt,hasIntersection:oM,hasProperty:he,hash:tt,internalField:WI,isBoolean:Ap,isEmpty:Mt,isEqual:a1e,isInternalField:QI,isNullOrFalse:DA,isNumeric:Wb,keys:de,logicalExpr:Jg,mergeDeep:PI,never:II,normalize:XH,normalizeAngle:Cp,omit:ur,pick:fd,prefixGenerator:RA,removePathFromField:Hd,replaceAll:ec,replacePathInField:jr,resetIdCounter:o1e,setEqual:HI,some:dd,stringify:yt,titleCase:cm,unescapeSingleQuoteAndPathDot:YI,unique:Ba,uniqueId:VI,vals:ln,varName:Lt,version:D_e},Symbol.toStringTag,{value:"Module"}));function hY(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var z_e="3.0.0",F_e={version:z_e};const wf="#fff",YF="#888",L_e={background:"#333",view:{stroke:YF},title:{color:wf,subtitleColor:wf},style:{"guide-label":{fill:wf},"guide-title":{fill:wf}},axis:{domainColor:wf,gridColor:YF,tickColor:wf}},du="#4572a7",U_e={background:"#fff",arc:{fill:du},area:{fill:du},line:{stroke:du,strokeWidth:2},path:{stroke:du},rect:{fill:du},shape:{stroke:du},symbol:{fill:du,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},hu="#30a2da",T_="#cbcbcb",B_e="#999",j_e="#333",XF="#f0f0f0",VF="#333",q_e={arc:{fill:hu},area:{fill:hu},axis:{domainColor:T_,grid:!0,gridColor:T_,gridWidth:1,labelColor:B_e,labelFontSize:10,titleColor:j_e,tickColor:T_,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:XF,group:{fill:XF},legend:{labelColor:VF,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:VF,titleFontSize:14,titlePadding:10},line:{stroke:hu,strokeWidth:2},path:{stroke:hu,strokeWidth:.5},rect:{fill:hu},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:hu},bar:{binSpacing:2,fill:hu,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},gu="#000",I_e={group:{fill:"#e5e5e5"},arc:{fill:gu},area:{fill:gu},line:{stroke:gu},path:{stroke:gu},rect:{fill:gu},shape:{stroke:gu},symbol:{fill:gu,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},P_e=22,H_e="normal",WF="Benton Gothic, sans-serif",QF=11.5,G_e="normal",pu="#82c6df",M_="Benton Gothic Bold, sans-serif",ZF="normal",KF=13,pg={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},Y_e={background:"#ffffff",title:{anchor:"start",color:"#000000",font:M_,fontSize:P_e,fontWeight:H_e},arc:{fill:pu},area:{fill:pu},line:{stroke:pu,strokeWidth:2},path:{stroke:pu},rect:{fill:pu},shape:{stroke:pu},symbol:{fill:pu,size:30},axis:{labelFont:WF,labelFontSize:QF,labelFontWeight:G_e,titleFont:M_,titleFontSize:KF,titleFontWeight:ZF},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:WF,labelFontSize:QF,symbolType:"square",titleFont:M_,titleFontSize:KF,titleFontWeight:ZF},range:{category:pg["category-6"],diverging:pg["fireandice-6"],heatmap:pg["fire-7"],ordinal:pg["fire-7"],ramp:pg["fire-7"]}},mu="#ab5787",_1="#979797",X_e={background:"#f9f9f9",arc:{fill:mu},area:{fill:mu},line:{stroke:mu},path:{stroke:mu},rect:{fill:mu},shape:{stroke:mu},symbol:{fill:mu,size:30},axis:{domainColor:_1,domainWidth:.5,gridWidth:.2,labelColor:_1,tickColor:_1,tickWidth:.2,titleColor:_1},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},yu="#3e5c69",V_e={background:"#fff",arc:{fill:yu},area:{fill:yu},line:{stroke:yu},path:{stroke:yu},rect:{fill:yu},shape:{stroke:yu},symbol:{fill:yu},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Cr="#1696d2",JF="#000000",W_e="#FFFFFF",w1="Lato",k_="Lato",Q_e="Lato",Z_e="#DEDDDD",K_e=18,mg={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},J_e={background:W_e,title:{anchor:"start",fontSize:K_e,font:w1},axisX:{domain:!0,domainColor:JF,domainWidth:1,grid:!1,labelFontSize:12,labelFont:k_,labelAngle:0,tickColor:JF,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:w1},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Z_e,gridWidth:1,labelFontSize:12,labelFont:k_,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:w1,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:k_,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:w1,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:mg["six-groups-cat-1"],diverging:mg["diverging-colors"],heatmap:mg["diverging-colors"],ordinal:mg["six-groups-seq"],ramp:mg["shades-blue"]},area:{fill:Cr},rect:{fill:Cr},line:{color:Cr,stroke:Cr,strokeWidth:5},trail:{color:Cr,stroke:Cr,strokeWidth:0,size:1},path:{stroke:Cr,strokeWidth:.5},point:{filled:!0},text:{font:Q_e,color:Cr,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Cr,stroke:null}},arc:{fill:Cr},shape:{stroke:Cr},symbol:{fill:Cr,size:30}},vu="#3366CC",e8="#ccc",A1="Arial, sans-serif",ewe={arc:{fill:vu},area:{fill:vu},path:{stroke:vu},rect:{fill:vu},shape:{stroke:vu},symbol:{stroke:vu},circle:{fill:vu},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:A1,fontSize:12},"guide-title":{font:A1,fontSize:12},"group-title":{font:A1,fontSize:12}},title:{font:A1,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:e8,tickColor:e8,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Ok=e=>e*(1/3+1),t8=Ok(9),n8=Ok(10),i8=Ok(12),yg="Segoe UI",r8="wf_standard-font, helvetica, arial, sans-serif",a8="#252423",vg="#605E5C",s8="transparent",twe="#C8C6C4",Zr="#118DFF",nwe="#12239E",iwe="#E66C37",rwe="#6B007B",awe="#E044A7",swe="#744EC2",owe="#D9B300",lwe="#D64550",gY=Zr,pY="#DEEFFF",o8=[pY,gY],uwe=[pY,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",gY],cwe={view:{stroke:s8},background:s8,font:yg,header:{titleFont:r8,titleFontSize:i8,titleColor:a8,labelFont:yg,labelFontSize:n8,labelColor:vg},axis:{ticks:!1,grid:!1,domain:!1,labelColor:vg,labelFontSize:t8,titleFont:r8,titleColor:a8,titleFontSize:i8,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:twe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Zr},line:{stroke:Zr,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:yg,fontSize:t8,fill:vg},arc:{fill:Zr},area:{fill:Zr,line:!0,opacity:.6},path:{stroke:Zr},rect:{fill:Zr},point:{fill:Zr,filled:!0,size:75},shape:{stroke:Zr},symbol:{fill:Zr,strokeWidth:1.5,size:50},legend:{titleFont:yg,titleFontWeight:"bold",titleColor:vg,labelFont:yg,labelFontSize:n8,labelColor:vg,symbolType:"circle",symbolSize:75},range:{category:[Zr,nwe,iwe,rwe,awe,swe,owe,lwe],diverging:o8,heatmap:o8,ordinal:uwe}},O_='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',fwe='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',N_=400,C1={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},dwe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],hwe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function Lx({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",i=C1.gridBg[e],r=C1.textPrimary[e],a=C1.textSecondary[e],s=n==="dark"?dwe:hwe,l=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:l},area:{fill:l},path:{stroke:l},rect:{fill:l},shape:{stroke:l},symbol:{stroke:l},circle:{fill:l},view:{fill:i,stroke:i},group:{fill:i},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:O_,fontWeight:600},axis:{labelColor:a,labelFontSize:12,labelFont:fwe,labelFontWeight:N_,titleColor:r,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:C1.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:O_,fill:a,fontWeight:N_},"guide-title":{font:O_,fill:a,fontWeight:N_}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const gwe=Lx({theme:"white",background:"#ffffff"}),pwe=Lx({theme:"g10",background:"#f4f4f4"}),mwe=Lx({theme:"g90",background:"#262626"}),ywe=Lx({theme:"g100",background:"#161616"}),vwe=F_e.version,bwe=Object.freeze(Object.defineProperty({__proto__:null,carbong10:pwe,carbong100:ywe,carbong90:mwe,carbonwhite:gwe,dark:L_e,excel:U_e,fivethirtyeight:q_e,ggplot2:I_e,googlecharts:ewe,latimes:Y_e,powerbi:cwe,quartz:X_e,urbaninstitute:J_e,version:vwe,vox:V_e},Symbol.toStringTag,{value:"Module"}));function xwe(e,t,n,i){if(se(e))return`[${e.map(r=>t(Se(r)?r:l8(r,n))).join(", ")}]`;if(Ee(e)){let r="";const{title:a,image:s,...l}=e;a&&(r+=`<h2>${t(a)}</h2>`),s&&(r+=`<img src="${new URL(t(s),i||location.href).href}">`);const c=Object.keys(l);if(c.length>0){r+="<table>";for(const f of c){let d=l[f];d!==void 0&&(Ee(d)&&(d=l8(d,n)),r+=`<tr><td class="key">${t(f)}</td><td class="value">${t(d)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function Swe(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function l8(e,t){return JSON.stringify(e,Swe(t))}var Ewe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const mY="vg-tooltip-element",_we={offsetX:10,offsetY:10,id:mY,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:wwe,maxDepth:2,formatTooltip:xwe,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function wwe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Awe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Ewe.toString().replaceAll(mY,e)}function yY(e,t,{offsetX:n,offsetY:i}){const r=vY({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,i),a=["bottom-right","bottom-left","top-right","top-left"];for(const s of a)if(bY(r[s],t))return r[s];return r["top-left"]}function Cwe(e,t,n,i,r){const{position:a,offsetX:s,offsetY:l}=r,c=e._el.getBoundingClientRect(),f=e._origin,d=$we(c,f,n),g=vY(d,i,s,l),p=Array.isArray(a)?a:[a];for(const y of p)if(bY(g[y],i)&&!Twe(t,g[y],i))return g[y];return yY(t,i,r)}function $we(e,t,n){const i=n.isVoronoi?n.datum.bounds:n.bounds;let r=e.left+t[0]+i.x1,a=e.top+t[1]+i.y1,s=n;for(;s.mark.group;)s=s.mark.group,r+=s.x??0,a+=s.y??0;const l=i.x2-i.x1,c=i.y2-i.y1;return{x1:r,x2:r+l,y1:a,y2:a+c}}function vY(e,t,n,i){const r=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,s=e.x1-t.width-n,l=r-t.width/2,c=e.x2+n,f=e.y1-t.height-i,d=a-t.height/2,g=e.y2+i;return{top:{x:l,y:f},bottom:{x:l,y:g},left:{x:s,y:d},right:{x:c,y:d},"top-left":{x:s,y:f},"top-right":{x:c,y:f},"bottom-left":{x:s,y:g},"bottom-right":{x:c,y:g}}}function bY(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function Twe(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class Mwe{call;options;el;constructor(t){this.options={..._we,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=Awe(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:s}=this.options.anchor==="mark"?Cwe(t,n,i,this.el.getBoundingClientRect(),this.options):yY(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${s}px`,this.el.style.left=`${a}px`}}var D_={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var kwe=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}})(),Owe=Object.prototype.hasOwnProperty;function oC(e,t){return Owe.call(e,t)}function lC(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)oC(e,r)&&i.push(r);return i}function sr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function uC(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function Su(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function xY(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function cC(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(cC(e[t]))return!0}else if(typeof e=="object"){for(var i=lC(e),r=i.length,a=0;a<r;a++)if(cC(e[i[a]]))return!0}}return!1}function u8(e,t){var n=[e];for(var i in t){var r=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var SY=(function(e){kwe(t,e);function t(n,i,r,a,s){var l=this.constructor,c=e.call(this,u8(n,{name:i,index:r,operation:a,tree:s}))||this;return c.name=i,c.index=r,c.operation=a,c.tree=s,Object.setPrototypeOf(c,l.prototype),c.message=u8(n,{name:i,index:r,operation:a,tree:s}),c}return t})(Error),Yt=SY,Nwe=sr,Rf={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=kv(n,this.path);i&&(i=sr(i));var r=qu(n,{op:"remove",path:this.from}).removed;return qu(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=kv(n,this.from);return qu(n,{op:"add",path:this.path,value:sr(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Op(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Dwe={add:function(e,t,n){return uC(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:Rf.move,copy:Rf.copy,test:Rf.test,_get:Rf._get};function kv(e,t){if(t=="")return e;var n={op:"_get",path:t};return qu(e,n),n.value}function qu(e,t,n,i,r,a){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(t,0,e,t.path):Ov(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=kv(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=Op(e,t.value),s.test===!1)throw new Yt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Yt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return s}}else{i||(e=sr(e));var l=t.path||"",c=l.split("/"),f=e,d=1,g=c.length,p=void 0,y=void 0,v=void 0;for(typeof n=="function"?v=n:v=Ov;;){if(y=c[d],y&&y.indexOf("~")!=-1&&(y=xY(y)),r&&(y=="__proto__"||y=="prototype"&&d>0&&c[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(f[y]===void 0?p=c.slice(0,d).join("/"):d==g-1&&(p=t.path),p!==void 0&&v(t,0,e,p)),d++,Array.isArray(f)){if(y==="-")y=f.length;else{if(n&&!uC(y))throw new Yt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);uC(y)&&(y=~~y)}if(d>=g){if(n&&t.op==="add"&&y>f.length)throw new Yt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);var s=Dwe[t.op].call(t,f,y,e);if(s.test===!1)throw new Yt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}}else if(d>=g){var s=Rf[t.op].call(t,f,y,e);if(s.test===!1)throw new Yt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}if(f=f[y],n&&d<g&&(!f||typeof f!="object"))throw new Yt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function Ux(e,t,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(t))throw new Yt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=sr(e));for(var a=new Array(t.length),s=0,l=t.length;s<l;s++)a[s]=qu(e,t[s],n,!0,r,s),e=a[s].newDocument;return a.newDocument=e,a}function Rwe(e,t,n){var i=qu(e,t);if(i.test===!1)throw new Yt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function Ov(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new Yt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Rf[e.op]){if(typeof e.path!="string")throw new Yt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Yt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Yt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Yt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&cC(e.value))throw new Yt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var r=e.path.split("/").length,a=i.split("/").length;if(r!==a+1&&r!==a)throw new Yt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new Yt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},l=EY([s],n);if(l&&l.name==="OPERATION_PATH_UNRESOLVABLE")throw new Yt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Yt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function EY(e,t,n){try{if(!Array.isArray(e))throw new Yt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Ux(sr(t),sr(e),n||!0);else{n=n||Ov;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof Yt)return r;throw r}}function Op(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),r,a,s;if(n&&i){if(a=e.length,a!=t.length)return!1;for(r=a;r--!==0;)if(!Op(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var l=Object.keys(e);if(a=l.length,a!==Object.keys(t).length)return!1;for(r=a;r--!==0;)if(!t.hasOwnProperty(l[r]))return!1;for(r=a;r--!==0;)if(s=l[r],!Op(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}var zwe=Object.freeze({__proto__:null,JsonPatchError:Yt,_areEquals:Op,applyOperation:qu,applyPatch:Ux,applyReducer:Rwe,deepClone:Nwe,getValueByPointer:kv,validate:EY,validator:Ov});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Nk=new WeakMap,Fwe=(function(){function e(t){this.observers=new Map,this.obj=t}return e})(),Lwe=(function(){function e(t,n){this.callback=t,this.observer=n}return e})();function Uwe(e){return Nk.get(e)}function Bwe(e,t){return e.observers.get(t)}function jwe(e,t){e.observers.delete(t.callback)}function qwe(e,t){t.unobserve()}function Iwe(e,t){var n=[],i,r=Uwe(e);if(!r)r=new Fwe(e),Nk.set(e,r);else{var a=Bwe(r,t);i=a&&a.observer}if(i)return i;if(i={},r.value=sr(e),t){i.callback=t,i.next=null;var s=function(){fC(i)},l=function(){clearTimeout(i.next),i.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",l),window.addEventListener("keyup",l),window.addEventListener("mousedown",l),window.addEventListener("keydown",l),window.addEventListener("change",l))}return i.patches=n,i.object=e,i.unobserve=function(){fC(i),clearTimeout(i.next),jwe(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",l),window.removeEventListener("keyup",l),window.removeEventListener("mousedown",l),window.removeEventListener("keydown",l),window.removeEventListener("change",l))},r.observers.set(t,new Lwe(t,i)),i}function fC(e,t){t===void 0&&(t=!1);var n=Nk.get(e.object);Dk(n.value,e.object,e.patches,"",t),e.patches.length&&Ux(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function Dk(e,t,n,i,r){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=lC(t),s=lC(e),l=!1,c=s.length-1;c>=0;c--){var f=s[c],d=e[f];if(oC(t,f)&&!(t[f]===void 0&&d!==void 0&&Array.isArray(t)===!1)){var g=t[f];typeof d=="object"&&d!=null&&typeof g=="object"&&g!=null&&Array.isArray(d)===Array.isArray(g)?Dk(d,g,n,i+"/"+Su(f),r):d!==g&&(r&&n.push({op:"test",path:i+"/"+Su(f),value:sr(d)}),n.push({op:"replace",path:i+"/"+Su(f),value:sr(g)}))}else Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+Su(f),value:sr(d)}),n.push({op:"remove",path:i+"/"+Su(f)}),l=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!l&&a.length==s.length))for(var c=0;c<a.length;c++){var f=a[c];!oC(e,f)&&t[f]!==void 0&&n.push({op:"add",path:i+"/"+Su(f),value:sr(t[f])})}}}function Pwe(e,t,n){n===void 0&&(n=!1);var i=[];return Dk(e,t,i,"",n),i}var Hwe=Object.freeze({__proto__:null,compare:Pwe,generate:fC,observe:Iwe,unobserve:qwe});Object.assign({},zwe,Hwe,{JsonPatchError:SY,deepClone:sr,escapePathComponent:Su,unescapePathComponent:xY});function Gwe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var R_,c8;function Ywe(){if(c8)return R_;c8=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const i=this.map.get(n);if(i!==void 0)return this.map.delete(n),this.map.set(n,i),i}delete(n){return this.map.delete(n)}set(n,i){if(!this.delete(n)&&i!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(n,i)}return this}}return R_=e,R_}var z_,f8;function Rk(){if(f8)return z_;f8=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return z_=i=>i?typeof i!="object"?e:i:t,z_}var $1={exports:{}},F_,d8;function zk(){if(d8)return F_;d8=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,r=t-6;return F_={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:r,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},F_}var L_,h8;function Bx(){return h8||(h8=1,L_=typeof process=="object"&&D_&&D_.NODE_DEBUG&&/\bsemver\b/i.test(D_.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),L_}var g8;function Fk(){return g8||(g8=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=zk(),a=Bx();t=e.exports={};const s=t.re=[],l=t.safeRe=[],c=t.src=[],f=t.safeSrc=[],d=t.t={};let g=0;const p="[a-zA-Z0-9-]",y=[["\\s",1],["\\d",r],[p,i]],v=S=>{for(const[_,w]of y)S=S.split(`${_}*`).join(`${_}{0,${w}}`).split(`${_}+`).join(`${_}{1,${w}}`);return S},b=(S,_,w)=>{const A=v(_),$=g++;a(S,$,_),d[S]=$,c[$]=_,f[$]=A,s[$]=new RegExp(_,w?"g":void 0),l[$]=new RegExp(A,w?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*"),b("NUMERICIDENTIFIERLOOSE","\\d+"),b("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),b("MAINVERSION",`(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})`),b("MAINVERSIONLOOSE",`(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASEIDENTIFIER",`(?:${c[d.NONNUMERICIDENTIFIER]}|${c[d.NUMERICIDENTIFIER]})`),b("PRERELEASEIDENTIFIERLOOSE",`(?:${c[d.NONNUMERICIDENTIFIER]}|${c[d.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASE",`(?:-(${c[d.PRERELEASEIDENTIFIER]}(?:\\.${c[d.PRERELEASEIDENTIFIER]})*))`),b("PRERELEASELOOSE",`(?:-?(${c[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[d.PRERELEASEIDENTIFIERLOOSE]})*))`),b("BUILDIDENTIFIER",`${p}+`),b("BUILD",`(?:\\+(${c[d.BUILDIDENTIFIER]}(?:\\.${c[d.BUILDIDENTIFIER]})*))`),b("FULLPLAIN",`v?${c[d.MAINVERSION]}${c[d.PRERELEASE]}?${c[d.BUILD]}?`),b("FULL",`^${c[d.FULLPLAIN]}$`),b("LOOSEPLAIN",`[v=\\s]*${c[d.MAINVERSIONLOOSE]}${c[d.PRERELEASELOOSE]}?${c[d.BUILD]}?`),b("LOOSE",`^${c[d.LOOSEPLAIN]}$`),b("GTLT","((?:<|>)?=?)"),b("XRANGEIDENTIFIERLOOSE",`${c[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),b("XRANGEIDENTIFIER",`${c[d.NUMERICIDENTIFIER]}|x|X|\\*`),b("XRANGEPLAIN",`[v=\\s]*(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:${c[d.PRERELEASE]})?${c[d.BUILD]}?)?)?`),b("XRANGEPLAINLOOSE",`[v=\\s]*(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:${c[d.PRERELEASELOOSE]})?${c[d.BUILD]}?)?)?`),b("XRANGE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAIN]}$`),b("XRANGELOOSE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAINLOOSE]}$`),b("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),b("COERCE",`${c[d.COERCEPLAIN]}(?:$|[^\\d])`),b("COERCEFULL",c[d.COERCEPLAIN]+`(?:${c[d.PRERELEASE]})?(?:${c[d.BUILD]})?(?:$|[^\\d])`),b("COERCERTL",c[d.COERCE],!0),b("COERCERTLFULL",c[d.COERCEFULL],!0),b("LONETILDE","(?:~>?)"),b("TILDETRIM",`(\\s*)${c[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",b("TILDE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAIN]}$`),b("TILDELOOSE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAINLOOSE]}$`),b("LONECARET","(?:\\^)"),b("CARETTRIM",`(\\s*)${c[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",b("CARET",`^${c[d.LONECARET]}${c[d.XRANGEPLAIN]}$`),b("CARETLOOSE",`^${c[d.LONECARET]}${c[d.XRANGEPLAINLOOSE]}$`),b("COMPARATORLOOSE",`^${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]})$|^$`),b("COMPARATOR",`^${c[d.GTLT]}\\s*(${c[d.FULLPLAIN]})$|^$`),b("COMPARATORTRIM",`(\\s*)${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]}|${c[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",b("HYPHENRANGE",`^\\s*(${c[d.XRANGEPLAIN]})\\s+-\\s+(${c[d.XRANGEPLAIN]})\\s*$`),b("HYPHENRANGELOOSE",`^\\s*(${c[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[d.XRANGEPLAINLOOSE]})\\s*$`),b("STAR","(<|>)?=?\\s*\\*"),b("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),b("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})($1,$1.exports)),$1.exports}var U_,p8;function Xwe(){if(p8)return U_;p8=1;const e=/^[0-9]+$/,t=(i,r)=>{const a=e.test(i),s=e.test(r);return a&&s&&(i=+i,r=+r),i===r?0:a&&!s?-1:s&&!a?1:i<r?-1:1};return U_={compareIdentifiers:t,rcompareIdentifiers:(i,r)=>t(r,i)},U_}var B_,m8;function Lk(){if(m8)return B_;m8=1;const e=Bx(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=zk(),{safeRe:i,t:r}=Fk(),a=Rk(),{compareIdentifiers:s}=Xwe();class l{constructor(f,d){if(d=a(d),f instanceof l){if(f.loose===!!d.loose&&f.includePrerelease===!!d.includePrerelease)return f;f=f.version}else if(typeof f!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof f}".`);if(f.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",f,d),this.options=d,this.loose=!!d.loose,this.includePrerelease=!!d.includePrerelease;const g=f.trim().match(d.loose?i[r.LOOSE]:i[r.FULL]);if(!g)throw new TypeError(`Invalid Version: ${f}`);if(this.raw=f,this.major=+g[1],this.minor=+g[2],this.patch=+g[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");g[4]?this.prerelease=g[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const y=+p;if(y>=0&&y<n)return y}return p}):this.prerelease=[],this.build=g[5]?g[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(f){if(e("SemVer.compare",this.version,this.options,f),!(f instanceof l)){if(typeof f=="string"&&f===this.version)return 0;f=new l(f,this.options)}return f.version===this.version?0:this.compareMain(f)||this.comparePre(f)}compareMain(f){return f instanceof l||(f=new l(f,this.options)),s(this.major,f.major)||s(this.minor,f.minor)||s(this.patch,f.patch)}comparePre(f){if(f instanceof l||(f=new l(f,this.options)),this.prerelease.length&&!f.prerelease.length)return-1;if(!this.prerelease.length&&f.prerelease.length)return 1;if(!this.prerelease.length&&!f.prerelease.length)return 0;let d=0;do{const g=this.prerelease[d],p=f.prerelease[d];if(e("prerelease compare",d,g,p),g===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(g===void 0)return-1;if(g===p)continue;return s(g,p)}while(++d)}compareBuild(f){f instanceof l||(f=new l(f,this.options));let d=0;do{const g=this.build[d],p=f.build[d];if(e("build compare",d,g,p),g===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(g===void 0)return-1;if(g===p)continue;return s(g,p)}while(++d)}inc(f,d,g){if(f.startsWith("pre")){if(!d&&g===!1)throw new Error("invalid increment argument: identifier is empty");if(d){const p=`-${d}`.match(this.options.loose?i[r.PRERELEASELOOSE]:i[r.PRERELEASE]);if(!p||p[1]!==d)throw new Error(`invalid identifier: ${d}`)}}switch(f){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",d,g);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",d,g);break;case"prepatch":this.prerelease.length=0,this.inc("patch",d,g),this.inc("pre",d,g);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",d,g),this.inc("pre",d,g);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(g)?1:0;if(this.prerelease.length===0)this.prerelease=[p];else{let y=this.prerelease.length;for(;--y>=0;)typeof this.prerelease[y]=="number"&&(this.prerelease[y]++,y=-2);if(y===-1){if(d===this.prerelease.join(".")&&g===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(d){let y=[d,p];g===!1&&(y=[d]),s(this.prerelease[0],d)===0?isNaN(this.prerelease[1])&&(this.prerelease=y):this.prerelease=y}break}default:throw new Error(`invalid increment argument: ${f}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return B_=l,B_}var j_,y8;function Kd(){if(y8)return j_;y8=1;const e=Lk();return j_=(n,i,r)=>new e(n,r).compare(new e(i,r)),j_}var q_,v8;function Vwe(){if(v8)return q_;v8=1;const e=Kd();return q_=(n,i,r)=>e(n,i,r)===0,q_}var I_,b8;function Wwe(){if(b8)return I_;b8=1;const e=Kd();return I_=(n,i,r)=>e(n,i,r)!==0,I_}var P_,x8;function Qwe(){if(x8)return P_;x8=1;const e=Kd();return P_=(n,i,r)=>e(n,i,r)>0,P_}var H_,S8;function Zwe(){if(S8)return H_;S8=1;const e=Kd();return H_=(n,i,r)=>e(n,i,r)>=0,H_}var G_,E8;function Kwe(){if(E8)return G_;E8=1;const e=Kd();return G_=(n,i,r)=>e(n,i,r)<0,G_}var Y_,_8;function Jwe(){if(_8)return Y_;_8=1;const e=Kd();return Y_=(n,i,r)=>e(n,i,r)<=0,Y_}var X_,w8;function eAe(){if(w8)return X_;w8=1;const e=Vwe(),t=Wwe(),n=Qwe(),i=Zwe(),r=Kwe(),a=Jwe();return X_=(l,c,f,d)=>{switch(c){case"===":return typeof l=="object"&&(l=l.version),typeof f=="object"&&(f=f.version),l===f;case"!==":return typeof l=="object"&&(l=l.version),typeof f=="object"&&(f=f.version),l!==f;case"":case"=":case"==":return e(l,f,d);case"!=":return t(l,f,d);case">":return n(l,f,d);case">=":return i(l,f,d);case"<":return r(l,f,d);case"<=":return a(l,f,d);default:throw new TypeError(`Invalid operator: ${c}`)}},X_}var V_,A8;function tAe(){if(A8)return V_;A8=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,g){if(g=n(g),d instanceof t){if(d.loose===!!g.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),s("comparator",d,g),this.options=g,this.loose=!!g.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(d){const g=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],p=d.match(g);if(!p)throw new TypeError(`Invalid comparator: ${d}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new l(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(s("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new l(d,this.options)}catch{return!1}return a(d,this.operator,this.semver,this.options)}intersects(d,g){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(d.value,g).test(this.value):d.operator===""?d.value===""?!0:new c(this.value,g).test(d.semver):(g=n(g),g.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!g.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||a(this.semver,"<",d.semver,g)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||a(this.semver,">",d.semver,g)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}V_=t;const n=Rk(),{safeRe:i,t:r}=Fk(),a=eAe(),s=Bx(),l=Lk(),c=_Y();return V_}var W_,C8;function _Y(){if(C8)return W_;C8=1;const e=/\s+/g;class t{constructor(z,N){if(N=r(N),z instanceof t)return z.loose===!!N.loose&&z.includePrerelease===!!N.includePrerelease?z:new t(z.raw,N);if(z instanceof a)return this.raw=z.value,this.set=[[z]],this.formatted=void 0,this;if(this.options=N,this.loose=!!N.loose,this.includePrerelease=!!N.includePrerelease,this.raw=z.trim().replace(e," "),this.set=this.raw.split("||").map(j=>this.parseRange(j.trim())).filter(j=>j.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const j=this.set[0];if(this.set=this.set.filter(X=>!b(X[0])),this.set.length===0)this.set=[j];else if(this.set.length>1){for(const X of this.set)if(X.length===1&&S(X[0])){this.set=[X];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let z=0;z<this.set.length;z++){z>0&&(this.formatted+="||");const N=this.set[z];for(let j=0;j<N.length;j++)j>0&&(this.formatted+=" "),this.formatted+=N[j].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(z){const j=((this.options.includePrerelease&&y)|(this.options.loose&&v))+":"+z,X=i.get(j);if(X)return X;const K=this.options.loose,fe=K?c[f.HYPHENRANGELOOSE]:c[f.HYPHENRANGE];z=z.replace(fe,Q(this.options.includePrerelease)),s("hyphen replace",z),z=z.replace(c[f.COMPARATORTRIM],d),s("comparator trim",z),z=z.replace(c[f.TILDETRIM],g),s("tilde trim",z),z=z.replace(c[f.CARETTRIM],p),s("caret trim",z);let F=z.split(" ").map(J=>w(J,this.options)).join(" ").split(/\s+/).map(J=>U(J,this.options));K&&(F=F.filter(J=>(s("loose invalid filter",J,this.options),!!J.match(c[f.COMPARATORLOOSE])))),s("range list",F);const G=new Map,le=F.map(J=>new a(J,this.options));for(const J of le){if(b(J))return[J];G.set(J.value,J)}G.size>1&&G.has("")&&G.delete("");const I=[...G.values()];return i.set(j,I),I}intersects(z,N){if(!(z instanceof t))throw new TypeError("a Range is required");return this.set.some(j=>_(j,N)&&z.set.some(X=>_(X,N)&&j.every(K=>X.every(fe=>K.intersects(fe,N)))))}test(z){if(!z)return!1;if(typeof z=="string")try{z=new l(z,this.options)}catch{return!1}for(let N=0;N<this.set.length;N++)if(Y(this.set[N],z,this.options))return!0;return!1}}W_=t;const n=Ywe(),i=new n,r=Rk(),a=tAe(),s=Bx(),l=Lk(),{safeRe:c,t:f,comparatorTrimReplace:d,tildeTrimReplace:g,caretTrimReplace:p}=Fk(),{FLAG_INCLUDE_PRERELEASE:y,FLAG_LOOSE:v}=zk(),b=P=>P.value==="<0.0.0-0",S=P=>P.value==="",_=(P,z)=>{let N=!0;const j=P.slice();let X=j.pop();for(;N&&j.length;)N=j.every(K=>X.intersects(K,z)),X=j.pop();return N},w=(P,z)=>(s("comp",P,z),P=k(P,z),s("caret",P),P=$(P,z),s("tildes",P),P=D(P,z),s("xrange",P),P=B(P,z),s("stars",P),P),A=P=>!P||P.toLowerCase()==="x"||P==="*",$=(P,z)=>P.trim().split(/\s+/).map(N=>M(N,z)).join(" "),M=(P,z)=>{const N=z.loose?c[f.TILDELOOSE]:c[f.TILDE];return P.replace(N,(j,X,K,fe,F)=>{s("tilde",P,j,X,K,fe,F);let G;return A(X)?G="":A(K)?G=`>=${X}.0.0 <${+X+1}.0.0-0`:A(fe)?G=`>=${X}.${K}.0 <${X}.${+K+1}.0-0`:F?(s("replaceTilde pr",F),G=`>=${X}.${K}.${fe}-${F} <${X}.${+K+1}.0-0`):G=`>=${X}.${K}.${fe} <${X}.${+K+1}.0-0`,s("tilde return",G),G})},k=(P,z)=>P.trim().split(/\s+/).map(N=>T(N,z)).join(" "),T=(P,z)=>{s("caret",P,z);const N=z.loose?c[f.CARETLOOSE]:c[f.CARET],j=z.includePrerelease?"-0":"";return P.replace(N,(X,K,fe,F,G)=>{s("caret",P,X,K,fe,F,G);let le;return A(K)?le="":A(fe)?le=`>=${K}.0.0${j} <${+K+1}.0.0-0`:A(F)?K==="0"?le=`>=${K}.${fe}.0${j} <${K}.${+fe+1}.0-0`:le=`>=${K}.${fe}.0${j} <${+K+1}.0.0-0`:G?(s("replaceCaret pr",G),K==="0"?fe==="0"?le=`>=${K}.${fe}.${F}-${G} <${K}.${fe}.${+F+1}-0`:le=`>=${K}.${fe}.${F}-${G} <${K}.${+fe+1}.0-0`:le=`>=${K}.${fe}.${F}-${G} <${+K+1}.0.0-0`):(s("no pr"),K==="0"?fe==="0"?le=`>=${K}.${fe}.${F}${j} <${K}.${fe}.${+F+1}-0`:le=`>=${K}.${fe}.${F}${j} <${K}.${+fe+1}.0-0`:le=`>=${K}.${fe}.${F} <${+K+1}.0.0-0`),s("caret return",le),le})},D=(P,z)=>(s("replaceXRanges",P,z),P.split(/\s+/).map(N=>R(N,z)).join(" ")),R=(P,z)=>{P=P.trim();const N=z.loose?c[f.XRANGELOOSE]:c[f.XRANGE];return P.replace(N,(j,X,K,fe,F,G)=>{s("xRange",P,j,X,K,fe,F,G);const le=A(K),I=le||A(fe),J=I||A(F),ve=J;return X==="="&&ve&&(X=""),G=z.includePrerelease?"-0":"",le?X===">"||X==="<"?j="<0.0.0-0":j="*":X&&ve?(I&&(fe=0),F=0,X===">"?(X=">=",I?(K=+K+1,fe=0,F=0):(fe=+fe+1,F=0)):X==="<="&&(X="<",I?K=+K+1:fe=+fe+1),X==="<"&&(G="-0"),j=`${X+K}.${fe}.${F}${G}`):I?j=`>=${K}.0.0${G} <${+K+1}.0.0-0`:J&&(j=`>=${K}.${fe}.0${G} <${K}.${+fe+1}.0-0`),s("xRange return",j),j})},B=(P,z)=>(s("replaceStars",P,z),P.trim().replace(c[f.STAR],"")),U=(P,z)=>(s("replaceGTE0",P,z),P.trim().replace(c[z.includePrerelease?f.GTE0PRE:f.GTE0],"")),Q=P=>(z,N,j,X,K,fe,F,G,le,I,J,ve)=>(A(j)?N="":A(X)?N=`>=${j}.0.0${P?"-0":""}`:A(K)?N=`>=${j}.${X}.0${P?"-0":""}`:fe?N=`>=${N}`:N=`>=${N}${P?"-0":""}`,A(le)?G="":A(I)?G=`<${+le+1}.0.0-0`:A(J)?G=`<${le}.${+I+1}.0-0`:ve?G=`<=${le}.${I}.${J}-${ve}`:P?G=`<${le}.${I}.${+J+1}-0`:G=`<=${G}`,`${N} ${G}`.trim()),Y=(P,z,N)=>{for(let j=0;j<P.length;j++)if(!P[j].test(z))return!1;if(z.prerelease.length&&!N.includePrerelease){for(let j=0;j<P.length;j++)if(s(P[j].semver),P[j].semver!==a.ANY&&P[j].semver.prerelease.length>0){const X=P[j].semver;if(X.major===z.major&&X.minor===z.minor&&X.patch===z.patch)return!0}return!1}return!0};return W_}var Q_,$8;function nAe(){if($8)return Q_;$8=1;const e=_Y();return Q_=(n,i,r)=>{try{i=new e(i,r)}catch{return!1}return i.test(n)},Q_}var iAe=nAe(),wY=Gwe(iAe);function rAe(e,t,n){const i=e.open(t),r=250,{origin:a}=new URL(t);let s=40;function l(f){f.source===i&&(s=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function c(){s<=0||(i.postMessage(n,a),setTimeout(c,r),s-=1)}setTimeout(c,r)}var aAe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function AY(e,...t){for(const n of t)sAe(e,n);return e}function sAe(e,t){for(const n of Object.keys(t))Td(e,n,t[n],!0)}const Na=G0e;let Np=R_e;const T8=typeof window<"u"?window:void 0;Np===void 0&&T8?.vl?.compile&&(Np=T8.vl);const oAe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},lAe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},qg={vega:"Vega","vega-lite":"Vega-Lite"},Nv={vega:Na.version,"vega-lite":Np?Np.version:"not available"},uAe={vega:e=>e,"vega-lite":(e,t,n)=>Np.compile(e,{config:n,logger:t}).spec},cAe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,fAe="chart-wrapper";function dAe(e){return typeof e=="function"}function M8(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,a=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(r+e+a),s.document.title=`${qg[i]} JSON Source`}function hAe(e,t,n){if(e.$schema){const i=hY(e.$schema);n&&n!==i.library&&t.warn(`The given visualization spec is written in ${qg[i.library]}, but mode argument sets ${qg[n]??n}.`);const r=i.library;return wY(Nv[r],`^${i.version.slice(1)}`)||t.warn(`The input spec uses ${qg[r]} ${i.version}, but the current version of ${qg[r]} is v${Nv[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":n??"vega"}function CY(e){return!!(e&&"load"in e)}function k8(e){return CY(e)?e:Na.loader(e)}function gAe(e){const t=e.usermeta?.embedOptions??{};return Se(t.defaultStyle)&&(t.defaultStyle=!1),t}async function pAe(e,t,n={}){let i,r;Se(t)?(r=k8(n.loader),i=JSON.parse(await r.load(t))):i=t;const a=gAe(i),s=a.loader;(!r||s)&&(r=k8(n.loader??s));const l=await O8(a,r),c=await O8(n,r),f={...AY(c,l),config:$d(c.config??{},l.config??{})};return await yAe(e,i,f,r)}async function O8(e,t){const n=Se(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=Se(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...n?{config:n}:{}}}function mAe(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function yAe(e,t,n={},i){const r=n.theme?$d(bwe[n.theme],n.config??{}):n.config,a=Ml(n.actions)?n.actions:AY({},oAe,n.actions??{}),s={...lAe,...n.i18n},l=n.renderer??"svg",c=n.logger??Rv(Na.Warn);n.logLevel!==void 0&&c.level(n.logLevel);const f=n.downloadFileName??"visualization",d=typeof e=="string"?document.querySelector(e):e;if(!d)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const M="vega-embed-style",{root:k,rootContainer:T}=mAe(d);if(!k.getElementById(M)){const D=document.createElement("style");D.id=M,D.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?aAe.toString():n.defaultStyle,T.appendChild(D)}}const g=hAe(t,c,n.mode);let p=uAe[g](t,c,r);if(g==="vega-lite"&&p.$schema){const M=hY(p.$schema);wY(Nv.vega,`^${M.version.slice(1)}`)||c.warn(`The compiled spec uses Vega ${M.version}, but current version is v${Nv.vega}.`)}d.classList.add("vega-embed"),a&&d.classList.add("has-actions"),d.innerHTML="";let y=d;if(a){const M=document.createElement("div");M.classList.add(fAe),d.appendChild(M),y=M}const v=n.patch;if(v&&(p=v instanceof Function?v(p):Ux(p,v,!0,!1).newDocument),n.formatLocale&&Na.formatLocale(n.formatLocale),n.timeFormatLocale&&Na.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const M in n.expressionFunctions){const k=n.expressionFunctions[M];"fn"in k?Na.expressionFunction(M,k.fn,k.visitor):k instanceof Function&&Na.expressionFunction(M,k)}const{ast:b}=n,S=Na.parse(p,g==="vega-lite"?{}:r,{ast:b}),_=new(n.viewClass||Na.View)(S,{loader:i,logger:c,renderer:l,...b?{expr:Na.expressionInterpreter??n.expr??t1e}:{}});if(_.addSignalListener("autosize",(M,k)=>{const{type:T}=k;T=="fit-x"?(y.classList.add("fit-x"),y.classList.remove("fit-y")):T=="fit-y"?(y.classList.remove("fit-x"),y.classList.add("fit-y")):T=="fit"?y.classList.add("fit-x","fit-y"):y.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:M,tooltip:k}=n,T=M&&!CY(M)?M?.baseURL:void 0,D=dAe(k)?k:new Mwe({baseURL:T,...k===!0?{}:k}).call;_.tooltip(D)}let{hover:w}=n;if(w===void 0&&(w=g==="vega"),w){const{hoverSet:M,updateSet:k}=typeof w=="boolean"?{}:w;_.hover(M,k)}n&&(n.width!=null&&_.width(n.width),n.height!=null&&_.height(n.height),n.padding!=null&&_.padding(n.padding)),await _.initialize(y,n.bind).runAsync();let A;if(a!==!1){let M=d;if(n.defaultStyle!==!1||n.forceActionsMenu){const T=document.createElement("details");T.title=s.CLICK_TO_VIEW_ACTIONS,d.append(T),M=T;const D=document.createElement("summary");D.innerHTML=cAe,T.append(D),A=R=>{T.contains(R.target)||T.removeAttribute("open")},document.addEventListener("click",A)}const k=document.createElement("div");if(M.append(k),k.classList.add("vega-actions"),a===!0||a.export!==!1){for(const T of["svg","png"])if(a===!0||a.export===!0||a.export[T]){const D=s[`${T.toUpperCase()}_ACTION`],R=document.createElement("a"),B=Ee(n.scaleFactor)?n.scaleFactor[T]:n.scaleFactor;R.text=D,R.href="#",R.target="_blank",R.download=`${f}.${T}`,R.addEventListener("mousedown",async function(U){U.preventDefault();const Q=await _.toImageURL(T,B);this.href=Q}),k.append(R)}}if(a===!0||a.source!==!1){const T=document.createElement("a");T.text=s.SOURCE_ACTION,T.href="#",T.addEventListener("click",function(D){M8(oE(t),n.sourceHeader??"",n.sourceFooter??"",g),D.preventDefault()}),k.append(T)}if(g==="vega-lite"&&(a===!0||a.compiled!==!1)){const T=document.createElement("a");T.text=s.COMPILED_ACTION,T.href="#",T.addEventListener("click",function(D){M8(oE(p),n.sourceHeader??"",n.sourceFooter??"","vega"),D.preventDefault()}),k.append(T)}if(a===!0||a.editor!==!1){const T=n.editorUrl??"https://vega.github.io/editor/",D=document.createElement("a");D.text=s.EDITOR_ACTION,D.href="#",D.addEventListener("click",function(R){rAe(window,T,{config:r,mode:v?"vega":g,renderer:l,spec:oE(v?p:t)}),R.preventDefault()}),k.append(D)}}function $(){A&&document.removeEventListener("click",A),_.finalize()}return{view:_,spec:t,vgSpec:p,finalize:$,embedOptions:n}}function vAe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var N8,D8;function bAe(){return D8||(D8=1,N8=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var i,r,a;if(Array.isArray(t)){if(i=t.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),i=a.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[r]))return!1;for(r=i;r--!==0;){var s=a[r];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n}),N8}var xAe=bAe();const SAe=vAe(xAe);function EAe(e){const[t,n]=Ou.useState(null),{ref:i,spec:r,onEmbed:a,onError:s,options:l={}}=e;return _Ae(()=>{let c=!1,f=null;return(async()=>{if(!(!i.current||c))try{if(f=await pAe(i.current,r,l),c){f.finalize();return}n(f),a?.(f)}catch(d){console.error(`[react-vega] Error creating view: ${d}`),s?.(d)}})(),()=>{c=!0,f?.finalize()}},[r,l]),t}function _Ae(e,t){const n=Ou.useRef(null),i=Ou.useRef(0);(!n.current||!SAe(t,n.current))&&(i.current+=1),n.current=t,Ou.useEffect(e,[i.current])}const $Y=Ou.forwardRef((e,t)=>{const{spec:n,options:i,onEmbed:r,onError:a,...s}=e,l=Ou.useRef(null);return Ou.useImperativeHandle(t,()=>{if(!l.current)throw new Error("VegaEmbed: ref is not attached to a div element");return l.current},[]),EAe({ref:l,spec:n,onEmbed:r,onError:a,options:i}),re.jsx("div",{ref:l,...s})});$Y.displayName="VegaEmbed";function wAe({eventDetails:e,isLoading:t}){const[n,i]=ht.useState(null),[r,a]=ht.useState(null),[s,l]=ht.useState(!1),[c,f]=ht.useState(null),[d,g]=ht.useState(null),[p,y]=ht.useState(!1),[v,b]=ht.useState(null),[S,_]=ht.useState(!1),[w,A]=ht.useState({}),[$,M]=ht.useState({}),[k,T]=ht.useState(new Set),[D,R]=ht.useState(null),[B,U]=ht.useState(!1),Q=I=>typeof I=="object"&&I!==null&&I.version||I,Y=I=>{if(!I||!Array.isArray(I)||I.length===0)return null;const J=I.map(Ae=>{const ze=Q(Ae),ce=typeof ze=="string"?parseFloat(ze):ze;return isNaN(ce)?0:ce}),ve=Math.max(...J);return I.find(Ae=>{const ze=Q(Ae),ce=typeof ze=="string"?parseFloat(ze):ze;return!isNaN(ce)&&ce===ve})||I[I.length-1]};ht.useEffect(()=>{if(!e||t){i(null),a(null),f(null),g(null),b(null),A({}),M({}),T(new Set),R(null);return}if(e.versions&&Array.isArray(e.versions)&&e.versions.length>0){const I=Y(e.versions);if(I&&e.name){const J=e.name,ve=String(Q(I)),Ae=`${J}-v${ve}`;i(ve),l(!0),a(null),X5(Ae).then(ze=>{e&&e.name===J&&(a(ze),ze.parameters_url?f("parameters"):ze.strain_files_url?f("strain-files"):ze.timelines_url&&f("timelines")),l(!1)}).catch(ze=>{console.error("Failed to load version details:",ze),a(null),l(!1)})}}else i(null),a(null),f(null),g(null),b(null),A({}),M({}),T(new Set),R(null)},[e,t]),ht.useEffect(()=>{c==="parameters"&&r?.parameters_url&&!D&&!B&&(U(!0),Q5(r.parameters_url).then(I=>{R(I),U(!1)}).catch(I=>{console.error("Failed to load parameters:",I),R([]),U(!1)}))},[c,r,D,B]),ht.useEffect(()=>{c==="strain-files"&&r?.strain_files_url&&!d&&!p&&(y(!0),V5(r.strain_files_url).then(I=>{g(I),y(!1)}).catch(I=>{console.error("Failed to load strain files:",I),g([]),y(!1)}))},[c,r,d,p]),ht.useEffect(()=>{c==="timelines"&&r?.timelines_url&&!v&&!S&&(_(!0),W5(r.timelines_url).then(I=>{b(I),_(!1)}).catch(I=>{console.error("Failed to load timelines:",I),b([]),_(!1)}))},[c,r,v,S]);const P=I=>{const J=new Set(k);if(J.has(I))J.delete(I);else{J.add(I);const Ae=v?.[I];Ae?.segments_url&&!w[I]&&!$[I]&&(M(ze=>({...ze,[I]:!0})),dW(Ae.segments_url).then(ze=>{A(ce=>({...ce,[I]:ze})),M(ce=>({...ce,[I]:!1}))}).catch(ze=>{console.error(`Failed to load segments for timeline ${I}:`,ze),A(ce=>({...ce,[I]:[]})),M(ce=>({...ce,[I]:!1}))}))}T(J)},z=I=>{if(!I||I.length===0)return null;const J=I.map(ce=>ce.start),ve=I.map(ce=>ce.stop),Ae=Math.min(...J),ze=Math.max(...ve);return{$schema:"https://vega.github.io/schema/vega-lite/v5.json",width:400,height:30,data:{values:I},mark:{type:"rect",tooltip:!0},encoding:{x:{field:"start",type:"quantitative",scale:{domain:[Ae,ze]},title:null,axis:{grid:!1}},x2:{field:"stop"},y:{value:0,type:"quantitative",scale:{domain:[0,1]},title:null,axis:null},y2:{value:1},color:{value:"#2563eb"},opacity:{value:.7}},config:{view:{stroke:"transparent",fill:"transparent"},background:"transparent"}}};if(!e)return re.jsx("div",{className:"detail-panel",children:re.jsx("div",{className:"detail-panel-placeholder",children:re.jsx("p",{children:"Select an event to view details"})})});if(t)return re.jsx("div",{className:"detail-panel",children:re.jsx("div",{className:"detail-panel-placeholder",children:re.jsx("p",{children:"Loading details..."})})});const N=I=>I==null?"N/A":typeof I=="object"?JSON.stringify(I,null,2):String(I),j=(I,J)=>{if(J==null)return"N/A";if(I==="aliases"){if(Array.isArray(J))return J.join(", ");if(typeof J=="string")try{const Ae=JSON.parse(J);if(Array.isArray(Ae))return Ae.join(", ")}catch{}}if(typeof J=="object")return JSON.stringify(J,null,2);const ve=String(J);return(I==="gcn_notice"||I==="gcn_circular")&&ve?re.jsx("a",{href:ve,target:"_blank",rel:"noopener noreferrer",className:"metadata-link",children:ve}):I==="grace_id"&&ve?re.jsx("a",{href:`https://gracedb.ligo.org/superevents/${ve}`,target:"_blank",rel:"noopener noreferrer",className:"metadata-link",children:ve}):ve},X=I=>!I||typeof I!="object"?null:re.jsxs("div",{className:"parameters-section",children:[re.jsx("h3",{children:"Parameters"}),re.jsx("dl",{className:"parameters-list",children:Object.entries(I).map(([J,ve])=>re.jsxs("div",{className:"parameter-item",children:[re.jsx("dt",{children:J}),re.jsx("dd",{children:N(ve)})]},J))})]}),K=async I=>{if(!e||!e.name)return;const J=String(Q(I));if(n===J&&r)return;const ve=`${e.name}-v${J}`;i(J),l(!0),a(null);try{const Ae=await X5(ve);a(Ae),f(null),g(null),b(null),A({}),M({}),T(new Set),R(null),Ae.parameters_url?f("parameters"):Ae.strain_files_url?f("strain-files"):Ae.timelines_url&&f("timelines")}catch(Ae){console.error("Failed to load version details:",Ae),a(null)}finally{l(!1)}},fe=async I=>{if(f(I),I==="parameters"&&r?.parameters_url&&!D){U(!0);try{const J=await Q5(r.parameters_url);R(J)}catch(J){console.error("Failed to load parameters:",J),R([])}finally{U(!1)}}if(I==="strain-files"&&r?.strain_files_url&&!d){y(!0);try{const J=await V5(r.strain_files_url);g(J)}catch(J){console.error("Failed to load strain files:",J),g([])}finally{y(!1)}}if(I==="timelines"&&r?.timelines_url&&!v){_(!0);try{const J=await W5(r.timelines_url);b(J)}catch(J){console.error("Failed to load timelines:",J),b([])}finally{_(!1)}}},F=I=>!I||!Array.isArray(I)?null:re.jsxs("div",{className:"versions-section",children:[re.jsx("h3",{children:"Versions"}),re.jsx("div",{className:"versions-list",children:I.map((J,ve)=>{const Ae=String(Q(J)),ze=n===Ae;return re.jsx("button",{className:`version-button ${ze?"active":""}`,onClick:()=>K(J),disabled:s,children:Ae},ve)})})]}),G=()=>!r||!c?null:c==="parameters"?B?re.jsx("div",{className:"version-tab-content",children:re.jsx("div",{className:"version-loading",children:"Loading parameters..."})}):!D||D.length===0?re.jsx("div",{className:"version-tab-content",children:re.jsx("p",{className:"version-tab-empty",children:"No parameters available"})}):re.jsx("div",{className:"version-tab-content",children:re.jsx("div",{className:"parameters-grid",children:D.map((I,J)=>re.jsxs("div",{className:"parameter-set-card",children:[re.jsxs("div",{className:"parameter-set-card-header",children:[re.jsx("h4",{className:"parameter-set-name",children:I.name||"Unnamed Parameter Set"}),I.pipeline&&re.jsx("span",{className:"parameter-set-pipeline",children:I.pipeline})]}),re.jsx("div",{className:"parameter-set-card-body",children:I.parameters&&I.parameters.length>0?re.jsxs("table",{className:"parameters-table",children:[re.jsx("thead",{children:re.jsxs("tr",{children:[re.jsx("th",{children:"Name"}),re.jsx("th",{children:"Best"})]})}),re.jsx("tbody",{children:I.parameters.map((ve,Ae)=>re.jsxs("tr",{children:[re.jsx("td",{className:"parameter-name",children:ve.name||"N/A"}),re.jsx("td",{className:"parameter-best",children:ve.best!==null&&ve.best!==void 0?typeof ve.best=="number"?Math.abs(ve.best)<.001||Math.abs(ve.best)>1e6?ve.best.toExponential(2):ve.best.toString():String(ve.best):"N/A"})]},Ae))})]}):re.jsx("p",{className:"parameter-set-empty",children:"No parameters in this set"})})]},J))})}):c==="strain-files"?p?re.jsx("div",{className:"version-tab-content",children:re.jsx("div",{className:"version-loading",children:"Loading strain files..."})}):!d||d.length===0?re.jsx("div",{className:"version-tab-content",children:re.jsx("p",{className:"version-tab-empty",children:"No strain files available"})}):re.jsx("div",{className:"version-tab-content",children:re.jsx("div",{className:"strain-files-grid",children:d.map((I,J)=>re.jsxs("div",{className:"strain-file-card",children:[re.jsx("h4",{className:"strain-file-card-title",children:I.detector||"Unknown Detector"}),re.jsxs("div",{className:"strain-file-card-body",children:[I.gps_start&&re.jsxs("div",{className:"strain-file-field",children:[re.jsx("span",{className:"strain-file-label",children:"GPS Start:"}),re.jsx("span",{className:"strain-file-value",children:I.gps_start})]}),I.sample_rate_kHz!==void 0&&re.jsxs("div",{className:"strain-file-field",children:[re.jsx("span",{className:"strain-file-label",children:"Sample Rate:"}),re.jsxs("span",{className:"strain-file-value",children:[I.sample_rate_kHz," kHz"]})]}),I.duration!==void 0&&re.jsxs("div",{className:"strain-file-field",children:[re.jsx("span",{className:"strain-file-label",children:"Duration:"}),re.jsxs("span",{className:"strain-file-value",children:[I.duration," s"]})]}),I.file_format&&re.jsxs("div",{className:"strain-file-field",children:[re.jsx("span",{className:"strain-file-label",children:"Format:"}),re.jsx("span",{className:"strain-file-value",children:I.file_format})]}),I.download_url&&re.jsx("div",{className:"strain-file-field",children:re.jsx("a",{href:I.download_url,target:"_blank",rel:"noopener noreferrer",className:"strain-file-download",children:"Download"})})]})]},J))})}):c==="timelines"?S?re.jsx("div",{className:"version-tab-content",children:re.jsx("div",{className:"version-loading",children:"Loading timelines..."})}):!v||v.length===0?re.jsx("div",{className:"version-tab-content",children:re.jsx("p",{className:"version-tab-empty",children:"No timelines available"})}):re.jsx("div",{className:"version-tab-content",children:re.jsx("div",{className:"timelines-list",children:v.map((I,J)=>{const ve=w[J],Ae=$[J],ze=k.has(J),ce=ve?z(ve):null,Le=!!I.segments_url;return re.jsxs("div",{className:`timeline-item ${ze?"expanded":""}`,children:[re.jsxs("div",{className:`timeline-header ${Le?"clickable":""}`,onClick:Le?()=>P(J):void 0,children:[Le&&re.jsx("span",{className:"timeline-chevron",children:ze?"":""}),re.jsx("span",{className:"timeline-name",children:I.name||"Unnamed Timeline"}),I.description&&re.jsx("span",{className:"timeline-tooltip",title:I.description,onClick:je=>je.stopPropagation(),children:""})]}),ze&&I.segments_url&&re.jsxs("div",{className:"timeline-plot-container",children:[Ae&&re.jsx("div",{className:"timeline-plot-loading",children:"Loading segments..."}),!Ae&&ce&&re.jsx($Y,{spec:ce}),!Ae&&ve&&ve.length===0&&re.jsx("div",{className:"timeline-plot-empty",children:"No segments available"})]})]},J)})})}):null,le=()=>{if(!r)return null;const I=[];return r.parameters_url&&I.push("parameters"),r.strain_files_url&&I.push("strain-files"),r.timelines_url&&I.push("timelines"),I.length===0?null:re.jsxs("div",{className:"version-details-section",children:[re.jsxs("h3",{children:["Version ",n," Details"]}),re.jsxs("div",{className:"version-tabs-container",children:[re.jsx("nav",{className:"version-tabs-nav",children:I.map(J=>re.jsxs("button",{className:`version-tab-button ${c===J?"active":""}`,onClick:()=>fe(J),children:[J==="parameters"&&"Parameters",J==="strain-files"&&"Strain Files",J==="timelines"&&"Timelines"]},J))}),re.jsx("div",{className:"version-tabs-content-wrapper",children:G()})]})]})};return re.jsxs("div",{className:"detail-panel",children:[re.jsx("h2",{children:"Event Details"}),re.jsxs("div",{className:"detail-panel-content",children:[re.jsx("div",{className:"event-header",children:re.jsx("h3",{children:e.name})}),e.versions&&F(e.versions),s&&!r&&re.jsx("div",{className:"version-details-section",children:re.jsx("div",{className:"version-loading",children:"Loading version details..."})}),e.parameters&&X(e.parameters),re.jsxs("div",{className:"metadata-section",children:[re.jsx("h3",{children:"Metadata"}),re.jsx("dl",{className:"metadata-list",children:Object.entries(e).filter(([I])=>!["versions","parameters"].includes(I)).map(([I,J])=>re.jsxs("div",{className:"metadata-item",children:[re.jsx("dt",{children:I}),re.jsx("dd",{children:j(I,J)})]},I))})]}),r&&le()]})]})}function AAe(){const[e,t]=ht.useState([]),[n,i]=ht.useState(null),[r,a]=ht.useState([]),[s,l]=ht.useState(null),[c,f]=ht.useState(null),[d,g]=ht.useState(!1),[p,y]=ht.useState(!1),[v,b]=ht.useState(!1),[S,_]=ht.useState(null);ht.useEffect(()=>{(async()=>{g(!0),_(null);try{const k=(await uW()).map(T=>typeof T=="string"?T:T.name||T.id||T.run_name||JSON.stringify(T));t(k)}catch(M){_(M.message),console.error("Failed to load runs:",M)}finally{g(!1)}})()},[]),ht.useEffect(()=>{if(!n){a([]),l(null),f(null);return}(async()=>{y(!0),_(null),l(null),f(null);try{const M=await cW(n);a(M)}catch(M){_(M.message),console.error("Failed to load events:",M),a([])}finally{y(!1)}})()},[n]),ht.useEffect(()=>{if(!s){f(null);return}(async()=>{b(!0),_(null);try{const M=s.graceid||s.name||s.id;if(!M)throw new Error("Event ID not found");const k=await fW(M);f(k)}catch(M){_(M.message),console.error("Failed to load event details:",M),f(null)}finally{b(!1)}})()},[s]);const w=$=>{i($||null)},A=$=>{l($)};return re.jsxs("div",{className:"app-container",children:[re.jsxs("div",{className:"sidebar",children:[re.jsx(oW,{runs:e,selectedRun:n,onRunChange:w,isLoading:d}),re.jsx(lW,{events:r,selectedRun:n,onEventSelect:A,isLoading:p})]}),re.jsx(wAe,{eventDetails:c,isLoading:v}),S&&re.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",padding:"12px 20px",backgroundColor:"#fee2e2",color:"#991b1b",border:"1px solid #fca5a5",borderRadius:"6px",fontSize:"0.875rem"},children:["Error: ",S]})]})}sW.createRoot(document.getElementById("root")).render(re.jsx(ht.StrictMode,{children:re.jsx(AAe,{})}));
